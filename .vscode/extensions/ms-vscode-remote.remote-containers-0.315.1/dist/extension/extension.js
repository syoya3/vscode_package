/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var Wle=Object.create;var sb=Object.defineProperty;var Gle=Object.getOwnPropertyDescriptor;var zle=Object.getOwnPropertyNames;var Yle=Object.getPrototypeOf,Kle=Object.prototype.hasOwnProperty;var D=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xs=(e,t)=>{for(var n in t)sb(e,n,{get:t[n],enumerable:!0})},H$=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zle(t))!Kle.call(e,i)&&i!==n&&sb(e,i,{get:()=>t[i],enumerable:!(r=Gle(t,i))||r.enumerable});return e};var B=(e,t,n)=>(n=e!=null?Wle(Yle(e)):{},H$(t||!e||!e.__esModule?sb(n,"default",{value:e,enumerable:!0}):n,e)),qi=e=>H$(sb({},"__esModule",{value:!0}),e);var Er=_((nHe,z$)=>{"use strict";var Xle=Object.create,ab=Object.defineProperty,Qle=Object.getOwnPropertyDescriptor,V$=Object.getOwnPropertyNames,Jle=Object.getPrototypeOf,Zle=Object.prototype.hasOwnProperty,ede=(e,t)=>function(){return t||(0,e[V$(e)[0]])((t={exports:{}}).exports,t),t.exports},tde=(e,t)=>{for(var n in t)ab(e,n,{get:t[n],enumerable:!0})},W$=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of V$(t))!Zle.call(e,i)&&i!==n&&ab(e,i,{get:()=>t[i],enumerable:!(r=Qle(t,i))||r.enumerable});return e},nde=(e,t,n)=>(n=e!=null?Xle(Jle(e)):{},W$(t||!e||!e.__esModule?ab(n,"default",{value:e,enumerable:!0}):n,e)),rde=e=>W$(ab({},"__esModule",{value:!0}),e),ide=ede({"node_modules/request-light/lib/node/main.js"(e){(()=>{var t={46:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,c,{signal:l}={}){return new Promise((d,p)=>{function f(){l==null||l.removeEventListener("abort",f),u.removeListener(c,m),u.removeListener("error",h)}function m(...v){f(),d(v)}function h(v){f(),p(v)}l==null||l.addEventListener("abort",f),u.on(c,m),u.on("error",h)})}},54:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};let l=u(361),d=c(u(374)),p=c(u(304)),f=d.default("agent-base");function m(){let{stack:v}=new Error;return typeof v=="string"&&v.split(`
`).some(g=>g.indexOf("(https.js:")!==-1||g.indexOf("node:https:")!==-1)}function h(v,g){return new h.Agent(v,g)}(function(v){class g extends l.EventEmitter{constructor(x,w){super();let b=w;typeof x=="function"?this.callback=x:x&&(b=x),this.timeout=null,b&&typeof b.timeout=="number"&&(this.timeout=b.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:m()?443:80}set defaultPort(x){this.explicitDefaultPort=x}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:m()?"https:":"http:"}set protocol(x){this.explicitProtocol=x}callback(x,w,b){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(x,w){let b=Object.assign({},w);typeof b.secureEndpoint!="boolean"&&(b.secureEndpoint=m()),b.host==null&&(b.host="localhost"),b.port==null&&(b.port=b.secureEndpoint?443:80),b.protocol==null&&(b.protocol=b.secureEndpoint?"https:":"http:"),b.host&&b.path&&delete b.path,delete b.agent,delete b.hostname,delete b._defaultAgent,delete b.defaultPort,delete b.createConnection,x._last=!0,x.shouldKeepAlive=!1;let S=!1,R=null,P=b.timeout||this.timeout,E=A=>{x._hadError||(x.emit("error",A),x._hadError=!0)},C=()=>{R=null,S=!0;let A=new Error(`A "socket" was not created for HTTP request before ${P}ms`);A.code="ETIMEOUT",E(A)},T=A=>{S||(R!==null&&(clearTimeout(R),R=null),E(A))},I=A=>{if(S)return;if(R!=null&&(clearTimeout(R),R=null),N=A,!!N&&typeof N.addRequest=="function")return f("Callback returned another Agent instance %o",A.constructor.name),void A.addRequest(x,b);var N;if(A)return A.once("free",()=>{this.freeSocket(A,b)}),void x.onSocket(A);let F=new Error(`no Duplex stream was returned to agent-base for \`${x.method} ${x.path}\``);E(F)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(f("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof P=="number"&&P>0&&(R=setTimeout(C,P)),"port"in b&&typeof b.port!="number"&&(b.port=Number(b.port));try{f("Resolving socket for %o request: %o",b.protocol,`${x.method} ${x.path}`),Promise.resolve(this.promisifiedCallback(x,b)).then(I,T)}catch(A){Promise.reject(A).catch(T)}}else E(new Error("`callback` is not defined"))}freeSocket(x,w){f("Freeing socket %o %o",x.constructor.name,w),x.destroy()}destroy(){f("Destroying agent %o",this.constructor.name)}}v.Agent=g,v.prototype=v.Agent.prototype})(h||(h={})),s.exports=h},304:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){return function(c,l){return new Promise((d,p)=>{u.call(this,c,l,(f,m)=>{f?p(f):d(m)})})}}},370:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(x,w,b,S){return new(b||(b=Promise))(function(R,P){function E(I){try{T(S.next(I))}catch(A){P(A)}}function C(I){try{T(S.throw(I))}catch(A){P(A)}}function T(I){var A;I.done?R(I.value):(A=I.value,A instanceof b?A:new b(function(N){N(A)})).then(E,C)}T((S=S.apply(x,w||[])).next())})},l=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(a,"__esModule",{value:!0});let d=l(u(808)),p=l(u(404)),f=l(u(310)),m=l(u(374)),h=l(u(46)),v=u(54),g=(0,m.default)("http-proxy-agent");class y extends v.Agent{constructor(w){let b;if(b=typeof w=="string"?f.default.parse(w):w,!b)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");g("Creating new HttpProxyAgent instance: %o",b),super(b);let S=Object.assign({},b);var R;this.secureProxy=b.secureProxy||typeof(R=S.protocol)=="string"&&/^https:?$/i.test(R),S.host=S.hostname||S.host,typeof S.port=="string"&&(S.port=parseInt(S.port,10)),!S.port&&S.host&&(S.port=this.secureProxy?443:80),S.host&&S.path&&(delete S.path,delete S.pathname),this.proxy=S}callback(w,b){return c(this,void 0,void 0,function*(){let{proxy:S,secureProxy:R}=this,P=f.default.parse(w.path),E;if(P.protocol||(P.protocol="http:"),P.hostname||(P.hostname=b.hostname||b.host||null),P.port==null&&(b.port,1)&&(P.port=String(b.port)),P.port==="80"&&(P.port=""),w.path=f.default.format(P),S.auth&&w.setHeader("Proxy-Authorization",`Basic ${Buffer.from(S.auth).toString("base64")}`),R?(g("Creating `tls.Socket`: %o",S),E=p.default.connect(S)):(g("Creating `net.Socket`: %o",S),E=d.default.connect(S)),w._header){let C,T;g("Regenerating stored HTTP header string for request"),w._header=null,w._implicitHeader(),w.output&&w.output.length>0?(g("Patching connection write() output buffer with updated header"),C=w.output[0],T=C.indexOf(`\r
\r
`)+4,w.output[0]=w._header+C.substring(T),g("Output buffer: %o",w.output)):w.outputData&&w.outputData.length>0&&(g("Patching connection write() output buffer with updated header"),C=w.outputData[0].data,T=C.indexOf(`\r
\r
`)+4,w.outputData[0].data=w._header+C.substring(T),g("Output buffer: %o",w.outputData[0].data))}return yield(0,h.default)(E,"connect"),E})}}a.default=y},201:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}})(u(370));function l(d){return new c.default(d)}(function(d){d.HttpProxyAgent=c.default,d.prototype=c.default.prototype})(l||(l={})),s.exports=l},146:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(b,S,R,P){return new(R||(R=Promise))(function(E,C){function T(N){try{A(P.next(N))}catch(F){C(F)}}function I(N){try{A(P.throw(N))}catch(F){C(F)}}function A(N){var F;N.done?E(N.value):(F=N.value,F instanceof R?F:new R(function(L){L(F)})).then(T,I)}A((P=P.apply(b,S||[])).next())})},l=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(a,"__esModule",{value:!0});let d=l(u(808)),p=l(u(404)),f=l(u(310)),m=l(u(491)),h=l(u(374)),v=u(54),g=l(u(829)),y=h.default("https-proxy-agent:agent");class x extends v.Agent{constructor(S){let R;if(R=typeof S=="string"?f.default.parse(S):S,!R)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");y("creating new HttpsProxyAgent instance: %o",R),super(R);let P=Object.assign({},R);var E;this.secureProxy=R.secureProxy||typeof(E=P.protocol)=="string"&&/^https:?$/i.test(E),P.host=P.hostname||P.host,typeof P.port=="string"&&(P.port=parseInt(P.port,10)),!P.port&&P.host&&(P.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in P)&&(P.ALPNProtocols=["http 1.1"]),P.host&&P.path&&(delete P.path,delete P.pathname),this.proxy=P}callback(S,R){return c(this,void 0,void 0,function*(){let{proxy:P,secureProxy:E}=this,C;E?(y("Creating `tls.Socket`: %o",P),C=p.default.connect(P)):(y("Creating `net.Socket`: %o",P),C=d.default.connect(P));let T=Object.assign({},P.headers),I=`CONNECT ${R.host}:${R.port} HTTP/1.1\r
`;P.auth&&(T["Proxy-Authorization"]=`Basic ${Buffer.from(P.auth).toString("base64")}`);let{host:A,port:N,secureEndpoint:F}=R;(function(k,H){return!!(!H&&k===80||H&&k===443)})(N,F)||(A+=`:${N}`),T.Host=A,T.Connection="close";for(let k of Object.keys(T))I+=`${k}: ${T[k]}\r
`;let L=g.default(C);C.write(`${I}\r
`);let{statusCode:M,buffered:j}=yield L;if(M===200){if(S.once("socket",w),R.secureEndpoint){y("Upgrading socket connection to TLS");let k=R.servername||R.host;return p.default.connect(Object.assign(Object.assign({},function(H,...$){let V={},ie;for(ie in H)$.includes(ie)||(V[ie]=H[ie]);return V}(R,"host","hostname","path","port")),{socket:C,servername:k}))}return C}C.destroy();let W=new d.default.Socket({writable:!1});return W.readable=!0,S.once("socket",k=>{y("replaying proxy buffer for failed request"),m.default(k.listenerCount("data")>0),k.push(j),k.push(null)}),W})}}function w(b){b.resume()}a.default=x},18:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}})(u(146));function l(d){return new c.default(d)}(function(d){d.HttpsProxyAgent=c.default,d.prototype=c.default.prototype})(l||(l={})),s.exports=l},829:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(a,"__esModule",{value:!0});let l=c(u(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(d){return new Promise((p,f)=>{let m=0,h=[];function v(){let x=d.read();x?function(w){h.push(w),m+=w.length;let b=Buffer.concat(h,m);if(b.indexOf(`\r
\r
`)===-1)return l("have not received end of HTTP headers yet..."),void v();let S=b.toString("ascii",0,b.indexOf(`\r
`)),R=+S.split(" ")[1];l("got proxy server response: %o",S),p({statusCode:R,buffered:b})}(x):d.once("readable",v)}function g(x){l("onclose had error %o",x)}function y(){l("onend")}d.on("error",function x(w){d.removeListener("end",y),d.removeListener("error",x),d.removeListener("close",g),d.removeListener("readable",v),l("onerror %o",w),f(w)}),d.on("close",g),d.on("end",y),v()})}},539:function(s,a,u){"use strict";var c,l=this&&this.__extends||(c=function(E,C){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,I){T.__proto__=I}||function(T,I){for(var A in I)Object.prototype.hasOwnProperty.call(I,A)&&(T[A]=I[A])},c(E,C)},function(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function T(){this.constructor=E}c(E,C),E.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)}),d=this&&this.__assign||function(){return d=Object.assign||function(E){for(var C,T=1,I=arguments.length;T<I;T++)for(var A in C=arguments[T])Object.prototype.hasOwnProperty.call(C,A)&&(E[A]=C[A]);return E},d.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var p=u(685),f=u(687),m=u(310),h=u(472),v=u(796),g=u(201),y=u(18);if(process.env.VSCODE_NLS_CONFIG){var x=process.env.VSCODE_NLS_CONFIG;h.config(JSON.parse(x))}var w=h.loadMessageBundle(),b=void 0,S=!0;function R(E){var C;return new Promise(function(T,I){var A=(0,m.parse)(E.url),N={hostname:A.hostname,agent:!!E.agent&&E.agent,port:A.port?parseInt(A.port):A.protocol==="https:"?443:80,path:A.path,method:E.type||"GET",headers:E.headers,rejectUnauthorized:typeof E.strictSSL!="boolean"||E.strictSSL};E.user&&E.password&&(N.auth=E.user+":"+E.password);var F=function(L){if(L.statusCode>=300&&L.statusCode<400&&E.followRedirects&&E.followRedirects>0&&L.headers.location){var M=L.headers.location;M.startsWith("/")&&(M=(0,m.format)({protocol:A.protocol,hostname:A.hostname,port:A.port,pathname:M})),T(R(function(j){for(var W=[],k=1;k<arguments.length;k++)W[k-1]=arguments[k];return W.forEach(function(H){return Object.keys(H).forEach(function($){return j[$]=H[$]})}),j}({},E,{url:M,followRedirects:E.followRedirects-1})))}else T({req:C,res:L})};(C=A.protocol==="https:"?f.request(N,F):p.request(N,F)).on("error",I),E.timeout&&C.setTimeout(E.timeout),E.data&&C.write(E.data),C.end(),E.token&&(E.token.isCancellationRequested&&C.destroy(new P),E.token.onCancellationRequested(function(){C.destroy(new P)}))})}a.configure=function(E,C){b=E,S=C},a.xhr=function(E){return typeof(E=d({},E)).strictSSL!="boolean"&&(E.strictSSL=S),E.agent||(E.agent=function(C,T){T===void 0&&(T={});var I=(0,m.parse)(C),A=T.proxyUrl||function(L){return L.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:L.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(I);if(!A)return null;var N=(0,m.parse)(A);if(!/^https?:$/.test(N.protocol))return null;var F={host:N.hostname,port:Number(N.port),auth:N.auth,rejectUnauthorized:typeof T.strictSSL!="boolean"||T.strictSSL,protocol:N.protocol};return I.protocol==="http:"?g(F):y(F)}(E.url,{proxyUrl:b,strictSSL:S})),typeof E.followRedirects!="number"&&(E.followRedirects=5),R(E).then(function(C){return new Promise(function(T,I){var A,N,F=C.res,L=F,M=!1,j=F.headers&&F.headers["content-encoding"];if(j&&(A=E.type,N=C.res.statusCode,!(A==="HEAD"||N>=100&&N<200||N===204||N===304))){var W={flush:v.constants.Z_SYNC_FLUSH,finishFlush:v.constants.Z_SYNC_FLUSH};if(j==="gzip"){var k=v.createGunzip(W);F.pipe(k),L=k}else if(j==="deflate"){var H=v.createInflate(W);F.pipe(H),L=H}}var $=[];L.on("data",function(V){return $.push(V)}),L.on("end",function(){if(!M){if(M=!0,E.followRedirects>0&&(F.statusCode>=300&&F.statusCode<=303||F.statusCode===307)){var V=F.headers.location;if(V.startsWith("/")){var ie=(0,m.parse)(E.url);V=(0,m.format)({protocol:ie.protocol,hostname:ie.hostname,port:ie.port,pathname:V})}if(V){var be={type:E.type,url:V,user:E.user,password:E.password,headers:E.headers,timeout:E.timeout,followRedirects:E.followRedirects-1,data:E.data,token:E.token};return void(0,a.xhr)(be).then(T,I)}}var Re=Buffer.concat($),Le={responseText:Re.toString(),body:Re,status:F.statusCode,headers:F.headers||{}};F.statusCode>=200&&F.statusCode<300||F.statusCode===1223?T(Le):I(Le)}}),L.on("error",function(V){var ie;ie=P.is(V)?V:{responseText:w("error","Unable to access {0}. Error: {1}",E.url,V.message),body:Buffer.concat($),status:500,headers:{}},M=!0,I(ie)}),E.token&&(E.token.isCancellationRequested&&L.destroy(new P),E.token.onCancellationRequested(function(){L.destroy(new P)}))})},function(C){var T;return T=P.is(C)?C:{responseText:E.agent?w("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",E.url,C.message):w("error.cannot.connect","Unable to connect to {0}. Error: {1}",E.url,C.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(T)})},a.getErrorStatusDescription=function(E){if(!(E<400))switch(E){case 400:return w("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return w("status.401","Unauthorized. The server is refusing to respond.");case 403:return w("status.403","Forbidden. The server is refusing to respond.");case 404:return w("status.404","Not Found. The requested location could not be found.");case 405:return w("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return w("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return w("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return w("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return w("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return w("status.410","Gone. The requested page is no longer available.");case 411:return w("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return w("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return w("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return w("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return w("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return w("status.500","Internal Server Error.");case 501:return w("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return w("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return w("status.416","HTTP status code {0}",E)}};var P=function(E){function C(){var T=E.call(this,"The user aborted a request")||this;return T.name="AbortError",Object.setPrototypeOf(T,C.prototype),T}return l(C,E),C.is=function(T){return T instanceof C},C}(Error)},800:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,l,d,p=u(926);function f(h){return h!==void 0}function m(h,v){return a.isPseudo&&(h="\uFF3B"+h.replace(/[aouei]/g,"$&$&")+"\uFF3D"),v.length===0?h:h.replace(/\{(\d+)\}/g,function(g,y){var x=y[0],w=v[x],b=g;return typeof w=="string"?b=w:typeof w!="number"&&typeof w!="boolean"&&w!=null||(b=String(w)),b})}(d=a.MessageFormat||(a.MessageFormat={})).file="file",d.bundle="bundle",d.both="both",(l=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",l.languagePack="languagePack",function(h){h.is=function(v){var g=v;return g&&f(g.key)&&f(g.comment)}}(c||(c={})),a.isDefined=f,a.isPseudo=!1,a.setPseudo=function(h){a.isPseudo=h},a.format=m,a.localize=function(h,v){for(var g=[],y=2;y<arguments.length;y++)g[y-2]=arguments[y];return m(v,g)},a.loadMessageBundle=function(h){return(0,p.default)().loadMessageBundle(h)},a.config=function(h){return(0,p.default)().config(h)}},926:(s,a)=>{"use strict";var u;function c(){if(u===void 0)throw new Error("No runtime abstraction layer installed");return u}Object.defineProperty(a,"__esModule",{value:!0}),function(l){l.install=function(d){if(d===void 0)throw new Error("No runtime abstraction layer provided");u=d}}(c||(c={})),a.default=c},472:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=u(17),l=u(147),d=u(926),p=u(800),f=u(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return f.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return f.BundleFormat}});var m,h,v=Object.prototype.toString;function g(C){return v.call(C)==="[object Number]"}function y(C){return v.call(C)==="[object String]"}function x(C){return JSON.parse(l.readFileSync(C,"utf8"))}function w(C){return function(T,I){for(var A=[],N=2;N<arguments.length;N++)A[N-2]=arguments[N];return g(T)?T>=C.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,p.format)(C[T],A):y(I)?(console.warn("Message ".concat(I," didn't get externalized correctly.")),(0,p.format)(I,A)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function b(C,T){return m[C]=T,T}function S(C){try{return function(T){var I=x(c.join(T,"nls.metadata.json")),A=Object.create(null);for(var N in I){var F=I[N];A[N]=F.messages}return A}(C)}catch(T){return void console.log("Generating default bundle from meta data failed.",T)}}function R(C,T){var I;if(h.languagePackSupport===!0&&h.cacheRoot!==void 0&&h.languagePackId!==void 0&&h.translationsConfigFile!==void 0&&h.translationsConfig!==void 0)try{I=function(N,F){var L,M,j,W=c.join(h.cacheRoot,"".concat(N.id,"-").concat(N.hash,".json")),k=!1,H=!1;try{return L=JSON.parse(l.readFileSync(W,{encoding:"utf8",flag:"r"})),M=W,j=new Date,l.utimes(M,j,j,function(){}),L}catch($){if($.code==="ENOENT")H=!0;else{if(!($ instanceof SyntaxError))throw $;console.log("Syntax error parsing message bundle: ".concat($.message,".")),l.unlink(W,function(V){V&&console.error("Deleting corrupted bundle ".concat(W," failed."))}),k=!0}}if(L=function($,V){var ie=h.translationsConfig[$.id];if(ie){var be=x(ie).contents,Re=x(c.join(V,"nls.metadata.json")),Le=Object.create(null);for(var Pt in Re){var Fe=Re[Pt],Je=be["".concat($.outDir,"/").concat(Pt)];if(Je){for(var nr=[],is=0;is<Fe.keys.length;is++){var mu=Fe.keys[is],Ba=Je[y(mu)?mu:mu.key];Ba===void 0&&(Ba=Fe.messages[is]),nr.push(Ba)}Le[Pt]=nr}else Le[Pt]=Fe.messages}return Le}}(N,F),!L||k)return L;if(H)try{l.writeFileSync(W,JSON.stringify(L),{encoding:"utf8",flag:"wx"})}catch($){if($.code==="EEXIST")return L;throw $}return L}(C,T)}catch(N){console.log("Load or create bundle failed ",N)}if(!I){if(h.languagePackSupport)return S(T);var A=function(N){for(var F=h.language;F;){var L=c.join(N,"nls.bundle.".concat(F,".json"));if(l.existsSync(L))return L;var M=F.lastIndexOf("-");F=M>0?F.substring(0,M):void 0}if(F===void 0&&(L=c.join(N,"nls.bundle.json"),l.existsSync(L)))return L}(T);if(A)try{return x(A)}catch(N){console.log("Loading in the box message bundle failed.",N)}I=S(T)}return I}function P(C){if(!C)return p.localize;var T=c.extname(C);if(T&&(C=C.substr(0,C.length-T.length)),h.messageFormat===p.MessageFormat.both||h.messageFormat===p.MessageFormat.bundle){var I=function(k){for(var H,$=c.dirname(k);H=c.join($,"nls.metadata.header.json"),!l.existsSync(H);){var V=c.dirname($);if(V===$){H=void 0;break}$=V}return H}(C);if(I){var A=c.dirname(I),N=m[A];if(N===void 0)try{var F=JSON.parse(l.readFileSync(I,"utf8"));try{var L=R(F,A);N=b(A,L?{header:F,nlsBundle:L}:null)}catch(k){console.error("Failed to load nls bundle",k),N=b(A,null)}}catch(k){console.error("Failed to read header file",k),N=b(A,null)}if(N){var M=C.substr(A.length+1).replace(/\\/g,"/"),j=N.nlsBundle[M];return j===void 0?(console.error("Messages for file ".concat(C," not found. See console for details.")),function(){return"Messages not found."}):w(j)}}}if(h.messageFormat===p.MessageFormat.both||h.messageFormat===p.MessageFormat.file)try{var W=x(function(k){var H;if(!(h.cacheLanguageResolution&&H)){if(p.isPseudo||!h.language)H=".nls.json";else for(var $=h.language;$;){var V=".nls."+$+".json";if(l.existsSync(k+V)){H=V;break}var ie=$.lastIndexOf("-");ie>0?$=$.substring(0,ie):(H=".nls.json",$=null)}h.cacheLanguageResolution}return k+H}(C));return Array.isArray(W)?w(W):(0,p.isDefined)(W.messages)&&(0,p.isDefined)(W.keys)?w(W.messages):(console.error("String bundle '".concat(C,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(k){k.code!=="ENOENT"&&console.error("Failed to load single file bundle",k)}return console.error("Failed to load message bundle for file ".concat(C)),function(){return"Failed to load message bundle. See console for details."}}function E(C){return C&&(y(C.locale)&&(h.locale=C.locale.toLowerCase(),h.language=h.locale,m=Object.create(null)),C.messageFormat!==void 0&&(h.messageFormat=C.messageFormat),C.bundleFormat===p.BundleFormat.standalone&&h.languagePackSupport===!0&&(h.languagePackSupport=!1)),(0,p.setPseudo)(h.locale==="pseudo"),P}(function(){if(h={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:p.MessageFormat.bundle},y(process.env.VSCODE_NLS_CONFIG))try{var C=JSON.parse(process.env.VSCODE_NLS_CONFIG),T=void 0;if(C.availableLanguages){var I=C.availableLanguages["*"];y(I)&&(T=I)}if(y(C.locale)&&(h.locale=C.locale.toLowerCase()),T===void 0?h.language=h.locale:T!=="en"&&(h.language=T),function(N){return N===!0||N===!1}(C._languagePackSupport)&&(h.languagePackSupport=C._languagePackSupport),y(C._cacheRoot)&&(h.cacheRoot=C._cacheRoot),y(C._languagePackId)&&(h.languagePackId=C._languagePackId),y(C._translationsConfigFile)){h.translationsConfigFile=C._translationsConfigFile;try{h.translationsConfig=x(h.translationsConfigFile)}catch{if(C._corruptedFile){var A=c.dirname(C._corruptedFile);l.exists(A,function(F){F&&l.writeFile(C._corruptedFile,"corrupted","utf8",function(L){console.error(L)})})}}}}catch{}(0,p.setPseudo)(h.locale==="pseudo"),m=Object.create(null)})(),a.loadMessageBundle=P,a.config=E,d.default.install(Object.freeze({loadMessageBundle:P,config:E}))},374:(s,a)=>{function u(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return u}},491:s=>{"use strict";s.exports=require("assert")},361:s=>{"use strict";s.exports=require("events")},147:s=>{"use strict";s.exports=require("fs")},685:s=>{"use strict";s.exports=require("http")},687:s=>{"use strict";s.exports=require("https")},808:s=>{"use strict";s.exports=require("net")},17:s=>{"use strict";s.exports=require("path")},404:s=>{"use strict";s.exports=require("tls")},310:s=>{"use strict";s.exports=require("url")},796:s=>{"use strict";s.exports=require("zlib")}},n={},r=function s(a){var u=n[a];if(u!==void 0)return u.exports;var c=n[a]={exports:{}};return t[a].call(c.exports,c,c.exports,s),c.exports}(539),i=e;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})()}}),G$={};tde(G$,{config:()=>ude,t:()=>lde});z$.exports=rde(G$);var ode=require("fs"),sde=require("fs/promises"),$$=nde(ide());async function ade(e){if(e.protocol==="file:")return await(0,sde.readFile)(e,"utf8");if(e.protocol==="http:"||e.protocol==="https:")try{let t=await(0,$$.xhr)({url:e.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(t.body)}catch(t){throw new Error(t.responseText??(0,$$.getErrorStatusDescription)(t.status)??t.toString())}throw new Error("Unsupported protocol")}function cde(e){return(0,ode.readFileSync)(e,"utf8")}var Df;function ude(e){if("contents"in e){typeof e.contents=="string"?Df=JSON.parse(e.contents):Df=e.contents;return}if("fsPath"in e){let t=cde(e.fsPath),n=JSON.parse(t);Df=B$(n)?n.contents.bundle:n;return}if(e.uri){let t=e.uri;return typeof e.uri=="string"&&(t=new URL(e.uri)),new Promise((n,r)=>{let i=ade(t).then(o=>{try{let s=JSON.parse(o);Df=B$(s)?s.contents.bundle:s}catch(s){r(s)}}).catch(o=>{r(o)});n(i)})}}function lde(...e){let t=e[0],n,r,i;if(typeof t=="string"?(n=t,r=t,e.splice(0,1),i=!e||typeof e[0]!="object"?e:e[0]):(r=t.message,n=r,t.comment&&t.comment.length>0&&(n+=`/${Array.isArray(t.comment)?t.comment.join(""):t.comment}`),i=t.args??{}),!Df)return kv(r,i);let o=Df[n];return o?typeof o=="string"?kv(o,i):o.comment?kv(o.message,i):kv(r,i):kv(r,i)}var dde=/{([^}]+)}/g;function kv(e,t){return e.replace(dde,(n,r)=>t[r]??n)}function B$(e){var t;return typeof((t=e==null?void 0:e.contents)==null?void 0:t.bundle)=="object"&&typeof(e==null?void 0:e.version)=="string"}});var y2=_((CHe,v2)=>{var Nf=1e3,Lf=Nf*60,Ff=Lf*60,dd=Ff*24,Pde=dd*7,Rde=dd*365.25;v2.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return Ade(e);if(n==="number"&&isFinite(e))return t.long?kde(e):Dde(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ade(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Rde;case"weeks":case"week":case"w":return n*Pde;case"days":case"day":case"d":return n*dd;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Ff;case"minutes":case"minute":case"mins":case"min":case"m":return n*Lf;case"seconds":case"second":case"secs":case"sec":case"s":return n*Nf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function Dde(e){var t=Math.abs(e);return t>=dd?Math.round(e/dd)+"d":t>=Ff?Math.round(e/Ff)+"h":t>=Lf?Math.round(e/Lf)+"m":t>=Nf?Math.round(e/Nf)+"s":e+"ms"}function kde(e){var t=Math.abs(e);return t>=dd?yb(e,t,dd,"day"):t>=Ff?yb(e,t,Ff,"hour"):t>=Lf?yb(e,t,Lf,"minute"):t>=Nf?yb(e,t,Nf,"second"):e+" ms"}function yb(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}});var oA=_((SHe,x2)=>{function Ode(e){n.debug=n,n.default=n,n.coerce=u,n.disable=o,n.enable=i,n.enabled=s,n.humanize=y2(),n.destroy=c,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let d=0;for(let p=0;p<l.length;p++)d=(d<<5)-d+l.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=t;function n(l){let d,p=null,f,m;function h(...v){if(!h.enabled)return;let g=h,y=Number(new Date),x=y-(d||y);g.diff=x,g.prev=d,g.curr=y,d=y,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let w=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(S,R)=>{if(S==="%%")return"%";w++;let P=n.formatters[R];if(typeof P=="function"){let E=v[w];S=P.call(g,E),v.splice(w,1),w--}return S}),n.formatArgs.call(g,v),(g.log||n.log).apply(g,v)}return h.namespace=l,h.useColors=n.useColors(),h.color=n.selectColor(l),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==n.namespaces&&(f=n.namespaces,m=n.enabled(l)),m),set:v=>{p=v}}),typeof n.init=="function"&&n.init(h),h}function r(l,d){let p=n(this.namespace+(typeof d>"u"?":":d)+l);return p.log=this.log,p}function i(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let d,p=(typeof l=="string"?l:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(l=p[d].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...n.names.map(a),...n.skips.map(a).map(d=>"-"+d)].join(",");return n.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(l))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}x2.exports=Ode});var w2=_(($i,xb)=>{$i.formatArgs=Lde;$i.save=Fde;$i.load=Mde;$i.useColors=Nde;$i.storage=Ude();$i.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();$i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Nde(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Lde(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+xb.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),e.splice(r,0,t)}$i.log=console.debug||console.log||(()=>{});function Fde(e){try{e?$i.storage.setItem("debug",e):$i.storage.removeItem("debug")}catch{}}function Mde(){let e;try{e=$i.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Ude(){try{return localStorage}catch{}}xb.exports=oA()($i);var{formatters:qde}=xb.exports;qde.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var b2=_((THe,E2)=>{"use strict";E2.exports=(e,t)=>{t=t||process.argv;let n=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return r!==-1&&(i===-1?!0:r<i)}});var C2=_((IHe,_2)=>{"use strict";var jde=require("os"),as=b2(),_r=process.env,Mf;as("no-color")||as("no-colors")||as("color=false")?Mf=!1:(as("color")||as("colors")||as("color=true")||as("color=always"))&&(Mf=!0);"FORCE_COLOR"in _r&&(Mf=_r.FORCE_COLOR.length===0||parseInt(_r.FORCE_COLOR,10)!==0);function Hde(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function $de(e){if(Mf===!1)return 0;if(as("color=16m")||as("color=full")||as("color=truecolor"))return 3;if(as("color=256"))return 2;if(e&&!e.isTTY&&Mf!==!0)return 0;let t=Mf?1:0;if(process.platform==="win32"){let n=jde.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in _r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in _r)||_r.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in _r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_r.TEAMCITY_VERSION)?1:0;if(_r.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in _r){let n=parseInt((_r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_r.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(_r.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_r.TERM)||"COLORTERM"in _r?1:(_r.TERM==="dumb",t)}function sA(e){let t=$de(e);return Hde(t)}_2.exports={supportsColor:sA,stdout:sA(process.stdout),stderr:sA(process.stderr)}});var T2=_((ir,Eb)=>{var Bde=require("tty"),wb=require("util");ir.init=Xde;ir.log=zde;ir.formatArgs=Wde;ir.save=Yde;ir.load=Kde;ir.useColors=Vde;ir.destroy=wb.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ir.colors=[6,2,3,4,5,1];try{let e=C2();e&&(e.stderr||e).level>=2&&(ir.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ir.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[n]=r,e},{});function Vde(){return"colors"in ir.inspectOpts?!!ir.inspectOpts.colors:Bde.isatty(process.stderr.fd)}function Wde(e){let{namespace:t,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${t} \x1B[0m`;e[0]=o+e[0].split(`
`).join(`
`+o),e.push(i+"m+"+Eb.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=Gde()+t+" "+e[0]}function Gde(){return ir.inspectOpts.hideDate?"":new Date().toISOString()+" "}function zde(...e){return process.stderr.write(wb.format(...e)+`
`)}function Yde(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Kde(){return process.env.DEBUG}function Xde(e){e.inspectOpts={};let t=Object.keys(ir.inspectOpts);for(let n=0;n<t.length;n++)e.inspectOpts[t[n]]=ir.inspectOpts[t[n]]}Eb.exports=oA()(ir);var{formatters:S2}=Eb.exports;S2.o=function(e){return this.inspectOpts.colors=this.useColors,wb.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};S2.O=function(e){return this.inspectOpts.colors=this.useColors,wb.inspect(e,this.inspectOpts)}});var yu=_((PHe,aA)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?aA.exports=w2():aA.exports=T2()});var P2=_((RHe,I2)=>{var jv;I2.exports=function(){if(!jv){try{jv=yu()("follow-redirects")}catch{}typeof jv!="function"&&(jv=function(){})}jv.apply(null,arguments)}});var Uf=_((AHe,pA)=>{var pd=require("url"),cA=pd.URL,Qde=require("http"),Jde=require("https"),D2=require("stream").Writable,k2=require("assert"),O2=P2(),lA=["abort","aborted","connect","error","socket","timeout"],dA=Object.create(null);lA.forEach(function(e){dA[e]=function(t,n,r){this._redirectable.emit(e,t,n,r)}});var Zde=$v("ERR_INVALID_URL","Invalid URL",TypeError),R2=$v("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),epe=$v("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),tpe=$v("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),npe=$v("ERR_STREAM_WRITE_AFTER_END","write after end");function Bi(e,t){D2.call(this),this._sanitizeOptions(e),this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],t&&this.on("response",t);var n=this;this._onNativeResponse=function(r){n._processResponse(r)},this._performRequest()}Bi.prototype=Object.create(D2.prototype);Bi.prototype.abort=function(){L2(this._currentRequest),this.emit("abort")};Bi.prototype.write=function(e,t,n){if(this._ending)throw new npe;if(!fd(e)&&!ope(e))throw new TypeError("data should be a string, Buffer or Uint8Array");if(Hv(t)&&(n=t,t=null),e.length===0){n&&n();return}this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new tpe),this.abort())};Bi.prototype.end=function(e,t,n){if(Hv(e)?(n=e,e=t=null):Hv(t)&&(n=t,t=null),!e)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,i=this._currentRequest;this.write(e,t,function(){r._ended=!0,i.end(null,null,n)}),this._ending=!0}};Bi.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)};Bi.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)};Bi.prototype.setTimeout=function(e,t){var n=this;function r(s){s.setTimeout(e),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),o()},e),r(s)}function o(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",o),n.removeListener("error",o),n.removeListener("response",o),t&&n.removeListener("timeout",t),n.socket||n._currentRequest.removeListener("socket",i)}return t&&this.on("timeout",t),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",r),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(e){Bi.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}});["aborted","connection","socket"].forEach(function(e){Object.defineProperty(Bi.prototype,e,{get:function(){return this._currentRequest[e]}})});Bi.prototype._sanitizeOptions=function(e){if(e.headers||(e.headers={}),e.host&&(e.hostname||(e.hostname=e.host),delete e.host),!e.pathname&&e.path){var t=e.path.indexOf("?");t<0?e.pathname=e.path:(e.pathname=e.path.substring(0,t),e.search=e.path.substring(t))}};Bi.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(!t){this.emit("error",new TypeError("Unsupported protocol "+e));return}if(this._options.agents){var n=e.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=t.request(this._options,this._onNativeResponse);r._redirectable=this;for(var i of lA)r.on(i,dA[i]);if(this._currentUrl=/^\//.test(this._options.path)?pd.format(this._options):this._options.path,this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function u(c){if(r===s._currentRequest)if(c)s.emit("error",c);else if(o<a.length){var l=a[o++];r.finished||r.write(l.data,l.encoding,u)}else s._ended&&r.end()})()}};Bi.prototype._processResponse=function(e){var t=e.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:t});var n=e.headers.location;if(!n||this._options.followRedirects===!1||t<300||t>=400){e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[];return}if(L2(this._currentRequest),e.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new epe);return}var r,i=this._options.beforeRedirect;i&&(r=Object.assign({Host:e.req.getHeader("host")},this._options.headers));var o=this._options.method;((t===301||t===302)&&this._options.method==="POST"||t===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],uA(/^content-/i,this._options.headers));var s=uA(/^host$/i,this._options.headers),a=pd.parse(this._currentUrl),u=s||a.host,c=/^\w+:/.test(n)?this._currentUrl:pd.format(Object.assign(a,{host:u})),l;try{l=pd.resolve(c,n)}catch(m){this.emit("error",new R2({cause:m}));return}O2("redirecting to",l),this._isRedirect=!0;var d=pd.parse(l);if(Object.assign(this._options,d),(d.protocol!==a.protocol&&d.protocol!=="https:"||d.host!==u&&!ipe(d.host,u))&&uA(/^(?:authorization|cookie)$/i,this._options.headers),Hv(i)){var p={headers:e.headers,statusCode:t},f={url:c,method:o,headers:r};try{i(this._options,p,f)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new R2({cause:m}))}};function N2(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach(function(r){var i=r+":",o=n[i]=e[r],s=t[r]=Object.create(o);function a(c,l,d){if(fd(c)){var p;try{p=A2(new cA(c))}catch{p=pd.parse(c)}if(!fd(p.protocol))throw new Zde({input:c});c=p}else cA&&c instanceof cA?c=A2(c):(d=l,l=c,c={protocol:i});return Hv(l)&&(d=l,l=null),l=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},c,l),l.nativeProtocols=n,!fd(l.host)&&!fd(l.hostname)&&(l.hostname="::1"),k2.equal(l.protocol,i,"protocol mismatch"),O2("options",l),new Bi(l,d)}function u(c,l,d){var p=s.request(c,l,d);return p.end(),p}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:u,configurable:!0,enumerable:!0,writable:!0}})}),t}function rpe(){}function A2(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return e.port!==""&&(t.port=Number(e.port)),t}function uA(e,t){var n;for(var r in t)e.test(r)&&(n=t[r],delete t[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function $v(e,t,n){function r(i){Error.captureStackTrace(this,this.constructor),Object.assign(this,i||{}),this.code=e,this.message=this.cause?t+": "+this.cause.message:t}return r.prototype=new(n||Error),r.prototype.constructor=r,r.prototype.name="Error ["+e+"]",r}function L2(e){for(var t of lA)e.removeListener(t,dA[t]);e.on("error",rpe),e.abort()}function ipe(e,t){k2(fd(e)&&fd(t));var n=e.length-t.length-1;return n>0&&e[n]==="."&&e.endsWith(t)}function fd(e){return typeof e=="string"||e instanceof String}function Hv(e){return typeof e=="function"}function ope(e){return typeof e=="object"&&"length"in e}pA.exports=N2({http:Qde,https:Jde});pA.exports.wrap=N2});var qf=_((DHe,M2)=>{"use strict";var F2=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);M2.exports=e=>e?Object.keys(e).map(t=>[F2.has(t)?F2.get(t):t,e[t]]).reduce((t,n)=>(t[n[0]]=n[1],t),Object.create(null)):{}});var Pb=_((kHe,z2)=>{"use strict";var U2=typeof process=="object"&&process?process:{stdout:null,stderr:null},spe=require("events"),q2=require("stream"),ape=require("string_decoder"),j2=ape.StringDecoder,Ga=Symbol("EOF"),za=Symbol("maybeEmitEnd"),xu=Symbol("emittedEnd"),bb=Symbol("emittingEnd"),Bv=Symbol("emittedError"),_b=Symbol("closed"),H2=Symbol("read"),Cb=Symbol("flush"),$2=Symbol("flushChunk"),ui=Symbol("encoding"),Ya=Symbol("decoder"),Sb=Symbol("flowing"),Vv=Symbol("paused"),jf=Symbol("resume"),fn=Symbol("buffer"),Js=Symbol("pipes"),Wn=Symbol("bufferLength"),fA=Symbol("bufferPush"),mA=Symbol("bufferShift"),or=Symbol("objectMode"),mn=Symbol("destroyed"),hA=Symbol("error"),gA=Symbol("emitData"),B2=Symbol("emitEnd"),vA=Symbol("emitEnd2"),Ka=Symbol("async"),yA=Symbol("abort"),Tb=Symbol("aborted"),md=Symbol("signal"),Wv=e=>Promise.resolve().then(e),G2=global._MP_NO_ITERATOR_SYMBOLS_!=="1",V2=G2&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),W2=G2&&Symbol.iterator||Symbol("iterator not implemented"),cpe=e=>e==="end"||e==="finish"||e==="prefinish",upe=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,lpe=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e),Ib=class{constructor(t,n,r){this.src=t,this.dest=n,this.opts=r,this.ondrain=()=>t[jf](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},xA=class extends Ib{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,n,r){super(t,n,r),this.proxyErrors=i=>n.emit("error",i),t.on("error",this.proxyErrors)}},Gv=class extends q2{constructor(t){super(),this[Sb]=!1,this[Vv]=!1,this[Js]=[],this[fn]=[],this[or]=t&&t.objectMode||!1,this[or]?this[ui]=null:this[ui]=t&&t.encoding||null,this[ui]==="buffer"&&(this[ui]=null),this[Ka]=t&&!!t.async||!1,this[Ya]=this[ui]?new j2(this[ui]):null,this[Ga]=!1,this[xu]=!1,this[bb]=!1,this[_b]=!1,this[Bv]=null,this.writable=!0,this.readable=!0,this[Wn]=0,this[mn]=!1,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[fn]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Js]}),this[md]=t&&t.signal,this[Tb]=!1,this[md]&&(this[md].addEventListener("abort",()=>this[yA]()),this[md].aborted&&this[yA]())}get bufferLength(){return this[Wn]}get encoding(){return this[ui]}set encoding(t){if(this[or])throw new Error("cannot set encoding in objectMode");if(this[ui]&&t!==this[ui]&&(this[Ya]&&this[Ya].lastNeed||this[Wn]))throw new Error("cannot change encoding");this[ui]!==t&&(this[Ya]=t?new j2(t):null,this[fn].length&&(this[fn]=this[fn].map(n=>this[Ya].write(n)))),this[ui]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[or]}set objectMode(t){this[or]=this[or]||!!t}get async(){return this[Ka]}set async(t){this[Ka]=this[Ka]||!!t}[yA](){this[Tb]=!0,this.emit("abort",this[md].reason),this.destroy(this[md].reason)}get aborted(){return this[Tb]}set aborted(t){}write(t,n,r){if(this[Tb])return!1;if(this[Ga])throw new Error("write after end");if(this[mn])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[Ka]?Wv:o=>o();return!this[or]&&!Buffer.isBuffer(t)&&(lpe(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):upe(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),this[or]?(this.flowing&&this[Wn]!==0&&this[Cb](!0),this.flowing?this.emit("data",t):this[fA](t),this[Wn]!==0&&this.emit("readable"),r&&i(r),this.flowing):t.length?(typeof t=="string"&&!(n===this[ui]&&!this[Ya].lastNeed)&&(t=Buffer.from(t,n)),Buffer.isBuffer(t)&&this[ui]&&(t=this[Ya].write(t)),this.flowing&&this[Wn]!==0&&this[Cb](!0),this.flowing?this.emit("data",t):this[fA](t),this[Wn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[Wn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(t){if(this[mn])return null;if(this[Wn]===0||t===0||t>this[Wn])return this[za](),null;this[or]&&(t=null),this[fn].length>1&&!this[or]&&(this.encoding?this[fn]=[this[fn].join("")]:this[fn]=[Buffer.concat(this[fn],this[Wn])]);let n=this[H2](t||null,this[fn][0]);return this[za](),n}[H2](t,n){return t===n.length||t===null?this[mA]():(this[fn][0]=n.slice(t),n=n.slice(0,t),this[Wn]-=t),this.emit("data",n),!this[fn].length&&!this[Ga]&&this.emit("drain"),n}end(t,n,r){return typeof t=="function"&&(r=t,t=null),typeof n=="function"&&(r=n,n="utf8"),t&&this.write(t,n),r&&this.once("end",r),this[Ga]=!0,this.writable=!1,(this.flowing||!this[Vv])&&this[za](),this}[jf](){this[mn]||(this[Vv]=!1,this[Sb]=!0,this.emit("resume"),this[fn].length?this[Cb]():this[Ga]?this[za]():this.emit("drain"))}resume(){return this[jf]()}pause(){this[Sb]=!1,this[Vv]=!0}get destroyed(){return this[mn]}get flowing(){return this[Sb]}get paused(){return this[Vv]}[fA](t){this[or]?this[Wn]+=1:this[Wn]+=t.length,this[fn].push(t)}[mA](){return this[or]?this[Wn]-=1:this[Wn]-=this[fn][0].length,this[fn].shift()}[Cb](t){do;while(this[$2](this[mA]())&&this[fn].length);!t&&!this[fn].length&&!this[Ga]&&this.emit("drain")}[$2](t){return this.emit("data",t),this.flowing}pipe(t,n){if(this[mn])return;let r=this[xu];return n=n||{},t===U2.stdout||t===U2.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&t.end():(this[Js].push(n.proxyErrors?new xA(this,t,n):new Ib(this,t,n)),this[Ka]?Wv(()=>this[jf]()):this[jf]()),t}unpipe(t){let n=this[Js].find(r=>r.dest===t);n&&(this[Js].splice(this[Js].indexOf(n),1),n.unpipe())}addListener(t,n){return this.on(t,n)}on(t,n){let r=super.on(t,n);return t==="data"&&!this[Js].length&&!this.flowing?this[jf]():t==="readable"&&this[Wn]!==0?super.emit("readable"):cpe(t)&&this[xu]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[Bv]&&(this[Ka]?Wv(()=>n.call(this,this[Bv])):n.call(this,this[Bv])),r}get emittedEnd(){return this[xu]}[za](){!this[bb]&&!this[xu]&&!this[mn]&&this[fn].length===0&&this[Ga]&&(this[bb]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[_b]&&this.emit("close"),this[bb]=!1)}emit(t,n,...r){if(t!=="error"&&t!=="close"&&t!==mn&&this[mn])return;if(t==="data")return!this[or]&&!n?!1:this[Ka]?Wv(()=>this[gA](n)):this[gA](n);if(t==="end")return this[B2]();if(t==="close"){if(this[_b]=!0,!this[xu]&&!this[mn])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(t==="error"){this[Bv]=n,super.emit(hA,n);let o=!this[md]||this.listeners("error").length?super.emit("error",n):!1;return this[za](),o}else if(t==="resume"){let o=super.emit("resume");return this[za](),o}else if(t==="finish"||t==="prefinish"){let o=super.emit(t);return this.removeAllListeners(t),o}let i=super.emit(t,n,...r);return this[za](),i}[gA](t){for(let r of this[Js])r.dest.write(t)===!1&&this.pause();let n=super.emit("data",t);return this[za](),n}[B2](){this[xu]||(this[xu]=!0,this.readable=!1,this[Ka]?Wv(()=>this[vA]()):this[vA]())}[vA](){if(this[Ya]){let n=this[Ya].end();if(n){for(let r of this[Js])r.dest.write(n);super.emit("data",n)}}for(let n of this[Js])n.end();let t=super.emit("end");return this.removeAllListeners("end"),t}collect(){let t=[];this[or]||(t.dataLength=0);let n=this.promise();return this.on("data",r=>{t.push(r),this[or]||(t.dataLength+=r.length)}),n.then(()=>t)}concat(){return this[or]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[or]?Promise.reject(new Error("cannot concat in objectMode")):this[ui]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,n)=>{this.on(mn,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>t())})}[V2](){let t=!1,n=()=>(this.pause(),t=!0,Promise.resolve({done:!0}));return{next:()=>{if(t)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ga])return n();let o=null,s=null,a=d=>{this.removeListener("data",u),this.removeListener("end",c),this.removeListener(mn,l),n(),s(d)},u=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(mn,l),this.pause(),o({value:d,done:!!this[Ga]})},c=()=>{this.removeListener("error",a),this.removeListener("data",u),this.removeListener(mn,l),n(),o({done:!0})},l=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{s=p,o=d,this.once(mn,l),this.once("error",a),this.once("end",c),this.once("data",u)})},throw:n,return:n,[V2](){return this}}}[W2](){let t=!1,n=()=>(this.pause(),this.removeListener(hA,n),this.removeListener(mn,n),this.removeListener("end",n),t=!0,{done:!0}),r=()=>{if(t)return n();let i=this.read();return i===null?n():{value:i}};return this.once("end",n),this.once(hA,n),this.once(mn,n),{next:r,throw:n,return:n,[W2](){return this}}}destroy(t){return this[mn]?(t?this.emit("error",t):this.emit(mn),this):(this[mn]=!0,this[fn].length=0,this[Wn]=0,typeof this.close=="function"&&!this[_b]&&this.close(),t?this.emit("error",t):this.emit(mn),this)}static isStream(t){return!!t&&(t instanceof Gv||t instanceof q2||t instanceof spe&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}};z2.exports=Gv});var K2=_((OHe,Y2)=>{var dpe=require("zlib").constants||{ZLIB_VERNUM:4736};Y2.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},dpe))});var oB=_((NHe,iB)=>{"use strict";var X2=typeof process=="object"&&process?process:{stdout:null,stderr:null},ppe=require("events"),Q2=require("stream"),J2=require("string_decoder").StringDecoder,Xa=Symbol("EOF"),Qa=Symbol("maybeEmitEnd"),wu=Symbol("emittedEnd"),Rb=Symbol("emittingEnd"),zv=Symbol("emittedError"),Ab=Symbol("closed"),Z2=Symbol("read"),Db=Symbol("flush"),eB=Symbol("flushChunk"),li=Symbol("encoding"),Ja=Symbol("decoder"),kb=Symbol("flowing"),Yv=Symbol("paused"),Hf=Symbol("resume"),Gn=Symbol("bufferLength"),wA=Symbol("bufferPush"),EA=Symbol("bufferShift"),Cr=Symbol("objectMode"),Sr=Symbol("destroyed"),bA=Symbol("emitData"),tB=Symbol("emitEnd"),_A=Symbol("emitEnd2"),Za=Symbol("async"),Kv=e=>Promise.resolve().then(e),nB=global._MP_NO_ITERATOR_SYMBOLS_!=="1",fpe=nB&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),mpe=nB&&Symbol.iterator||Symbol("iterator not implemented"),hpe=e=>e==="end"||e==="finish"||e==="prefinish",gpe=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,vpe=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e),Ob=class{constructor(t,n,r){this.src=t,this.dest=n,this.opts=r,this.ondrain=()=>t[Hf](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},CA=class extends Ob{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,n,r){super(t,n,r),this.proxyErrors=i=>n.emit("error",i),t.on("error",this.proxyErrors)}};iB.exports=class rB extends Q2{constructor(t){super(),this[kb]=!1,this[Yv]=!1,this.pipes=[],this.buffer=[],this[Cr]=t&&t.objectMode||!1,this[Cr]?this[li]=null:this[li]=t&&t.encoding||null,this[li]==="buffer"&&(this[li]=null),this[Za]=t&&!!t.async||!1,this[Ja]=this[li]?new J2(this[li]):null,this[Xa]=!1,this[wu]=!1,this[Rb]=!1,this[Ab]=!1,this[zv]=null,this.writable=!0,this.readable=!0,this[Gn]=0,this[Sr]=!1}get bufferLength(){return this[Gn]}get encoding(){return this[li]}set encoding(t){if(this[Cr])throw new Error("cannot set encoding in objectMode");if(this[li]&&t!==this[li]&&(this[Ja]&&this[Ja].lastNeed||this[Gn]))throw new Error("cannot change encoding");this[li]!==t&&(this[Ja]=t?new J2(t):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[Ja].write(n)))),this[li]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Cr]}set objectMode(t){this[Cr]=this[Cr]||!!t}get async(){return this[Za]}set async(t){this[Za]=this[Za]||!!t}write(t,n,r){if(this[Xa])throw new Error("write after end");if(this[Sr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[Za]?Kv:o=>o();return!this[Cr]&&!Buffer.isBuffer(t)&&(vpe(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):gpe(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),this[Cr]?(this.flowing&&this[Gn]!==0&&this[Db](!0),this.flowing?this.emit("data",t):this[wA](t),this[Gn]!==0&&this.emit("readable"),r&&i(r),this.flowing):t.length?(typeof t=="string"&&!(n===this[li]&&!this[Ja].lastNeed)&&(t=Buffer.from(t,n)),Buffer.isBuffer(t)&&this[li]&&(t=this[Ja].write(t)),this.flowing&&this[Gn]!==0&&this[Db](!0),this.flowing?this.emit("data",t):this[wA](t),this[Gn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[Gn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(t){if(this[Sr])return null;if(this[Gn]===0||t===0||t>this[Gn])return this[Qa](),null;this[Cr]&&(t=null),this.buffer.length>1&&!this[Cr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[Gn])]);let n=this[Z2](t||null,this.buffer[0]);return this[Qa](),n}[Z2](t,n){return t===n.length||t===null?this[EA]():(this.buffer[0]=n.slice(t),n=n.slice(0,t),this[Gn]-=t),this.emit("data",n),!this.buffer.length&&!this[Xa]&&this.emit("drain"),n}end(t,n,r){return typeof t=="function"&&(r=t,t=null),typeof n=="function"&&(r=n,n="utf8"),t&&this.write(t,n),r&&this.once("end",r),this[Xa]=!0,this.writable=!1,(this.flowing||!this[Yv])&&this[Qa](),this}[Hf](){this[Sr]||(this[Yv]=!1,this[kb]=!0,this.emit("resume"),this.buffer.length?this[Db]():this[Xa]?this[Qa]():this.emit("drain"))}resume(){return this[Hf]()}pause(){this[kb]=!1,this[Yv]=!0}get destroyed(){return this[Sr]}get flowing(){return this[kb]}get paused(){return this[Yv]}[wA](t){this[Cr]?this[Gn]+=1:this[Gn]+=t.length,this.buffer.push(t)}[EA](){return this.buffer.length&&(this[Cr]?this[Gn]-=1:this[Gn]-=this.buffer[0].length),this.buffer.shift()}[Db](t){do;while(this[eB](this[EA]()));!t&&!this.buffer.length&&!this[Xa]&&this.emit("drain")}[eB](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,n){if(this[Sr])return;let r=this[wu];return n=n||{},t===X2.stdout||t===X2.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&t.end():(this.pipes.push(n.proxyErrors?new CA(this,t,n):new Ob(this,t,n)),this[Za]?Kv(()=>this[Hf]()):this[Hf]()),t}unpipe(t){let n=this.pipes.find(r=>r.dest===t);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(t,n){return this.on(t,n)}on(t,n){let r=super.on(t,n);return t==="data"&&!this.pipes.length&&!this.flowing?this[Hf]():t==="readable"&&this[Gn]!==0?super.emit("readable"):hpe(t)&&this[wu]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[zv]&&(this[Za]?Kv(()=>n.call(this,this[zv])):n.call(this,this[zv])),r}get emittedEnd(){return this[wu]}[Qa](){!this[Rb]&&!this[wu]&&!this[Sr]&&this.buffer.length===0&&this[Xa]&&(this[Rb]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ab]&&this.emit("close"),this[Rb]=!1)}emit(t,n,...r){if(t!=="error"&&t!=="close"&&t!==Sr&&this[Sr])return;if(t==="data")return n?this[Za]?Kv(()=>this[bA](n)):this[bA](n):!1;if(t==="end")return this[tB]();if(t==="close"){if(this[Ab]=!0,!this[wu]&&!this[Sr])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(t==="error"){this[zv]=n;let o=super.emit("error",n);return this[Qa](),o}else if(t==="resume"){let o=super.emit("resume");return this[Qa](),o}else if(t==="finish"||t==="prefinish"){let o=super.emit(t);return this.removeAllListeners(t),o}let i=super.emit(t,n,...r);return this[Qa](),i}[bA](t){for(let r of this.pipes)r.dest.write(t)===!1&&this.pause();let n=super.emit("data",t);return this[Qa](),n}[tB](){this[wu]||(this[wu]=!0,this.readable=!1,this[Za]?Kv(()=>this[_A]()):this[_A]())}[_A](){if(this[Ja]){let n=this[Ja].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let t=super.emit("end");return this.removeAllListeners("end"),t}collect(){let t=[];this[Cr]||(t.dataLength=0);let n=this.promise();return this.on("data",r=>{t.push(r),this[Cr]||(t.dataLength+=r.length)}),n.then(()=>t)}concat(){return this[Cr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[Cr]?Promise.reject(new Error("cannot concat in objectMode")):this[li]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,n)=>{this.on(Sr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>t())})}[fpe](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Xa])return Promise.resolve({done:!0});let r=null,i=null,o=c=>{this.removeListener("data",s),this.removeListener("end",a),i(c)},s=c=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),r({value:c,done:!!this[Xa]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),r({done:!0})},u=()=>o(new Error("stream destroyed"));return new Promise((c,l)=>{i=l,r=c,this.once(Sr,u),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[mpe](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(t){return this[Sr]?(t?this.emit("error",t):this.emit(Sr),this):(this[Sr]=!0,this.buffer.length=0,this[Gn]=0,typeof this.close=="function"&&!this[Ab]&&this.close(),t?this.emit("error",t):this.emit(Sr),this)}static isStream(t){return!!t&&(t instanceof rB||t instanceof Q2||t instanceof ppe&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var jA=_(Vi=>{"use strict";var RA=require("assert"),Eu=require("buffer").Buffer,cB=require("zlib"),hd=Vi.constants=K2(),ype=oB(),sB=Eu.concat,gd=Symbol("_superWrite"),Bf=class extends Error{constructor(t){super("zlib: "+t.message),this.code=t.code,this.errno=t.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+t.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},xpe=Symbol("opts"),Xv=Symbol("flushFlag"),aB=Symbol("finishFlushFlag"),qA=Symbol("fullFlushFlag"),Rt=Symbol("handle"),Nb=Symbol("onError"),$f=Symbol("sawError"),SA=Symbol("level"),TA=Symbol("strategy"),IA=Symbol("ended"),LHe=Symbol("_defaultFullFlush"),Lb=class extends ype{constructor(t,n){if(!t||typeof t!="object")throw new TypeError("invalid options for ZlibBase constructor");super(t),this[$f]=!1,this[IA]=!1,this[xpe]=t,this[Xv]=t.flush,this[aB]=t.finishFlush;try{this[Rt]=new cB[n](t)}catch(r){throw new Bf(r)}this[Nb]=r=>{this[$f]||(this[$f]=!0,this.close(),this.emit("error",r))},this[Rt].on("error",r=>this[Nb](new Bf(r))),this.once("end",()=>this.close)}close(){this[Rt]&&(this[Rt].close(),this[Rt]=null,this.emit("close"))}reset(){if(!this[$f])return RA(this[Rt],"zlib binding closed"),this[Rt].reset()}flush(t){this.ended||(typeof t!="number"&&(t=this[qA]),this.write(Object.assign(Eu.alloc(0),{[Xv]:t})))}end(t,n,r){return t&&this.write(t,n),this.flush(this[aB]),this[IA]=!0,super.end(null,null,r)}get ended(){return this[IA]}write(t,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof t=="string"&&(t=Eu.from(t,n)),this[$f])return;RA(this[Rt],"zlib binding closed");let i=this[Rt]._handle,o=i.close;i.close=()=>{};let s=this[Rt].close;this[Rt].close=()=>{},Eu.concat=c=>c;let a;try{let c=typeof t[Xv]=="number"?t[Xv]:this[Xv];a=this[Rt]._processChunk(t,c),Eu.concat=sB}catch(c){Eu.concat=sB,this[Nb](new Bf(c))}finally{this[Rt]&&(this[Rt]._handle=i,i.close=o,this[Rt].close=s,this[Rt].removeAllListeners("error"))}this[Rt]&&this[Rt].on("error",c=>this[Nb](new Bf(c)));let u;if(a)if(Array.isArray(a)&&a.length>0){u=this[gd](Eu.from(a[0]));for(let c=1;c<a.length;c++)u=this[gd](a[c])}else u=this[gd](Eu.from(a));return r&&r(),u}[gd](t){return super.write(t)}},ec=class extends Lb{constructor(t,n){t=t||{},t.flush=t.flush||hd.Z_NO_FLUSH,t.finishFlush=t.finishFlush||hd.Z_FINISH,super(t,n),this[qA]=hd.Z_FULL_FLUSH,this[SA]=t.level,this[TA]=t.strategy}params(t,n){if(!this[$f]){if(!this[Rt])throw new Error("cannot switch params when binding is closed");if(!this[Rt].params)throw new Error("not supported in this implementation");if(this[SA]!==t||this[TA]!==n){this.flush(hd.Z_SYNC_FLUSH),RA(this[Rt],"zlib binding closed");let r=this[Rt].flush;this[Rt].flush=(i,o)=>{this.flush(i),o()};try{this[Rt].params(t,n)}finally{this[Rt].flush=r}this[Rt]&&(this[SA]=t,this[TA]=n)}}}},AA=class extends ec{constructor(t){super(t,"Deflate")}},DA=class extends ec{constructor(t){super(t,"Inflate")}},PA=Symbol("_portable"),kA=class extends ec{constructor(t){super(t,"Gzip"),this[PA]=t&&!!t.portable}[gd](t){return this[PA]?(this[PA]=!1,t[9]=255,super[gd](t)):super[gd](t)}},OA=class extends ec{constructor(t){super(t,"Gunzip")}},NA=class extends ec{constructor(t){super(t,"DeflateRaw")}},LA=class extends ec{constructor(t){super(t,"InflateRaw")}},FA=class extends ec{constructor(t){super(t,"Unzip")}},Fb=class extends Lb{constructor(t,n){t=t||{},t.flush=t.flush||hd.BROTLI_OPERATION_PROCESS,t.finishFlush=t.finishFlush||hd.BROTLI_OPERATION_FINISH,super(t,n),this[qA]=hd.BROTLI_OPERATION_FLUSH}},MA=class extends Fb{constructor(t){super(t,"BrotliCompress")}},UA=class extends Fb{constructor(t){super(t,"BrotliDecompress")}};Vi.Deflate=AA;Vi.Inflate=DA;Vi.Gzip=kA;Vi.Gunzip=OA;Vi.DeflateRaw=NA;Vi.InflateRaw=LA;Vi.Unzip=FA;typeof cB.BrotliCompress=="function"?(Vi.BrotliCompress=MA,Vi.BrotliDecompress=UA):Vi.BrotliCompress=Vi.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Vf=_((UHe,uB)=>{var wpe=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;uB.exports=wpe!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/")});var Mb=_((jHe,lB)=>{"use strict";var Epe=Pb(),HA=Vf(),$A=Symbol("slurp");lB.exports=class extends Epe{constructor(t,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=t,this.startBlockSize=512*Math.ceil(t.size/512),this.blockRemain=this.startBlockSize,this.remain=t.size,this.type=t.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=HA(t.path),this.mode=t.mode,this.mode&&(this.mode=this.mode&4095),this.uid=t.uid,this.gid=t.gid,this.uname=t.uname,this.gname=t.gname,this.size=t.size,this.mtime=t.mtime,this.atime=t.atime,this.ctime=t.ctime,this.linkpath=HA(t.linkpath),this.uname=t.uname,this.gname=t.gname,n&&this[$A](n),r&&this[$A](r,!0)}write(t){let n=t.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,i=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,i-n),this.ignore?!0:r>=n?super.write(t):super.write(t.slice(0,r))}[$A](t,n){for(let r in t)t[r]!==null&&t[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?HA(t[r]):t[r])}}});var BA=_(Ub=>{"use strict";Ub.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Ub.code=new Map(Array.from(Ub.name).map(e=>[e[1],e[0]]))});var mB=_(($He,fB)=>{"use strict";var bpe=(e,t)=>{if(Number.isSafeInteger(e))e<0?Cpe(e,t):_pe(e,t);else throw Error("cannot encode number outside of javascript safe integer range");return t},_pe=(e,t)=>{t[0]=128;for(var n=t.length;n>1;n--)t[n-1]=e&255,e=Math.floor(e/256)},Cpe=(e,t)=>{t[0]=255;var n=!1;e=e*-1;for(var r=t.length;r>1;r--){var i=e&255;e=Math.floor(e/256),n?t[r-1]=dB(i):i===0?t[r-1]=0:(n=!0,t[r-1]=pB(i))}},Spe=e=>{let t=e[0],n=t===128?Ipe(e.slice(1,e.length)):t===255?Tpe(e):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},Tpe=e=>{for(var t=e.length,n=0,r=!1,i=t-1;i>-1;i--){var o=e[i],s;r?s=dB(o):o===0?s=o:(r=!0,s=pB(o)),s!==0&&(n-=s*Math.pow(256,t-i-1))}return n},Ipe=e=>{for(var t=e.length,n=0,r=t-1;r>-1;r--){var i=e[r];i!==0&&(n+=i*Math.pow(256,t-r-1))}return n},dB=e=>(255^e)&255,pB=e=>(255^e)+1&255;fB.exports={encode:bpe,parse:Spe}});var Gf=_((BHe,gB)=>{"use strict";var VA=BA(),Wf=require("path").posix,hB=mB(),WA=Symbol("slurp"),Wi=Symbol("type"),YA=class{constructor(t,n,r,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[Wi]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(t)?this.decode(t,n||0,r,i):t&&this.set(t)}decode(t,n,r,i){if(n||(n=0),!t||!(t.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=vd(t,n,100),this.mode=bu(t,n+100,8),this.uid=bu(t,n+108,8),this.gid=bu(t,n+116,8),this.size=bu(t,n+124,12),this.mtime=GA(t,n+136,12),this.cksum=bu(t,n+148,12),this[WA](r),this[WA](i,!0),this[Wi]=vd(t,n+156,1),this[Wi]===""&&(this[Wi]="0"),this[Wi]==="0"&&this.path.slice(-1)==="/"&&(this[Wi]="5"),this[Wi]==="5"&&(this.size=0),this.linkpath=vd(t,n+157,100),t.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=vd(t,n+265,32),this.gname=vd(t,n+297,32),this.devmaj=bu(t,n+329,8),this.devmin=bu(t,n+337,8),t[n+475]!==0){let s=vd(t,n+345,155);this.path=s+"/"+this.path}else{let s=vd(t,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=GA(t,n+476,12),this.ctime=GA(t,n+488,12)}let o=8*32;for(let s=n;s<n+148;s++)o+=t[s];for(let s=n+156;s<n+512;s++)o+=t[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[WA](t,n){for(let r in t)t[r]!==null&&t[r]!==void 0&&!(n&&r==="path")&&(this[r]=t[r])}encode(t,n){if(t||(t=this.block=Buffer.alloc(512),n=0),n||(n=0),!(t.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,i=Ppe(this.path||"",r),o=i[0],s=i[1];this.needPax=i[2],this.needPax=yd(t,n,100,o)||this.needPax,this.needPax=_u(t,n+100,8,this.mode)||this.needPax,this.needPax=_u(t,n+108,8,this.uid)||this.needPax,this.needPax=_u(t,n+116,8,this.gid)||this.needPax,this.needPax=_u(t,n+124,12,this.size)||this.needPax,this.needPax=zA(t,n+136,12,this.mtime)||this.needPax,t[n+156]=this[Wi].charCodeAt(0),this.needPax=yd(t,n+157,100,this.linkpath)||this.needPax,t.write("ustar\x0000",n+257,8),this.needPax=yd(t,n+265,32,this.uname)||this.needPax,this.needPax=yd(t,n+297,32,this.gname)||this.needPax,this.needPax=_u(t,n+329,8,this.devmaj)||this.needPax,this.needPax=_u(t,n+337,8,this.devmin)||this.needPax,this.needPax=yd(t,n+345,r,s)||this.needPax,t[n+475]!==0?this.needPax=yd(t,n+345,155,s)||this.needPax:(this.needPax=yd(t,n+345,130,s)||this.needPax,this.needPax=zA(t,n+476,12,this.atime)||this.needPax,this.needPax=zA(t,n+488,12,this.ctime)||this.needPax);let a=8*32;for(let u=n;u<n+148;u++)a+=t[u];for(let u=n+156;u<n+512;u++)a+=t[u];return this.cksum=a,_u(t,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(t){for(let n in t)t[n]!==null&&t[n]!==void 0&&(this[n]=t[n])}get type(){return VA.name.get(this[Wi])||this[Wi]}get typeKey(){return this[Wi]}set type(t){VA.code.has(t)?this[Wi]=VA.code.get(t):this[Wi]=t}},Ppe=(e,t)=>{let r=e,i="",o,s=Wf.parse(e).root||".";if(Buffer.byteLength(r)<100)o=[r,i,!1];else{i=Wf.dirname(r),r=Wf.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(i)<=t?o=[r,i,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(i)<=t?o=[r.slice(0,100-1),i,!0]:(r=Wf.join(Wf.basename(i),r),i=Wf.dirname(i));while(i!==s&&!o);o||(o=[e.slice(0,100-1),"",!0])}return o},vd=(e,t,n)=>e.slice(t,t+n).toString("utf8").replace(/\0.*/,""),GA=(e,t,n)=>Rpe(bu(e,t,n)),Rpe=e=>e===null?null:new Date(e*1e3),bu=(e,t,n)=>e[t]&128?hB.parse(e.slice(t,t+n)):Dpe(e,t,n),Ape=e=>isNaN(e)?null:e,Dpe=(e,t,n)=>Ape(parseInt(e.slice(t,t+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),kpe={12:8589934591,8:2097151},_u=(e,t,n,r)=>r===null?!1:r>kpe[n]||r<0?(hB.encode(r,e.slice(t,t+n)),!0):(Ope(e,t,n,r),!1),Ope=(e,t,n,r)=>e.write(Npe(r,n),t,n,"ascii"),Npe=(e,t)=>Lpe(Math.floor(e).toString(8),t),Lpe=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",zA=(e,t,n,r)=>r===null?!1:_u(e,t,n,r.getTime()/1e3),Fpe=new Array(156).join("\0"),yd=(e,t,n,r)=>r===null?!1:(e.write(r+Fpe,t,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);gB.exports=YA});var qb=_((VHe,vB)=>{"use strict";var Mpe=Gf(),Upe=require("path"),Qv=class{constructor(t,n){this.atime=t.atime||null,this.charset=t.charset||null,this.comment=t.comment||null,this.ctime=t.ctime||null,this.gid=t.gid||null,this.gname=t.gname||null,this.linkpath=t.linkpath||null,this.mtime=t.mtime||null,this.path=t.path||null,this.size=t.size||null,this.uid=t.uid||null,this.uname=t.uname||null,this.dev=t.dev||null,this.ino=t.ino||null,this.nlink=t.nlink||null,this.global=n||!1}encode(){let t=this.encodeBody();if(t==="")return null;let n=Buffer.byteLength(t),r=512*Math.ceil(1+n/512),i=Buffer.allocUnsafe(r);for(let o=0;o<512;o++)i[o]=0;new Mpe({path:("PaxHeader/"+Upe.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(t,512,n,"utf8");for(let o=n+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(t){if(this[t]===null||this[t]===void 0)return"";let n=this[t]instanceof Date?this[t].getTime()/1e3:this[t],r=" "+(t==="dev"||t==="ino"||t==="nlink"?"SCHILY.":"")+t+"="+n+`
`,i=Buffer.byteLength(r),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+r}};Qv.parse=(e,t,n)=>new Qv(qpe(jpe(e),t),n);var qpe=(e,t)=>t?Object.keys(e).reduce((n,r)=>(n[r]=e[r],n),t):e,jpe=e=>e.replace(/\n$/,"").split(`
`).reduce(Hpe,Object.create(null)),Hpe=(e,t)=>{let n=parseInt(t,10);if(n!==Buffer.byteLength(t)+1)return e;t=t.slice((n+" ").length);let r=t.split("="),i=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return e;let o=r.join("=");return e[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,e};vB.exports=Qv});var zf=_((WHe,yB)=>{yB.exports=e=>{let t=e.length-1,n=-1;for(;t>-1&&e.charAt(t)==="/";)n=t,t--;return n===-1?e:e.slice(0,n)}});var jb=_((GHe,xB)=>{"use strict";xB.exports=e=>class extends e{warn(t,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||t,r.tarCode=t,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${t}: ${n}`),r))}}});var XA=_((YHe,wB)=>{"use strict";var Hb=["|","<",">","?",":"],KA=Hb.map(e=>String.fromCharCode(61440+e.charCodeAt(0))),$pe=new Map(Hb.map((e,t)=>[e,KA[t]])),Bpe=new Map(KA.map((e,t)=>[e,Hb[t]]));wB.exports={encode:e=>Hb.reduce((t,n)=>t.split(n).join($pe.get(n)),e),decode:e=>KA.reduce((t,n)=>t.split(n).join(Bpe.get(n)),e)}});var QA=_((KHe,bB)=>{var{isAbsolute:Vpe,parse:EB}=require("path").win32;bB.exports=e=>{let t="",n=EB(e);for(;Vpe(e)||n.root;){let r=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":n.root;e=e.slice(r.length),t+=r,n=EB(e)}return[t,e]}});var CB=_((XHe,_B)=>{"use strict";_B.exports=(e,t,n)=>(e&=4095,n&&(e=(e|384)&-19),t&&(e&256&&(e|=64),e&32&&(e|=8),e&4&&(e|=1)),e)});var aD=_((ZHe,UB)=>{"use strict";var DB=Pb(),kB=qb(),OB=Gf(),ea=require("fs"),SB=require("path"),Zs=Vf(),Wpe=zf(),NB=(e,t)=>t?(e=Zs(e).replace(/^\.(\/|$)/,""),Wpe(t)+"/"+e):Zs(e),Gpe=16*1024*1024,TB=Symbol("process"),IB=Symbol("file"),PB=Symbol("directory"),ZA=Symbol("symlink"),RB=Symbol("hardlink"),Jv=Symbol("header"),$b=Symbol("read"),eD=Symbol("lstat"),Bb=Symbol("onlstat"),tD=Symbol("onread"),nD=Symbol("onreadlink"),rD=Symbol("openfile"),iD=Symbol("onopenfile"),Cu=Symbol("close"),Vb=Symbol("mode"),oD=Symbol("awaitDrain"),JA=Symbol("ondrain"),ta=Symbol("prefix"),AB=Symbol("hadError"),LB=jb(),zpe=XA(),FB=QA(),MB=CB(),Wb=LB(class extends DB{constructor(t,n){if(n=n||{},super(n),typeof t!="string")throw new TypeError("path is required");this.path=Zs(t),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||Gpe,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=Zs(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?Zs(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[i,o]=FB(this.path);i&&(this.path=o,r=i)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=zpe.decode(this.path.replace(/\\/g,"/")),t=t.replace(/\\/g,"/")),this.absolute=Zs(n.absolute||SB.resolve(this.cwd,t)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[Bb](this.statCache.get(this.absolute)):this[eD]()}emit(t,...n){return t==="error"&&(this[AB]=!0),super.emit(t,...n)}[eD](){ea.lstat(this.absolute,(t,n)=>{if(t)return this.emit("error",t);this[Bb](n)})}[Bb](t){this.statCache.set(this.absolute,t),this.stat=t,t.isFile()||(t.size=0),this.type=Kpe(t),this.emit("stat",t),this[TB]()}[TB](){switch(this.type){case"File":return this[IB]();case"Directory":return this[PB]();case"SymbolicLink":return this[ZA]();default:return this.end()}}[Vb](t){return MB(t,this.type==="Directory",this.portable)}[ta](t){return NB(t,this.prefix)}[Jv](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new OB({path:this[ta](this.path),linkpath:this.type==="Link"?this[ta](this.linkpath):this.linkpath,mode:this[Vb](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new kB({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[ta](this.path),linkpath:this.type==="Link"?this[ta](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[PB](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Jv](),this.end()}[ZA](){ea.readlink(this.absolute,(t,n)=>{if(t)return this.emit("error",t);this[nD](n)})}[nD](t){this.linkpath=Zs(t),this[Jv](),this.end()}[RB](t){this.type="Link",this.linkpath=Zs(SB.relative(this.cwd,t)),this.stat.size=0,this[Jv](),this.end()}[IB](){if(this.stat.nlink>1){let t=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(t)){let n=this.linkCache.get(t);if(n.indexOf(this.cwd)===0)return this[RB](n)}this.linkCache.set(t,this.absolute)}if(this[Jv](),this.stat.size===0)return this.end();this[rD]()}[rD](){ea.open(this.absolute,"r",(t,n)=>{if(t)return this.emit("error",t);this[iD](n)})}[iD](t){if(this.fd=t,this[AB])return this[Cu]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[$b]()}[$b](){let{fd:t,buf:n,offset:r,length:i,pos:o}=this;ea.read(t,n,r,i,o,(s,a)=>{if(s)return this[Cu](()=>this.emit("error",s));this[tD](a)})}[Cu](t){ea.close(this.fd,t)}[tD](t){if(t<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Cu](()=>this.emit("error",i))}if(t>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Cu](()=>this.emit("error",i))}if(t===this.remain)for(let i=t;i<this.length&&t<this.blockRemain;i++)this.buf[i+this.offset]=0,t++,this.remain++;let n=this.offset===0&&t===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+t);this.write(n)?this[JA]():this[oD](()=>this[JA]())}[oD](t){this.once("drain",t)}write(t){if(this.blockRemain<t.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=t.length,this.blockRemain-=t.length,this.pos+=t.length,this.offset+=t.length,super.write(t)}[JA](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Cu](t=>t?this.emit("error",t):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[$b]()}}),sD=class extends Wb{[eD](){this[Bb](ea.lstatSync(this.absolute))}[ZA](){this[nD](ea.readlinkSync(this.absolute))}[rD](){this[iD](ea.openSync(this.absolute,"r"))}[$b](){let t=!0;try{let{fd:n,buf:r,offset:i,length:o,pos:s}=this,a=ea.readSync(n,r,i,o,s);this[tD](a),t=!1}finally{if(t)try{this[Cu](()=>{})}catch{}}}[oD](t){t()}[Cu](t){ea.closeSync(this.fd),t()}},Ype=LB(class extends DB{constructor(t,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=t,this.type=t.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=Zs(t.path),this.mode=this[Vb](t.mode),this.uid=this.portable?null:t.uid,this.gid=this.portable?null:t.gid,this.uname=this.portable?null:t.uname,this.gname=this.portable?null:t.gname,this.size=t.size,this.mtime=this.noMtime?null:n.mtime||t.mtime,this.atime=this.portable?null:t.atime,this.ctime=this.portable?null:t.ctime,this.linkpath=Zs(t.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[i,o]=FB(this.path);i&&(this.path=o,r=i)}this.remain=t.size,this.blockRemain=t.startBlockSize,this.header=new OB({path:this[ta](this.path),linkpath:this.type==="Link"?this[ta](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new kB({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[ta](this.path),linkpath:this.type==="Link"?this[ta](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),t.pipe(this)}[ta](t){return NB(t,this.prefix)}[Vb](t){return MB(t,this.type==="Directory",this.portable)}write(t){let n=t.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(t)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Wb.Sync=sD;Wb.Tar=Ype;var Kpe=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";UB.exports=Wb});var jB=_((e$e,qB)=>{"use strict";qB.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Gb=_((t$e,HB)=>{"use strict";HB.exports=at;at.Node=xd;at.create=at;function at(e){var t=this;if(t instanceof at||(t=new at),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}at.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};at.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};at.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};at.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Qpe(this,arguments[e]);return this.length};at.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Jpe(this,arguments[e]);return this.length};at.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};at.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};at.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};at.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};at.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};at.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};at.prototype.map=function(e,t){t=t||this;for(var n=new at,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};at.prototype.mapReverse=function(e,t){t=t||this;for(var n=new at,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};at.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};at.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};at.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};at.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};at.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new at;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};at.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new at;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};at.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Xpe(this,i,n[r]);return o};at.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Xpe(e,t,n){var r=t===e.head?new xd(n,null,t,e):new xd(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Qpe(e,t){e.tail=new xd(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Jpe(e,t){e.head=new xd(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function xd(e,t,n,r){if(!(this instanceof xd))return new xd(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{jB()(at)}catch{}});var t_=_((r$e,YB)=>{"use strict";var Zb=class{constructor(t,n){this.path=t||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},Zpe=Pb(),efe=jA(),tfe=Mb(),gD=aD(),nfe=gD.Sync,rfe=gD.Tar,ife=Gb(),$B=Buffer.alloc(1024),Kb=Symbol("onStat"),zb=Symbol("ended"),na=Symbol("queue"),Yf=Symbol("current"),wd=Symbol("process"),Yb=Symbol("processing"),BB=Symbol("processJob"),ra=Symbol("jobs"),cD=Symbol("jobDone"),Xb=Symbol("addFSEntry"),VB=Symbol("addTarEntry"),pD=Symbol("stat"),fD=Symbol("readdir"),Qb=Symbol("onreaddir"),Jb=Symbol("pipe"),WB=Symbol("entry"),uD=Symbol("entryOpt"),mD=Symbol("writeEntryClass"),zB=Symbol("write"),lD=Symbol("ondrain"),e_=require("fs"),GB=require("path"),ofe=jb(),dD=Vf(),vD=ofe(class extends Zpe{constructor(t){super(t),t=t||Object.create(null),this.opt=t,this.file=t.file||"",this.cwd=t.cwd||process.cwd(),this.maxReadSize=t.maxReadSize,this.preservePaths=!!t.preservePaths,this.strict=!!t.strict,this.noPax=!!t.noPax,this.prefix=dD(t.prefix||""),this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.readdirCache=t.readdirCache||new Map,this[mD]=gD,typeof t.onwarn=="function"&&this.on("warn",t.onwarn),this.portable=!!t.portable,this.zip=null,t.gzip?(typeof t.gzip!="object"&&(t.gzip={}),this.portable&&(t.gzip.portable=!0),this.zip=new efe.Gzip(t.gzip),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[lD]()),this.on("resume",n=>this.zip.resume())):this.on("drain",this[lD]),this.noDirRecurse=!!t.noDirRecurse,this.follow=!!t.follow,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.filter=typeof t.filter=="function"?t.filter:n=>!0,this[na]=new ife,this[ra]=0,this.jobs=+t.jobs||4,this[Yb]=!1,this[zb]=!1}[zB](t){return super.write(t)}add(t){return this.write(t),this}end(t){return t&&this.write(t),this[zb]=!0,this[wd](),this}write(t){if(this[zb])throw new Error("write after end");return t instanceof tfe?this[VB](t):this[Xb](t),this.flowing}[VB](t){let n=dD(GB.resolve(this.cwd,t.path));if(!this.filter(t.path,t))t.resume();else{let r=new Zb(t.path,n,!1);r.entry=new rfe(t,this[uD](r)),r.entry.on("end",i=>this[cD](r)),this[ra]+=1,this[na].push(r)}this[wd]()}[Xb](t){let n=dD(GB.resolve(this.cwd,t));this[na].push(new Zb(t,n)),this[wd]()}[pD](t){t.pending=!0,this[ra]+=1;let n=this.follow?"stat":"lstat";e_[n](t.absolute,(r,i)=>{t.pending=!1,this[ra]-=1,r?this.emit("error",r):this[Kb](t,i)})}[Kb](t,n){this.statCache.set(t.absolute,n),t.stat=n,this.filter(t.path,n)||(t.ignore=!0),this[wd]()}[fD](t){t.pending=!0,this[ra]+=1,e_.readdir(t.absolute,(n,r)=>{if(t.pending=!1,this[ra]-=1,n)return this.emit("error",n);this[Qb](t,r)})}[Qb](t,n){this.readdirCache.set(t.absolute,n),t.readdir=n,this[wd]()}[wd](){if(!this[Yb]){this[Yb]=!0;for(let t=this[na].head;t!==null&&this[ra]<this.jobs;t=t.next)if(this[BB](t.value),t.value.ignore){let n=t.next;this[na].removeNode(t),t.next=n}this[Yb]=!1,this[zb]&&!this[na].length&&this[ra]===0&&(this.zip?this.zip.end($B):(super.write($B),super.end()))}}get[Yf](){return this[na]&&this[na].head&&this[na].head.value}[cD](t){this[na].shift(),this[ra]-=1,this[wd]()}[BB](t){if(!t.pending){if(t.entry){t===this[Yf]&&!t.piped&&this[Jb](t);return}if(t.stat||(this.statCache.has(t.absolute)?this[Kb](t,this.statCache.get(t.absolute)):this[pD](t)),!!t.stat&&!t.ignore&&!(!this.noDirRecurse&&t.stat.isDirectory()&&!t.readdir&&(this.readdirCache.has(t.absolute)?this[Qb](t,this.readdirCache.get(t.absolute)):this[fD](t),!t.readdir))){if(t.entry=this[WB](t),!t.entry){t.ignore=!0;return}t===this[Yf]&&!t.piped&&this[Jb](t)}}}[uD](t){return{onwarn:(n,r,i)=>this.warn(n,r,i),noPax:this.noPax,cwd:this.cwd,absolute:t.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[WB](t){this[ra]+=1;try{return new this[mD](t.path,this[uD](t)).on("end",()=>this[cD](t)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[lD](){this[Yf]&&this[Yf].entry&&this[Yf].entry.resume()}[Jb](t){t.piped=!0,t.readdir&&t.readdir.forEach(i=>{let o=t.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Xb](s+i)});let n=t.entry,r=this.zip;r?n.on("data",i=>{r.write(i)||n.pause()}):n.on("data",i=>{super.write(i)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),hD=class extends vD{constructor(t){super(t),this[mD]=nfe}pause(){}resume(){}[pD](t){let n=this.follow?"statSync":"lstatSync";this[Kb](t,e_[n](t.absolute))}[fD](t,n){this[Qb](t,e_.readdirSync(t.absolute))}[Jb](t){let n=t.entry,r=this.zip;t.readdir&&t.readdir.forEach(i=>{let o=t.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[Xb](s+i)}),r?n.on("data",i=>{r.write(i)}):n.on("data",i=>{super[zB](i)})}};vD.Sync=hD;YB.exports=vD});var iV=_((i$e,rV)=>{"use strict";var KB=typeof process=="object"&&process?process:{stdout:null,stderr:null},sfe=require("events"),XB=require("stream"),QB=require("string_decoder").StringDecoder,tc=Symbol("EOF"),nc=Symbol("maybeEmitEnd"),Su=Symbol("emittedEnd"),n_=Symbol("emittingEnd"),Zv=Symbol("emittedError"),r_=Symbol("closed"),JB=Symbol("read"),i_=Symbol("flush"),ZB=Symbol("flushChunk"),di=Symbol("encoding"),rc=Symbol("decoder"),o_=Symbol("flowing"),ey=Symbol("paused"),Kf=Symbol("resume"),zn=Symbol("bufferLength"),yD=Symbol("bufferPush"),xD=Symbol("bufferShift"),Tr=Symbol("objectMode"),Ir=Symbol("destroyed"),wD=Symbol("emitData"),eV=Symbol("emitEnd"),ED=Symbol("emitEnd2"),ic=Symbol("async"),ty=e=>Promise.resolve().then(e),tV=global._MP_NO_ITERATOR_SYMBOLS_!=="1",afe=tV&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),cfe=tV&&Symbol.iterator||Symbol("iterator not implemented"),ufe=e=>e==="end"||e==="finish"||e==="prefinish",lfe=e=>e instanceof ArrayBuffer||typeof e=="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0,dfe=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e),s_=class{constructor(t,n,r){this.src=t,this.dest=n,this.opts=r,this.ondrain=()=>t[Kf](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},bD=class extends s_{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,n,r){super(t,n,r),this.proxyErrors=i=>n.emit("error",i),t.on("error",this.proxyErrors)}};rV.exports=class nV extends XB{constructor(t){super(),this[o_]=!1,this[ey]=!1,this.pipes=[],this.buffer=[],this[Tr]=t&&t.objectMode||!1,this[Tr]?this[di]=null:this[di]=t&&t.encoding||null,this[di]==="buffer"&&(this[di]=null),this[ic]=t&&!!t.async||!1,this[rc]=this[di]?new QB(this[di]):null,this[tc]=!1,this[Su]=!1,this[n_]=!1,this[r_]=!1,this[Zv]=null,this.writable=!0,this.readable=!0,this[zn]=0,this[Ir]=!1}get bufferLength(){return this[zn]}get encoding(){return this[di]}set encoding(t){if(this[Tr])throw new Error("cannot set encoding in objectMode");if(this[di]&&t!==this[di]&&(this[rc]&&this[rc].lastNeed||this[zn]))throw new Error("cannot change encoding");this[di]!==t&&(this[rc]=t?new QB(t):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[rc].write(n)))),this[di]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[Tr]}set objectMode(t){this[Tr]=this[Tr]||!!t}get async(){return this[ic]}set async(t){this[ic]=this[ic]||!!t}write(t,n,r){if(this[tc])throw new Error("write after end");if(this[Ir])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[ic]?ty:o=>o();return!this[Tr]&&!Buffer.isBuffer(t)&&(dfe(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):lfe(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),this[Tr]?(this.flowing&&this[zn]!==0&&this[i_](!0),this.flowing?this.emit("data",t):this[yD](t),this[zn]!==0&&this.emit("readable"),r&&i(r),this.flowing):t.length?(typeof t=="string"&&!(n===this[di]&&!this[rc].lastNeed)&&(t=Buffer.from(t,n)),Buffer.isBuffer(t)&&this[di]&&(t=this[rc].write(t)),this.flowing&&this[zn]!==0&&this[i_](!0),this.flowing?this.emit("data",t):this[yD](t),this[zn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[zn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(t){if(this[Ir])return null;if(this[zn]===0||t===0||t>this[zn])return this[nc](),null;this[Tr]&&(t=null),this.buffer.length>1&&!this[Tr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[zn])]);let n=this[JB](t||null,this.buffer[0]);return this[nc](),n}[JB](t,n){return t===n.length||t===null?this[xD]():(this.buffer[0]=n.slice(t),n=n.slice(0,t),this[zn]-=t),this.emit("data",n),!this.buffer.length&&!this[tc]&&this.emit("drain"),n}end(t,n,r){return typeof t=="function"&&(r=t,t=null),typeof n=="function"&&(r=n,n="utf8"),t&&this.write(t,n),r&&this.once("end",r),this[tc]=!0,this.writable=!1,(this.flowing||!this[ey])&&this[nc](),this}[Kf](){this[Ir]||(this[ey]=!1,this[o_]=!0,this.emit("resume"),this.buffer.length?this[i_]():this[tc]?this[nc]():this.emit("drain"))}resume(){return this[Kf]()}pause(){this[o_]=!1,this[ey]=!0}get destroyed(){return this[Ir]}get flowing(){return this[o_]}get paused(){return this[ey]}[yD](t){this[Tr]?this[zn]+=1:this[zn]+=t.length,this.buffer.push(t)}[xD](){return this.buffer.length&&(this[Tr]?this[zn]-=1:this[zn]-=this.buffer[0].length),this.buffer.shift()}[i_](t){do;while(this[ZB](this[xD]()));!t&&!this.buffer.length&&!this[tc]&&this.emit("drain")}[ZB](t){return t?(this.emit("data",t),this.flowing):!1}pipe(t,n){if(this[Ir])return;let r=this[Su];return n=n||{},t===KB.stdout||t===KB.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&t.end():(this.pipes.push(n.proxyErrors?new bD(this,t,n):new s_(this,t,n)),this[ic]?ty(()=>this[Kf]()):this[Kf]()),t}unpipe(t){let n=this.pipes.find(r=>r.dest===t);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(t,n){return this.on(t,n)}on(t,n){let r=super.on(t,n);return t==="data"&&!this.pipes.length&&!this.flowing?this[Kf]():t==="readable"&&this[zn]!==0?super.emit("readable"):ufe(t)&&this[Su]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[Zv]&&(this[ic]?ty(()=>n.call(this,this[Zv])):n.call(this,this[Zv])),r}get emittedEnd(){return this[Su]}[nc](){!this[n_]&&!this[Su]&&!this[Ir]&&this.buffer.length===0&&this[tc]&&(this[n_]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[r_]&&this.emit("close"),this[n_]=!1)}emit(t,n,...r){if(t!=="error"&&t!=="close"&&t!==Ir&&this[Ir])return;if(t==="data")return n?this[ic]?ty(()=>this[wD](n)):this[wD](n):!1;if(t==="end")return this[eV]();if(t==="close"){if(this[r_]=!0,!this[Su]&&!this[Ir])return;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(t==="error"){this[Zv]=n;let o=super.emit("error",n);return this[nc](),o}else if(t==="resume"){let o=super.emit("resume");return this[nc](),o}else if(t==="finish"||t==="prefinish"){let o=super.emit(t);return this.removeAllListeners(t),o}let i=super.emit(t,n,...r);return this[nc](),i}[wD](t){for(let r of this.pipes)r.dest.write(t)===!1&&this.pause();let n=super.emit("data",t);return this[nc](),n}[eV](){this[Su]||(this[Su]=!0,this.readable=!1,this[ic]?ty(()=>this[ED]()):this[ED]())}[ED](){if(this[rc]){let n=this[rc].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let t=super.emit("end");return this.removeAllListeners("end"),t}collect(){let t=[];this[Tr]||(t.dataLength=0);let n=this.promise();return this.on("data",r=>{t.push(r),this[Tr]||(t.dataLength+=r.length)}),n.then(()=>t)}concat(){return this[Tr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[Tr]?Promise.reject(new Error("cannot concat in objectMode")):this[di]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,n)=>{this.on(Ir,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>t())})}[afe](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[tc])return Promise.resolve({done:!0});let r=null,i=null,o=c=>{this.removeListener("data",s),this.removeListener("end",a),i(c)},s=c=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),r({value:c,done:!!this[tc]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),r({done:!0})},u=()=>o(new Error("stream destroyed"));return new Promise((c,l)=>{i=l,r=c,this.once(Ir,u),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[cfe](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(t){return this[Ir]?(t?this.emit("error",t):this.emit(Ir),this):(this[Ir]=!0,this.buffer.length=0,this[zn]=0,typeof this.close=="function"&&!this[r_]&&this.close(),t?this.emit("error",t):this.emit(Ir),this)}static isStream(t){return!!t&&(t instanceof nV||t instanceof XB||t instanceof sfe&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}}});var rm=_(ry=>{"use strict";var pfe=iV(),ffe=require("events").EventEmitter,pi=require("fs"),SD=pi.writev;if(!SD){let e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;SD=(n,r,i,o)=>{let s=(u,c)=>o(u,c,r),a=new t;a.oncomplete=s,e.writeBuffers(n,r,i,a)}}var tm=Symbol("_autoClose"),cs=Symbol("_close"),ny=Symbol("_ended"),Et=Symbol("_fd"),oV=Symbol("_finished"),Iu=Symbol("_flags"),_D=Symbol("_flush"),TD=Symbol("_handleChunk"),ID=Symbol("_makeBuf"),d_=Symbol("_mode"),a_=Symbol("_needDrain"),Zf=Symbol("_onerror"),nm=Symbol("_onopen"),CD=Symbol("_onread"),Qf=Symbol("_onwrite"),Pu=Symbol("_open"),oc=Symbol("_path"),Ed=Symbol("_pos"),ia=Symbol("_queue"),Jf=Symbol("_read"),sV=Symbol("_readSize"),Tu=Symbol("_reading"),c_=Symbol("_remain"),aV=Symbol("_size"),u_=Symbol("_write"),Xf=Symbol("_writing"),l_=Symbol("_defaultFlag"),em=Symbol("_errored"),p_=class extends pfe{constructor(t,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof t!="string")throw new TypeError("path must be a string");this[em]=!1,this[Et]=typeof n.fd=="number"?n.fd:null,this[oc]=t,this[sV]=n.readSize||16*1024*1024,this[Tu]=!1,this[aV]=typeof n.size=="number"?n.size:1/0,this[c_]=this[aV],this[tm]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[Et]=="number"?this[Jf]():this[Pu]()}get fd(){return this[Et]}get path(){return this[oc]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Pu](){pi.open(this[oc],"r",(t,n)=>this[nm](t,n))}[nm](t,n){t?this[Zf](t):(this[Et]=n,this.emit("open",n),this[Jf]())}[ID](){return Buffer.allocUnsafe(Math.min(this[sV],this[c_]))}[Jf](){if(!this[Tu]){this[Tu]=!0;let t=this[ID]();if(t.length===0)return process.nextTick(()=>this[CD](null,0,t));pi.read(this[Et],t,0,t.length,null,(n,r,i)=>this[CD](n,r,i))}}[CD](t,n,r){this[Tu]=!1,t?this[Zf](t):this[TD](n,r)&&this[Jf]()}[cs](){if(this[tm]&&typeof this[Et]=="number"){let t=this[Et];this[Et]=null,pi.close(t,n=>n?this.emit("error",n):this.emit("close"))}}[Zf](t){this[Tu]=!0,this[cs](),this.emit("error",t)}[TD](t,n){let r=!1;return this[c_]-=t,t>0&&(r=super.write(t<n.length?n.slice(0,t):n)),(t===0||this[c_]<=0)&&(r=!1,this[cs](),super.end()),r}emit(t,n){switch(t){case"prefinish":case"finish":break;case"drain":typeof this[Et]=="number"&&this[Jf]();break;case"error":return this[em]?void 0:(this[em]=!0,super.emit(t,n));default:return super.emit(t,n)}}},PD=class extends p_{[Pu](){let t=!0;try{this[nm](null,pi.openSync(this[oc],"r")),t=!1}finally{t&&this[cs]()}}[Jf](){let t=!0;try{if(!this[Tu]){this[Tu]=!0;do{let n=this[ID](),r=n.length===0?0:pi.readSync(this[Et],n,0,n.length,null);if(!this[TD](r,n))break}while(!0);this[Tu]=!1}t=!1}finally{t&&this[cs]()}}[cs](){if(this[tm]&&typeof this[Et]=="number"){let t=this[Et];this[Et]=null,pi.closeSync(t),this.emit("close")}}},f_=class extends ffe{constructor(t,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[em]=!1,this[Xf]=!1,this[ny]=!1,this[a_]=!1,this[ia]=[],this[oc]=t,this[Et]=typeof n.fd=="number"?n.fd:null,this[d_]=n.mode===void 0?438:n.mode,this[Ed]=typeof n.start=="number"?n.start:null,this[tm]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Ed]!==null?"r+":"w";this[l_]=n.flags===void 0,this[Iu]=this[l_]?r:n.flags,this[Et]===null&&this[Pu]()}emit(t,n){if(t==="error"){if(this[em])return;this[em]=!0}return super.emit(t,n)}get fd(){return this[Et]}get path(){return this[oc]}[Zf](t){this[cs](),this[Xf]=!0,this.emit("error",t)}[Pu](){pi.open(this[oc],this[Iu],this[d_],(t,n)=>this[nm](t,n))}[nm](t,n){this[l_]&&this[Iu]==="r+"&&t&&t.code==="ENOENT"?(this[Iu]="w",this[Pu]()):t?this[Zf](t):(this[Et]=n,this.emit("open",n),this[_D]())}end(t,n){return t&&this.write(t,n),this[ny]=!0,!this[Xf]&&!this[ia].length&&typeof this[Et]=="number"&&this[Qf](null,0),this}write(t,n){return typeof t=="string"&&(t=Buffer.from(t,n)),this[ny]?(this.emit("error",new Error("write() after end()")),!1):this[Et]===null||this[Xf]||this[ia].length?(this[ia].push(t),this[a_]=!0,!1):(this[Xf]=!0,this[u_](t),!0)}[u_](t){pi.write(this[Et],t,0,t.length,this[Ed],(n,r)=>this[Qf](n,r))}[Qf](t,n){t?this[Zf](t):(this[Ed]!==null&&(this[Ed]+=n),this[ia].length?this[_D]():(this[Xf]=!1,this[ny]&&!this[oV]?(this[oV]=!0,this[cs](),this.emit("finish")):this[a_]&&(this[a_]=!1,this.emit("drain"))))}[_D](){if(this[ia].length===0)this[ny]&&this[Qf](null,0);else if(this[ia].length===1)this[u_](this[ia].pop());else{let t=this[ia];this[ia]=[],SD(this[Et],t,this[Ed],(n,r)=>this[Qf](n,r))}}[cs](){if(this[tm]&&typeof this[Et]=="number"){let t=this[Et];this[Et]=null,pi.close(t,n=>n?this.emit("error",n):this.emit("close"))}}},RD=class extends f_{[Pu](){let t;if(this[l_]&&this[Iu]==="r+")try{t=pi.openSync(this[oc],this[Iu],this[d_])}catch(n){if(n.code==="ENOENT")return this[Iu]="w",this[Pu]();throw n}else t=pi.openSync(this[oc],this[Iu],this[d_]);this[nm](null,t)}[cs](){if(this[tm]&&typeof this[Et]=="number"){let t=this[Et];this[Et]=null,pi.closeSync(t),this.emit("close")}}[u_](t){let n=!0;try{this[Qf](null,pi.writeSync(this[Et],t,0,t.length,this[Ed])),n=!1}finally{if(n)try{this[cs]()}catch{}}}};ry.ReadStream=p_;ry.ReadStreamSync=PD;ry.WriteStream=f_;ry.WriteStreamSync=RD});var w_=_((a$e,hV)=>{"use strict";var mfe=jb(),hfe=Gf(),gfe=require("events"),vfe=Gb(),yfe=1024*1024,xfe=Mb(),cV=qb(),wfe=jA(),{nextTick:Efe}=require("process"),AD=Buffer.from([31,139]),wo=Symbol("state"),bd=Symbol("writeEntry"),sc=Symbol("readEntry"),DD=Symbol("nextEntry"),uV=Symbol("processEntry"),Eo=Symbol("extendedHeader"),iy=Symbol("globalExtendedHeader"),Ru=Symbol("meta"),lV=Symbol("emitMeta"),Mt=Symbol("buffer"),ac=Symbol("queue"),_d=Symbol("ended"),dV=Symbol("emittedEnd"),Cd=Symbol("emit"),fi=Symbol("unzip"),m_=Symbol("consumeChunk"),h_=Symbol("consumeChunkSub"),kD=Symbol("consumeBody"),pV=Symbol("consumeMeta"),fV=Symbol("consumeHeader"),g_=Symbol("consuming"),OD=Symbol("bufferConcat"),ND=Symbol("maybeEnd"),oy=Symbol("writing"),Au=Symbol("aborted"),v_=Symbol("onDone"),Sd=Symbol("sawValidEntry"),y_=Symbol("sawNullBlock"),x_=Symbol("sawEOF"),mV=Symbol("closeStream"),bfe=e=>!0;hV.exports=mfe(class extends gfe{constructor(t){t=t||{},super(t),this.file=t.file||"",this[Sd]=null,this.on(v_,n=>{(this[wo]==="begin"||this[Sd]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),t.ondone?this.on(v_,t.ondone):this.on(v_,n=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!t.strict,this.maxMetaEntrySize=t.maxMetaEntrySize||yfe,this.filter=typeof t.filter=="function"?t.filter:bfe,this.writable=!0,this.readable=!1,this[ac]=new vfe,this[Mt]=null,this[sc]=null,this[bd]=null,this[wo]="begin",this[Ru]="",this[Eo]=null,this[iy]=null,this[_d]=!1,this[fi]=null,this[Au]=!1,this[y_]=!1,this[x_]=!1,this.on("end",()=>this[mV]()),typeof t.onwarn=="function"&&this.on("warn",t.onwarn),typeof t.onentry=="function"&&this.on("entry",t.onentry)}[fV](t,n){this[Sd]===null&&(this[Sd]=!1);let r;try{r=new hfe(t,n,this[Eo],this[iy])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(r.nullBlock)this[y_]?(this[x_]=!0,this[wo]==="begin"&&(this[wo]="header"),this[Cd]("eof")):(this[y_]=!0,this[Cd]("nullBlock"));else if(this[y_]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let i=r.type;if(/^(Symbolic)?Link$/.test(i)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(i)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let o=this[bd]=new xfe(r,this[Eo],this[iy]);if(!this[Sd])if(o.remain){let s=()=>{o.invalid||(this[Sd]=!0)};o.on("end",s)}else this[Sd]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[Cd]("ignoredEntry",o),this[wo]="ignore",o.resume()):o.size>0&&(this[Ru]="",o.on("data",s=>this[Ru]+=s),this[wo]="meta"):(this[Eo]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[Cd]("ignoredEntry",o),this[wo]=o.remain?"ignore":"header",o.resume()):(o.remain?this[wo]="body":(this[wo]="header",o.end()),this[sc]?this[ac].push(o):(this[ac].push(o),this[DD]())))}}}[mV](){Efe(()=>this.emit("close"))}[uV](t){let n=!0;return t?Array.isArray(t)?this.emit.apply(this,t):(this[sc]=t,this.emit("entry",t),t.emittedEnd||(t.on("end",r=>this[DD]()),n=!1)):(this[sc]=null,n=!1),n}[DD](){do;while(this[uV](this[ac].shift()));if(!this[ac].length){let t=this[sc];!t||t.flowing||t.size===t.remain?this[oy]||this.emit("drain"):t.once("drain",r=>this.emit("drain"))}}[kD](t,n){let r=this[bd],i=r.blockRemain,o=i>=t.length&&n===0?t:t.slice(n,n+i);return r.write(o),r.blockRemain||(this[wo]="header",this[bd]=null,r.end()),o.length}[pV](t,n){let r=this[bd],i=this[kD](t,n);return this[bd]||this[lV](r),i}[Cd](t,n,r){!this[ac].length&&!this[sc]?this.emit(t,n,r):this[ac].push([t,n,r])}[lV](t){switch(this[Cd]("meta",this[Ru]),t.type){case"ExtendedHeader":case"OldExtendedHeader":this[Eo]=cV.parse(this[Ru],this[Eo],!1);break;case"GlobalExtendedHeader":this[iy]=cV.parse(this[Ru],this[iy],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Eo]=this[Eo]||Object.create(null),this[Eo].path=this[Ru].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Eo]=this[Eo]||Object.create(null),this[Eo].linkpath=this[Ru].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+t.type)}}abort(t){this[Au]=!0,this.emit("abort",t),this.warn("TAR_ABORT",t,{recoverable:!1})}write(t){if(this[Au])return;if(this[fi]===null&&t){if(this[Mt]&&(t=Buffer.concat([this[Mt],t]),this[Mt]=null),t.length<AD.length)return this[Mt]=t,!0;for(let r=0;this[fi]===null&&r<AD.length;r++)t[r]!==AD[r]&&(this[fi]=!1);if(this[fi]===null){let r=this[_d];this[_d]=!1,this[fi]=new wfe.Unzip,this[fi].on("data",o=>this[m_](o)),this[fi].on("error",o=>this.abort(o)),this[fi].on("end",o=>{this[_d]=!0,this[m_]()}),this[oy]=!0;let i=this[fi][r?"end":"write"](t);return this[oy]=!1,i}}this[oy]=!0,this[fi]?this[fi].write(t):this[m_](t),this[oy]=!1;let n=this[ac].length?!1:this[sc]?this[sc].flowing:!0;return!n&&!this[ac].length&&this[sc].once("drain",r=>this.emit("drain")),n}[OD](t){t&&!this[Au]&&(this[Mt]=this[Mt]?Buffer.concat([this[Mt],t]):t)}[ND](){if(this[_d]&&!this[dV]&&!this[Au]&&!this[g_]){this[dV]=!0;let t=this[bd];if(t&&t.blockRemain){let n=this[Mt]?this[Mt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${t.blockRemain} more bytes, only ${n} available)`,{entry:t}),this[Mt]&&t.write(this[Mt]),t.end()}this[Cd](v_)}}[m_](t){if(this[g_])this[OD](t);else if(!t&&!this[Mt])this[ND]();else{if(this[g_]=!0,this[Mt]){this[OD](t);let n=this[Mt];this[Mt]=null,this[h_](n)}else this[h_](t);for(;this[Mt]&&this[Mt].length>=512&&!this[Au]&&!this[x_];){let n=this[Mt];this[Mt]=null,this[h_](n)}this[g_]=!1}(!this[Mt]||this[_d])&&this[ND]()}[h_](t){let n=0,r=t.length;for(;n+512<=r&&!this[Au]&&!this[x_];)switch(this[wo]){case"begin":case"header":this[fV](t,n),n+=512;break;case"ignore":case"body":n+=this[kD](t,n);break;case"meta":n+=this[pV](t,n);break;default:throw new Error("invalid state: "+this[wo])}n<r&&(this[Mt]?this[Mt]=Buffer.concat([t.slice(n),this[Mt]]):this[Mt]=t.slice(n))}end(t){this[Au]||(this[fi]?this[fi].end(t):(this[_d]=!0,this.write(t)))}})});var E_=_((c$e,xV)=>{"use strict";var _fe=qf(),vV=w_(),im=require("fs"),Cfe=rm(),gV=require("path"),LD=zf();xV.exports=(e,t,n)=>{typeof e=="function"?(n=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(n=t,t=null),t?t=Array.from(t):t=[];let r=_fe(e);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return t.length&&Tfe(r,t),r.noResume||Sfe(r),r.file&&r.sync?Ife(r):r.file?Pfe(r,n):yV(r)};var Sfe=e=>{let t=e.onentry;e.onentry=t?n=>{t(n),n.resume()}:n=>n.resume()},Tfe=(e,t)=>{let n=new Map(t.map(o=>[LD(o),!0])),r=e.filter,i=(o,s)=>{let a=s||gV.parse(o).root||".",u=o===a?!1:n.has(o)?n.get(o):i(gV.dirname(o),a);return n.set(o,u),u};e.filter=r?(o,s)=>r(o,s)&&i(LD(o)):o=>i(LD(o))},Ife=e=>{let t=yV(e),n=e.file,r=!0,i;try{let o=im.statSync(n),s=e.maxReadSize||16*1024*1024;if(o.size<s)t.end(im.readFileSync(n));else{let a=0,u=Buffer.allocUnsafe(s);for(i=im.openSync(n,"r");a<o.size;){let c=im.readSync(i,u,0,s,a);a+=c,t.write(u.slice(0,c))}t.end()}r=!1}finally{if(r&&i)try{im.closeSync(i)}catch{}}},Pfe=(e,t)=>{let n=new vV(e),r=e.maxReadSize||16*1024*1024,i=e.file,o=new Promise((s,a)=>{n.on("error",a),n.on("end",s),im.stat(i,(u,c)=>{if(u)a(u);else{let l=new Cfe.ReadStream(i,{readSize:r,size:c.size});l.on("error",a),l.pipe(n)}})});return t?o.then(t,t):o},yV=e=>new vV(e)});var SV=_((u$e,CV)=>{"use strict";var Rfe=qf(),b_=t_(),wV=rm(),EV=E_(),bV=require("path");CV.exports=(e,t,n)=>{if(typeof t=="function"&&(n=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);let r=Rfe(e);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?Afe(r,t):r.file?Dfe(r,t,n):r.sync?kfe(r,t):Ofe(r,t)};var Afe=(e,t)=>{let n=new b_.Sync(e),r=new wV.WriteStreamSync(e.file,{mode:e.mode||438});n.pipe(r),_V(n,t)},Dfe=(e,t,n)=>{let r=new b_(e),i=new wV.WriteStream(e.file,{mode:e.mode||438});r.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),r.on("error",a)});return FD(r,t),n?o.then(n,n):o},_V=(e,t)=>{t.forEach(n=>{n.charAt(0)==="@"?EV({file:bV.resolve(e.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>e.add(r)}):e.add(n)}),e.end()},FD=(e,t)=>{for(;t.length;){let n=t.shift();if(n.charAt(0)==="@")return EV({file:bV.resolve(e.cwd,n.slice(1)),noResume:!0,onentry:r=>e.add(r)}).then(r=>FD(e,t));e.add(n)}e.end()},kfe=(e,t)=>{let n=new b_.Sync(e);return _V(n,t),n},Ofe=(e,t)=>{let n=new b_(e);return FD(n,t),n}});var MD=_((l$e,kV)=>{"use strict";var Nfe=qf(),TV=t_(),Gi=require("fs"),IV=rm(),PV=E_(),RV=require("path"),AV=Gf();kV.exports=(e,t,n)=>{let r=Nfe(e);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),r.sync?Lfe(r,t):Mfe(r,t,n)};var Lfe=(e,t)=>{let n=new TV.Sync(e),r=!0,i,o;try{try{i=Gi.openSync(e.file,"r+")}catch(u){if(u.code==="ENOENT")i=Gi.openSync(e.file,"w+");else throw u}let s=Gi.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let l=0,d=0;l<512;l+=d){if(d=Gi.readSync(i,a,l,a.length-l,o+l),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!d)break e}let u=new AV(a);if(!u.cksumValid)break;let c=512*Math.ceil(u.size/512);if(o+c+512>s.size)break;o+=c,e.mtimeCache&&e.mtimeCache.set(u.path,u.mtime)}r=!1,Ffe(e,n,o,i,t)}finally{if(r)try{Gi.closeSync(i)}catch{}}},Ffe=(e,t,n,r,i)=>{let o=new IV.WriteStreamSync(e.file,{fd:r,start:n});t.pipe(o),Ufe(t,i)},Mfe=(e,t,n)=>{t=Array.from(t);let r=new TV(e),i=(s,a,u)=>{let c=(m,h)=>{m?Gi.close(s,v=>u(m)):u(null,h)},l=0;if(a===0)return c(null,0);let d=0,p=Buffer.alloc(512),f=(m,h)=>{if(m)return c(m);if(d+=h,d<512&&h)return Gi.read(s,p,d,p.length-d,l+d,f);if(l===0&&p[0]===31&&p[1]===139)return c(new Error("cannot append to compressed archives"));if(d<512)return c(null,l);let v=new AV(p);if(!v.cksumValid)return c(null,l);let g=512*Math.ceil(v.size/512);if(l+g+512>a||(l+=g+512,l>=a))return c(null,l);e.mtimeCache&&e.mtimeCache.set(v.path,v.mtime),d=0,Gi.read(s,p,0,512,l,f)};Gi.read(s,p,0,512,l,f)},o=new Promise((s,a)=>{r.on("error",a);let u="r+",c=(l,d)=>{if(l&&l.code==="ENOENT"&&u==="r+")return u="w+",Gi.open(e.file,u,c);if(l)return a(l);Gi.fstat(d,(p,f)=>{if(p)return Gi.close(d,()=>a(p));i(d,f.size,(m,h)=>{if(m)return a(m);let v=new IV.WriteStream(e.file,{fd:d,start:h});r.pipe(v),v.on("error",a),v.on("close",s),DV(r,t)})})};Gi.open(e.file,u,c)});return n?o.then(n,n):o},Ufe=(e,t)=>{t.forEach(n=>{n.charAt(0)==="@"?PV({file:RV.resolve(e.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>e.add(r)}):e.add(n)}),e.end()},DV=(e,t)=>{for(;t.length;){let n=t.shift();if(n.charAt(0)==="@")return PV({file:RV.resolve(e.cwd,n.slice(1)),noResume:!0,onentry:r=>e.add(r)}).then(r=>DV(e,t));e.add(n)}e.end()}});var NV=_((d$e,OV)=>{"use strict";var qfe=qf(),jfe=MD();OV.exports=(e,t,n)=>{let r=qfe(e);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),Hfe(r),jfe(r,t,n)};var Hfe=e=>{let t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(n,r)=>t(n,r)&&!(e.mtimeCache.get(n)>r.mtime):(n,r)=>!(e.mtimeCache.get(n)>r.mtime)}});var MV=_((p$e,FV)=>{var{promisify:LV}=require("util"),Du=require("fs"),$fe=e=>{if(!e)e={mode:511,fs:Du};else if(typeof e=="object")e={mode:511,fs:Du,...e};else if(typeof e=="number")e={mode:e,fs:Du};else if(typeof e=="string")e={mode:parseInt(e,8),fs:Du};else throw new TypeError("invalid options argument");return e.mkdir=e.mkdir||e.fs.mkdir||Du.mkdir,e.mkdirAsync=LV(e.mkdir),e.stat=e.stat||e.fs.stat||Du.stat,e.statAsync=LV(e.stat),e.statSync=e.statSync||e.fs.statSync||Du.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||Du.mkdirSync,e};FV.exports=$fe});var qV=_((f$e,UV)=>{var Bfe=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:Vfe,parse:Wfe}=require("path"),Gfe=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=Vfe(e),Bfe==="win32"){let t=/[*|"<>?:]/,{root:n}=Wfe(e);if(t.test(e.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e};UV.exports=Gfe});var VV=_((m$e,BV)=>{var{dirname:jV}=require("path"),HV=(e,t,n=void 0)=>n===t?Promise.resolve():e.statAsync(t).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?HV(e,jV(t),t):void 0),$V=(e,t,n=void 0)=>{if(n!==t)try{return e.statSync(t).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?$V(e,jV(t),t):void 0}};BV.exports={findMade:HV,findMadeSync:$V}});var jD=_((h$e,GV)=>{var{dirname:WV}=require("path"),UD=(e,t,n)=>{t.recursive=!1;let r=WV(e);return r===e?t.mkdirAsync(e,t).catch(i=>{if(i.code!=="EISDIR")throw i}):t.mkdirAsync(e,t).then(()=>n||e,i=>{if(i.code==="ENOENT")return UD(r,t).then(o=>UD(e,t,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return t.statAsync(e).then(o=>{if(o.isDirectory())return n;throw i},()=>{throw i})})},qD=(e,t,n)=>{let r=WV(e);if(t.recursive=!1,r===e)try{return t.mkdirSync(e,t)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return t.mkdirSync(e,t),n||e}catch(i){if(i.code==="ENOENT")return qD(e,t,qD(r,t,n));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!t.statSync(e).isDirectory())throw i}catch{throw i}}};GV.exports={mkdirpManual:UD,mkdirpManualSync:qD}});var KV=_((g$e,YV)=>{var{dirname:zV}=require("path"),{findMade:zfe,findMadeSync:Yfe}=VV(),{mkdirpManual:Kfe,mkdirpManualSync:Xfe}=jD(),Qfe=(e,t)=>(t.recursive=!0,zV(e)===e?t.mkdirAsync(e,t):zfe(t,e).then(r=>t.mkdirAsync(e,t).then(()=>r).catch(i=>{if(i.code==="ENOENT")return Kfe(e,t);throw i}))),Jfe=(e,t)=>{if(t.recursive=!0,zV(e)===e)return t.mkdirSync(e,t);let r=Yfe(t,e);try{return t.mkdirSync(e,t),r}catch(i){if(i.code==="ENOENT")return Xfe(e,t);throw i}};YV.exports={mkdirpNative:Qfe,mkdirpNativeSync:Jfe}});var ZV=_((v$e,JV)=>{var XV=require("fs"),Zfe=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,HD=Zfe.replace(/^v/,"").split("."),QV=+HD[0]>10||+HD[0]==10&&+HD[1]>=12,eme=QV?e=>e.mkdir===XV.mkdir:()=>!1,tme=QV?e=>e.mkdirSync===XV.mkdirSync:()=>!1;JV.exports={useNative:eme,useNativeSync:tme}});var oW=_((y$e,iW)=>{var om=MV(),sm=qV(),{mkdirpNative:eW,mkdirpNativeSync:tW}=KV(),{mkdirpManual:nW,mkdirpManualSync:rW}=jD(),{useNative:nme,useNativeSync:rme}=ZV(),am=(e,t)=>(e=sm(e),t=om(t),nme(t)?eW(e,t):nW(e,t)),ime=(e,t)=>(e=sm(e),t=om(t),rme(t)?tW(e,t):rW(e,t));am.sync=ime;am.native=(e,t)=>eW(sm(e),om(t));am.manual=(e,t)=>nW(sm(e),om(t));am.nativeSync=(e,t)=>tW(sm(e),om(t));am.manualSync=(e,t)=>rW(sm(e),om(t));iW.exports=am});var pW=_((x$e,dW)=>{"use strict";var bo=require("fs"),Td=require("path"),ome=bo.lchown?"lchown":"chown",sme=bo.lchownSync?"lchownSync":"chownSync",aW=bo.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),sW=(e,t,n)=>{try{return bo[sme](e,t,n)}catch(r){if(r.code!=="ENOENT")throw r}},ame=(e,t,n)=>{try{return bo.chownSync(e,t,n)}catch(r){if(r.code!=="ENOENT")throw r}},cme=aW?(e,t,n,r)=>i=>{!i||i.code!=="EISDIR"?r(i):bo.chown(e,t,n,r)}:(e,t,n,r)=>r,$D=aW?(e,t,n)=>{try{return sW(e,t,n)}catch(r){if(r.code!=="EISDIR")throw r;ame(e,t,n)}}:(e,t,n)=>sW(e,t,n),ume=process.version,cW=(e,t,n)=>bo.readdir(e,t,n),lme=(e,t)=>bo.readdirSync(e,t);/^v4\./.test(ume)&&(cW=(e,t,n)=>bo.readdir(e,n));var __=(e,t,n,r)=>{bo[ome](e,t,n,cme(e,t,n,i=>{r(i&&i.code!=="ENOENT"?i:null)}))},uW=(e,t,n,r,i)=>{if(typeof t=="string")return bo.lstat(Td.resolve(e,t),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=t,uW(e,s,n,r,i)});if(t.isDirectory())BD(Td.resolve(e,t.name),n,r,o=>{if(o)return i(o);let s=Td.resolve(e,t.name);__(s,n,r,i)});else{let o=Td.resolve(e,t.name);__(o,n,r,i)}},BD=(e,t,n,r)=>{cW(e,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return r();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return r(i)}if(i||!o.length)return __(e,t,n,r);let s=o.length,a=null,u=c=>{if(!a){if(c)return r(a=c);if(--s===0)return __(e,t,n,r)}};o.forEach(c=>uW(e,c,t,n,u))})},dme=(e,t,n,r)=>{if(typeof t=="string")try{let i=bo.lstatSync(Td.resolve(e,t));i.name=t,t=i}catch(i){if(i.code==="ENOENT")return;throw i}t.isDirectory()&&lW(Td.resolve(e,t.name),n,r),$D(Td.resolve(e,t.name),n,r)},lW=(e,t,n)=>{let r;try{r=lme(e,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return $D(e,t,n);throw i}return r&&r.length&&r.forEach(i=>dme(e,i,t,n)),$D(e,t,n)};dW.exports=BD;BD.sync=lW});var gW=_((w$e,VD)=>{"use strict";var fW=oW(),_o=require("fs"),C_=require("path"),mW=pW(),us=Vf(),S_=class extends Error{constructor(t,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=t}get name(){return"SylinkError"}},T_=class extends Error{constructor(t,n){super(n+": Cannot cd into '"+t+"'"),this.path=t,this.code=n}get name(){return"CwdError"}},I_=(e,t)=>e.get(us(t)),sy=(e,t,n)=>e.set(us(t),n),pme=(e,t)=>{_o.stat(e,(n,r)=>{(n||!r.isDirectory())&&(n=new T_(e,n&&n.code||"ENOTDIR")),t(n)})};VD.exports=(e,t,n)=>{e=us(e);let r=t.umask,i=t.mode|448,o=(i&r)!==0,s=t.uid,a=t.gid,u=typeof s=="number"&&typeof a=="number"&&(s!==t.processUid||a!==t.processGid),c=t.preserve,l=t.unlink,d=t.cache,p=us(t.cwd),f=(v,g)=>{v?n(v):(sy(d,e,!0),g&&u?mW(g,s,a,y=>f(y)):o?_o.chmod(e,i,n):n())};if(d&&I_(d,e)===!0)return f();if(e===p)return pme(e,f);if(c)return fW(e,{mode:i}).then(v=>f(null,v),f);let h=us(C_.relative(p,e)).split("/");P_(p,h,i,d,l,p,null,f)};var P_=(e,t,n,r,i,o,s,a)=>{if(!t.length)return a(null,s);let u=t.shift(),c=us(C_.resolve(e+"/"+u));if(I_(r,c))return P_(c,t,n,r,i,o,s,a);_o.mkdir(c,n,hW(c,t,n,r,i,o,s,a))},hW=(e,t,n,r,i,o,s,a)=>u=>{u?_o.lstat(e,(c,l)=>{if(c)c.path=c.path&&us(c.path),a(c);else if(l.isDirectory())P_(e,t,n,r,i,o,s,a);else if(i)_o.unlink(e,d=>{if(d)return a(d);_o.mkdir(e,n,hW(e,t,n,r,i,o,s,a))});else{if(l.isSymbolicLink())return a(new S_(e,e+"/"+t.join("/")));a(u)}}):(s=s||e,P_(e,t,n,r,i,o,s,a))},fme=e=>{let t=!1,n="ENOTDIR";try{t=_o.statSync(e).isDirectory()}catch(r){n=r.code}finally{if(!t)throw new T_(e,n)}};VD.exports.sync=(e,t)=>{e=us(e);let n=t.umask,r=t.mode|448,i=(r&n)!==0,o=t.uid,s=t.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==t.processUid||s!==t.processGid),u=t.preserve,c=t.unlink,l=t.cache,d=us(t.cwd),p=v=>{sy(l,e,!0),v&&a&&mW.sync(v,o,s),i&&_o.chmodSync(e,r)};if(l&&I_(l,e)===!0)return p();if(e===d)return fme(d),p();if(u)return p(fW.sync(e,r));let m=us(C_.relative(d,e)).split("/"),h=null;for(let v=m.shift(),g=d;v&&(g+="/"+v);v=m.shift())if(g=us(C_.resolve(g)),!I_(l,g))try{_o.mkdirSync(g,r),h=h||g,sy(l,g,!0)}catch{let x=_o.lstatSync(g);if(x.isDirectory()){sy(l,g,!0);continue}else if(c){_o.unlinkSync(g),_o.mkdirSync(g,r),h=h||g,sy(l,g,!0);continue}else if(x.isSymbolicLink())return new S_(g,g+"/"+m.join("/"))}return p(h)}});var GD=_((E$e,vW)=>{var WD=Object.create(null),{hasOwnProperty:mme}=Object.prototype;vW.exports=e=>(mme.call(WD,e)||(WD[e]=e.normalize("NFKD")),WD[e])});var EW=_((b$e,wW)=>{var yW=require("assert"),hme=GD(),gme=zf(),{join:xW}=require("path"),vme=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,yme=vme==="win32";wW.exports=()=>{let e=new Map,t=new Map,n=c=>c.split("/").slice(0,-1).reduce((d,p)=>(d.length&&(p=xW(d[d.length-1],p)),d.push(p||"/"),d),[]),r=new Set,i=c=>{let l=t.get(c);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(d=>e.get(d)),dirs:[...l.dirs].map(d=>e.get(d))}},o=c=>{let{paths:l,dirs:d}=i(c);return l.every(p=>p[0]===c)&&d.every(p=>p[0]instanceof Set&&p[0].has(c))},s=c=>r.has(c)||!o(c)?!1:(r.add(c),c(()=>a(c)),!0),a=c=>{if(!r.has(c))return!1;let{paths:l,dirs:d}=t.get(c),p=new Set;return l.forEach(f=>{let m=e.get(f);yW.equal(m[0],c),m.length===1?e.delete(f):(m.shift(),typeof m[0]=="function"?p.add(m[0]):m[0].forEach(h=>p.add(h)))}),d.forEach(f=>{let m=e.get(f);yW(m[0]instanceof Set),m[0].size===1&&m.length===1?e.delete(f):m[0].size===1?(m.shift(),p.add(m[0])):m[0].delete(c)}),r.delete(c),p.forEach(f=>s(f)),!0};return{check:o,reserve:(c,l)=>{c=yme?["win32 parallelization disabled"]:c.map(p=>hme(gme(xW(p))).toLowerCase());let d=new Set(c.map(p=>n(p)).reduce((p,f)=>p.concat(f)));return t.set(l,{dirs:d,paths:c}),c.forEach(p=>{let f=e.get(p);f?f.push(l):e.set(p,[l])}),d.forEach(p=>{let f=e.get(p);f?f[f.length-1]instanceof Set?f[f.length-1].add(l):f.push(new Set([l])):e.set(p,[new Set([l])])}),s(l)}}}});var CW=_((_$e,_W)=>{var xme=process.env.__FAKE_PLATFORM__||process.platform,wme=xme==="win32",Eme=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:bme,O_TRUNC:_me,O_WRONLY:Cme,UV_FS_O_FILEMAP:bW=0}=Eme.constants,Sme=wme&&!!bW,Tme=512*1024,Ime=bW|_me|bme|Cme;_W.exports=Sme?e=>e<Tme?Ime:"w":()=>"w"});var tk=_((C$e,UW)=>{"use strict";var Pme=require("assert"),Rme=w_(),ct=require("fs"),Ame=rm(),cc=require("path"),LW=gW(),SW=XA(),Dme=EW(),kme=QA(),zi=Vf(),Ome=zf(),Nme=GD(),TW=Symbol("onEntry"),KD=Symbol("checkFs"),IW=Symbol("checkFs2"),D_=Symbol("pruneCache"),XD=Symbol("isReusable"),Co=Symbol("makeFs"),QD=Symbol("file"),JD=Symbol("directory"),k_=Symbol("link"),PW=Symbol("symlink"),RW=Symbol("hardlink"),AW=Symbol("unsupported"),DW=Symbol("checkPath"),ku=Symbol("mkdir"),Pr=Symbol("onError"),R_=Symbol("pending"),kW=Symbol("pend"),cm=Symbol("unpend"),zD=Symbol("ended"),YD=Symbol("maybeClose"),ZD=Symbol("skip"),ay=Symbol("doChown"),cy=Symbol("uid"),uy=Symbol("gid"),ly=Symbol("checkedCwd"),FW=require("crypto"),MW=CW(),Lme=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,dy=Lme==="win32",Fme=(e,t)=>{if(!dy)return ct.unlink(e,t);let n=e+".DELETE."+FW.randomBytes(16).toString("hex");ct.rename(e,n,r=>{if(r)return t(r);ct.unlink(n,t)})},Mme=e=>{if(!dy)return ct.unlinkSync(e);let t=e+".DELETE."+FW.randomBytes(16).toString("hex");ct.renameSync(e,t),ct.unlinkSync(t)},OW=(e,t,n)=>e===e>>>0?e:t===t>>>0?t:n,NW=e=>Nme(Ome(zi(e))).toLowerCase(),Ume=(e,t)=>{t=NW(t);for(let n of e.keys()){let r=NW(n);(r===t||r.indexOf(t+"/")===0)&&e.delete(n)}},qme=e=>{for(let t of e.keys())e.delete(t)},py=class extends Rme{constructor(t){if(t||(t={}),t.ondone=n=>{this[zD]=!0,this[YD]()},super(t),this[ly]=!1,this.reservations=Dme(),this.transform=typeof t.transform=="function"?t.transform:null,this.writable=!0,this.readable=!1,this[R_]=0,this[zD]=!1,this.dirCache=t.dirCache||new Map,typeof t.uid=="number"||typeof t.gid=="number"){if(typeof t.uid!="number"||typeof t.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(t.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=t.uid,this.gid=t.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;t.preserveOwner===void 0&&typeof t.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!t.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=t.forceChown===!0,this.win32=!!t.win32||dy,this.newer=!!t.newer,this.keep=!!t.keep,this.noMtime=!!t.noMtime,this.preservePaths=!!t.preservePaths,this.unlink=!!t.unlink,this.cwd=zi(cc.resolve(t.cwd||process.cwd())),this.strip=+t.strip||0,this.processUmask=t.noChmod?0:process.umask(),this.umask=typeof t.umask=="number"?t.umask:this.processUmask,this.dmode=t.dmode||511&~this.umask,this.fmode=t.fmode||438&~this.umask,this.on("entry",n=>this[TW](n))}warn(t,n,r={}){return(t==="TAR_BAD_ARCHIVE"||t==="TAR_ABORT")&&(r.recoverable=!1),super.warn(t,n,r)}[YD](){this[zD]&&this[R_]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[DW](t){if(this.strip){let n=zi(t.path).split("/");if(n.length<this.strip)return!1;if(t.path=n.slice(this.strip).join("/"),t.type==="Link"){let r=zi(t.linkpath).split("/");if(r.length>=this.strip)t.linkpath=r.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let n=zi(t.path),r=n.split("/");if(r.includes("..")||dy&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:t,path:n}),!1;let[i,o]=kme(n);i&&(t.path=o,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:t,path:n}))}if(cc.isAbsolute(t.path)?t.absolute=zi(cc.resolve(t.path)):t.absolute=zi(cc.resolve(this.cwd,t.path)),!this.preservePaths&&t.absolute.indexOf(this.cwd+"/")!==0&&t.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:t,path:zi(t.path),resolvedPath:t.absolute,cwd:this.cwd}),!1;if(t.absolute===this.cwd&&t.type!=="Directory"&&t.type!=="GNUDumpDir")return!1;if(this.win32){let{root:n}=cc.win32.parse(t.absolute);t.absolute=n+SW.encode(t.absolute.slice(n.length));let{root:r}=cc.win32.parse(t.path);t.path=r+SW.encode(t.path.slice(r.length))}return!0}[TW](t){if(!this[DW](t))return t.resume();switch(Pme.equal(typeof t.absolute,"string"),t.type){case"Directory":case"GNUDumpDir":t.mode&&(t.mode=t.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[KD](t);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[AW](t)}}[Pr](t,n){t.name==="CwdError"?this.emit("error",t):(this.warn("TAR_ENTRY_ERROR",t,{entry:n}),this[cm](),n.resume())}[ku](t,n,r){LW(zi(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[ay](t){return this.forceChown||this.preserveOwner&&(typeof t.uid=="number"&&t.uid!==this.processUid||typeof t.gid=="number"&&t.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[cy](t){return OW(this.uid,t.uid,this.processUid)}[uy](t){return OW(this.gid,t.gid,this.processGid)}[QD](t,n){let r=t.mode&4095||this.fmode,i=new Ame.WriteStream(t.absolute,{flags:MW(t.size),mode:r,autoClose:!1});i.on("error",u=>{i.fd&&ct.close(i.fd,()=>{}),i.write=()=>!0,this[Pr](u,t),n()});let o=1,s=u=>{if(u){i.fd&&ct.close(i.fd,()=>{}),this[Pr](u,t),n();return}--o===0&&ct.close(i.fd,c=>{c?this[Pr](c,t):this[cm](),n()})};i.on("finish",u=>{let c=t.absolute,l=i.fd;if(t.mtime&&!this.noMtime){o++;let d=t.atime||new Date,p=t.mtime;ct.futimes(l,d,p,f=>f?ct.utimes(c,d,p,m=>s(m&&f)):s())}if(this[ay](t)){o++;let d=this[cy](t),p=this[uy](t);ct.fchown(l,d,p,f=>f?ct.chown(c,d,p,m=>s(m&&f)):s())}s()});let a=this.transform&&this.transform(t)||t;a!==t&&(a.on("error",u=>{this[Pr](u,t),n()}),t.pipe(a)),a.pipe(i)}[JD](t,n){let r=t.mode&4095||this.dmode;this[ku](t.absolute,r,i=>{if(i){this[Pr](i,t),n();return}let o=1,s=a=>{--o===0&&(n(),this[cm](),t.resume())};t.mtime&&!this.noMtime&&(o++,ct.utimes(t.absolute,t.atime||new Date,t.mtime,s)),this[ay](t)&&(o++,ct.chown(t.absolute,this[cy](t),this[uy](t),s)),s()})}[AW](t){t.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${t.type}`,{entry:t}),t.resume()}[PW](t,n){this[k_](t,t.linkpath,"symlink",n)}[RW](t,n){let r=zi(cc.resolve(this.cwd,t.linkpath));this[k_](t,r,"link",n)}[kW](){this[R_]++}[cm](){this[R_]--,this[YD]()}[ZD](t){this[cm](),t.resume()}[XD](t,n){return t.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!dy}[KD](t){this[kW]();let n=[t.path];t.linkpath&&n.push(t.linkpath),this.reservations.reserve(n,r=>this[IW](t,r))}[D_](t){t.type==="SymbolicLink"?qme(this.dirCache):t.type!=="Directory"&&Ume(this.dirCache,t.absolute)}[IW](t,n){this[D_](t);let r=a=>{this[D_](t),n(a)},i=()=>{this[ku](this.cwd,this.dmode,a=>{if(a){this[Pr](a,t),r();return}this[ly]=!0,o()})},o=()=>{if(t.absolute!==this.cwd){let a=zi(cc.dirname(t.absolute));if(a!==this.cwd)return this[ku](a,this.dmode,u=>{if(u){this[Pr](u,t),r();return}s()})}s()},s=()=>{ct.lstat(t.absolute,(a,u)=>{if(u&&(this.keep||this.newer&&u.mtime>t.mtime)){this[ZD](t),r();return}if(a||this[XD](t,u))return this[Co](null,t,r);if(u.isDirectory()){if(t.type==="Directory"){let c=!this.noChmod&&t.mode&&(u.mode&4095)!==t.mode,l=d=>this[Co](d,t,r);return c?ct.chmod(t.absolute,t.mode,l):l()}if(t.absolute!==this.cwd)return ct.rmdir(t.absolute,c=>this[Co](c,t,r))}if(t.absolute===this.cwd)return this[Co](null,t,r);Fme(t.absolute,c=>this[Co](c,t,r))})};this[ly]?o():i()}[Co](t,n,r){if(t){this[Pr](t,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[QD](n,r);case"Link":return this[RW](n,r);case"SymbolicLink":return this[PW](n,r);case"Directory":case"GNUDumpDir":return this[JD](n,r)}}[k_](t,n,r,i){ct[r](n,t.absolute,o=>{o?this[Pr](o,t):(this[cm](),t.resume()),i()})}},A_=e=>{try{return[null,e()]}catch(t){return[t,null]}},ek=class extends py{[Co](t,n){return super[Co](t,n,()=>{})}[KD](t){if(this[D_](t),!this[ly]){let o=this[ku](this.cwd,this.dmode);if(o)return this[Pr](o,t);this[ly]=!0}if(t.absolute!==this.cwd){let o=zi(cc.dirname(t.absolute));if(o!==this.cwd){let s=this[ku](o,this.dmode);if(s)return this[Pr](s,t)}}let[n,r]=A_(()=>ct.lstatSync(t.absolute));if(r&&(this.keep||this.newer&&r.mtime>t.mtime))return this[ZD](t);if(n||this[XD](t,r))return this[Co](null,t);if(r.isDirectory()){if(t.type==="Directory"){let s=!this.noChmod&&t.mode&&(r.mode&4095)!==t.mode,[a]=s?A_(()=>{ct.chmodSync(t.absolute,t.mode)}):[];return this[Co](a,t)}let[o]=A_(()=>ct.rmdirSync(t.absolute));this[Co](o,t)}let[i]=t.absolute===this.cwd?[]:A_(()=>Mme(t.absolute));this[Co](i,t)}[QD](t,n){let r=t.mode&4095||this.fmode,i=a=>{let u;try{ct.closeSync(o)}catch(c){u=c}(a||u)&&this[Pr](a||u,t),n()},o;try{o=ct.openSync(t.absolute,MW(t.size),r)}catch(a){return i(a)}let s=this.transform&&this.transform(t)||t;s!==t&&(s.on("error",a=>this[Pr](a,t)),t.pipe(s)),s.on("data",a=>{try{ct.writeSync(o,a,0,a.length)}catch(u){i(u)}}),s.on("end",a=>{let u=null;if(t.mtime&&!this.noMtime){let c=t.atime||new Date,l=t.mtime;try{ct.futimesSync(o,c,l)}catch(d){try{ct.utimesSync(t.absolute,c,l)}catch{u=d}}}if(this[ay](t)){let c=this[cy](t),l=this[uy](t);try{ct.fchownSync(o,c,l)}catch(d){try{ct.chownSync(t.absolute,c,l)}catch{u=u||d}}}i(u)})}[JD](t,n){let r=t.mode&4095||this.dmode,i=this[ku](t.absolute,r);if(i){this[Pr](i,t),n();return}if(t.mtime&&!this.noMtime)try{ct.utimesSync(t.absolute,t.atime||new Date,t.mtime)}catch{}if(this[ay](t))try{ct.chownSync(t.absolute,this[cy](t),this[uy](t))}catch{}n(),t.resume()}[ku](t,n){try{return LW.sync(zi(t),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[k_](t,n,r,i){try{ct[r+"Sync"](n,t.absolute),i(),t.resume()}catch(o){return this[Pr](o,t)}}};py.Sync=ek;UW.exports=py});var BW=_((S$e,$W)=>{"use strict";var jme=qf(),O_=tk(),jW=require("fs"),HW=rm(),qW=require("path"),nk=zf();$W.exports=(e,t,n)=>{typeof e=="function"?(n=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),typeof t=="function"&&(n=t,t=null),t?t=Array.from(t):t=[];let r=jme(e);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return t.length&&Hme(r,t),r.file&&r.sync?$me(r):r.file?Bme(r,n):r.sync?Vme(r):Wme(r)};var Hme=(e,t)=>{let n=new Map(t.map(o=>[nk(o),!0])),r=e.filter,i=(o,s)=>{let a=s||qW.parse(o).root||".",u=o===a?!1:n.has(o)?n.get(o):i(qW.dirname(o),a);return n.set(o,u),u};e.filter=r?(o,s)=>r(o,s)&&i(nk(o)):o=>i(nk(o))},$me=e=>{let t=new O_.Sync(e),n=e.file,r=jW.statSync(n),i=e.maxReadSize||16*1024*1024;new HW.ReadStreamSync(n,{readSize:i,size:r.size}).pipe(t)},Bme=(e,t)=>{let n=new O_(e),r=e.maxReadSize||16*1024*1024,i=e.file,o=new Promise((s,a)=>{n.on("error",a),n.on("close",s),jW.stat(i,(u,c)=>{if(u)a(u);else{let l=new HW.ReadStream(i,{readSize:r,size:c.size});l.on("error",a),l.pipe(n)}})});return t?o.then(t,t):o},Vme=e=>new O_.Sync(e),Wme=e=>new O_(e)});var N_=_(Fn=>{"use strict";Fn.c=Fn.create=SV();Fn.r=Fn.replace=MD();Fn.t=Fn.list=E_();Fn.u=Fn.update=NV();Fn.x=Fn.extract=BW();Fn.Pack=t_();Fn.Unpack=tk();Fn.Parse=w_();Fn.ReadEntry=Mb();Fn.WriteEntry=aD();Fn.Header=Gf();Fn.Pax=qb();Fn.types=BA()});var fy=_((I$e,VW)=>{var Gme="2.0.0",zme=Number.MAX_SAFE_INTEGER||9007199254740991,Yme=16,Kme=["major","premajor","minor","preminor","patch","prepatch","prerelease"];VW.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Yme,MAX_SAFE_INTEGER:zme,RELEASE_TYPES:Kme,SEMVER_SPEC_VERSION:Gme,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var my=_((P$e,WW)=>{var Xme=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};WW.exports=Xme});var um=_((uc,GW)=>{var{MAX_SAFE_COMPONENT_LENGTH:rk}=fy(),Qme=my();uc=GW.exports={};var Jme=uc.re=[],Zme=uc.safeRe=[],fe=uc.src=[],me=uc.t={},ehe=0,$e=(e,t,n)=>{let r=t.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),i=ehe++;Qme(e,i,t),me[e]=i,fe[i]=t,Jme[i]=new RegExp(t,n?"g":void 0),Zme[i]=new RegExp(r,n?"g":void 0)};$e("NUMERICIDENTIFIER","0|[1-9]\\d*");$e("NUMERICIDENTIFIERLOOSE","[0-9]+");$e("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");$e("MAINVERSION",`(${fe[me.NUMERICIDENTIFIER]})\\.(${fe[me.NUMERICIDENTIFIER]})\\.(${fe[me.NUMERICIDENTIFIER]})`);$e("MAINVERSIONLOOSE",`(${fe[me.NUMERICIDENTIFIERLOOSE]})\\.(${fe[me.NUMERICIDENTIFIERLOOSE]})\\.(${fe[me.NUMERICIDENTIFIERLOOSE]})`);$e("PRERELEASEIDENTIFIER",`(?:${fe[me.NUMERICIDENTIFIER]}|${fe[me.NONNUMERICIDENTIFIER]})`);$e("PRERELEASEIDENTIFIERLOOSE",`(?:${fe[me.NUMERICIDENTIFIERLOOSE]}|${fe[me.NONNUMERICIDENTIFIER]})`);$e("PRERELEASE",`(?:-(${fe[me.PRERELEASEIDENTIFIER]}(?:\\.${fe[me.PRERELEASEIDENTIFIER]})*))`);$e("PRERELEASELOOSE",`(?:-?(${fe[me.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${fe[me.PRERELEASEIDENTIFIERLOOSE]})*))`);$e("BUILDIDENTIFIER","[0-9A-Za-z-]+");$e("BUILD",`(?:\\+(${fe[me.BUILDIDENTIFIER]}(?:\\.${fe[me.BUILDIDENTIFIER]})*))`);$e("FULLPLAIN",`v?${fe[me.MAINVERSION]}${fe[me.PRERELEASE]}?${fe[me.BUILD]}?`);$e("FULL",`^${fe[me.FULLPLAIN]}$`);$e("LOOSEPLAIN",`[v=\\s]*${fe[me.MAINVERSIONLOOSE]}${fe[me.PRERELEASELOOSE]}?${fe[me.BUILD]}?`);$e("LOOSE",`^${fe[me.LOOSEPLAIN]}$`);$e("GTLT","((?:<|>)?=?)");$e("XRANGEIDENTIFIERLOOSE",`${fe[me.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);$e("XRANGEIDENTIFIER",`${fe[me.NUMERICIDENTIFIER]}|x|X|\\*`);$e("XRANGEPLAIN",`[v=\\s]*(${fe[me.XRANGEIDENTIFIER]})(?:\\.(${fe[me.XRANGEIDENTIFIER]})(?:\\.(${fe[me.XRANGEIDENTIFIER]})(?:${fe[me.PRERELEASE]})?${fe[me.BUILD]}?)?)?`);$e("XRANGEPLAINLOOSE",`[v=\\s]*(${fe[me.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[me.XRANGEIDENTIFIERLOOSE]})(?:\\.(${fe[me.XRANGEIDENTIFIERLOOSE]})(?:${fe[me.PRERELEASELOOSE]})?${fe[me.BUILD]}?)?)?`);$e("XRANGE",`^${fe[me.GTLT]}\\s*${fe[me.XRANGEPLAIN]}$`);$e("XRANGELOOSE",`^${fe[me.GTLT]}\\s*${fe[me.XRANGEPLAINLOOSE]}$`);$e("COERCE",`(^|[^\\d])(\\d{1,${rk}})(?:\\.(\\d{1,${rk}}))?(?:\\.(\\d{1,${rk}}))?(?:$|[^\\d])`);$e("COERCERTL",fe[me.COERCE],!0);$e("LONETILDE","(?:~>?)");$e("TILDETRIM",`(\\s*)${fe[me.LONETILDE]}\\s+`,!0);uc.tildeTrimReplace="$1~";$e("TILDE",`^${fe[me.LONETILDE]}${fe[me.XRANGEPLAIN]}$`);$e("TILDELOOSE",`^${fe[me.LONETILDE]}${fe[me.XRANGEPLAINLOOSE]}$`);$e("LONECARET","(?:\\^)");$e("CARETTRIM",`(\\s*)${fe[me.LONECARET]}\\s+`,!0);uc.caretTrimReplace="$1^";$e("CARET",`^${fe[me.LONECARET]}${fe[me.XRANGEPLAIN]}$`);$e("CARETLOOSE",`^${fe[me.LONECARET]}${fe[me.XRANGEPLAINLOOSE]}$`);$e("COMPARATORLOOSE",`^${fe[me.GTLT]}\\s*(${fe[me.LOOSEPLAIN]})$|^$`);$e("COMPARATOR",`^${fe[me.GTLT]}\\s*(${fe[me.FULLPLAIN]})$|^$`);$e("COMPARATORTRIM",`(\\s*)${fe[me.GTLT]}\\s*(${fe[me.LOOSEPLAIN]}|${fe[me.XRANGEPLAIN]})`,!0);uc.comparatorTrimReplace="$1$2$3";$e("HYPHENRANGE",`^\\s*(${fe[me.XRANGEPLAIN]})\\s+-\\s+(${fe[me.XRANGEPLAIN]})\\s*$`);$e("HYPHENRANGELOOSE",`^\\s*(${fe[me.XRANGEPLAINLOOSE]})\\s+-\\s+(${fe[me.XRANGEPLAINLOOSE]})\\s*$`);$e("STAR","(<|>)?=?\\s*\\*");$e("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");$e("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var L_=_((R$e,zW)=>{var the=Object.freeze({loose:!0}),nhe=Object.freeze({}),rhe=e=>e?typeof e!="object"?the:e:nhe;zW.exports=rhe});var ik=_((A$e,XW)=>{var YW=/^[0-9]+$/,KW=(e,t)=>{let n=YW.test(e),r=YW.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ihe=(e,t)=>KW(t,e);XW.exports={compareIdentifiers:KW,rcompareIdentifiers:ihe}});var Rr=_((D$e,eG)=>{var F_=my(),{MAX_LENGTH:QW,MAX_SAFE_INTEGER:M_}=fy(),{safeRe:JW,t:ZW}=um(),ohe=L_(),{compareIdentifiers:lm}=ik(),Yi=class{constructor(t,n){if(n=ohe(n),t instanceof Yi){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>QW)throw new TypeError(`version is longer than ${QW} characters`);F_("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=t.trim().match(n.loose?JW[ZW.LOOSE]:JW[ZW.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>M_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>M_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>M_||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<M_)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(F_("SemVer.compare",this.version,this.options,t),!(t instanceof Yi)){if(typeof t=="string"&&t===this.version)return 0;t=new Yi(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Yi||(t=new Yi(t,this.options)),lm(this.major,t.major)||lm(this.minor,t.minor)||lm(this.patch,t.patch)}comparePre(t){if(t instanceof Yi||(t=new Yi(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=t.prerelease[n];if(F_("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lm(r,i)}while(++n)}compareBuild(t){t instanceof Yi||(t=new Yi(t,this.options));let n=0;do{let r=this.build[n],i=t.build[n];if(F_("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lm(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),lm(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};eG.exports=Yi});var Id=_((k$e,nG)=>{var tG=Rr(),she=(e,t,n=!1)=>{if(e instanceof tG)return e;try{return new tG(e,t)}catch(r){if(!n)return null;throw r}};nG.exports=she});var iG=_((O$e,rG)=>{var ahe=Id(),che=(e,t)=>{let n=ahe(e,t);return n?n.version:null};rG.exports=che});var sG=_((N$e,oG)=>{var uhe=Id(),lhe=(e,t)=>{let n=uhe(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};oG.exports=lhe});var uG=_((L$e,cG)=>{var aG=Rr(),dhe=(e,t,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new aG(e instanceof aG?e.version:e,n).inc(t,r,i).version}catch{return null}};cG.exports=dhe});var pG=_((F$e,dG)=>{var lG=Id(),phe=(e,t)=>{let n=lG(e,null,!0),r=lG(t,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,s=o?n:r,a=o?r:n,u=!!s.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":s.patch?"patch":s.minor?"minor":"major";let l=u?"pre":"";return n.major!==r.major?l+"major":n.minor!==r.minor?l+"minor":n.patch!==r.patch?l+"patch":"prerelease"};dG.exports=phe});var mG=_((M$e,fG)=>{var fhe=Rr(),mhe=(e,t)=>new fhe(e,t).major;fG.exports=mhe});var gG=_((U$e,hG)=>{var hhe=Rr(),ghe=(e,t)=>new hhe(e,t).minor;hG.exports=ghe});var yG=_((q$e,vG)=>{var vhe=Rr(),yhe=(e,t)=>new vhe(e,t).patch;vG.exports=yhe});var wG=_((j$e,xG)=>{var xhe=Id(),whe=(e,t)=>{let n=xhe(e,t);return n&&n.prerelease.length?n.prerelease:null};xG.exports=whe});var So=_((H$e,bG)=>{var EG=Rr(),Ehe=(e,t,n)=>new EG(e,n).compare(new EG(t,n));bG.exports=Ehe});var CG=_(($$e,_G)=>{var bhe=So(),_he=(e,t,n)=>bhe(t,e,n);_G.exports=_he});var TG=_((B$e,SG)=>{var Che=So(),She=(e,t)=>Che(e,t,!0);SG.exports=She});var U_=_((V$e,PG)=>{var IG=Rr(),The=(e,t,n)=>{let r=new IG(e,n),i=new IG(t,n);return r.compare(i)||r.compareBuild(i)};PG.exports=The});var AG=_((W$e,RG)=>{var Ihe=U_(),Phe=(e,t)=>e.sort((n,r)=>Ihe(n,r,t));RG.exports=Phe});var kG=_((G$e,DG)=>{var Rhe=U_(),Ahe=(e,t)=>e.sort((n,r)=>Rhe(r,n,t));DG.exports=Ahe});var hy=_((z$e,OG)=>{var Dhe=So(),khe=(e,t,n)=>Dhe(e,t,n)>0;OG.exports=khe});var q_=_((Y$e,NG)=>{var Ohe=So(),Nhe=(e,t,n)=>Ohe(e,t,n)<0;NG.exports=Nhe});var ok=_((K$e,LG)=>{var Lhe=So(),Fhe=(e,t,n)=>Lhe(e,t,n)===0;LG.exports=Fhe});var sk=_((X$e,FG)=>{var Mhe=So(),Uhe=(e,t,n)=>Mhe(e,t,n)!==0;FG.exports=Uhe});var j_=_((Q$e,MG)=>{var qhe=So(),jhe=(e,t,n)=>qhe(e,t,n)>=0;MG.exports=jhe});var H_=_((J$e,UG)=>{var Hhe=So(),$he=(e,t,n)=>Hhe(e,t,n)<=0;UG.exports=$he});var ak=_((Z$e,qG)=>{var Bhe=ok(),Vhe=sk(),Whe=hy(),Ghe=j_(),zhe=q_(),Yhe=H_(),Khe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Bhe(e,n,r);case"!=":return Vhe(e,n,r);case">":return Whe(e,n,r);case">=":return Ghe(e,n,r);case"<":return zhe(e,n,r);case"<=":return Yhe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};qG.exports=Khe});var HG=_((e2e,jG)=>{var Xhe=Rr(),Qhe=Id(),{safeRe:$_,t:B_}=um(),Jhe=(e,t)=>{if(e instanceof Xhe)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match($_[B_.COERCE]);else{let r;for(;(r=$_[B_.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),$_[B_.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;$_[B_.COERCERTL].lastIndex=-1}return n===null?null:Qhe(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};jG.exports=Jhe});var GG=_((t2e,WG)=>{"use strict";var Zhe=Gb(),Pd=Symbol("max"),dc=Symbol("length"),dm=Symbol("lengthCalculator"),vy=Symbol("allowStale"),Rd=Symbol("maxAge"),lc=Symbol("dispose"),$G=Symbol("noDisposeOnSet"),Yn=Symbol("lruList"),ls=Symbol("cache"),VG=Symbol("updateAgeOnGet"),ck=()=>1,lk=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let n=this[Pd]=t.max||1/0,r=t.length||ck;if(this[dm]=typeof r!="function"?ck:r,this[vy]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rd]=t.maxAge||0,this[lc]=t.dispose,this[$G]=t.noDisposeOnSet||!1,this[VG]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Pd]=t||1/0,gy(this)}get max(){return this[Pd]}set allowStale(t){this[vy]=!!t}get allowStale(){return this[vy]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Rd]=t,gy(this)}get maxAge(){return this[Rd]}set lengthCalculator(t){typeof t!="function"&&(t=ck),t!==this[dm]&&(this[dm]=t,this[dc]=0,this[Yn].forEach(n=>{n.length=this[dm](n.value,n.key),this[dc]+=n.length})),gy(this)}get lengthCalculator(){return this[dm]}get length(){return this[dc]}get itemCount(){return this[Yn].length}rforEach(t,n){n=n||this;for(let r=this[Yn].tail;r!==null;){let i=r.prev;BG(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Yn].head;r!==null;){let i=r.next;BG(this,t,r,n),r=i}}keys(){return this[Yn].toArray().map(t=>t.key)}values(){return this[Yn].toArray().map(t=>t.value)}reset(){this[lc]&&this[Yn]&&this[Yn].length&&this[Yn].forEach(t=>this[lc](t.key,t.value)),this[ls]=new Map,this[Yn]=new Zhe,this[dc]=0}dump(){return this[Yn].map(t=>V_(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Yn]}set(t,n,r){if(r=r||this[Rd],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[dm](n,t);if(this[ls].has(t)){if(o>this[Pd])return pm(this,this[ls].get(t)),!1;let u=this[ls].get(t).value;return this[lc]&&(this[$G]||this[lc](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[dc]+=o-u.length,u.length=o,this.get(t),gy(this),!0}let s=new dk(t,n,o,i,r);return s.length>this[Pd]?(this[lc]&&this[lc](t,n),!1):(this[dc]+=s.length,this[Yn].unshift(s),this[ls].set(t,this[Yn].head),gy(this),!0)}has(t){if(!this[ls].has(t))return!1;let n=this[ls].get(t).value;return!V_(this,n)}get(t){return uk(this,t,!0)}peek(t){return uk(this,t,!1)}pop(){let t=this[Yn].tail;return t?(pm(this,t),t.value):null}del(t){pm(this,this[ls].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ls].forEach((t,n)=>uk(this,n,!1))}},uk=(e,t,n)=>{let r=e[ls].get(t);if(r){let i=r.value;if(V_(e,i)){if(pm(e,r),!e[vy])return}else n&&(e[VG]&&(r.value.now=Date.now()),e[Yn].unshiftNode(r));return i.value}},V_=(e,t)=>{if(!t||!t.maxAge&&!e[Rd])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Rd]&&n>e[Rd]},gy=e=>{if(e[dc]>e[Pd])for(let t=e[Yn].tail;e[dc]>e[Pd]&&t!==null;){let n=t.prev;pm(e,t),t=n}},pm=(e,t)=>{if(t){let n=t.value;e[lc]&&e[lc](n.key,n.value),e[dc]-=n.length,e[ls].delete(n.key),e[Yn].removeNode(t)}},dk=class{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}},BG=(e,t,n,r)=>{let i=n.value;V_(e,i)&&(pm(e,n),e[vy]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};WG.exports=lk});var To=_((n2e,XG)=>{var Ad=class{constructor(t,n){if(n=tge(n),t instanceof Ad)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new Ad(t.raw,n);if(t instanceof pk)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(r=>this.parseRange(r)).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!YG(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&cge(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let r=((this.options.includePrerelease&&sge)|(this.options.loose&&age))+":"+t,i=zG.get(r);if(i)return i;let o=this.options.loose,s=o?mi[Br.HYPHENRANGELOOSE]:mi[Br.HYPHENRANGE];t=t.replace(s,yge(this.options.includePrerelease)),Gt("hyphen replace",t),t=t.replace(mi[Br.COMPARATORTRIM],rge),Gt("comparator trim",t),t=t.replace(mi[Br.TILDETRIM],ige),t=t.replace(mi[Br.CARETTRIM],oge);let a=t.split(" ").map(d=>uge(d,this.options)).join(" ").split(/\s+/).map(d=>vge(d,this.options));o&&(a=a.filter(d=>(Gt("loose invalid filter",d,this.options),!!d.match(mi[Br.COMPARATORLOOSE])))),Gt("range list",a);let u=new Map,c=a.map(d=>new pk(d,this.options));for(let d of c){if(YG(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return zG.set(r,l),l}intersects(t,n){if(!(t instanceof Ad))throw new TypeError("a Range is required");return this.set.some(r=>KG(r,n)&&t.set.some(i=>KG(i,n)&&r.every(o=>i.every(s=>o.intersects(s,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new nge(t,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(xge(this.set[n],t,this.options))return!0;return!1}};XG.exports=Ad;var ege=GG(),zG=new ege({max:1e3}),tge=L_(),pk=yy(),Gt=my(),nge=Rr(),{safeRe:mi,t:Br,comparatorTrimReplace:rge,tildeTrimReplace:ige,caretTrimReplace:oge}=um(),{FLAG_INCLUDE_PRERELEASE:sge,FLAG_LOOSE:age}=fy(),YG=e=>e.value==="<0.0.0-0",cge=e=>e.value==="",KG=(e,t)=>{let n=!0,r=e.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,t)),i=r.pop();return n},uge=(e,t)=>(Gt("comp",e,t),e=pge(e,t),Gt("caret",e),e=lge(e,t),Gt("tildes",e),e=mge(e,t),Gt("xrange",e),e=gge(e,t),Gt("stars",e),e),Vr=e=>!e||e.toLowerCase()==="x"||e==="*",lge=(e,t)=>e.trim().split(/\s+/).map(n=>dge(n,t)).join(" "),dge=(e,t)=>{let n=t.loose?mi[Br.TILDELOOSE]:mi[Br.TILDE];return e.replace(n,(r,i,o,s,a)=>{Gt("tilde",e,r,i,o,s,a);let u;return Vr(i)?u="":Vr(o)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Vr(s)?u=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Gt("replaceTilde pr",a),u=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):u=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Gt("tilde return",u),u})},pge=(e,t)=>e.trim().split(/\s+/).map(n=>fge(n,t)).join(" "),fge=(e,t)=>{Gt("caret",e,t);let n=t.loose?mi[Br.CARETLOOSE]:mi[Br.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(i,o,s,a,u)=>{Gt("caret",e,i,o,s,a,u);let c;return Vr(o)?c="":Vr(s)?c=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Vr(a)?o==="0"?c=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:u?(Gt("replaceCaret pr",u),o==="0"?s==="0"?c=`>=${o}.${s}.${a}-${u} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}-${u} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a}-${u} <${+o+1}.0.0-0`):(Gt("no pr"),o==="0"?s==="0"?c=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:c=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:c=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Gt("caret return",c),c})},mge=(e,t)=>(Gt("replaceXRanges",e,t),e.split(/\s+/).map(n=>hge(n,t)).join(" ")),hge=(e,t)=>{e=e.trim();let n=t.loose?mi[Br.XRANGELOOSE]:mi[Br.XRANGE];return e.replace(n,(r,i,o,s,a,u)=>{Gt("xRange",e,r,i,o,s,a,u);let c=Vr(o),l=c||Vr(s),d=l||Vr(a),p=d;return i==="="&&p&&(i=""),u=t.includePrerelease?"-0":"",c?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(u="-0"),r=`${i+o}.${s}.${a}${u}`):l?r=`>=${o}.0.0${u} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),Gt("xRange return",r),r})},gge=(e,t)=>(Gt("replaceStars",e,t),e.trim().replace(mi[Br.STAR],"")),vge=(e,t)=>(Gt("replaceGTE0",e,t),e.trim().replace(mi[t.includePrerelease?Br.GTE0PRE:Br.GTE0],"")),yge=e=>(t,n,r,i,o,s,a,u,c,l,d,p,f)=>(Vr(r)?n="":Vr(i)?n=`>=${r}.0.0${e?"-0":""}`:Vr(o)?n=`>=${r}.${i}.0${e?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${e?"-0":""}`,Vr(c)?u="":Vr(l)?u=`<${+c+1}.0.0-0`:Vr(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:e?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${n} ${u}`.trim()),xge=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let r=0;r<e.length;r++)if(Gt(e[r].semver),e[r].semver!==pk.ANY&&e[r].semver.prerelease.length>0){let i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}});var yy=_((r2e,nz)=>{var xy=Symbol("SemVer ANY"),fm=class{static get ANY(){return xy}constructor(t,n){if(n=QG(n),t instanceof fm){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),mk("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===xy?this.value="":this.value=this.operator+this.semver.version,mk("comp",this)}parse(t){let n=this.options.loose?JG[ZG.COMPARATORLOOSE]:JG[ZG.COMPARATOR],r=t.match(n);if(!r)throw new TypeError(`Invalid comparator: ${t}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new ez(r[2],this.options.loose):this.semver=xy}toString(){return this.value}test(t){if(mk("Comparator.test",t,this.options.loose),this.semver===xy||t===xy)return!0;if(typeof t=="string")try{t=new ez(t,this.options)}catch{return!1}return fk(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof fm))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new tz(t.value,n).test(this.value):t.operator===""?t.value===""?!0:new tz(this.value,n).test(t.semver):(n=QG(n),n.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||fk(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||fk(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};nz.exports=fm;var QG=L_(),{safeRe:JG,t:ZG}=um(),fk=ak(),mk=my(),ez=Rr(),tz=To()});var wy=_((i2e,rz)=>{var wge=To(),Ege=(e,t,n)=>{try{t=new wge(t,n)}catch{return!1}return t.test(e)};rz.exports=Ege});var oz=_((o2e,iz)=>{var bge=To(),_ge=(e,t)=>new bge(e,t).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));iz.exports=_ge});var az=_((s2e,sz)=>{var Cge=Rr(),Sge=To(),Tge=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Sge(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new Cge(r,n))}),r};sz.exports=Tge});var uz=_((a2e,cz)=>{var Ige=Rr(),Pge=To(),Rge=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Pge(t,n)}catch{return null}return e.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Ige(r,n))}),r};cz.exports=Rge});var pz=_((c2e,dz)=>{var hk=Rr(),Age=To(),lz=hy(),Dge=(e,t)=>{e=new Age(e,t);let n=new hk("0.0.0");if(e.test(n)||(n=new hk("0.0.0-0"),e.test(n)))return n;n=null;for(let r=0;r<e.set.length;++r){let i=e.set[r],o=null;i.forEach(s=>{let a=new hk(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||lz(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!n||lz(n,o))&&(n=o)}return n&&e.test(n)?n:null};dz.exports=Dge});var mz=_((u2e,fz)=>{var kge=To(),Oge=(e,t)=>{try{return new kge(e,t).range||"*"}catch{return null}};fz.exports=Oge});var W_=_((l2e,yz)=>{var Nge=Rr(),vz=yy(),{ANY:Lge}=vz,Fge=To(),Mge=wy(),hz=hy(),gz=q_(),Uge=H_(),qge=j_(),jge=(e,t,n,r)=>{e=new Nge(e,r),t=new Fge(t,r);let i,o,s,a,u;switch(n){case">":i=hz,o=Uge,s=gz,a=">",u=">=";break;case"<":i=gz,o=qge,s=hz,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Mge(e,t,r))return!1;for(let c=0;c<t.set.length;++c){let l=t.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===Lge&&(f=new vz(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,r)?d=f:s(f.semver,p.semver,r)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===u&&s(e,p.semver))return!1}return!0};yz.exports=jge});var wz=_((d2e,xz)=>{var Hge=W_(),$ge=(e,t,n)=>Hge(e,t,">",n);xz.exports=$ge});var bz=_((p2e,Ez)=>{var Bge=W_(),Vge=(e,t,n)=>Bge(e,t,"<",n);Ez.exports=Vge});var Sz=_((f2e,Cz)=>{var _z=To(),Wge=(e,t,n)=>(e=new _z(e,n),t=new _z(t,n),e.intersects(t,n));Cz.exports=Wge});var Iz=_((m2e,Tz)=>{var Gge=wy(),zge=So();Tz.exports=(e,t,n)=>{let r=[],i=null,o=null,s=e.sort((l,d)=>zge(l,d,n));for(let l of s)Gge(l,t,n)?(o=l,i||(i=l)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[l,d]of r)l===d?a.push(l):!d&&l===s[0]?a.push("*"):d?l===s[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return u.length<c.length?u:t}});var Oz=_((h2e,kz)=>{var Pz=To(),vk=yy(),{ANY:gk}=vk,Ey=wy(),yk=So(),Yge=(e,t,n={})=>{if(e===t)return!0;e=new Pz(e,n),t=new Pz(t,n);let r=!1;e:for(let i of e.set){for(let o of t.set){let s=Xge(i,o,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Kge=[new vk(">=0.0.0-0")],Rz=[new vk(">=0.0.0")],Xge=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===gk){if(t.length===1&&t[0].semver===gk)return!0;n.includePrerelease?e=Kge:e=Rz}if(t.length===1&&t[0].semver===gk){if(n.includePrerelease)return!0;t=Rz}let r=new Set,i,o;for(let f of e)f.operator===">"||f.operator===">="?i=Az(i,f,n):f.operator==="<"||f.operator==="<="?o=Dz(o,f,n):r.add(f.semver);if(r.size>1)return null;let s;if(i&&o){if(s=yk(i.semver,o.semver,n),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let f of r){if(i&&!Ey(f,String(i),n)||o&&!Ey(f,String(o),n))return null;for(let m of t)if(!Ey(f,String(m),n))return!1;return!0}let a,u,c,l,d=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&o.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of t){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",i){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=Az(i,f,n),a===f&&a!==i)return!1}else if(i.operator===">="&&!Ey(i.semver,String(f),n))return!1}if(o){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=Dz(o,f,n),u===f&&u!==o)return!1}else if(o.operator==="<="&&!Ey(o.semver,String(f),n))return!1}if(!f.operator&&(o||i)&&s!==0)return!1}return!(i&&c&&!o&&s!==0||o&&l&&!i&&s!==0||p||d)},Az=(e,t,n)=>{if(!e)return t;let r=yk(e.semver,t.semver,n);return r>0?e:r<0||t.operator===">"&&e.operator===">="?t:e},Dz=(e,t,n)=>{if(!e)return t;let r=yk(e.semver,t.semver,n);return r<0?e:r>0||t.operator==="<"&&e.operator==="<="?t:e};kz.exports=Yge});var wk=_((g2e,Fz)=>{var xk=um(),Nz=fy(),Qge=Rr(),Lz=ik(),Jge=Id(),Zge=iG(),eve=sG(),tve=uG(),nve=pG(),rve=mG(),ive=gG(),ove=yG(),sve=wG(),ave=So(),cve=CG(),uve=TG(),lve=U_(),dve=AG(),pve=kG(),fve=hy(),mve=q_(),hve=ok(),gve=sk(),vve=j_(),yve=H_(),xve=ak(),wve=HG(),Eve=yy(),bve=To(),_ve=wy(),Cve=oz(),Sve=az(),Tve=uz(),Ive=pz(),Pve=mz(),Rve=W_(),Ave=wz(),Dve=bz(),kve=Sz(),Ove=Iz(),Nve=Oz();Fz.exports={parse:Jge,valid:Zge,clean:eve,inc:tve,diff:nve,major:rve,minor:ive,patch:ove,prerelease:sve,compare:ave,rcompare:cve,compareLoose:uve,compareBuild:lve,sort:dve,rsort:pve,gt:fve,lt:mve,eq:hve,neq:gve,gte:vve,lte:yve,cmp:xve,coerce:wve,Comparator:Eve,Range:bve,satisfies:_ve,toComparators:Cve,maxSatisfying:Sve,minSatisfying:Tve,minVersion:Ive,validRange:Pve,outside:Rve,gtr:Ave,ltr:Dve,intersects:kve,simplifyRange:Ove,subset:Nve,SemVer:Qge,re:xk.re,src:xk.src,tokens:xk.t,SEMVER_SPEC_VERSION:Nz.SEMVER_SPEC_VERSION,RELEASE_TYPES:Nz.RELEASE_TYPES,compareIdentifiers:Lz.compareIdentifiers,rcompareIdentifiers:Lz.rcompareIdentifiers}});var Ek=_((E2e,qz)=>{qz.exports=function(t,n,r){t(n),r&&r(n===!0?null:n)}});var z_=_((b2e,Hz)=>{"use strict";var jz=Ek();Hz.exports=function(t,n){if(!t)return function(i,o){return i?jz(o,i,n):o(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(i){return t[i]}));var r=0;return function(i,o){if(i)return jz(o,i,n);r>=t.length?o(!0):o(null,t[r++])}}});var Bz=_((_2e,$z)=>{"use strict";var Mve=z_();$z.exports=function(e){return Mve(Object.keys(e))}});var bk=_((C2e,Vz)=>{"use strict";var Uve=Ek();Vz.exports=function(t,n){return function(r,i){if(r)return Uve(i,r,n);if(t!=null){var o=t;t=null,i(null,o)}else i(!0)}}});var Gz=_((S2e,Wz)=>{"use strict";Wz.exports=function(t){var n=0;return t=t||1/0,function(r,i){if(r)return i&&i(r);if(n>t)return i(!0);i(null,n++)}}});var Yz=_((T2e,zz)=>{"use strict";zz.exports=function(t){return t=t||Math.random,function(n,r){return n?r&&r(n):r(null,t())}}});var Xz=_((I2e,Kz)=>{"use strict";Kz.exports=function(){return function(t,n){n(!0)}}});var Jz=_((P2e,Qz)=>{"use strict";Qz.exports=function(t){return function(n,r){r(t)}}});var e3=_((R2e,Zz)=>{"use strict";Zz.exports={keys:Bz(),once:bk(),values:z_(),count:Gz(),infinite:Yz(),empty:Xz(),error:Jz()}});var mm=_((A2e,t3)=>{"use strict";t3.exports=function(t,n){var r,i,o;n||(o=new Error("no done callback supplied"));function s(a){if(r=a,i)return s.abort();(function u(){for(var c=!0,l=!1;c;)if(l=!1,r(null,function(d,p){if(l=!0,d=d||i){if(c=!1,n)n(d===!0?null:d);else if(d&&d!==!0)throw console.warn(o),d}else t&&t(p)===!1||i?(c=!1,r(i||!0,n||function(){})):c||u()}),!l){c=!1;return}})()}return s.abort=function(a,u){if(typeof a=="function"&&(u=a,a=!0),i=a||!0,r)return r(i,u||function(){})},s}});var r3=_((D2e,n3)=>{"use strict";var qve=mm();n3.exports=function(t){return qve(null,t)}});var o3=_((k2e,i3)=>{"use strict";var jve=mm();i3.exports=function(t){return jve(function(n){console.log(n)},t)}});var hm=_((O2e,s3)=>{s3.exports=function(t){return t&&(typeof t=="string"?function(n){return n[t]}:typeof t=="object"&&typeof t.exec=="function"?function(n){var r=t.exec(n);return r&&r[0]}:t)}});var u3=_((N2e,c3)=>{"use strict";function a3(e){return e}var Hve=hm(),$ve=mm();c3.exports=function(t,n){var r=!1;return n?t=Hve(t)||a3:(n=t,t=a3),$ve(function(i){if(t(i))return r=!0,n(null,i),!1},function(i){r||n(i===!0?null:i,null)})}});var Y_=_((L2e,l3)=>{"use strict";var Bve=mm();l3.exports=function(t,n,r){r||(r=n,n=null);var i=Bve(function(o){n=t(n,o)},function(o){r(o,n)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return r(s===!0?null:s);n=a,i(o)})}:i}});var _k=_((F2e,d3)=>{"use strict";var Vve=Y_();d3.exports=function(t){return Vve(function(n,r){return n.push(r),n},[],t)}});var f3=_((M2e,p3)=>{"use strict";var Wve=_k();p3.exports=function(){return t=>{let n,r,i=new Promise((o,s)=>{n=o,r=s});return Wve((o,s)=>{o?r(o):n(s)})(t),i}}});var h3=_((U2e,m3)=>{"use strict";var Gve=Y_();m3.exports=function(t){return Gve(function(n,r){return n+r},"",t)}});var v3=_((q2e,g3)=>{"use strict";g3.exports={drain:mm(),onEnd:r3(),log:o3(),find:u3(),reduce:Y_(),collect:_k(),collectAsPromise:f3(),concat:h3()}});var x3=_((j2e,y3)=>{"use strict";function zve(e){return e}var Yve=hm();y3.exports=function(t){return t?(t=Yve(t),function(n){return function(r,i){n(r,function(o,s){try{s=o?null:t(s)}catch(a){return n(a,function(){return i(a)})}i(o,s)})}}):zve}});var E3=_((H2e,w3)=>{"use strict";function Kve(e){return e}var Xve=hm();w3.exports=function(t){if(!t)return Kve;t=Xve(t);var n=!1,r,i;return function(o){return function s(a,u){if(i)return u(i);a?(i=a,n?o(a,function(c){n?r=u:u(a)}):o(a,function(c){u(a)})):o(null,function(c,l){c?u(c):i?u(i):(n=!0,t(l,function(d,p){n=!1,i?(u(i),r&&r(i)):d?s(d,u):u(null,p)}))})}}}});var Ck=_(($2e,b3)=>{var Qve=hm();function Jve(e){return e}b3.exports=function(t){return typeof t=="object"&&typeof t.test=="function"?function(n){return t.test(n)}:Qve(t)||Jve}});var K_=_((B2e,_3)=>{"use strict";var Zve=Ck();_3.exports=function(t){return t=Zve(t),function(n){return function r(i,o){for(var s,a=!0;a;)a=!1,s=!0,n(i,function(u,c){if(!u&&!t(c))return s?a=!0:r(u,o);o(u,c)}),s=!1}}}});var S3=_((V2e,C3)=>{"use strict";var eye=Ck(),tye=K_();C3.exports=function(t){return t=eye(t),tye(function(n){return!t(n)})}});var I3=_((W2e,T3)=>{"use strict";T3.exports=function(t,n){var r=!1;function i(o){r||!n||(r=!0,n(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(u,c){u?i(u):t&&t(c),a(u,c)})}}}});var R3=_((G2e,P3)=>{"use strict";P3.exports=function(t,n){n=n||{};var r=n.last||!1,i=!1;if(typeof t=="number"){r=!0;var o=t;t=function(){return--o}}return function(s){function a(u){s(!0,function(c){r=!1,u(c||!0)})}return function(u,c){i&&!u?r?a(c):c(i):(i=u)?s(i,c):s(null,function(l,d){(i=i||l)?c(i):t(d)?c(null,d):(i=!0,r?c(null,d):a(c))})}}}});var Sk=_((z2e,A3)=>{"use strict";function nye(e){return e}var rye=hm(),iye=K_();A3.exports=function(t,n){t=rye(t)||nye;var r={};return iye(function(i){var o=t(i);return r[o]?!!n:(r[o]=!0,!n)})}});var k3=_((Y2e,D3)=>{"use strict";var oye=Sk();D3.exports=function(t){return oye(t,!0)}});var N3=_((K2e,O3)=>{"use strict";var sye=z_(),aye=bk();O3.exports=function(){return function(t){var n;return function(r,i){r?n?n(r,function(a){t(a||r,i)}):t(r,i):n?o():s();function o(){n(null,function(a,u){a?a===!0?s():t(!0,function(c){i(a)}):i(null,u)})}function s(){n=null,t(null,function(a,u){if(a)return i(a);u&&typeof u=="object"?u=sye(u):typeof u!="function"&&(u=aye(u)),n=u,o()})}}}}});var F3=_((X2e,L3)=>{"use strict";L3.exports={map:x3(),asyncMap:E3(),filter:K_(),filterNot:S3(),through:I3(),take:R3(),unique:Sk(),nonUnique:k3(),flatten:N3()}});var Tk=_((Q2e,M3)=>{"use strict";M3.exports=function e(t){var n=arguments.length;if(typeof t=="function"&&t.length===1){for(var r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var u=r;switch(r=null,n){case 1:return e(a,u[0]);case 2:return e(a,u[0],u[1]);case 3:return e(a,u[0],u[1],u[2]);case 4:return e(a,u[0],u[1],u[2],u[3]);default:return u.unshift(a),e.apply(null,u)}}}var o=t;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<n;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var _y=_((Dd,H3)=>{"use strict";var U3=e3(),q3=v3(),j3=F3();Dd=H3.exports=Tk();Dd.pull=Dd;for(ds in U3)Dd[ds]=U3[ds];var ds;for(ds in j3)Dd[ds]=j3[ds];var ds;for(ds in q3)Dd[ds]=q3[ds];var ds});var Uk=_((CBe,p4)=>{var _Be=p4.exports=function(e){(function t(){var n=!0,r=!1,i=!1;do i=!0,n=!1,e.call(this,function(){i?n=!0:t()}),i=!1;while(n)})()}});var m4=_((SBe,f4)=>{var xye=Uk();f4.exports=function(e,t){return function(n){var r=[],i,o;function s(c){r.push(c)}e=e||function(c){this.queue(c)},t=t||function(){this.queue(null)};var a={emit:function(c,l){c=="data"&&s(l),c=="end"&&(i=!0,s(null)),c=="error"&&(o=l)},queue:s},u;return function(c,l){if(i=i||c,c)return n(c,function(){if(u){var d=u;u=null,d(c)}l(c)});u=l,xye(function d(p){if(u)if(l=u,o)u=null,l(o);else if(r.length){var f=r.shift();u=null,l(f===null,f)}else n(i,function(m,h){if(m&&m!==!0)return o=m,p();if(i=i||m)t.call(a);else if(h!==null&&(e.call(a,h),o||i))return n(o||i,function(){u=null,l(o||i)});p(d)})})}}}});var g4=_((TBe,h4)=>{h4.exports=function(){var e=[],t=0;function n(){return e.reduce(function(r,i){return r+i.length},0)}return{length:t,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=t=t+r.length,e.push(r),this},has:function(r){return r==null?t>0:t>=r},get:function(r){var i;if(r==null||r===t){t=0;var o=e;return e=[],o.length==1?o[0]:Buffer.concat(o)}else if(e.length>1&&r<=(i=e[0].length)){var s=e[0].slice(0,r);return r===i?e.shift():e[0]=e[0].slice(r,i),t-=r,s}else if(r<t){for(var a=[],u=0;u+e[0].length<r;){var c=e.shift();u+=c.length,a.push(c)}return u<r&&(a.push(e[0].slice(0,r-u)),e[0]=e[0].slice(r-u,e[0].length),this.length=t=t-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var w4=_((IBe,x4)=>{"use strict";var wye=g4();function Eye(e){return Number.isFinite(e)}function v4(e){return typeof e=="function"}function y4(e,t){return t?function(n,r){var i=setTimeout(function(){e(new Error("pull-reader: read exceeded timeout"),r)},t);e(n,function(o,s){clearTimeout(i),r(o,s)})}:e}x4.exports=function(e){var t=[],n,r,i=!1,o=wye(),s,a,u;function c(){for(;t.length;)if(t[0].length==null&&o.has(1))t.shift().cb(null,o.get());else if(o.has(t[0].length)){var p=t.shift();p.cb(null,o.get(p.length))}else if(s==!0&&t[0].length&&o.length<t[0].length){var f="stream ended with:"+o.length+" but wanted:"+t[0].length;t.shift().cb(new Error(f))}else if(s)t.shift().cb(s);else return!!t.length;return t.length||!o.has(1)||u}function l(){var p=c();p&&!i&&n&&!i&&!a&&(i=!0,r(null,function(f,m){if(i=!1,f)return s=f,c();o.add(m),l()}))}function d(p){if(u){for(;t.length;)t.shift().cb(u);return cb&&cb(u)}r=y4(p,e),n=p,l()}return d.abort=function(p,f){u=p||!0,n?(i=!0,n(u,function(){for(;t.length;)t.shift().cb(u);f&&f(u)})):f()},d.read=function(p,f,m){if(v4(f)&&(m=f,f=e),v4(m))t.push({length:Eye(p)?p:null,cb:m}),l();else return a=!0,function(h,v){if(i||o.has(1)){if(h)return n(h,v);t.push({length:null,cb:v}),l()}else y4(n,f)(h,function(g,y){v(g,y)})}},d}});var k4=_((Od,D4)=>{var bye=m4(),_ye=w4(),E4=yu(),b4=0,_4=1,C4=2,S4="GOODBYE";function T4(e){let t=Buffer.alloc(9),n=0,r=e.value!==void 0?e.value:e.end;return typeof e=="string"&&e===S4?(t.fill(0),[t,null]):(typeof r=="string"?(n=_4,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=b4:(n=C4,r=Buffer.from(JSON.stringify(r),"utf-8")),n=e.stream<<3|e.end<<2|n,t[0]=n,t.writeUInt32BE(r.length,1),t.writeInt32BE(e.req||0,5),[t,r])}function I4(e){if(e.length!==9)throw new Error("expected header to be 9 bytes long");let t=e[0],n=e.readUInt32BE(1);return{req:e.readInt32BE(5),stream:!!(t&8),end:!!(t&4),value:null,length:n,type:t&3}}function P4(e,t){if(e.length!==t.length)throw new Error("incorrect length, expected:"+t.length+" found:"+e.length);if(t.type===b4)t.value=e;else if(t.type===_4)t.value=e.toString();else if(t.type===C4)t.value=JSON.parse(e.toString());else throw new Error("unknown message type");return t}function R4(e){return bye(function(n){e&&e("encoded: %o",n);let[r,i]=T4(n);this.queue(r),i!==null&&this.queue(i)})}function A4(e){let t=_ye(),n=!1;return function(i){return t(i),function(s,a){if(n)return a(!0);if(s)return t.abort(s,a);t.read(9,function(c,l){if(c)return a(c);let d=I4(l);if(d.length===0)return n=!0,a(null,S4);t.read(d.length,function(f,m){if(f)return a(f);try{P4(m,d)}catch(h){return a(h)}e&&e("decoded: %o",d),a(null,d)})})}}}Od=D4.exports=function(t,n){let r=n===!0?E4("packet-stream-codec"):typeof n=="string"?E4(n):null;return{source:R4(r)(t.source),sink(i){return t.sink(A4(r)(i))}}};Od.encodePair=T4;Od.decodeHead=I4;Od.decodeBody=P4;Od.encode=R4;Od.decode=A4});var qk=_((PBe,O4)=>{function Cye(e){return e&&(e===!0?!0:{message:e.message,name:e.name,stack:e.stack})}function Sye(e){console.error("packet-stream asked to read after closed",e)}O4.exports={flat:Cye,closedread:Sye}});var F4=_((RBe,L4)=>{var{flat:N4,closedread:Tye}=qk();function J_(e,t,n){this.id=e,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=t,this._remove=n}J_.prototype.write=function(e,t){let n=this._ps;t?(this.writeEnd=t,n&&(n.read({req:this.id,stream:!0,end:!0,value:N4(t)}),this.readEnd&&this.destroy(t),n._maybedone(t))):n&&n.read({req:this.id,stream:!0,end:!1,value:e})};J_.prototype.end=function(e){this.write(null,N4(e||!0))};J_.prototype.destroy=function(e){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,e)}catch(t){console.error("Exception thrown by PacketStream substream end handler",t),console.error(t.stack)}}this.write(null,e)}this._ps&&(this._remove(),this._remove=null,this.read=Tye,this._ps=null)};L4.exports=J_});var q4=_((ABe,U4)=>{var M4=F4(),{flat:jk,closedread:Iye}=qk();function Ro(e){this.ended=!1,this.opts=e,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,e.close&&this._closecbs.push(e.close)}Ro.prototype.message=function(e){this.read({req:0,stream:!1,end:!1,value:e})};Ro.prototype.request=function(e,t){if(this._closing)return t(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,i)=>{this._requests.delete(n),t(r,i),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:e})};Ro.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let e=this._req_counter++,t=new M4(e,this,()=>{this._outstreams.delete(e)});return this._outstreams.set(e,t),t};Ro.prototype.close=function(e){if(!e)throw new Error("packet-stream.close *must* have callback");if(this._closed)return e();this._closecbs.push(e),this._closing=!0,this._maybedone()};Ro.prototype.destroy=function(e){e=e||jk(e),this.ended=e,this._closing=!0;let t=e===!0?new Error("unexpected end of parent stream"):e,n=0;this._requests.forEach(r=>{n++,r(t)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(t)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(t)}),n===0&&e===!0&&(t=null),this._maybedone(t)};Ro.prototype._maybedone=function(e){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,e||!0),this._closed=!0,this._closecbs.forEach(t=>{t(e)}),this.opts=null,this._closecbs.length=0,this.read=Iye,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ro.prototype.read=function(e){console.error("please overwrite read method to do IO",e)};Ro.prototype.write=function(e,t){this.ended||(t?this.destroy(t):e.req&&!e.stream?this._onrequest(e):e.req&&e.stream?this._onstream(e):this._onmessage(e))};Ro.prototype._onmessage=function(e){this.opts&&typeof this.opts.message=="function"&&this.opts.message(e.value)};Ro.prototype._onrequest=function(e){let t=e.req*-1;if(e.req<0)this._requests.has(t)&&this._requests.get(t)(e.end?e.value:null,e.end?null:e.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(e.value,(r,i)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:jk(r),end:!0,req:t}):this.read({value:i,end:!1,req:t}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:jk(n),end:!0,stream:!1,req:t})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:t});this._maybedone()}};Ro.prototype._onstream=function(e){if(e.req<0){let t=e.req*-1,n=this._outstreams.get(t);if(!n)return console.error("no stream for incoming msg",e);e.end?(n.writeEnd&&this._outstreams.delete(t),n.readEnd=!0,n.read(null,e.value),this._maybedone()):n.read(e.value)}else{let t=e.req,n=this._instreams.get(t);n||(n=new M4(t*-1,this,()=>{this._instreams.delete(t)}),this._instreams.set(t,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),e.end?(n.writeEnd&&this._instreams.delete(t),n.readEnd=!0,n.read&&n.read(null,e.value),this._maybedone()):n.read?n.read(e.value):console.error("no .read for stream:",n.id,"dropped:",e)}};U4.exports=e=>new Ro(e)});var H4=_((DBe,Py)=>{"use strict";var Pye=_y();function Rye(e){let t=!1;return(n,r)=>{t||(t=!0,e(n,r))}}function Hk(e,t){let n=[],r=!1,i=!1,o,s,a=Rye((u,c)=>{t&&t(u,c),e=null,t=null,o=null,s&&s(u||!0,()=>{})});return e.read=function(u,c){if(r=r||c,o){let l=o;o=null,l(r,u)}else!r&&!i&&n.push(u);r&&a(r!==!0?r:null)},{source(u,c){u?(e&&e.write(null,u),c(u),n.length=0,i=!0,a(u!==!0?u:null)):n.length?c(null,n.shift()):r?c(r):o=c},sink(u){if(r)return s=null,u(r,()=>{});s=u,Pye.drain(c=>{if(r)return!1;e.write(c)},c=>{e&&!e.writeEnd&&e.write(null,c||!0),a&&a(c)})(u)}}}function j4(e,t){return Hk(e,n=>{e.writeEnd||e.write(null,n||!0),t&&t(n)})}function Aye(e){return j4(e).source}function Dye(e,t){return j4(e,t).sink}Py.exports=Hk;Py.exports.source=Aye;Py.exports.sink=Dye;Py.exports.duplex=Hk});var B4=_((kBe,$4)=>{$4.exports=function(t){var n,r,i;function o(s){return function(a,u){s(a,function(c,l){if(c&&!i)return i=!0,u(null,t);c&&n?u(c):c?r=u:u(null,l)})}}return o.end=function(){return n=!0,r&&r(n),o},o}});var W4=_((OBe,V4)=>{var kye=B4(),$k=_y();V4.exports=function(e,t){t=t||"GOODBYE";var n=kye(t);return{source:$k(e.source,n),sink:$k($k.filter(function(r){if(r!==t)return!0;n.end()}),e.sink)}}});var Ry=_(fs=>{"use strict";var Z_=_y();function Oye(e){return e?Object.keys(e).length===0:!0}fs.set=function(t,n,r){let i,o;for(let s=0;s<n.length;s++){let a=n[s];t[a]=t[a]||{},i=t,o=a,t=t[a]}i[o]=r};fs.get=function(t,n){if(typeof n=="string")return t[n];let r;for(let i=0;i<n.length;i++){let o=n[i];if(r=t=t[o],t==null)return t}return r};fs.prefix=function(t,n){let r;for(let i=0;i<n.length;i++){let o=n[i];if(r=t=t[o],typeof t!="object")return t}return typeof r!="object"?!!r:!1};function Nye(e,t){for(let n in t){let r=t[n];e[r]||(e[r]={}),e=e[r]}return e}function Lye(e,t){(function n(r,i){let o=t[i];if(r)t.length-1===i?delete r[o]:i<t.length&&n(r[o],i+1);else return;Oye(r[o])&&delete r[o]})(e,0)}function Fye(e,t){for(let n in t)e[n]=t[n];return e}fs.mount=function(t,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return Fye(Nye(t,n),r)};fs.unmount=function(t,n){return Lye(t,n)};var eC=e=>e==="source",tC=e=>e==="sink",Bk=e=>e==="duplex",Mye=e=>e==="sync",Uye=e=>e==="async",G4=e=>Mye(e)||Uye(e),qye=e=>eC(e)||tC(e)||Bk(e);fs.isRequest=G4;fs.isStream=qye;function Vk(e){return function(t){t(e||!0,()=>{})}}function z4(e){return{source:Z_.error(e),sink:Vk(e)}}fs.errorAsStream=function(t,n){return eC(t)?Z_.error(n):tC(t)?Vk(n):z4(n)};fs.errorAsStreamOrCb=function(t,n,r){return G4(t)?r(n):Bk(t)?z4(n):eC(t)?Z_.error(n):tC(t)?Vk(n):r(n)};fs.pipeToStream=function(t,n,r){eC(t)?n(r):tC(t)?r(n):Bk(t)&&Z_(n,r,n)}});var Wk=_((LBe,Y4)=>{"use strict";function jye(e){return typeof e=="string"?[`Error: ${e}`]:e.stack?e.stack.split(`
`):[`${e.name}: ${e.message}`]}Y4.exports=function(t,n){let r=new Error(n),i=r.stack.split(`
`);i.splice(1,1);let o=jye(t);o[0]="  "+o[0];for(let s=1;s<i.length;s++)if(o.includes(i[s])){i.splice(s);break}return r.stack=i.concat(o).join(`
`),r}});var J4=_((FBe,Q4)=>{"use strict";var Hye=q4(),Gk=H4(),$ye=W4(),gm=Ry(),K4=Wk(),X4=yu()("muxrpc:psc");Q4.exports=function(t,n,r){let i=Hye({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let u=s.name,c=s.args,l=!1,d=!1;c.push((p,f)=>{d=!0,l=!0,a(p,f)});try{t("async",u,c)}catch(p){if(l||d)throw K4(p,"no callback provided to muxrpc async funtion");a(p)}},stream(s){s.read=function(u,c){if(c)return s.write(null,c);let{name:l,type:d,args:p}=u,f,m;if(s.read=null,!gm.isStream(d))return s.write(null,new Error(`unsupported stream type: ${d}`));try{m=t(d,l,p)}catch(g){f=g}let v=Gk[d==="source"?"sink":d==="sink"?"source":"duplex"](s);return gm.pipeToStream(d,v,f?gm.errorAsStream(d,f):m)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,r)){let a=r;r=null,a(s)}}}),o=$ye(Gk(i,()=>{}));return o=n?n(o,X4.enabled?X4.namespace:!1):o,o.remoteCall=function(s,a,u,c){if(a==="emit")return i.message(u);if(!(gm.isRequest(s)||gm.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(gm.isRequest(s))return i.request({name:a,args:u},c);let l=i.stream(),d=Gk[s](l,c);return l.write({name:a,args:u,type:s}),d},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(u=>{if(a)a(u);else if(u)throw K4(u,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var eY=_((MBe,Z4)=>{"use strict";var Bye=Wk(),Vye=Ry();function zk(e,t,n,r){for(let i in t){let o=t[i],s=n?n.concat(i):[i];if(o&&typeof o=="object"){let a=o;e[i]=zk({},a,s,r)}else{let a=o;e[i]=(...u)=>r(a,s,u)}}return e}function Wye(e){if(e)throw Bye(e,"callback not provided")}function Gye(e,t,n,r){e=e||{};function i(o,s,a){let u=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:Wye;if(typeof u=="function"){let c;try{c=n(o,s,a,u)}catch(l){return Vye.errorAsStreamOrCb(o,l,u)}return c}else return new Promise((c,l)=>{n(o,s,a,(d,p)=>{d?l(d):c(p)})})}return r?i("async","manifest",[function(o,s){if(o)return r(o);zk(e,s,null,i),r(null,s,e)}]):zk(e,t,null,i),e}Z4.exports=Gye});var rY=_((UBe,nY)=>{"use strict";var nC=Ry();function tY(e){return Array.isArray(e)?e:e.split(".")}function zye(e){return e&&typeof e.pre=="function"&&typeof e.test=="function"&&typeof e.post=="function"}nY.exports=function(t){if(zye(t))return t;if(typeof t=="function")return{pre:t};let n=null,r={};function i(o){if(o.allow){n={};for(let s of o.allow)nC.set(n,tY(s),!0)}else n=null;if(o.deny)for(let s of o.deny)nC.set(r,tY(s),!0);else r={};return this}return t&&i(t),i.pre=o=>{if(o=Array.isArray(o)?o:[o],n&&!nC.prefix(n,o))return new Error(`method:${o} is not in list of allowed methods`);if(r&&nC.prefix(r,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:n,deny:r}),i}});var oY=_((qBe,iY)=>{"use strict";var Yye=rY(),Yk=Ry();iY.exports=function(t,n,r){r=Yye(r);function i(s,a){return s===Yk.get(n,a)}function o(s,a,u){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let c=u.pop(),l;try{l=Yk.get(t,a).apply(this,u)}catch(d){return c(d)}return c(null,l)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return Yk.get(t,a).apply(this,u)}return function(a,u,c){let l=r.pre(u,c);if(l)throw l;return o.call(this,a,u,c)}}});var cY=_((jBe,aY)=>{"use strict";var Kye=k4(),Xye=require("events").EventEmitter,Qye=J4(),Jye=eY(),Zye=oY();function sY(e,t,n,r,i,o,s){let a;typeof e=="function"&&(a=e,e={}),t=t||{},e=e||{};let u=new Xye;o||(o=Kye);let c,l={_emit(p,f){return u&&u._emit(p,f),l},id:r},d=Qye(Zye(n,t,i).bind(l),o,p=>{if(!u.closed&&(u.closed=!0,u.emit("closed"),c)){let f=c;c=null,f(p)}});if(Jye(u,e,(p,f,m,h)=>{if(d.closed)throw new Error("stream is closed");return d.remoteCall(p,f,m,h)},a),u._emit=u.emit,s){Object.__defineGetter__.call(u,"id",()=>l.id),Object.__defineSetter__.call(u,"id",f=>{l.id=f});let p=!0;u.createStream=f=>{if(c=f,p)return p=!1,d;throw new Error("one stream per rpc")}}else u.stream=d;return u.closed=!1,u.close=function(p,f){return d.close(p,f),this},u}aY.exports=function(e,t,n){return arguments.length>3?sY.apply(this,arguments):function(r,i,o){return sY(e,t,r,o,i,n,!0)}}});var Kk=_((mc,dY)=>{var HBe=Tk(),exe=Uk();function uY(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function lY(e,t,n){var r,i=!1,o;function s(){o||(o=!0,n&&n(r===!0?null:r))}function a(){i||(i=!0,c(),r?s():e(r=!0,s))}function u(l){c(),r||e(r=l,s)}function c(){t.on("finish",a),t.removeListener("close",a),t.removeListener("error",u)}t.on("close",a),t.on("finish",a),t.on("error",u),process.nextTick(function(){exe(function(l){e(null,function(d,p){if(r=r||d,d===!0)return t._isStdio?s():t.end();if(r=r||d)return uY(t),s(r);if(t._isStdio)t.write(p,function(){l()});else{var f=t.write(p);f===!1?t.once("drain",l):l()}})})})}function txe(e){var t=!1,n=!1,r;function i(){var o=e.read();if(o!==null&&r){var s=r;r=null,s(null,o)}}return e.on("readable",function(){n=!0,r&&i()}).on("end",function(){t=!0,r&&r(t)}).on("error",function(o){t=o,r&&r(t)}),function(o,s){r=s,t?s(t):n&&i()}}function rC(e){var t=[],n=[],r,i=!1,o;function s(){for(;(t.length||r)&&n.length;)n.shift()(t.length?null:r,t.shift());!t.length&&i&&(i=!1,e.resume())}return e.on("data",function(a){t.push(a),s(),t.length&&e.pause&&(i=!0,e.pause())}),e.on("end",function(){r=!0,s()}),e.on("close",function(){r=!0,s()}),e.on("error",function(a){r=a,s()}),function(a,u){if(!u)throw new Error("*must* provide cb");if(a){let l=function(){for(;n.length;)n.shift()(a);u(a)};var c=l;if(r)return l();e.once("close",l),uY(e)}else n.push(u),s()}}var nxe=rC,iC=function(e,t){return function(n){return lY(n,e,t)}},oC=function(e){return rC(e)};mc=dY.exports=function(e,t){return e.writable&&e.write?e.readable?function(n){return lY(n,e,t),rC(e)}:iC(e,t):oC(e)};mc.sink=iC;mc.source=oC;mc.read=nxe;mc.read1=rC;mc.read2=txe;mc.duplex=function(e,t){return{source:oC(e),sink:iC(e,t)}};mc.transform=function(e){return function(t){var n=oC(e);return iC(e)(t),n}}});var fY=_(($Be,sC)=>{var rxe=require("stream");sC.exports=Xk;sC.exports.source=function(e){return Xk(null,e)};sC.exports.sink=function(e){return Xk(e,null)};var pY=typeof setImmediate>"u"?process.nextTick:setImmediate;function Xk(e,t){e&&typeof e=="object"&&(t=e.source,e=e.sink);var n=[],r=[],i,o,s=new rxe;s.writable=s.readable=!0,s.write=function(v){return n.length?n.shift()(null,v):r.push(v),n.length||(o=!0),!!n.length},s.end=function(){t?r.length?h():t(i=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(v,g){r.length?(g(null,r.shift()),r.length||s.emit("drain")):((i=i||v)?g(i):n.push(g),o&&(o=!1,s.emit("drain")))};var a;e&&(a=e(s.source)),a&&!t&&(t=a);var u=[],c=[],l=!1,d=!1,p=!1;if(s.sink=function(v){t=v,pY(h)},t){s.sink(t),s.paused=!0;var f=s.on.bind(s);s.on=(v,g)=>{var y=f(v,g);return v==="data"&&s.paused&&pY(s.resume.bind(s)),y};var m=s.pipe.bind(s);s.pipe=function(v,g){var y=m(v,g);return s.paused&&s.resume(),y}}function h(){if(d=!1,!(!t||p)){for(;u.length&&!s.paused;)s.emit("data",u.shift());if(!s.paused){if(l)return s.emit("end");p=!0,t(null,function v(g,y){p=!1,s.paused?(g===!0?l=g:g?s.emit("error",g):u.push(y),d=!0):g&&(i=g)!==!0?s.emit("error",g):(i=i||g)?s.emit("end"):(s.emit("data",y),p=!0,t(null,v))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!i&&t&&t(i=!0,function(){}),i=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var hY=_((BBe,mY)=>{mY.exports=ixe;function ixe(e,t){typeof e=="function"&&(t=e,e=!1);var n=[],r,i;function o(d,p){d&&(r=d,i&&l(r)),i=p,c()}var s;function a(d){s=s||d||!0,c()}function u(d){if(!s){if(i){l(r,d);return}n.push(d)}}if(e)return{push:u,end:a,source:o,buffer:n};return o.push=u,o.end=a,o.buffer=n,o;function c(){i&&(r?l(r):!n.length&&s?l(s):n.length&&l(null,n.shift()))}function l(d,p){var f=i;if(d&&t){var m=t;t=null,m(d===!0?null:d)}i=null,f(d,p)}}});var fO=_((SWe,$Y)=>{"use strict";var jY=require("child_process"),Dxe=1024*1024,HY={exec(e,t){jY.exec(e,{maxBuffer:2*Dxe,windowsHide:!0},t)},spawn(e,t,n){return jY.spawn(e,t,n)},stripLine(e,t){let n=0;for(;t-- >0;){let r=e.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?e.substring(n):e},split(e,t){let n=e.trim().split(/\s+/);return n.length>t&&(n[t-1]=n.slice(t-1).join(" ")),n},extractColumns(e,t,n){let r=e.split(/(\r\n|\n|\r)/),i=[];return n||(n=Math.max.apply(null,t)+1),r.forEach(o=>{let s=HY.split(o,n),a=[];t.forEach(u=>{a.push(s[u]||"")}),i.push(a)}),i},parseTable(e){let t=e.split(/(\r\n\r\n|\r\n\n|\n\r\n)|\n\n/).filter(n=>n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return t.forEach(n=>{for(let r=0;n[r];){let i=n[r];i.startsWith(" ")?(n[r-1]+=i.trimLeft(),n.splice(r,1)):r+=1}}),t.map(n=>{let r={};return n.forEach(i=>{let o=i.indexOf(":"),s=i.slice(0,o).trim();r[s]=i.slice(o+1).trim()}),r})}};$Y.exports=HY});var VY=_((TWe,BY)=>{"use strict";var kxe=require("os"),CC=require("fs"),Ao=fO(),Oxe=e=>new Promise((t,n)=>{CC.existsSync(e)?t():CC.mkdir(e,r=>{r?n(r):t()})}),mO={darwin(e){return new Promise((t,n)=>{Ao.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,i,o){if(r)n(r);else{if(r=o.toString().trim(),r){n(r);return}let s=Ao.stripLine(i.toString(),2),a=Ao.extractColumns(s,[0,3,8],10).filter(u=>!!String(u[0]).match(/^(udp|tcp)/)).find(u=>{let c=String(u[1]).match(/\.(\d+)$/);if(c&&c[1]===String(e))return!0});a&&a[2].length?t(parseInt(a[2],10)):n(new Error(`pid of port (${e}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(e){return new Promise((t,n)=>{let r="netstat -tunlp";Ao.exec(r,function(i,o,s){if(i)n(i);else{let a=s.toString().trim();a&&console.warn(a);let u=Ao.stripLine(o.toString(),2),c=Ao.extractColumns(u,[3,6],7).find(l=>{let d=String(l[0]).match(/:(\d+)$/);if(d&&d[1]===String(e))return!0});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?t(parseInt(l,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}})})},win32(e){return new Promise((t,n)=>{Ao.exec("netstat -ano",function(r,i,o){if(r)n(r);else{if(r=o.toString().trim(),r){n(r);return}let s=Ao.stripLine(i.toString(),4),a=Ao.extractColumns(s,[1,4],5).find(u=>{let c=String(u[0]).match(/:(\d+)$/);if(c&&c[1]===String(e))return!0});a&&a[1].length&&parseInt(a[1],10)>0?t(parseInt(a[1],10)):n(new Error(`pid of port (${e}) not found`))}})})},android(e){return new Promise((t,n)=>{let r=kxe.tmpdir()+"/.find-process",i=r+"/"+process.pid,o='netstat -tunp >> "'+i+'"';Oxe(r).then(()=>{Ao.exec(o,()=>{CC.readFile(i,"utf8",(s,a)=>{if(CC.unlink(i,()=>{}),s)n(s);else{a=Ao.stripLine(a,2);let u=Ao.extractColumns(a,[3,6],7).find(c=>{let l=String(c[0]).match(/:(\d+)$/);if(l&&l[1]===String(e))return!0});if(u&&u[1]){let c=u[1].split("/",1)[0];c.length?t(parseInt(c,10)):n(new Error(`pid of port (${e}) not found`))}else n(new Error(`pid of port (${e}) not found`))}})})})})}};function Nxe(e){let t=process.platform;return new Promise((n,r)=>{if(!(t in mO))return r(new Error(`platform ${t} is unsupported`));let i=mO[t];typeof i=="string"&&(i=mO[i]),i(e).then(n,r)})}BY.exports=Nxe});var YY=_((IWe,zY)=>{"use strict";var SC=require("path"),qu=fO();function hO(e,t){return t?e&&e.match?e.match(t):!1:!0}function WY(e){let t=e.split(SC.sep),n=t[t.length-1];n&&(t[t.length-1]=n.split(" ")[0]);let r=[];for(let i of t){let o=i.indexOf(" -");if(o>=0){r.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){r.push(i.trim());break}r.push(i)}return r.join(SC.sep)}function GY(e){if(process.platform==="darwin"){let t=e.indexOf(".app/");if(t>=0)return SC.basename(e.substring(0,t))}return SC.basename(e)}var gO={darwin(e){return new Promise((t,n)=>{let r;"pid"in e?r=`ps -p ${e.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",qu.exec(r,function(i,o,s){if(i)"pid"in e?t([]):n(i);else{if(i=s.toString().trim(),i){n(i);return}let a=qu.stripLine(o.toString(),1),c=qu.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[4]&&e.name?hO(l[4],e.name):!!l[0]).map(l=>{let d=String(l[4]),p=WY(d);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:GY(p),bin:p,cmd:l[4]}});e.strict&&e.name&&(c=c.filter(l=>l.name===e.name)),t(c)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(e){return new Promise((t,n)=>{let r="Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",i=[],o=qu.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=qu.parseTable(i.join("")).filter(u=>{if("pid"in e)return u.ProcessId===String(e.pid);if(e.name){let c=u.Name||"";return e.strict?c===e.name||c.endsWith(".exe")&&c.slice(0,-4)===e.name:hO(u.CommandLine||c,e.name)}else return!0}).map(u=>({pid:parseInt(u.ProcessId,10),ppid:parseInt(u.ParentProcessId,10),bin:u.ExecutablePath,name:u.Name||"",cmd:u.CommandLine}));t(a)})})},android(e){return new Promise((t,n)=>{let r="ps";qu.exec(r,function(i,o,s){if(i)"pid"in e?t([]):n(i);else{if(i=s.toString().trim(),i){n(i);return}let a=qu.stripLine(o.toString(),1),c=qu.extractColumns(a,[0,3],4).filter(l=>l[0]&&e.pid?l[0]===String(e.pid):l[1]&&e.name?hO(l[1],e.name):!!l[0]).map(l=>{let d=String(l[1]),p=WY(d);return{pid:parseInt(l[0],10),name:GY(p),bin:p,cmd:d}});e.strict&&e.name&&(c=c.filter(l=>l.name===e.name)),t(c)}})})}};function Lxe(e){let t=process.platform;return new Promise((n,r)=>{if(!(t in gO))return r(new Error(`platform ${t} is unsupported`));let i=gO[t];typeof i=="string"&&(i=gO[i]),i(e).then(n,r)})}zY.exports=Lxe});var QY=_((PWe,XY)=>{"use strict";var Fxe=VY(),KY=YY(),vO={port(e,t){return Fxe(e,t).then(n=>vO.pid(n,t),()=>[])},pid(e,t){return KY({pid:e,strict:t})},name(e,t){return KY({name:e,strict:t})}};function Mxe(e,t,n){return new Promise((r,i)=>{if(!(e in vO))i(new Error(`do not support find by "${e}"`));else{let o=/^\d+$/.test(t);e==="pid"&&!o?i(new Error("pid must be a number")):e==="port"&&!o?i(new Error("port must be a number")):vO[e](t,n).then(r,i)}})}XY.exports=Mxe});var ZY=_((RWe,JY)=>{"use strict";JY.exports=QY()});var S5=_(xS=>{"use strict";Object.defineProperty(xS,"__esModule",{value:!0});xS.BaseTelemetryReporter=void 0;var xN=class{constructor(t,n,r){this.telemetrySender=t,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(t,n,r,i){i?this.telemetrySender.sendEventData(t,{properties:n,measurements:r}):this.telemetryLogger.logUsage(t,{properties:n,measurements:r})}sendTelemetryEvent(t,n,r){this.internalSendTelemetryEvent(t,n,r,!1)}sendDangerousTelemetryEvent(t,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(t,n,r,!0)}internalSendTelemetryErrorEvent(t,n,r,i){i?this.telemetrySender.sendEventData(t,{properties:n,measurements:r}):this.telemetryLogger.logError(t,{properties:n,measurements:r})}sendTelemetryErrorEvent(t,n,r){this.internalSendTelemetryErrorEvent(t,n,r,!1)}sendDangerousTelemetryErrorEvent(t,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(t,n,r,!0)}internalSendTelemetryException(t,n,r,i){i?this.telemetrySender.sendErrorData(t,{properties:n,measurements:r}):this.telemetryLogger.logError(t,{properties:n,measurements:r})}sendTelemetryException(t,n,r){this.internalSendTelemetryException(t,n,r,!1)}sendDangerousTelemetryException(t,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(t,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(t=>t.dispose()))}};xS.BaseTelemetryReporter=xN});var T5=_(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.BaseTelemetrySender=void 0;var Sc;(function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"})(Sc||(Sc={}));var wN=class{constructor(t,n){this._instantiationStatus=Sc.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=t}sendEventData(t,n){if(!this._telemetryClient){this._instantiationStatus!==Sc.INSTANTIATED&&this._eventQueue.push({eventName:t,data:n});return}this._telemetryClient.logEvent(t,n)}sendErrorData(t,n){if(!this._telemetryClient){this._instantiationStatus!==Sc.INSTANTIATED&&this._exceptionQueue.push({exception:t,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:n})=>this.sendEventData(t,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:n})=>this.sendErrorData(t,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Sc.NOT_INSTANTIATED&&(this._instantiationStatus=Sc.INSTANTIATING,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=Sc.INSTANTIATED,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=Sc.INSTANTIATED}))}};wS.BaseTelemetrySender=wN});var I5=_(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.TelemetryUtil=void 0;var rl=class{static applyReplacements(t,n){for(let r of Object.keys(t))for(let i of n)i.lookup.test(r)&&(i.replacementString!==void 0?t[r]=i.replacementString:delete t[r])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getAdditionalCommonProperties(t){return{"common.os":t.platform,"common.nodeArch":t.architecture,"common.platformversion":(t.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return rl._instance||(rl._instance=new rl),rl._instance}};ES.TelemetryUtil=rl});var Lo,Pn,Rn,An,cx,to,Gm,zm,bS,Ym,no,_S=D(()=>{Lo="function",Pn="object",Rn="undefined",An="prototype",cx="hasOwnProperty",to=Object,Gm=to[An],zm=to.assign,bS=to.create,Ym=to.defineProperty,no=Gm[cx]});function xs(e){e===void 0&&(e=!0);var t=e===!1?null:P5;return t||(typeof globalThis!==Rn&&(t=globalThis),!t&&typeof self!==Rn&&(t=self),!t&&typeof window!==Rn&&(t=window),!t&&typeof global!==Rn&&(t=global),P5=t),t}function Km(e){throw new TypeError(e)}function ma(e){var t=bS;if(t)return t(e);if(e==null)return{};var n=typeof e;n!==Pn&&n!==Lo&&Km("Object prototype may only be an Object:"+e);function r(){}return r[An]=e,new r}var P5,EN=D(()=>{_S();P5=null});function ws(e,t){typeof t!==Lo&&t!==null&&Km("Class extends value "+String(t)+" is not a constructor or null"),bN(e,t);function n(){this.constructor=e}e[An]=t===null?ma(t):(n[An]=t[An],new n)}function SS(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var WYe,GYe,F_e,CS,bN,R5=D(()=>{_S();EN();WYe=(xs()||{}).Symbol,GYe=(xs()||{}).Reflect,F_e=function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Gm[cx].call(t,i)&&(e[i]=t[i])}return e},CS=zm||F_e,bN=function(e,t){return bN=to.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r[cx](i)&&(n[i]=r[i])},bN(e,t)}});var A5=D(()=>{});var bi=D(()=>{_S();EN();R5();A5()});var _N,D5=D(()=>{"use strict";_N=100});var Es,ar,ux,bs,We,ro,ha,TS,_i,we,Gd,Dt,IS,zd,Yd,CN,lx,Kd,Xm,dx,Tc,io,Qm,il,_s,Jm,Xd,oo,Fo,ol,Ic,PS,sl,Cs,Zm,al,px,cl,RS,eh,Ss,SN,TN,AS,Dn,Ci,fx,Qd,mx,Jd,Ts,DS,Zd,th,ul,hx,gn=D(()=>{Es="initialize",ar="name",ux="getNotifyMgr",bs="identifier",We="push",ro="isInitialized",ha="config",TS="instrumentationKey",_i="logger",we="length",Gd="time",Dt="processNext",IS="getProcessTelContext",zd="addNotificationListener",Yd="removeNotificationListener",CN="stopPollingInternalLogs",lx="onComplete",Kd="getPlugin",Xm="flush",dx="_extensions",Tc="splice",io="teardown",Qm="messageId",il="message",_s="isAsync",Jm="_doTeardown",Xd="update",oo="getNext",Fo="diagLog",ol="setNextPlugin",Ic="createNew",PS="cookieCfg",sl="indexOf",Cs="substring",Zm="userAgent",al="split",px="setEnabled",cl="substr",RS="nodeType",eh="apply",Ss="replace",SN="enableDebugExceptions",TN="logInternalMessage",AS="toLowerCase",Dn="call",Ci="type",fx="handler",Qd="listeners",mx="isChildEvt",Jd="getCtx",Ts="setCtx",DS="complete",Zd="traceId",th="spanId",ul="traceFlags",hx="version"});var Ie,IN,zt,PN,gx,nh,k5,Si,Mo,rh,ll,ih,dl,kS,vx,ep,Jn=D(()=>{Ie="",IN="channels",zt="core",PN="createPerfMgr",gx="disabled",nh="extensionConfig",k5="extensions",Si="processTelemetry",Mo="priority",rh="eventsSent",ll="eventsDiscarded",ih="eventsSendRequest",dl="perfEvent",kS="errorToConsole",vx="warnToConsole",ep="getPerfMgr"});function K_e(e){if(e){if(NS)return NS(e);var t=e[M_e]||e[An]||e[OS];if(t)return t}return null}function oh(e,t){return typeof e===t}function lt(e){return e===void 0||typeof e===Rn}function Me(e){return e===null||lt(e)}function NN(e){return!Me(e)}function Pc(e,t){return!!(e&&no[Dn](e,t))}function cr(e){return!!(e&&typeof e===Pn)}function Ye(e){return!!(e&&typeof e===Lo)}function tp(e){var t=e;return t&&Yt(t)&&(t=t[Ss](G_e,function(n,r){return r.toUpperCase()}),t=t[Ss](z_e,"_"),t=t[Ss](Y_e,function(n,r){return"_"+r})),t}function kt(e,t){if(e)for(var n in e)no[Dn](e,n)&&t[Dn](e,n,e[n])}function np(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=j_e?e[H5](t):X_e(e,t)),n}function X_e(e,t){var n=!1,r=t?t[we]:0,i=e?e[we]:0;if(r&&i&&i>=r&&!(n=e===t)){for(var o=i-1,s=r-1;s>=0;s--){if(e[o]!=t[s])return!1;o--}n=!0}return n}function sh(e,t){var n=!1;return e&&t&&!(n=e===t)&&(n=H_e?e[$5](t):Q_e(e,t)),n}function Q_e(e,t){var n=!1,r=t?t[we]:0;if(e&&r&&e[we]>=r&&!(n=e===t)){for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;n=!0}return n}function vn(e,t){return e&&t?e[sl](t)!==-1:!1}function ah(e){return!!(e&&ON[Dn](e)==="[object Date]")}function J_e(e){return!!(e&&ON[Dn](e)==="[object Array]")}function rp(e){return!!(e&&ON[Dn](e)==="[object Error]")}function Yt(e){return typeof e=="string"}function Ti(e){return typeof e=="number"}function Rc(e){return typeof e=="boolean"}function U5(e){var t=!1;if(e&&typeof e=="object"){var n=NS?NS(e):K_e(e);n?(n[OS]&&no[Dn](n,OS)&&(n=n[OS]),t=typeof n===Lo&&V5[Dn](n)===W_e):t=!0}return t}function Uo(e){if(e)return B_e?e[j5]():Z_e(e)}function Z_e(e){if(e&&e.getUTCFullYear){var t=function(n){var r=String(n);return r[we]===1&&(r="0"+r),r};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function le(e,t,n){var r=e[we];try{for(var i=0;i<r&&!(i in e&&t[Dn](n||e,e[i],i,e)===-1);i++);}catch{}}function Un(e,t,n){if(e){if(e[O5])return e[O5](t,n);var r=e[we],i=n||0;try{for(var o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in e&&e[o]===t)return o}catch{}}return-1}function ip(e,t,n){var r;if(e){if(e[N5])return e[N5](t,n);var i=e[we],o=n||e;r=new Array(i);try{for(var s=0;s<i;s++)s in e&&(r[s]=t[Dn](o,e[s],e))}catch{}}return r}function op(e,t,n){var r;if(e){if(e[L5])return e[L5](t,n);var i=e[we],o=0;if(arguments[we]>=3)r=arguments[2];else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=t(r,e[o],o,e)),o++}return r}function Ot(e){return e&&(e=q_e&&e[AN]?e[AN]():e[Ss]?e[Ss](/^\s+|(?=\s)\s+$/g,Ie):e),e}function Yr(e){var t=typeof e;if(t!==Lo&&(t!==Pn||e===null)&&Km("objKeys called on non-object"),!q5&&M5)return M5(e);var n=[];for(var r in e)e&&no[Dn](e,r)&&n[We](r);if(q5)for(var i=RN[we],o=0;o<i;o++)e&&no[Dn](e,RN[o])&&n[We](RN[o]);return n}function so(e,t,n,r){if(F5)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),F5(e,t,i),!0}catch{}return!1}function W5(e){return e}function LN(e){return DN&&kt(e,function(t,n){(De(n)||cr(n))&&DN(n)}),Ii(e)}function qn(){var e=Date;return e.now?e.now():new e().getTime()}function sp(e){return rp(e)?e[ar]:Ie}function Pi(e,t,n,r,i){var o=n;return e&&(o=e[t],o!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,e[t]=o)),o}function pl(e,t,n){var r;return e?(r=e[t],!r&&Me(r)&&(r=lt(n)?{}:n,e[t]=r)):r=lt(n)?{}:n,r}function qo(e,t){return Me(e)?t:e}function MN(e){return!e}function ch(e){return!!e}function jn(e){throw new Error(e)}function G5(e,t){var n=null,r=null;return Ye(e)?n=e:r=e,function(){var i=arguments;if(n&&(r=n()),r)return r[t][eh](r,i)}}function UN(e,t,n){if(e&&t&&cr(e)&&cr(t)){var r=function(o){if(Yt(o)){var s=t[o];Ye(s)?(!n||n(o,!0,t,e))&&(e[o]=G5(t,o)):(!n||n(o,!1,t,e))&&(Pc(e,o)&&delete e[o],so(e,o,function(){return t[o]},function(a){t[o]=a})||(e[o]=s))}};for(var i in t)r(i)}return e}function fl(e,t,n,r,i){e&&t&&n&&(i!==!1||lt(e[t]))&&(e[t]=G5(n,r))}function ap(e,t,n,r){return e&&t&&cr(e)&&De(n)&&le(n,function(i){Yt(i)&&fl(e,i,t,i,r)}),e}function Ac(e){return e&&zm&&(e=to(zm({},e))),e}function uh(e,t,n,r,i,o){var s=arguments,a=s[0]||{},u=s[we],c=!1,l=1;for(u>0&&Rc(a)&&(c=a,a=s[l]||{},l++),cr(a)||(a={});l<u;l++){var d=s[l],p=De(d),f=cr(d);for(var m in d){var h=p&&m in d||f&&no[Dn](d,m);if(h){var v=d[m],g=void 0;if(c&&v&&((g=De(v))||U5(v))){var y=a[m];g?De(y)||(y=[]):U5(y)||(y={}),v=uh(c,y,v)}v!==void 0&&(a[m]=v)}}}return a}var j5,H5,$5,O5,N5,L5,AN,B5,M_e,OS,F5,DN,U_e,M5,kN,q_e,j_e,H_e,$_e,B_e,V_e,ON,V5,W_e,G_e,z_e,Y_e,NS,De,q5,RN,Ii,FN,yn=D(()=>{bi();gn();Jn();j5="toISOString",H5="endsWith",$5="startsWith",O5="indexOf",N5="map",L5="reduce",AN="trim",B5="toString",M_e="__proto__",OS="constructor",F5=Ym,DN=to.freeze,U_e=to.seal,M5=to.keys,kN=String[An],q_e=kN[AN],j_e=kN[H5],H_e=kN[$5],$_e=Date[An],B_e=$_e[j5],V_e=Array.isArray,ON=Gm[B5],V5=no[B5],W_e=V5[Dn](to),G_e=/-([a-z])/g,z_e=/([^\w\d_$])/g,Y_e=/^(\d+[\w\d_$])/,NS=Object.getPrototypeOf;De=V_e||J_e;q5=!{toString:null}.propertyIsEnumerable("toString"),RN=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];Ii=DN||W5,FN=U_e||W5});function Kr(e){var t={};return kt(e,function(n,r){t[n]=r,t[r]=n}),LN(t)}var LS=D(()=>{yn()});var Is,z5=D(()=>{LS();Is=Kr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})});function tCe(){var e;return typeof globalThis!==MS&&(e=globalThis),!e&&typeof self!==MS&&(e=self),!e&&typeof window!==MS&&(e=window),!e&&typeof global!==MS&&(e=global),e||{}}function kc(e,t){return e&&WS[Dc].hasOwnProperty.call(e,t)}function e8(e){return e&&(e===WS[Dc]||e===Array[Dc])}function WN(e){return e8(e)||e===Function[Dc]}function cp(e){var t;if(e){if(xx)return xx(e);var n=e[Z5]||e[Dc]||(e[jS]?e[jS][Dc]:null);t=e[US]||n,kc(e,US)||(delete e[qN],t=e[US]=e[qN]||e[US],e[qN]=n)}return t}function BS(e,t){var n=[];if(X5)n=X5(e);else for(var r in e)typeof r=="string"&&kc(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function GN(e,t,n){return t!==jS&&typeof e[t]===HS&&(n||kc(e,t))}function VS(e){throw new TypeError("DynamicProto: "+e)}function nCe(e){var t={};return BS(e,function(n){!t[n]&&GN(e,n,!1)&&(t[n]=e[n])}),t}function zN(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function rCe(e,t,n,r){function i(u,c,l){var d=c[l];if(d[HN]&&r){var p=u[$S]||{};p[yx]!==!1&&(d=(p[c[lh]]||{})[l]||d)}return function(){return d.apply(u,arguments)}}var o={};BS(n,function(u){o[u]=i(t,n,u)});for(var s=cp(e),a=[];s&&!WN(s)&&!zN(a,s);)BS(s,function(u){!o[u]&&GN(s,u,!xx)&&(o[u]=i(t,s,u))}),a.push(s),s=cp(s);return o}function iCe(e,t,n,r){var i=null;if(e&&kc(n,lh)){var o=e[$S]||{};if(i=(o[n[lh]]||{})[t],i||VS("Missing ["+t+"] "+HS),!i[$N]&&o[yx]!==!1){for(var s=!kc(e,t),a=cp(e),u=[];s&&a&&!WN(a)&&!zN(u,a);){var c=a[t];if(c){s=c===r;break}u.push(a),a=cp(a)}try{s&&(e[t]=i),i[$N]=1}catch{o[yx]=!1}}}return i}function oCe(e,t,n){var r=t[e];return r===n&&(r=cp(t)[e]),typeof r!==HS&&VS("["+e+"] is not a "+HS),r}function sCe(e,t,n,r,i){function o(u,c){var l=function(){var d=iCe(this,c,u,l)||oCe(c,u,l);return d.apply(this,arguments)};return l[HN]=1,l}if(!e8(e)){var s=n[$S]=n[$S]||{},a=s[t]=s[t]||{};s[yx]!==!1&&(s[yx]=!!i),BS(n,function(u){GN(n,u,!1)&&n[u]!==r[u]&&(a[u]=n[u],delete n[u],(!kc(e,u)||e[u]&&!e[u][HN])&&(e[u]=o(e,u)))})}}function aCe(e,t){if(xx){for(var n=[],r=cp(t);r&&!WN(r)&&!zN(n,r);){if(r===e)return!0;n.push(r),r=cp(r)}return!1}return!0}function jN(e,t){return kc(e,Dc)?e.name||t||Y5:((e||{})[jS]||{}).name||t||Y5}function rt(e,t,n,r){kc(e,Dc)||VS("theClass is an invalid class definition.");var i=e[Dc];aCe(i,t)||VS("["+jN(e)+"] not in hierarchy of ["+jN(t)+"]");var o=null;kc(i,lh)?o=i[lh]:(o=eCe+jN(e,"_")+"$"+VN.n,VN.n++,i[lh]=o);var s=rt[J5],a=!!s[qS];a&&r&&r[qS]!==void 0&&(a=!!r[qS]);var u=nCe(t),c=rCe(i,t,u,a);n(t,c);var l=!!xx&&!!s[BN];l&&r&&(l=!!r[BN]),sCe(i,o,t,u,l!==!1)}var FS,MS,jS,Dc,HS,$S,HN,lh,eCe,$N,yx,J5,Y5,Z5,US,K5,qN,qS,BN,WS,xx,X5,Q5,VN,ur=D(()=>{MS="undefined",jS="constructor",Dc="prototype",HS="function",$S="_dynInstFuncs",HN="_isDynProxy",lh="_dynClass",eCe="_dynCls$",$N="_dynInstChk",yx=$N,J5="_dfOpts",Y5="_unknown_",Z5="__proto__",US="_dyn"+Z5,K5="__dynProto$Gbl",qN="_dynInstProto",qS="useBaseInst",BN="setInstFuncs",WS=Object,xx=WS.getPrototypeOf,X5=WS.getOwnPropertyNames;Q5=tCe(),VN=Q5[K5]||(Q5[K5]={o:(FS={},FS[BN]=!0,FS[qS]=!0,FS),n:1e3});rt[J5]=VN.o});function o8(e,t){var n=!1;if(e){try{if(n=t in e,!n){var r=e[An];r&&(n=t in r)}}catch{}if(!n)try{var i=new e;n=!lt(i[t])}catch{}}return n}function ZN(e){i8=e}function Kt(e){var t=xs();return t&&t[e]?t[e]:e===t8&&wx()?window:null}function wx(){return!!(typeof window===Pn&&window)}function ga(){return wx()?window:Kt(t8)}function GS(){return!!(typeof document===Pn&&document)}function Ri(){return GS()?document:Kt(cCe)}function Ex(){return!!(typeof navigator===Pn&&navigator)}function ao(){return Ex()?navigator:Kt(lCe)}function zS(){return!!(typeof history===Pn&&history)}function eL(){return zS()?history:Kt(dCe)}function up(e){if(e&&i8){var t=Kt("__mockLocation");if(t)return t}return typeof location===Pn&&location?location:Kt(pCe)}function bx(){return typeof console!==Rn?console:Kt(fCe)}function ph(){return Kt(mCe)}function lp(){return!!(typeof JSON===Pn&&JSON||Kt(n8)!==null)}function fh(){return lp()?JSON||Kt(n8):null}function _x(){return Kt(hCe)}function Cx(){return Kt(gCe)}function Oc(){var e=ao();return e&&e.product?e.product===vCe:!1}function Ps(){var e=ao();if(e&&(e[Zm]!==KN||YN===null)){KN=e[Zm];var t=(KN||Ie)[AS]();YN=vn(t,QN)||vn(t,JN)}return YN}function tL(e){if(e===void 0&&(e=null),!e){var t=ao()||{};e=t?(t[Zm]||Ie)[AS]():Ie}var n=(e||Ie)[AS]();if(vn(n,QN)){var r=Ri()||{};return Math.max(parseInt(n[al](QN)[1]),r[uCe]||0)}else if(vn(n,JN)){var i=parseInt(n[al](JN)[1]);if(i)return i+4}return null}function Bt(e){var t=Object[An].toString[Dn](e),n=Ie;return t==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[ar]+"'":lp()&&(n=fh().stringify(e)),t+n}function ml(){return XN===null&&(XN=Ex()&&!!ao().sendBeacon),XN}function mh(e){var t=!1;try{t=!!Kt("fetch");var n=Kt("Request");t&&e&&n&&(t=o8(n,"keepalive"))}catch{}return t}function dp(){return dh===null&&(dh=typeof XDomainRequest!==Rn,dh&&hh()&&(dh=dh&&!o8(Kt(r8),"withCredentials"))),dh}function hh(){var e=!1;try{var t=Kt(r8);e=!!t}catch{}return e}function s8(e,t){if(e)for(var n=0;n<e[we];n++){var r=e[n];if(r[ar]&&r[ar]===t)return r}return{}}function nL(e){var t=Ri();return t&&e?s8(t.querySelectorAll("meta"),e).content:null}function rL(e){var t,n=ph();if(n){var r=n.getEntriesByType("navigation")||[];t=s8((r[we]>0?r[0]:{}).serverTiming,e).description}return t}var t8,cCe,uCe,lCe,dCe,pCe,fCe,mCe,n8,hCe,gCe,vCe,QN,JN,r8,YN,KN,i8,dh,XN,jo=D(()=>{"use strict";bi();gn();yn();Jn();t8="window",cCe="document",uCe="documentMode",lCe="navigator",dCe="history",pCe="location",fCe="console",mCe="performance",n8="JSON",hCe="crypto",gCe="msCrypto",vCe="ReactNative",QN="msie",JN="trident/",r8="XMLHttpRequest",YN=null,KN=null,i8=!1,dh=null,XN=null});function yCe(e,t){return function(){var n=arguments,r=oL(t);if(r){var i=r.listener;i&&i[e]&&i[e][eh](i,n)}}}function xCe(){var e=Kt("Microsoft");return e&&(KS=e.ApplicationInsights),KS}function oL(e){var t=KS;return!t&&e.disableDbgExt!==!0&&(t=KS||xCe()),t?t.ChromeDbgExt:null}function a8(e){if(!YS){YS={};for(var t=0;t<iL[we];t++)YS[iL[t]]=yCe(iL[t],e)}return YS}var iL,KS,YS,sL=D(()=>{gn();jo();iL=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],KS=null});function c8(e){return e?'"'+e[Ss](/\"/g,Ie)+'"':Ie}function u8(e,t){var n=bx();if(n){var r="log";n[e]&&(r=e),Ye(n[r])&&n[r](t)}}function Sx(e,t){return(e||{})[_i]||new Rs(t)}function aL(e){return e||new Rs}function Ut(e,t,n,r,i,o){o===void 0&&(o=!1),aL(e).throwInternal(t,n,r,i,o)}function As(e,t){aL(e)[vx](t)}function cL(e,t,n){aL(e)[TN](t,n)}var wCe,ECe,bCe,pp,Rs,hl=D(()=>{"use strict";ur();gn();sL();jo();yn();Jn();wCe="AI (Internal): ",ECe="AI: ",bCe="AITR_";pp=function(){function e(t,n,r,i){r===void 0&&(r=!1);var o=this;o[Qm]=t,o[il]=(r?ECe:wCe)+t;var s=Ie;lp()&&(s=fh().stringify(i));var a=(n?" message:"+c8(n):Ie)+(i?" props:"+c8(s):Ie);o[il]+=a}return e.dataType="MessageData",e}();Rs=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},i,o,s,a;rt(e,this,function(u){l(t||{}),u.consoleLoggingLevel=function(){return i},u.telemetryLoggingLevel=function(){return o},u.maxInternalMessageLimit=function(){return s},u[SN]=function(){return a},u.throwInternal=function(f,m,h,v,g){g===void 0&&(g=!1);var y=new pp(m,h,g,v);if(a)throw Bt(y);var x=f===1?kS:vx;if(lt(y[il]))p("throw"+(f===1?"Critical":"Warning"),y);else{if(g){var w=+y[Qm];!r[w]&&i>=f&&(u[x](y[il]),r[w]=!0)}else i>=f&&u[x](y[il]);c(f,y)}},u[vx]=function(f){u8("warn",f),p("warning",f)},u[kS]=function(f){u8("error",f),p("error",f)},u.resetInternalMessageCount=function(){n=0,r={}},u[TN]=c;function c(f,m){if(!d()){var h=!0,v=bCe+m[Qm];if(r[v]?h=!1:r[v]=!0,h&&(f<=o&&(u.queue[We](m),n++,p(f===1?"error":"warn",m)),n===s)){var g="Internal events throttle limit per PageView reached for this app.",y=new pp(23,g,!1);u.queue[We](y),f===1?u[kS](g):u[vx](g)}}}function l(f){i=qo(f.loggingLevelConsole,0),o=qo(f.loggingLevelTelemetry,1),s=qo(f.maxMessageLimit,25),a=qo(f[SN],!1)}function d(){return n>=s}function p(f,m){var h=oL(t||{});h&&h[Fo]&&h[Fo](f,m)}})}return e.__ieDyn=1,e}()});function an(e,t,n,r,i){if(e){var o=e;if(o[ep]&&(o=o[ep]()),o){var s=void 0,a=o[Jd](uL);try{if(s=o.create(t(),r,i),s){if(a&&s[Ts]&&(s[Ts](fp[lL],a),a[Jd]&&a[Ts])){var u=a[Jd](fp[Tx]);u||(u=[],a[Ts](fp[Tx],u)),u[We](s)}return o[Ts](uL,s),n(s)}}catch(c){s&&s[Ts]&&s[Ts]("exception",c)}finally{s&&o.fire(s),o[Ts](uL,a)}}}return n()}function dL(){return _Ce}var gh,lL,Tx,_Ce,fp,Ix,uL,Px=D(()=>{ur();gn();yn();Jn();gh="ctx",lL="ParentContextKey",Tx="ChildrenContextKey",_Ce=null,fp=function(){function e(t,n,r){var i=this,o=!1;if(i.start=qn(),i[ar]=t,i[_s]=r,i[mx]=function(){return!1},Ye(n)){var s;o=so(i,"payload",function(){return!s&&Ye(n)&&(s=n(),n=null),s})}i[Jd]=function(a){return a?a===e[lL]||a===e[Tx]?i[a]:(i[gh]||{})[a]:null},i[Ts]=function(a,u){if(a)if(a===e[lL])i[a]||(i[mx]=function(){return!0}),i[a]=u;else if(a===e[Tx])i[a]=u;else{var c=i[gh]=i[gh]||{};c[a]=u}},i[DS]=function(){var a=0,u=i[Jd](e[Tx]);if(De(u))for(var c=0;c<u[we];c++){var l=u[c];l&&(a+=l[Gd])}i[Gd]=qn()-i.start,i.exTime=i[Gd]-a,i[DS]=function(){},!o&&Ye(n)&&(i.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Ix=function(){function e(t){this.ctx={},rt(e,this,function(n){n.create=function(r,i,o){return new fp(r,i,o)},n.fire=function(r){r&&(r[DS](),t&&Ye(t[dl])&&t[dl](r))},n[Ts]=function(r,i){if(r){var o=n[gh]=n[gh]||{};o[r]=i}},n[Jd]=function(r){return(n[gh]||{})[r]}})}return e.__ieDyn=1,e}(),uL="CoreUtils.doPerf"});function p8(e){e<0&&(e>>>=0),Rx=123456789+e&gl,Ax=987654321-e&gl,d8=!0}function f8(){try{var e=qn()&2147483647;p8((Math.random()*l8^e)+e)}catch{}}function vh(e){return e>0?Math.floor(Ds()/gl*(e+1))>>>0:0}function Ds(e){var t=0,n=_x()||Cx();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&gl),t===0&&Ps()&&(d8||f8(),t=Dx()&gl),t===0&&(t=Math.floor(l8*Math.random()|0)),e||(t>>>=0),t}function XS(e){e?p8(e):f8()}function Dx(e){Ax=36969*(Ax&65535)+(Ax>>16)&gl,Rx=18e3*(Rx&65535)+(Rx>>16)&gl;var t=(Ax<<16)+(Rx&65535)>>>0&gl|0;return e||(t>>>=0),t}function vl(e){e===void 0&&(e=22);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ds()>>>0,r=0,i=Ie;i[we]<e;)r++,i+=t.charAt(n&63),n>>>=6,r===5&&(n=(Ds()<<2&4294967295|n&3)>>>0,r=0);return i}var l8,gl,d8,Rx,Ax,QS=D(()=>{gn();jo();yn();Jn();l8=4294967296,gl=4294967295,d8=!1,Rx=123456789,Ax=987654321});function TCe(e,t,n){if(m8)try{return m8(e,t,{value:n,enumerable:!1,configurable:!0}),!0}catch{}return!1}function g8(e){return e[RS]===1||e[RS]===9||!+e[RS]}function ICe(e,t){var n=t[e.id];if(!n){n={};try{g8(t)&&(TCe(t,e.id,n)||(t[e.id]=n))}catch{}}return n}function ks(e,t){return t===void 0&&(t=!1),tp(e+SCe+++(t?"."+h8:Ie)+CCe)}function JS(e){var t={id:ks("_aiData-"+(e||Ie)+"."+h8),accept:function(n){return g8(n)},get:function(n,r,i,o){var s=n[t.id];return s?s[tp(r)]:(o&&(s=ICe(t,n),s[tp(r)]=i),i)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return t}var m8,h8,CCe,SCe,kx=D(()=>{bi();gn();yn();Jn();QS();m8=Ym,h8="2.8.10",CCe="."+vl(6),SCe=0});function PCe(e,t){var n=Nc[yl]||tT[yl];return n||(n=Nc[yl]=Nc(e,t),tT[yl]=n),n}function eT(e){return e?e.isEnabled():!0}function RCe(e){var t=e[PS]=e[PS]||{};if(Pi(t,"domain",e.cookieDomain,NN,Me),Pi(t,"path",e.cookiePath||"/",null,Me),Me(t[mL])){var n=void 0;lt(e[x8])||(n=!e[x8]),lt(e[w8])||(n=!e[w8]),t[mL]=n}return t}function T8(e,t){return t&&e&&De(e.ignoreCookies)?e.ignoreCookies[sl](t)!==-1:!1}function ACe(e,t){return t&&e&&De(e.blockedCookies)&&e.blockedCookies[sl](t)!==-1?!0:T8(e,t)}function xl(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t[PS];r[yl]?n=r[yl]:n=Nc(t)}return n||(n=PCe(t,(e||{})[_i])),n}function Nc(e,t){var n,r=RCe(e||tT),i=r.path||"/",o=r.domain,s=r[mL]!==!1,a=(n={isEnabled:function(){var u=s&&Os(t),c=tT[yl];return u&&c&&a!==c&&(u=eT(c)),u}},n[px]=function(u){s=u!==!1},n.set=function(u,c,l,d,p){var f=!1;if(eT(a)&&!ACe(r,u)){var m={},h=Ot(c||Ie),v=h[sl](";");if(v!==-1&&(h=Ot(c[Cs](0,v)),m=I8(c[Cs](v+1))),Pi(m,"domain",d||o,ch,lt),!Me(l)){var g=Ps();if(lt(m[pL])){var y=qn(),x=y+l*1e3;if(x>0){var w=new Date;w.setTime(x),Pi(m,pL,_8(w,g?v8:y8)||_8(w,g?v8:y8)||Ie,ch)}}g||Pi(m,"max-age",Ie+l,null,lt)}var b=up();b&&b.protocol==="https:"&&(Pi(m,"secure",null,null,lt),fL===null&&(fL=!yh((ao()||{})[Zm])),fL&&Pi(m,"SameSite","None",null,lt)),Pi(m,"path",p||i,null,lt);var S=r.setCookie||S8;S(u,C8(h,m)),f=!0}return f},n.get=function(u){var c=Ie;return eT(a)&&!T8(r,u)&&(c=(r.getCookie||DCe)(u)),c},n.del=function(u,c){var l=!1;return eT(a)&&(l=a.purge(u,c)),l},n.purge=function(u,c){var l,d=!1;if(Os(t)){var p=(l={},l.path=c||"/",l[pL]="Thu, 01 Jan 1970 00:00:01 GMT",l);Ps()||(p["max-age"]="0");var f=r.delCookie||S8;f(u,C8(Ie,p)),d=!0}return d},n);return a[yl]=a,a}function Os(e){if(ZS===null){ZS=!1;try{var t=Ox||{};ZS=t[hL]!==void 0}catch(n){Ut(e,2,68,"Cannot access document.cookie - "+sp(n),{exception:Bt(n)})}}return ZS}function I8(e){var t={};if(e&&e[we]){var n=Ot(e)[al](";");le(n,function(r){if(r=Ot(r||Ie),r){var i=r[sl]("=");i===-1?t[r]=null:t[Ot(r[Cs](0,i))]=Ot(r[Cs](i+1))}})}return t}function _8(e,t){return Ye(e[t])?e[t]():null}function C8(e,t){var n=e||Ie;return kt(t,function(r,i){n+="; "+r+(Me(i)?Ie:"="+i)}),n}function DCe(e){var t=Ie;if(Ox){var n=Ox[hL]||Ie;E8!==n&&(b8=I8(n),E8=n),t=Ot(b8[e]||Ie)}return t}function S8(e,t){Ox&&(Ox[hL]=e+"="+t)}function yh(e){return Yt(e)?!!(vn(e,"CPU iPhone OS 12")||vn(e,"iPad; CPU OS 12")||vn(e,"Macintosh; Intel Mac OS X 10_14")&&vn(e,"Version/")&&vn(e,"Safari")||vn(e,"Macintosh; Intel Mac OS X 10_14")&&np(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||vn(e,"Chrome/5")||vn(e,"Chrome/6")||vn(e,"UnrealEngine")&&!vn(e,"Chrome")||vn(e,"UCBrowser/12")||vn(e,"UCBrowser/11")):!1}var v8,y8,hL,pL,mL,x8,w8,yl,ZS,fL,E8,Ox,b8,tT,gL=D(()=>{gn();hl();jo();yn();Jn();v8="toGMTString",y8="toUTCString",hL="cookie",pL="expires",mL="enabled",x8="isCookieUseDisabled",w8="disableCookiesUsage",yl="_ckMgr",ZS=null,fL=null,E8=null,Ox=Ri(),b8={},tT={}});function k8(e){return e&&e[Ss]?e[Ss](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ie):e}function iT(e,t){var n;if(t){var r=Ie;De(t)?(r=Ie,le(t,function(o){o=k8(o),o&&(o[0]!=="."&&(o="."+o),r+=o)})):r=k8(t),r&&(r[0]!=="."&&(r="."+r),e=(e||Ie)+r)}var i=LCe.exec(e||Ie)||[];return n={},n[Ci]=i[1],n.ns=(i[2]||Ie).replace(kCe,".").replace(OCe,Ie)[al](".").sort().join("."),n}function vL(e,t,n){var r=[],i=Lx.get(e,nT,{},!1),o=iT(t,n);return kt(i,function(s,a){le(a,function(u){var c;(!o[Ci]||o[Ci]===u.evtName[Ci])&&(!o.ns||o.ns===o.ns)&&r[We]((c={},c[ar]=u.evtName[Ci]+(u.evtName.ns?"."+u.evtName.ns:Ie),c.handler=u[fx],c))})}),r}function j8(e,t,n){n===void 0&&(n=!0);var r=Lx.get(e,nT,{},n),i=r[t];return i||(i=r[t]=[]),i}function H8(e,t,n,r){e&&t&&t[Ci]&&(e[D8]?e[D8](t[Ci],n,r):e[A8]&&e[A8](N8+t[Ci],n))}function FCe(e,t,n,r){var i=!1;return e&&t&&t[Ci]&&n&&(e[R8]?(e[R8](t[Ci],n,r),i=!0):e[P8]&&(e[P8](N8+t[Ci],n),i=!0)),i}function O8(e,t,n,r){for(var i=t[we];i--;){var o=t[i];o&&(!n.ns||n.ns===o.evtName.ns)&&(!r||r(o))&&(H8(e,o.evtName,o[fx],o.capture),t[Tc](i,1))}}function MCe(e,t,n){if(t[Ci])O8(e,j8(e,t[Ci]),t,n);else{var r=Lx.get(e,nT,{});kt(r,function(i,o){O8(e,o,t,n)}),Yr(r)[we]===0&&Lx.kill(e,nT)}}function Lc(e,t){var n;return t?(De(t)?n=[e].concat(t):n=[e,t],n=iT("xx",n).ns[al](".")):n=e,n}function mp(e,t,n,r,i){var o;i===void 0&&(i=!1);var s=!1;if(e)try{var a=iT(t,r);if(s=FCe(e,a,n,i),s&&Lx.accept(e)){var u=(o={guid:NCe++,evtName:a},o[fx]=n,o.capture=i,o);j8(e,a.type)[We](u)}}catch{}return s}function hp(e,t,n,r,i){if(i===void 0&&(i=!1),e)try{var o=iT(t,r),s=!1;MCe(e,o,function(a){return o.ns&&!n||a[fx]===n?(s=!0,!0):!1}),s||H8(e,o,n,i)}catch{}}function wh(e,t,n,r){return r===void 0&&(r=!1),mp(e,t,n,null,r)}function Eh(e,t,n,r){r===void 0&&(r=!1),hp(e,t,n,null,r)}function El(e,t,n){var r=!1,i=ga();i&&(r=mp(i,e,t,n),r=mp(i.body,e,t,n)||r);var o=Ri();return o&&(r=mp(o,e,t,n)||r),r}function oT(e,t,n){var r=ga();r&&(hp(r,e,t,n),hp(r.body,e,t,n));var i=Ri();i&&hp(i,e,t,n)}function xh(e,t,n,r){var i=!1;return t&&e&&e[we]>0&&le(e,function(o){o&&(!n||Un(n,o)===-1)&&(i=El(o,t,r)||i)}),i}function sT(e,t,n,r){var i=!1;return t&&e&&De(e)&&(i=xh(e,t,n,r),!i&&n&&n[we]>0&&(i=xh(e,t,null,r))),i}function wl(e,t,n){e&&De(e)&&le(e,function(r){r&&oT(r,t,n)})}function gp(e,t,n){return sT([M8,F8,rT],e,t,n)}function Fx(e,t){wl([M8,F8,rT],e,t)}function bh(e,t,n){function r(s){var a=Ri();e&&a&&a.visibilityState==="hidden"&&e(s)}var i=Lc(U8,n),o=xh([rT],e,t,i);return(!t||Un(t,Nx)===-1)&&(o=xh([Nx],r,t,i)||o),!o&&t&&(o=bh(e,null,n)),o}function Mx(e,t){var n=Lc(U8,t);wl([rT],e,n),wl([Nx],null,n)}function _h(e,t,n){function r(s){var a=Ri();e&&a&&a.visibilityState==="visible"&&e(s)}var i=Lc(q8,n),o=xh([L8],e,t,i);return o=xh([Nx],r,t,i)||o,!o&&t&&(o=_h(e,null,n)),o}function Ux(e,t){var n=Lc(q8,t);wl([L8],e,n),wl([Nx],null,n)}var N8,P8,R8,A8,D8,nT,Nx,rT,L8,F8,M8,U8,q8,kCe,OCe,NCe,Lx,LCe,yL=D(()=>{gn();kx();jo();yn();Jn();N8="on",P8="attachEvent",R8="addEventListener",A8="detachEvent",D8="removeEventListener",nT="events",Nx="visibilitychange",rT="pagehide",L8="pageshow",F8="unload",M8="beforeunload",U8=ks("aiEvtPageHide"),q8=ks("aiEvtPageShow"),kCe=/\.[\.]+/g,OCe=/[\.]+$/,NCe=1,Lx=JS("events"),LCe=/^([^.]*)(?:\.(.+)|)/});function Ch(){var e=Fc();return e[Cs](0,8)+"-"+e[Cs](8,12)+"-"+e[Cs](12,16)+"-"+e[Cs](16,20)+"-"+e[Cs](20)}function Sh(){var e=ph();return e&&e.now?e.now():qn()}function Fc(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=Ie,n,r=0;r<4;r++)n=Ds(),t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var i=e[8+(Ds()&3)|0];return t[cl](0,8)+t[cl](9,4)+"4"+t[cl](13,3)+i+t[cl](16,3)+t[cl](19,12)}var xL,wL=D(()=>{"use strict";gn();jo();yL();yn();Jn();QS();xL={Attach:wh,AttachEvent:wh,Detach:Eh,DetachEvent:Eh}});function Mc(e,t,n){return e&&e[we]===t&&e!==n?!!e.match(/^[\da-f]*$/):!1}function B8(e,t,n){return Mc(e,t)?e:n}function V8(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[we]<2;)t="0"+t;return t}function _L(e,t,n,r){var i;return i={},i[hx]=Mc(r,2,bL)?r:EL,i[Zd]=Th(e)?e:Fc(),i.spanId=Ih(t)?t:Fc()[cl](0,16),i.traceFlags=n>=0&&n<=255?n:1,i}function qx(e){var t;if(!e||(De(e)&&(e=e[0]||""),!e||!Yt(e)||e[we]>8192))return null;var n=UCe.exec(Ot(e));return!n||n[1]===bL||n[2]===aT||n[3]===cT?null:(t={},t[hx]=n[1],t[Zd]=n[2],t[th]=n[3],t[ul]=parseInt(n[4],16),t)}function Th(e){return Mc(e,32,aT)}function Ih(e){return Mc(e,16,cT)}function uT(e){return!(!e||!Mc(e[hx],2,bL)||!Mc(e[Zd],32,aT)||!Mc(e[th],16,cT)||!Mc(V8(e[ul]),2))}function CL(e){return uT(e)?(e[ul]&$8)===$8:!1}function SL(e){if(e){var t=V8(e[ul]);Mc(t,2)||(t="01");var n=e[hx]||EL;return n!=="00"&&n!=="ff"&&(n=EL),"".concat(n,"-").concat(B8(e.traceId,32,aT),"-").concat(B8(e.spanId,16,cT),"-").concat(t)}return""}function TL(){var e="traceparent",t=qx(nL(e));return t||(t=qx(rL(e))),t}var UCe,EL,bL,aT,cT,$8,IL=D(()=>{gn();wL();jo();yn();UCe=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,EL="00",bL="ff",aT="00000000000000000000000000000000",cT="0000000000000000",$8=1});function Uc(e){return qCe.get(e,"state",{},!0)}function lT(e,t){for(var n=[],r=null,i=e[oo](),o;i;){var s=i[Kd]();if(s){r&&Ye(r[ol])&&Ye(s[Si])&&r[ol](s);var a=!1;Ye(s[ro])?a=s[ro]():(o=Uc(s),a=o[ro]),a||n[We](s),r=s,i=i[oo]()}}le(n,function(u){var c=e[zt]();u[Es](e.getCfg(),c,t,e[oo]()),o=Uc(u),!u[zt]&&!o[zt]&&(o[zt]=c),o[ro]=!0,delete o[io]})}function dT(e){return e.sort(function(t,n){var r=0;if(n){var i=Ye(n[Si]);Ye(t[Si])?r=i?t[Mo]-n[Mo]:1:i&&(r=-1)}else r=t?1:-1;return r})}function W8(e){var t={};return{getName:function(){return t[ar]},setName:function(n){e&&e.setName(n),t[ar]=n},getTraceId:function(){return t[Zd]},setTraceId:function(n){e&&e.setTraceId(n),Th(n)&&(t[Zd]=n)},getSpanId:function(){return t[th]},setSpanId:function(n){e&&e.setSpanId(n),Ih(n)&&(t[th]=n)},getTraceFlags:function(){return t[ul]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[ul]=n}}}var qCe,pT=D(()=>{"use strict";gn();kx();yn();Jn();IL();qCe=JS("plugin")});function HCe(e,t,n){for(;e;){if(e[Kd]()===n)return e;e=e[oo]()}return va([n],t[ha]||{},t)}function PL(e,t,n,r){var i=null,o=[];r!==null&&(i=r?HCe(e,n,r):e);var s={_next:u,ctx:{core:function(){return n},diagLog:function(){return Sx(n,t)},getCfg:function(){return t},getExtCfg:c,getConfig:l,hasNext:function(){return!!i},getNext:function(){return i},setNext:function(p){i=p},iterate:d,onComplete:a}};function a(p,f){for(var m=[],h=2;h<arguments.length;h++)m[h-2]=arguments[h];p&&o[We]({func:p,self:lt(f)?s.ctx:f,args:m})}function u(){var p=i;if(i=p?p[oo]():null,!p){var f=o;f&&f[we]>0&&(le(f,function(m){try{m.func[Dn](m.self,m.args)}catch(h){Ut(n[_i],2,73,"Unexpected Exception during onComplete - "+Bt(h))}}),o=[])}return p}function c(p,f,m){f===void 0&&(f={}),m===void 0&&(m=0);var h;if(t){var v=t[nh];v&&p&&(h=v[p])}if(!h)h=f;else if(cr(f)&&m!==0){var g=uh(!0,f,h);t&&m===2&&kt(f,function(y){if(Me(g[y])){var x=t[y];Me(x)||(g[y]=x)}}),h=g}return h}function l(p,f,m){m===void 0&&(m=!1);var h,v=c(p,null);return v&&!Me(v[f])?h=v[f]:t&&!Me(t[f])&&(h=t[f]),Me(h)?m:h}function d(p){for(var f;f=s._next();){var m=f[Kd]();m&&p(m)}}return s}function Ai(e,t,n,r){var i=PL(e,t,n,r),o=i.ctx;function s(u){var c=i._next();return c&&c[Si](u,o),!c}function a(u,c){return u===void 0&&(u=null),De(u)&&(u=va(u,t,n,c)),Ai(u||o[oo](),t,n,c)}return o[Dt]=s,o[Ic]=a,o}function Ph(e,t,n){var r=t[ha]||{},i=PL(e,r,t,n),o=i.ctx;function s(u){var c=i._next();return c&&c.unload(o,u),!c}function a(u,c){return u===void 0&&(u=null),De(u)&&(u=va(u,r,t,c)),Ph(u||o[oo](),t,c)}return o[Dt]=s,o[Ic]=a,o}function jx(e,t,n){var r=t[ha]||{},i=PL(e,r,t,n),o=i.ctx;function s(u){return o.iterate(function(c){Ye(c[Xd])&&c[Xd](o,u)})}function a(u,c){return u===void 0&&(u=null),De(u)&&(u=va(u,r,t,c)),jx(u||o[oo](),t,c)}return o[Dt]=s,o[Ic]=a,o}function va(e,t,n,r){var i=null,o=!r;if(De(e)&&e[we]>0){var s=null;le(e,function(a){if(!o&&r===a&&(o=!0),o&&a&&Ye(a[Si])){var u=$Ce(a,t,n);i||(i=u),s&&s._setNext(u),s=u}})}return r&&!i?va([r],t,n):i}function $Ce(e,t,n){var r=null,i=Ye(e[Si]),o=Ye(e[ol]),s;e?s=e[bs]+"-"+e[Mo]+"-"+Y8++:s="Unknown-0-"+Y8++;var a={getPlugin:function(){return e},getNext:function(){return r},processTelemetry:l,unload:d,update:p,_id:s,_setNext:function(f){r=f}};function u(){var f;return e&&Ye(e[z8])&&(f=e[z8]()),f||(f=Ai(a,t,n)),f}function c(f,m,h,v,g){var y=!1,x=e?e[bs]:jCe,w=f[G8];return w||(w=f[G8]={}),f.setNext(r),e&&an(f[zt](),function(){return x+":"+h},function(){w[s]=!0;try{var b=r?r._id:Ie;b&&(w[b]=!1),y=m(f)}catch(R){var S=r?w[r._id]:!0;S&&(y=!0),(!r||!S)&&Ut(f[Fo](),1,73,"Plugin ["+x+"] failed during "+h+" - "+Bt(R)+", run flags: "+Bt(w))}},v,g),y}function l(f,m){m=m||u();function h(v){if(!e||!i)return!1;var g=Uc(e);return g[io]||g[gx]?!1:(o&&e[ol](r),e[Si](f,v),!0)}c(m,h,"processTelemetry",function(){return{item:f}},!f.sync)||m[Dt](f)}function d(f,m){function h(){var v=!1;if(e){var g=Uc(e),y=e[zt]||g[zt];e&&(!y||y===f.core())&&!g[io]&&(g[zt]=null,g[io]=!0,g[ro]=!1,e[io]&&e[io](f,m)===!0&&(v=!0))}return v}c(f,h,"unload",function(){},m[_s])||f[Dt](m)}function p(f,m){function h(){var v=!1;if(e){var g=Uc(e),y=e[zt]||g[zt];e&&(!y||y===f.core())&&!g[io]&&e[Xd]&&e[Xd](f,m)===!0&&(v=!0)}return v}c(f,h,"update",function(){},!1)||f[Dt](m)}return Ii(a)}var jCe,G8,z8,Y8,RL,Hx=D(()=>{"use strict";gn();hl();jo();yn();Jn();Px();pT();jCe="TelemetryPluginChain",G8="_hasRun",z8="_getTelCtx",Y8=0;RL=function(){function e(t,n,r,i){var o=this,s=Ai(t,n,r,i);ap(o,s,Yr(s))}return e}()});function K8(e,t,n){t&&De(t)&&t[we]>0&&(t=t.sort(function(r,i){return r[Mo]-i[Mo]}),le(t,function(r){r[Mo]<$x&&jn(BCe+r[bs])}),e[We]({queue:Ii(t),chain:va(t,n[ha],n)}))}function X8(e,t){function n(){return Ai(null,t[ha],t,null)}function r(c,l,d,p){var f=c?c[we]+1:1;function m(){f--,f===0&&(p&&p(),p=null)}f>0&&le(c,function(h){if(h&&h.queue[we]>0){var v=h.chain,g=l[Ic](v);g[lx](m),d(g)}else f--}),m()}function i(c,l){var d=l||{reason:0};return r(e,c,function(p){p[Dt](d)},function(){c[Dt](d)}),!0}function o(c,l){var d=l||{reason:0,isAsync:!1};return r(e,c,function(p){p[Dt](d)},function(){c[Dt](d),a=!1}),!0}function s(c){var l=null;return e&&e[we]>0&&le(e,function(d){if(d&&d.queue[we]>0&&(le(d.queue,function(p){if(p[bs]===c)return l=p,-1}),l))return-1}),l}var a=!1,u={identifier:"ChannelControllerPlugin",priority:$x,initialize:function(c,l,d,p){a=!0,le(e,function(f){f&&f.queue[we]>0&&lT(Ai(f.chain,c,l),d)})},isInitialized:function(){return a},processTelemetry:function(c,l){r(e,l||n(),function(d){d[Dt](c)},function(){l[Dt](c)})},update:i,pause:function(){r(e,n(),function(c){c.iterate(function(l){l.pause&&l.pause()})},null)},resume:function(){r(e,n(),function(c){c.iterate(function(l){l.resume&&l.resume()})},null)},teardown:o,getChannel:s,flush:function(c,l,d,p){var f=1,m=!1,h=null;p=p||5e3;function v(){f--,m&&f===0&&(h&&(clearTimeout(h),h=null),l&&l(m),l=null)}return r(e,n(),function(g){g.iterate(function(y){if(y[Xm]){f++;var x=!1;y[Xm](c,function(){x=!0,v()},d)||x||(c&&h==null?h=setTimeout(function(){h=null,v()},p):v())}})},function(){m=!0,v()}),!0},_setQueue:function(c){e=c}};return u}function Q8(e,t,n){var r=[];if(e&&le(e,function(o){return K8(r,o,n)}),t){var i=[];le(t,function(o){o[Mo]>$x&&i[We](o)}),K8(r,i,n)}return r}var $x,BCe,J8=D(()=>{gn();yn();Jn();Hx();pT();$x=500,BCe="Channel has invalid priority - "});function vp(){var e=[];function t(r){r&&e[We](r)}function n(r,i){le(e,function(o){try{o(r,i)}catch(s){Ut(r[Fo](),2,73,"Unexpected error calling unload handler - "+Bt(s))}}),e=[]}return{add:t,run:n}}var fT=D(()=>{gn();hl();jo();yn()});var bl,yp,AL=D(()=>{"use strict";ur();gn();yn();Jn();Hx();fT();bl="getPlugin",yp=function(){function e(){var t=this,n,r,i,o,s;c(),rt(e,t,function(l){l[Es]=function(d,p,f,m){u(d,p,m),n=!0},l[io]=function(d,p){var f,m=l[zt];if(!m||d&&m!==d[zt]())return;var h,v=!1,g=d||Ph(null,m,i&&i[bl]?i[bl]():i),y=p||(f={reason:0},f[_s]=!1,f);function x(){if(!v){v=!0,o.run(g,p);var w=s;s=[],le(w,function(b){b.rm()}),h===!0&&g[Dt](y),c()}}return!l[Jm]||l[Jm](g,y,x)!==!0?x():h=!0,h},l[Xd]=function(d,p){var f=l[zt];if(!f||d&&f!==d[zt]())return;var m,h=!1,v=d||jx(null,f,i&&i[bl]?i[bl]():i),g=p||{reason:0};function y(){h||(h=!0,u(v.getCfg(),v.core(),v[oo]()))}return!l._doUpdate||l._doUpdate(v,g,y)!==!0?y():m=!0,m},l._addHook=function(d){d&&(De(d)?s=s.concat(d):s[We](d))},fl(l,"_addUnloadCb",function(){return o},"add")}),t[Fo]=function(l){return a(l)[Fo]()},t[ro]=function(){return n},t.setInitialized=function(l){n=l},t[ol]=function(l){i=l},t[Dt]=function(l,d){d?d[Dt](l):i&&Ye(i[Si])&&i[Si](l,null)},t._getTelCtx=a;function a(l){l===void 0&&(l=null);var d=l;if(!d){var p=r||Ai(null,{},t[zt]);i&&i[bl]?d=p[Ic](null,i[bl]):d=p[Ic](null,i)}return d}function u(l,d,p){l&&Pi(l,nh,[],null,Me),!p&&d&&(p=d[IS]()[oo]());var f=i;i&&i[bl]&&(f=i[bl]()),t[zt]=d,r=Ai(p,l,d,f)}function c(){n=!1,t[zt]=null,r=null,i=null,s=[],o=vp()}}return e.__ieDyn=1,e}()});var Z8,e9=D(()=>{bi();ur();gn();AL();hl();jo();yn();Jn();Z8=function(e){ws(t,e);function t(){var n=e.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,i;o(),rt(t,n,function(s,a){s.addTelemetryInitializer=function(u){var c={id:r++,fn:u};i[We](c);var l={remove:function(){le(i,function(d,p){if(d.id===c.id)return i[Tc](p,1),-1})}};return l},s[Si]=function(u,c){for(var l=!1,d=i[we],p=0;p<d;++p){var f=i[p];if(f)try{if(f.fn[eh](null,[u])===!1){l=!0;break}}catch(m){Ut(c[Fo](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+sp(m),{exception:Bt(m)},!0)}}l||s[Dt](u,c)},s[Jm]=function(){o()}});function o(){r=0,i=[]}return n}return t.__ieDyn=1,t}(yp)});function GCe(e,t){return new Ix(t)}function zCe(e,t,n){var r,i=[],o={};return le(n,function(s){(Me(s)||Me(s[Es]))&&jn(i9);var a=s[Mo],u=s[bs];s&&a&&(Me(o[a])?o[a]=u:As(e,"Two extensions have same priority #"+a+" - "+o[a]+", "+u)),(!a||a<t)&&i[We](s)}),r={all:n},r[zt]=i,r}function r9(e,t){var n=!1;return le(t,function(r){if(r===e)return n=!0,-1}),n}function YCe(){var e;return ma((e={},e[zd]=function(t){},e[Yd]=function(t){},e[rh]=function(t){},e[ll]=function(t,n){},e[ih]=function(t,n){},e))}var i9,t9,n9,VCe,WCe,xp,DL=D(()=>{"use strict";bi();ur();bi();gn();J8();gL();kx();sL();hl();yn();Jn();Px();Hx();pT();e9();fT();i9="Plugins must provide initialize method",t9="_notificationManager",n9="SDK is still unloading...",VCe="SDK is not initialized",WCe={loggingLevelConsole:1};xp=function(){function e(){var t,n,r,i,o,s,a,u,c,l,d,p,f,m,h,v,g,y,x,w,b=0;rt(e,this,function(S){R(),S[ro]=function(){return n},S[Es]=function(k,H,$,V){m&&jn(n9),S[ro]()&&jn("Core should not be initialized more than once"),t=k||{},S[ha]=t,Me(k[TS])&&jn("Please provide instrumentation key"),i=V,S[t9]=V,F(),L(),M(),$&&(S[_i]=$);var ie=pl(t,k5,[]);c=[],c[We].apply(c,SS(SS([],H,!1),ie,!1)),p=pl(t,IN,[]),E(null),(!f||f[we]===0)&&jn("No "+IN+" available"),n=!0,S.releaseQueue()},S.getTransmissionControls=function(){var k=[];return f&&le(f,function(H){k[We](H.queue)}),Ii(k)},S.track=function(k){k.iKey=k.iKey||t[TS],k[Gd]=k[Gd]||Uo(new Date),k.ver=k.ver||"4.0",!m&&S[ro]()?P()[Dt](k):r[We](k)},S[IS]=P,S[ux]=function(){return i||(i=YCe(),S[t9]=i),i},S[zd]=function(k){i&&i[zd](k)},S[Yd]=function(k){i&&i[Yd](k)},S.getCookieMgr=function(){return a||(a=Nc(t,S[_i])),a},S.setCookieMgr=function(k){a=k},S[ep]=function(){if(!o&&!s&&qo(t.enablePerfMgr)){var k=qo(t[PN]);Ye(k)&&(s=k(S,S[ux]()))}return o||s||dL()},S.setPerfMgr=function(k){o=k},S.eventCnt=function(){return r[we]},S.releaseQueue=function(){if(n&&r[we]>0){var k=r;r=[],le(k,function(H){P()[Dt](H)})}},S.pollInternalLogs=function(k){v=k||null;var H=qo(t.diagnosticLogInterval);return(!H||!(H>0))&&(H=1e4),b&&clearInterval(b),b=setInterval(function(){A()},H),b},S[CN]=function(){b&&(clearInterval(b),b=0,A())},ap(S,function(){return h},["addTelemetryInitializer"]),S.unload=function(k,H,$){var V;k===void 0&&(k=!0),n||jn(VCe),m&&jn(n9);var ie=(V={reason:50},V[_s]=k,V.flushComplete=!1,V),be=Ph(T(),S);be[lx](function(){R(),H&&H(ie)},S);function Re(Le){ie.flushComplete=Le,m=!0,y.run(be,ie),S[CN](),be[Dt](ie)}N(k,Re,6,$)||Re(!1)},S[Kd]=C,S.addPlugin=function(k,H,$,V){if(!k){V&&V(!1),W(i9);return}var ie=C(k[bs]);if(ie&&!H){V&&V(!1),W("Plugin ["+k[bs]+"] is already loaded!");return}var be={reason:16};function Re(Fe){c[We](k),be.added=[k],E(be),V&&V(!0)}if(ie){var Le=[ie.plugin],Pt={reason:2,isAsync:!!$};I(Le,Pt,function(Fe){Fe?(be.removed=Le,be.reason|=32,Re(!0)):V&&V(!1)})}else Re(!1)},S.evtNamespace=function(){return g},S[Xm]=N,S.getTraceCtx=function(k){return w||(w=W8()),w},S.setTraceCtx=function(k){w=k||null},fl(S,"addUnloadCb",function(){return y},"add");function R(){n=!1,t=uh(!0,{},WCe),S[ha]=t,S[_i]=new Rs(t),S[dx]=[],h=new Z8,r=[],i=null,o=null,s=null,a=null,u=null,l=null,c=[],d=null,p=null,f=null,m=!1,v=null,g=ks("AIBaseCore",!0),y=vp(),w=null}function P(){return Ai(T(),t,S)}function E(k){var H=zCe(S[_i],$x,c);l=H[zt],u=null;var $=H.all;if(f=Ii(Q8(p,$,S)),d){var V=Un($,d);V!==-1&&$[Tc](V,1),V=Un(l,d),V!==-1&&l[Tc](V,1),d._setQueue(f)}else d=X8(f,S);$[We](d),l[We](d),S[dx]=dT($),d[Es](t,S,$),lT(P(),$),S[dx]=Ii(dT(l||[])).slice(),k&&j(k)}function C(k){var H,$=null,V=null;return le(S[dx],function(ie){if(ie[bs]===k&&ie!==d&&ie!==h)return V=ie,-1}),!V&&d&&(V=d.getChannel(k)),V&&($=(H={plugin:V},H[px]=function(ie){Uc(V)[gx]=!ie},H.isEnabled=function(){var ie=Uc(V);return!ie[io]&&!ie[gx]},H.remove=function(ie,be){var Re;ie===void 0&&(ie=!0);var Le=[V],Pt=(Re={reason:1},Re[_s]=ie,Re);I(Le,Pt,function(Fe){Fe&&E({reason:32,removed:Le}),be&&be(Fe)})},H)),$}function T(){if(!u){var k=(l||[]).slice();Un(k,h)===-1&&k[We](h),u=va(dT(k),t,S)}return u}function I(k,H,$){if(k&&k[we]>0){var V=va(k,t,S),ie=Ph(V,S);ie[lx](function(){var be=!1,Re=[];le(c,function(Pt,Fe){r9(Pt,k)?be=!0:Re[We](Pt)}),c=Re;var Le=[];p&&(le(p,function(Pt,Fe){var Je=[];le(Pt,function(nr){r9(nr,k)?be=!0:Je[We](nr)}),Le[We](Je)}),p=Le),$&&$(be)}),ie[Dt](H)}else $(!1)}function A(){var k=S[_i]?S[_i].queue:[];k&&(le(k,function(H){var $,V=($={},$[ar]=v||"InternalMessageId: "+H[Qm],$.iKey=qo(t[TS]),$.time=Uo(new Date),$.baseType=pp.dataType,$.baseData={message:H[il]},$);S.track(V)}),k[we]=0)}function N(k,H,$,V){return d?d[Xm](k,H,$||6,V):(H&&H(!1),!0)}function F(){var k=qo(t.disableDbgExt);k===!0&&x&&(i[Yd](x),x=null),i&&!x&&k!==!0&&(x=a8(t),i[zd](x))}function L(){var k=qo(t.enablePerfMgr);!k&&s&&(s=null),k&&pl(t,PN,GCe)}function M(){var k=pl(t,nh,{});k.NotificationManager=i}function j(k){var H=jx(T(),S);(!S._updateHook||S._updateHook(H,k)!==!0)&&H[Dt](k)}function W(k){var H=S[_i];H?Ut(H,2,73,k):jn(k)}})}return e.__ieDyn=1,e}()});function mT(e,t,n,r){le(e,function(i){if(i&&i[t])if(n)setTimeout(function(){return r(i)},0);else try{r(i)}catch{}})}var Bx,kL=D(()=>{ur();gn();yn();Jn();Bx=function(){function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;rt(e,this,function(r){r[zd]=function(i){r.listeners[We](i)},r[Yd]=function(i){for(var o=Un(r[Qd],i);o>-1;)r.listeners[Tc](o,1),o=Un(r[Qd],i)},r[rh]=function(i){mT(r[Qd],rh,!0,function(o){o[rh](i)})},r[ll]=function(i,o){mT(r[Qd],ll,!0,function(s){s[ll](i,o)})},r[ih]=function(i,o){mT(r[Qd],ih,o,function(s){s[ih](i,o)})},r[dl]=function(i){i&&(n||!i[mx]())&&mT(r[Qd],dl,!1,function(o){i[_s]?setTimeout(function(){return o[dl](i)},0):o[dl](i)})}})}return e.__ieDyn=1,e}()});var Vx,o9=D(()=>{bi();ur();gn();DL();hl();yn();Jn();kL();Px();Vx=function(e){ws(t,e);function t(){var n=e.call(this)||this;return rt(t,n,function(r,i){r[Es]=function(a,u,c,l){i[Es](a,u,c||new Rs(a),l||new Bx(a))},r.track=function(a){an(r[ep](),function(){return"AppInsightsCore:track"},function(){a===null&&(s(a),jn("Invalid telemetry item")),o(a),i.track(a)},function(){return{item:a}},!a.sync)};function o(a){Me(a[ar])&&(s(a),jn("telemetry name required"))}function s(a){var u=r[ux]();u&&u[ll]([a],2)}}),n}return t.__ieDyn=1,t}(xp)});var re,bt,wp,Ns,s9,a9,hT,OL,Wx,gT,Rh,Ls,_l,qc,Gx,c9,NL,zx,u9=D(()=>{LS();bt="Failed",wp=bt+"MonitorAjax",Ns="Track",s9="Start",a9="Stop",hT="Event",OL="AuthContext",Wx="Exception",gT="Local",Rh="Session",Ls="Storage",_l="Browser",qc="Cannot",Gx="Buffer",c9="InstrumentationKey",NL=Kr({CRITICAL:1,WARNING:2}),zx=Kr((re={},re[_l+"DoesNotSupport"+gT+Ls]=0,re[_l+qc+"Read"+gT+Ls]=1,re[_l+qc+"Read"+Rh+Ls]=2,re[_l+qc+"Write"+gT+Ls]=3,re[_l+qc+"Write"+Rh+Ls]=4,re[_l+bt+"RemovalFrom"+gT+Ls]=5,re[_l+bt+"RemovalFrom"+Rh+Ls]=6,re[qc+"SendEmptyTelemetry"]=7,re.ClientPerformanceMathError=8,re["ErrorParsingAI"+Rh+"Cookie"]=9,re.ErrorPVCalc=10,re[Wx+"WhileLoggingError"]=11,re[bt+"AddingTelemetryTo"+Gx]=12,re[wp+"Abort"]=13,re[wp+"Dur"]=14,re[wp+"Open"]=15,re[wp+"RSC"]=16,re[wp+"Send"]=17,re[wp+"GetCorrelationHeader"]=18,re[bt+"ToAddHandlerForOnBeforeUnload"]=19,re[bt+"ToSendQueuedTelemetry"]=20,re[bt+"ToReportDataLoss"]=21,re["Flush"+bt]=22,re.MessageLimitPerPVExceeded=23,re.MissingRequiredFieldSpecification=24,re.NavigationTimingNotSupported=25,re.OnError=26,re[Rh+"RenewalDateIsZero"]=27,re.SenderNotInitialized=28,re[s9+Ns+hT+bt]=29,re[a9+Ns+hT+bt]=30,re[s9+Ns+bt]=31,re[a9+Ns+bt]=32,re.TelemetrySampledAndNotSent=33,re[Ns+hT+bt]=34,re[Ns+Wx+bt]=35,re[Ns+"Metric"+bt]=36,re[Ns+"PV"+bt]=37,re[Ns+"PV"+bt+"Calc"]=38,re[Ns+"Trace"+bt]=39,re["Transmission"+bt]=40,re[bt+"ToSet"+Ls+Gx]=41,re[bt+"ToRestore"+Ls+Gx]=42,re.InvalidBackendResponse=43,re[bt+"ToFixDepricatedValues"]=44,re.InvalidDurationValue=45,re.TelemetryEnvelopeInvalid=46,re.CreateEnvelopeError=47,re[qc+"SerializeObject"]=48,re[qc+"SerializeObjectNonSerializable"]=49,re.CircularReferenceDetected=50,re["Clear"+OL+bt]=51,re[Wx+"Truncated"]=52,re.IllegalCharsInName=53,re.ItemNotInArray=54,re.MaxAjaxPerPVExceeded=55,re.MessageTruncated=56,re.NameTooLong=57,re.SampleRateOutOfRange=58,re["Set"+OL+bt]=59,re["Set"+OL+bt+"AccountName"]=60,re.StringValueTooLong=61,re.StartCalledMoreThanOnce=62,re.StopCalledWithoutStart=63,re["TelemetryInitializer"+bt]=64,re.TrackArgumentsNotSpecified=65,re.UrlTooLong=66,re[Rh+Ls+Gx+"Full"]=67,re[qc+"AccessCookie"]=68,re.IdTooLong=69,re.InvalidEvent=70,re[wp+"SetRequestHeader"]=71,re["Send"+_l+"InfoOnUserInit"]=72,re["Plugin"+Wx]=73,re["Notification"+Wx]=74,re.SnippetScriptLoadFailure=99,re["Invalid"+c9]=100,re[qc+"ParseAiBlobValue"]=101,re.InvalidContentBlob=102,re[Ns+"PageAction"+hT+bt]=103,re[bt+"AddingCustomDefinedRequestContext"]=104,re["InMemory"+Ls+Gx+"Full"]=105,re[c9+"Deprecation"]=106,re))});var jc=D(()=>{D5();z5();o9();DL();AL();QS();wL();yn();LS();yL();jo();bi();kL();Px();hl();Hx();u9();gL();kx();fT();IL()});var l9,d9,p9,f9,m9,h9,g9=D(()=>{bi();jc();l9=Kr({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),d9=Kr({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),p9=Kr({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),f9=Kr({Normal:1,Critical:2}),m9=Kr({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),h9=Ii(CS(CS({},zx),Kr({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})))});var Fs,vT,KCe,N8e,LL,yT,Yx=D(()=>{Fs="",vT="https://browser.events.data.microsoft.com/OneCollector/1.0/",KCe="pluginVersionString",N8e=KCe+"Arr",LL="version",yT="properties"});function kn(e){return!(e===Fs||Me(e))}function Xx(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return Fs}function UL(){return FL===null&&(FL=!lt(Uint8Array)&&!eSe()&&!Oc()),FL}function Qx(e){return!!(e&&Ti(e)&&e>=1&&e<=4)}function Jx(e,t,n){if(!t&&!kn(t)||typeof e!="string")return null;var r=typeof t;if(r==="string"||r==="number"||r==="boolean"||De(t))t={value:t};else if(r==="object"&&!no.call(t,"value"))t={value:n?JSON.stringify(t):t};else if(Me(t.value)||t.value===Fs||!Yt(t.value)&&!Ti(t.value)&&!Rc(t.value)&&!De(t.value))return null;if(De(t.value)&&!wT(t.value))return null;if(!Me(t.kind)){if(De(t.value)||!Ah(t.kind))return null;t.value=t.value.toString()}return t}function Zx(e,t,n){var r=-1;if(!lt(e))if(t>0&&(t===32?r=1<<13:t<=13&&(r=t<<5)),ZCe(n))r===-1&&(r=0),r|=n;else{var i=JCe[Ms(e)]||-1;r!==-1&&i!==-1?r|=i:i===6&&(r=i)}return r}function qL(){xl(null).setEnabled(!1)}function jL(e,t,n){Os(null)&&xl(null).set(e,t,n*86400,null,"/")}function HL(e){Os(null)&&xl(null).del(e)}function $L(e){return Os(null)?BL(xl(null),e):Fs}function BL(e,t,n){n===void 0&&(n=!0);var r;return e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||Fs}function VL(e){e===void 0&&(e="D");var t=Ch();return e==="B"?t="{"+t+"}":e==="P"?t="("+t+")":e==="N"&&(t=t.replace(/-/g,Fs)),t}function Cl(e,t,n,r,i){var o={},s=!1,a=0,u=arguments.length,c=Object[An],l=arguments;for(c.toString.call(l[0])==="[object Boolean]"&&(s=l[0],a++);a<u;a++){var e=l[a];kt(e,function(p,f){s&&f&&cr(f)?De(f)?(o[p]=o[p]||[],le(f,function(m,h){m&&cr(m)?o[p][h]=Cl(!0,o[p][h],m):o[p][h]=m})):o[p]=Cl(!0,o[p],f):o[p]=f})}return o}function Ah(e){return e===0||e>0&&e<=13||e===32}function ZCe(e){return e>=0&&e<=9}function eSe(){var e=ao();if(!lt(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}function wT(e){return e.length>0}function Ep(e,t){var n=e;n.timings=n.timings||{},n.timings.processTelemetryStart=n.timings.processTelemetryStart||{},n.timings.processTelemetryStart[t]=Xr()}function Ms(e){var t=0;if(e!=null){var n=typeof e;n==="string"?t=1:n==="number"?t=2:n==="boolean"?t=3:n===Pn&&(t=4,De(e)?(t=4096,e.length>0&&(t|=Ms(e[0]))):no.call(e,"value")&&(t=8192|Ms(e.value)))}return t}function ET(){return!!Kt("chrome")}function bT(e,t,n,r,i,o){r===void 0&&(r=!1),i===void 0&&(i=!1);function s(u,c,l){try{u[c]=l}catch{}}var a=new XMLHttpRequest;return r&&s(a,XCe,r),n&&s(a,v9,n),a.open(e,t,!i),n&&s(a,v9,n),!i&&o&&s(a,QCe,o),a}var Hc,xT,$c,XCe,v9,QCe,JCe,FL,Kx,ML,Xr,y9,x9,ew=D(()=>{jc();bi();Yx();xT="3.2.9",$c="1DS-Web-JS-"+xT,XCe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",v9="withCredentials",QCe="timeout",JCe=(Hc={},Hc[0]=0,Hc[2]=6,Hc[1]=1,Hc[3]=7,Hc[4098]=6,Hc[4097]=1,Hc[4099]=7,Hc),FL=null,Kx=!!Ri(),ML=!!ga();Xr=Sh;y9={Version:xT,FullVersionString:$c,strUndefined:Rn,strObject:Pn,Undefined:Rn,arrForEach:le,arrIndexOf:Un,arrMap:ip,arrReduce:op,objKeys:Yr,toISOString:Uo,isReactNative:Oc,isString:Yt,isNumber:Ti,isBoolean:Rc,isFunction:Ye,isArray:De,isObject:cr,strTrim:Ot,isDocumentObjectAvailable:Kx,isWindowObjectAvailable:ML,isValueAssigned:kn,getTenantId:Xx,isBeaconsSupported:ml,isUint8ArrayAvailable:UL,isLatency:Qx,sanitizeProperty:Jx,getISOString:Uo,useXDomainRequest:dp,getCommonSchemaMetaData:Zx,cookieAvailable:Os,disallowsSameSiteNone:yh,setCookie:jL,deleteCookie:HL,getCookie:$L,createGuid:VL,extend:Cl,getTime:Xr,isValueKind:Ah,isArrayValid:wT,objDefineAccessors:so,addPageUnloadEventListener:gp,setProcessTelemetryTimings:Ep,addEventHandler:El,getFieldValueType:Ms,strEndsWith:np,objForEachKey:kt},x9={_canUseCookies:void 0,isTypeof:oh,isUndefined:lt,isNullOrUndefined:Me,hasOwnProperty:Pc,isFunction:Ye,isObject:cr,isDate:ah,isArray:De,isError:rp,isString:Yt,isNumber:Ti,isBoolean:Rc,toISOString:Uo,arrForEach:le,arrIndexOf:Un,arrMap:ip,arrReduce:op,strTrim:Ot,objCreate:ma,objKeys:Yr,objDefineAccessors:so,addEventHandler:El,dateNow:qn,isIE:Ps,disableCookies:qL,newGuid:Ch,perfNow:Sh,newId:vl,randomValue:vh,random32:Ds,mwcRandomSeed:XS,mwcRandom32:Dx,generateW3CId:Fc}});var tSe,w9,E9=D(()=>{bi();ur();jc();Yx();ew();tSe=function(e){ws(t,e);function t(){var n=e.call(this)||this;return n.pluginVersionStringArr=[],rt(t,n,function(r,i){(!r.logger||!r.logger.queue)&&(r.logger=new Rs({loggingLevelConsole:1})),r.initialize=function(o,s,a,u){an(r,function(){return"AppInsightsCore.initialize"},function(){var c=r.pluginVersionStringArr;if(o){o.endpointUrl||(o.endpointUrl=vT);var l=o.propertyStorageOverride;l&&(!l.getProperty||!l.setProperty)&&jn("Invalid property storage override passed."),o.channels&&le(o.channels,function(f){f&&le(f,function(m){if(m.identifier&&m.version){var h=m.identifier+"="+m.version;c.push(h)}})})}r.getWParam=function(){return typeof document<"u"||o.enableWParam?0:-1},s&&le(s,function(f){if(f&&f.identifier&&f.version){var m=f.identifier+"="+f.version;c.push(m)}}),r.pluginVersionString=c.join(";"),r.pluginVersionStringArr=c;try{i.initialize(o,s,a,u),r.pollInternalLogs("InternalLog")}catch(f){var d=r.logger,p=Bt(f);p.indexOf("channels")!==-1&&(p+=`
 - Channels must be provided through config.channels only!`),Ut(d,1,514,"SDK Initialization Failed - no telemetry will be sent: "+p)}},function(){return{config:o,extensions:s,logger:a,notificationManager:u}})},r.track=function(o){an(r,function(){return"AppInsightsCore.track"},function(){var s=o;if(s){s.timings=s.timings||{},s.timings.trackStart=Xr(),Qx(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=$c;var u=s.baseData=s.baseData||{};u[yT]=u[yT]||{};var c=u[yT];c[LL]=c[LL]||r.pluginVersionString||Fs}i.track(s)},function(){return{item:o}},!o.sync)}}),n}return t.__ieDyn=1,t}(Vx),w9=tSe});var nSe,b9,_9=D(()=>{bi();ur();jc();Yx();ew();nSe=function(e){ws(t,e);function t(){var n=e.call(this)||this;return rt(t,n,function(r,i){r.initialize=function(o,s,a,u){o&&!o.endpointUrl&&(o.endpointUrl=vT),r.getWParam=function(){return Kx||o.enableWParam?0:-1};try{i.initialize(o,s,a,u)}catch(c){Ut(r.logger,1,514,"Initialization Failed: "+Bt(c)+`
 - Note: Channels must be provided through config.channels only`)}},r.track=function(o){var s=o;if(s){var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=$c}i.track(s)}}),n}return t.__ieDyn=1,t}(xp),b9=nSe});function rSe(e,t,n){return function(r){e[t]=r,n()}}var bp,iSe,Sl,WL=D(()=>{ur();jc();bp=Ye;iSe=function(){function e(t){var n=0,r=null,i=[];rt(e,this,function(c){c.then=function(l,d){return new e(function(p,f){o(l,d,p,f)})},c.catch=function(l){return c.then(null,l)}});function o(c,l,d,p){i.push(function(){var f;try{n===1?f=bp(c)?c(r):r:f=bp(l)?l(r):r,f instanceof e?f.then(d,p):n===2&&!bp(l)?p(f):d(f)}catch(m){p(m);return}}),n!==0&&s()}function s(){if(i.length>0){var c=i.slice();i=[],setTimeout(function(){for(var l=0,d=c.length;l<d;++l)try{c[l]()}catch{}},0)}}function a(c){n===0&&(r=c,n=1,s())}function u(c){n===0&&(r=c,n=2,s())}(function(){if(!bp(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(a,u)}catch(l){u(l)}})()}return e.resolve=function(t){return t instanceof e?t:t&&bp(t.then)?new e(function(n,r){try{t.then(n,r)}catch(i){r(i)}}):new e(function(n){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.all=function(t){if(!(!t||!t.length))return new e(function(n,r){try{for(var i=[],o=0,s=0;s<t.length;s++){var a=t[s];a&&bp(a.then)?(o++,a.then(rSe(i,s,function(){--o===0&&n(i)}),r)):i[s]=a}o===0&&setTimeout(function(){n(i)},0)}catch(u){r(u)}})},e.race=function(t){return new e(function(n,r){if(!(!t||!t.length))try{for(var i=function(s){var a=t[s];a&&bp(a.then)?a.then(n,r):setTimeout(function(){n(a)},0)},o=0;o<t.length;o++)i(o)}catch(s){r(s)}})},e}(),Sl=iSe});function Dh(){return new Date().getTime()}var oSe,C9,tw,_p,GL,sSe,S9,T9=D(()=>{ur();WL();jc();oSe=6e5,C9=0,tw=[],_p=[],GL=[];sSe=function(){function e(t,n){var r=0,i=(t||"<unnamed>")+"."+C9;C9++,rt(e,this,function(a){var u=null,c=0;a.scheduleEvent=function(d,p,f){var m=i+"."+c;c++,p&&(m+="-("+p+")");var h=m+"{"+r+"}";r++;var v={evt:null,tm:Dh(),id:h,isRunning:!1,isAborted:!1};return u?v.evt=R(v,u):v.evt=S(v),u=v,u.evt._schId=h,v.evt;function g(P){for(var E=Dh(),C=E-oSe,T=P.length,I=0;I<T;){var A=P[I];if(A&&A.tm<C){var N=null;A.abort?(N="Aborting ["+A.id+"] due to Excessive runtime ("+(E-A.tm)+" ms)",A.abort(N)):N="Removing ["+A.id+"] due to Excessive runtime ("+(E-A.tm)+" ms)",s(N),P.splice(I,1),T--}else I++}}function y(P,E){var C=!1,T=l(tw,P);if(T||(T=l(GL,P),C=!0),T){T.to&&(clearTimeout(T.to),T.to=null);var I=Dh()-T.tm;E?C?s("Timed out event ["+P+"] finally complete -- "+I+" ms"):o("Promise ["+P+"] Complete -- "+I+" ms"):(GL.push(T),s("Event ["+P+"] Timed out and removed -- "+I+" ms"))}else o("Failed to remove ["+P+"] from running queue");u&&u.id===P&&(u=null),g(tw),g(_p),g(GL)}function x(P,E){return function(C){return y(P,!0),E&&E(C),C}}function w(P,E,C,T){E.then(function(I){return I instanceof Sl?(o("Event ["+P+"] returned a promise -- waiting"),w(P,I,C,T),I):x(P,C)(I)},x(P,T))}function b(P,E){var C=P.id;return new Sl(function(T,I){o("Event ["+C+"] Starting -- waited for "+(P.wTm||"--")+" ms"),P.isRunning=!0,P.abort=function(N){P.abort=null,P.isAborted=!0,y(C,!1),I(new Error(N))};var A=E(C);A instanceof Sl?(f&&(P.to=setTimeout(function(){y(C,!1),I(new Error("Timed out after ["+f+"] ms"))},f)),w(C,A,function(N){o("Event ["+C+"] Resolving after "+(Dh()-P.tm)+" ms"),T(N)},I)):(o("Promise ["+C+"] Auto completed as the start action did not return a promise"),T())})}function S(P){var E=Dh();return P.wTm=E-P.tm,P.tm=E,P.isAborted?Sl.reject(new Error("["+m+"] was aborted")):(tw.push(P),b(P,d))}function R(P,E){var C=new Sl(function(T,I){var A=Dh()-E.tm,N=E.id;o("["+m+"] is waiting for ["+N+":"+A+" ms] to complete before starting -- ["+_p.length+"] waiting and ["+tw.length+"] running"),P.abort=function(F){P.abort=null,l(_p,m),P.isAborted=!0,I(new Error(F))},E.evt.then(function(F){l(_p,m),S(P).then(T,I)},function(F){l(_p,m),S(P).then(T,I)})});return _p.push(P),C}};function l(d,p){for(var f=0;f<d.length;f++)if(d[f].id===p)return d.splice(f,1)[0];return null}});function o(a){var u=xs();u&&u.QUnit&&console&&console.log("ESPromiseScheduler["+i+"] "+a)}function s(a){As(n,"ESPromiseScheduler["+i+"] "+a)}}return e.incomplete=function(){return tw},e.waitingToStart=function(){return _p},e}(),S9=sSe});var I9,P9=D(()=>{jc();Yx();ew();I9=function(){function e(t){var n=this,r={},i=[],o=[];t&&o.push(t);function s(l,d){var p,f=r[l];if(f&&(p=f[d]),!p&&p!==null){if(Yt(l)&&Yt(d))if(o.length>0){for(var m=0;m<o.length;m++)if(o[m].handleField(l,d)){p={canHandle:!0,fieldHandler:o[m]};break}}else i.length===0&&(p={canHandle:!0});if(!p&&p!==null){p=null;for(var m=0;m<i.length;m++)if(i[m].handleField(l,d)){p={canHandle:!0,handler:i[m],fieldHandler:null};break}}f||(f=r[l]={}),f[d]=p}return p}n.addSanitizer=function(l){l&&(i.push(l),r={})},n.addFieldSanitizer=function(l){l&&(o.push(l),r={})},n.handleField=function(l,d){var p=s(l,d);return p?p.canHandle:!1},n.value=function(l,d,p,f){var m=s(l,d);if(m&&m.canHandle){if(!m||!m.canHandle)return null;if(m.handler)return m.handler.value(l,d,p,f);if(!Yt(d)||Me(p)||p===Fs)return null;var h=null,v=Ms(p);if((v&8192)===8192){var g=v&-8193;if(h=p,!kn(h.value)||g!==1&&g!==2&&g!==3&&(g&4096)!==4096)return null}else v===1||v===2||v===3||(v&4096)===4096?h=u(l,d,p):v===4&&(h=u(l,d,f?JSON.stringify(p):p));if(h)return a(m,l,d,v,h,f)}return null},n.property=function(l,d,p,f){var m=s(l,d);if(!m||!m.canHandle||!Yt(d)||Me(p)||!kn(p.value))return null;var h=Ms(p.value);return h===0?null:a(m,l,d,h,p,f)};function a(l,d,p,f,m,h){if(l.handler)return l.handler.property(d,p,m,h);if(!Me(m.kind)){if((f&4096)===4096||!Ah(m.kind))return null;m.value=m.value.toString()}return c(l.fieldHandler,d,p,f,m)}function u(l,d,p){return kn(p)?{value:p}:null}function c(l,d,p,f,m){if(m&&l){var h=l.getSanitizer(d,p,f,m.kind,m.propertyType);if(h)if(f===4){var v={},g=m.value;kt(g,function(x,w){var b=d+"."+p;if(kn(w)){var S=u(b,x,w);S=c(l,b,x,Ms(w),S),S&&(v[x]=S.value)}}),m.value=v}else{var y={path:d,name:p,type:f,prop:m,sanitizer:n};m=h.call(n,y)}}return m}}return e.getFieldType=Ms,e}()});var R9={};Xs(R9,{AppInsightsCore:()=>w9,BaseCore:()=>b9,BaseTelemetryPlugin:()=>yp,CoreUtils:()=>x9,DiagnosticLogger:()=>Rs,ESPromise:()=>Sl,ESPromiseScheduler:()=>S9,EventHelper:()=>xL,EventLatency:()=>d9,EventPersistence:()=>f9,EventPropertyType:()=>p9,EventsDiscardedReason:()=>Is,FullVersionString:()=>$c,InternalAppInsightsCore:()=>Vx,InternalBaseCore:()=>xp,LoggingSeverity:()=>NL,MinChannelPriorty:()=>_N,NotificationManager:()=>Bx,PerfEvent:()=>fp,PerfManager:()=>Ix,ProcessTelemetryContext:()=>RL,TraceLevel:()=>m9,Undefined:()=>Rn,Utils:()=>y9,ValueKind:()=>l9,ValueSanitizer:()=>I9,Version:()=>xT,_ExtendedInternalMessageId:()=>h9,_InternalLogMessage:()=>pp,_InternalMessageId:()=>zx,__getRegisteredEvents:()=>vL,_logInternalMessage:()=>cL,_throwInternal:()=>Ut,_warnToConsole:()=>As,addEventHandler:()=>El,addEventListeners:()=>sT,addPageHideEventListener:()=>bh,addPageShowEventListener:()=>_h,addPageUnloadEventListener:()=>gp,areCookiesSupported:()=>Os,arrForEach:()=>le,arrIndexOf:()=>Un,arrMap:()=>ip,arrReduce:()=>op,attachEvent:()=>wh,cookieAvailable:()=>Os,createCookieMgr:()=>Nc,createEnumStyle:()=>Kr,createGuid:()=>VL,createProcessTelemetryContext:()=>Ai,createTraceParent:()=>_L,createUniqueNamespace:()=>ks,createUnloadHandlerContainer:()=>vp,dateNow:()=>qn,deleteCookie:()=>HL,detachEvent:()=>Eh,disableCookies:()=>qL,disallowsSameSiteNone:()=>yh,doPerf:()=>an,dumpObj:()=>Bt,eventOff:()=>hp,eventOn:()=>mp,extend:()=>Cl,findW3cTraceParent:()=>TL,formatTraceParent:()=>SL,generateW3CId:()=>Fc,getCommonSchemaMetaData:()=>Zx,getConsole:()=>bx,getCookie:()=>$L,getCookieValue:()=>BL,getCrypto:()=>_x,getDocument:()=>Ri,getExceptionName:()=>sp,getFieldValueType:()=>Ms,getGlobal:()=>xs,getGlobalInst:()=>Kt,getHistory:()=>eL,getIEVersion:()=>tL,getISOString:()=>Uo,getJSON:()=>fh,getLocation:()=>up,getMsCrypto:()=>Cx,getNavigator:()=>ao,getPerformance:()=>ph,getSetValue:()=>pl,getTenantId:()=>Xx,getTime:()=>Xr,getWindow:()=>ga,hasDocument:()=>GS,hasHistory:()=>zS,hasJSON:()=>lp,hasNavigator:()=>Ex,hasOwnProperty:()=>Pc,hasWindow:()=>wx,isArray:()=>De,isArrayValid:()=>wT,isBeaconsSupported:()=>ml,isBoolean:()=>Rc,isChromium:()=>ET,isDate:()=>ah,isDocumentObjectAvailable:()=>Kx,isError:()=>rp,isFetchSupported:()=>mh,isFunction:()=>Ye,isIE:()=>Ps,isLatency:()=>Qx,isNotTruthy:()=>MN,isNullOrUndefined:()=>Me,isNumber:()=>Ti,isObject:()=>cr,isReactNative:()=>Oc,isSampledFlag:()=>CL,isString:()=>Yt,isTruthy:()=>ch,isTypeof:()=>oh,isUint8ArrayAvailable:()=>UL,isUndefined:()=>lt,isValidSpanId:()=>Ih,isValidTraceId:()=>Th,isValidTraceParent:()=>uT,isValueAssigned:()=>kn,isValueKind:()=>Ah,isWindowObjectAvailable:()=>ML,isXhrSupported:()=>hh,mergeEvtNamespace:()=>Lc,newGuid:()=>Ch,newId:()=>vl,normalizeJsName:()=>tp,objCreate:()=>ma,objDefineAccessors:()=>so,objForEachKey:()=>kt,objFreeze:()=>Ii,objKeys:()=>Yr,objSeal:()=>FN,openXhr:()=>bT,optimizeObject:()=>Ac,parseTraceParent:()=>qx,perfNow:()=>Sh,proxyAssign:()=>UN,proxyFunctionAs:()=>fl,proxyFunctions:()=>ap,random32:()=>Ds,randomValue:()=>vh,removeEventHandler:()=>oT,removeEventListeners:()=>wl,removePageHideEventListener:()=>Mx,removePageShowEventListener:()=>Ux,removePageUnloadEventListener:()=>Fx,safeGetCookieMgr:()=>xl,safeGetLogger:()=>Sx,sanitizeProperty:()=>Jx,setCookie:()=>jL,setEnableEnvMocks:()=>ZN,setProcessTelemetryTimings:()=>Ep,setValue:()=>Pi,strContains:()=>vn,strEndsWith:()=>np,strFunction:()=>Lo,strObject:()=>Pn,strPrototype:()=>An,strStartsWith:()=>sh,strTrim:()=>Ot,strUndefined:()=>Rn,throwError:()=>jn,toISOString:()=>Uo,useXDomainRequest:()=>dp});var Cp=D(()=>{g9();E9();_9();WL();T9();P9();jc();ew()});var Sp,_T,CT,zL=D(()=>{Sp="REAL_TIME",_T="NEAR_REAL_TIME",CT="BEST_EFFORT"});var Us,ST,A9,TT,D9,YL,k9,O9,N9,KL,XL,IT,L9,QL,F9,JL,PT,ZL,RT,AT,DT,nw,eF,M9,kh,tF,kT,rw=D(()=>{Us="",ST="POST",A9="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",TT="drop",D9="send",YL="requeue",k9="rspFail",O9="oth",N9="no-cache, no-store",KL="application/x-json-stream",XL="cache-control",IT="content-type",L9="kill-tokens",QL="kill-duration",F9="kill-duration-seconds",JL="time-delta-millis",PT="client-version",ZL="client-id",RT="time-delta-to-apply-millis",AT="upload-time",DT="apikey",nw="AuthMsaDeviceTicket",eF="AuthXToken",M9="NoResponseBody",kh="msfpc",tF="trace",kT="user"});function q9(e){var t=(e.ext||{}).intweb;return t&&kn(t[kh])?t[kh]:null}function U9(e){for(var t=null,n=0;t===null&&n<e.length;n++)t=q9(e[n]);return t}var Oh,nF=D(()=>{Cp();rw();Oh=function(){function e(t,n){var r=n?[].concat(n):[],i=this,o=U9(r);i.iKey=function(){return t},i.Msfpc=function(){return o||Us},i.count=function(){return r.length},i.events=function(){return r},i.addEvent=function(s){return s?(r.push(s),o||(o=q9(s)),!0):!1},i.split=function(s,a){var u;if(s<r.length){var c=r.length-s;Me(a)||(c=a<c?a:c),u=r.splice(s,c),o=U9(r)}return new e(t,u)}}return e.create=function(t,n){return new e(t,n)},e}()});var aSe,j9,H9=D(()=>{ur();aSe=function(){function e(){var t=!0,n=!0,r=!0,i="use-collector-delta",o=!1;rt(e,this,function(s){s.allowRequestSending=function(){return t},s.firstRequestSent=function(){r&&(r=!1,o||(t=!1))},s.shouldAddClockSkewHeaders=function(){return n},s.getClockSkewHeaderValue=function(){return i},s.setClockSkew=function(a){o||(a?(i=a,n=!0,o=!0):n=!1,t=!0)}})}return e.__ieDyn=1,e}(),j9=aSe});var cSe,uSe,$9,B9=D(()=>{ur();Cp();cSe=1e3,uSe=function(){function e(){var t={};function n(r){var i=[];return r&&le(r,function(o){i.push(Ot(o))}),i}rt(e,this,function(r){r.setKillSwitchTenants=function(i,o){if(i&&o)try{var s=n(i.split(","));if(o==="this-request-only")return s;for(var a=parseInt(o,10)*cSe,u=0;u<s.length;++u)t[s[u]]=qn()+a}catch{return[]}return[]},r.isTenantKilled=function(i){var o=t,s=Ot(i);return o[s]!==void 0&&o[s]>qn()?!0:(delete o[s],!1)}})}return e.__ieDyn=1,e}(),$9=uSe});function W9(e){return!(e>=300&&e<500&&e!=408&&e!=429||e==501||e==505)}function OT(e){var t=0,n=V9*lSe,r=V9*dSe,i=Math.floor(Math.random()*(r-n))+n;return t=Math.pow(2,e)*i,Math.min(t,pSe)}var lSe,dSe,V9,pSe,rF=D(()=>{lSe=.8,dSe=1.2,V9=3e3,pSe=6e5});function z9(e,t,n,r){if(r&&e){var i=Zx(r.value,r.kind,r.propertyType);if(i>-1){var o=e[G9];o||(o=e[G9]={f:{}});var s=o[NT];if(s||(s=o[NT]={}),t)for(var a=0;a<t.length;a++){var u=t[a];s[u]||(s[u]={f:{}});var c=s[u][NT];c||(c=s[u][NT]={}),s=c}s=s[n]={},De(r.value)?s.a={t:i}:s.t=i}}}var fSe,mSe,Y9,K9,hSe,G9,NT,gSe,X9,Q9=D(()=>{ur();Cp();nF();rw();fSe=20,mSe=3984588,Y9=65e3,K9=2e6,hSe=Math.min(K9,Y9),G9="metadata",NT="f",gSe=/\./,X9=function(){function e(t,n,r,i){var o="data",s="baseData",a="ext",u=!!i,c=!0,l=n,d={};rt(e,this,function(p){p.createPayload=function(h,v,g,y,x,w){return{apiKeys:[],payloadBlob:Us,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:h,isTeardown:v,isSync:g,isBeacon:y,sendType:w,sendReason:x}},p.appendPayload=function(h,v,g){var y=h&&v&&!h.overflow;return y&&an(t,function(){return"Serializer:appendPayload"},function(){for(var x=v.events(),w=h.payloadBlob,b=h.numEvents,S=!1,R=[],P=[],E=h.isBeacon,C=E?Y9:mSe,T=E?hSe:K9,I=0,A=0;I<x.length;){var N=x[I];if(N){if(b>=g){h.overflow=v.split(I);break}var F=p.getEventBlob(N);if(F&&F.length<=T){var L=F.length,M=w.length;if(M+L>C){h.overflow=v.split(I);break}w&&(w+=`
`),w+=F,A++,A>fSe&&(w.substr(0,1),A=0),S=!0,b++}else F?R.push(N):P.push(N),x.splice(I,1),I--}I++}if(R&&R.length>0&&h.sizeExceed.push(Oh.create(v.iKey(),R)),P&&P.length>0&&h.failedEvts.push(Oh.create(v.iKey(),P)),S){h.batches.push(v),h.payloadBlob=w,h.numEvents=b;var j=v.iKey();Un(h.apiKeys,j)===-1&&h.apiKeys.push(j)}},function(){return{payload:h,theBatch:{iKey:v.iKey(),evts:v.events()},max:g}}),y},p.getEventBlob=function(h){try{return an(t,function(){return"Serializer.getEventBlob"},function(){var v={};v.name=h.name,v.time=h.time,v.ver=h.ver,v.iKey="o:"+Xx(h.iKey);var g={},y=h[a];y&&(v[a]=g,kt(y,function(b,S){var R=g[b]={};m(S,R,"ext."+b,!0,null,null,!0)}));var x=v[o]={};x.baseType=h.baseType;var w=x[s]={};return m(h.baseData,w,s,!1,[s],function(b,S,R){z9(g,b,S,R)},c),m(h.data,x,o,!1,[],function(b,S,R){z9(g,b,S,R)},c),JSON.stringify(v)},function(){return{item:h}})}catch{return null}};function f(h,v){var g=d[h];return g===void 0&&(h.length>=7&&(g=sh(h,"ext.metadata")||sh(h,"ext.web")),d[h]=g),g}function m(h,v,g,y,x,w,b){kt(h,function(S,R){var P=null;if(R||kn(R)){var E=g,C=S,T=x,I=v;if(u&&!y&&gSe.test(S)){var A=S.split("."),N=A.length;if(N>1){T&&(T=T.slice());for(var F=0;F<N-1;F++){var L=A[F];I=I[L]=I[L]||{},E+="."+L,T&&T.push(L)}C=A[N-1]}}var M=y&&f(E,C);if(!M&&l&&l.handleField(E,C)?P=l.value(E,C,R,r):P=Jx(C,R,r),P){var j=P.value;if(I[C]=j,w&&w(T,C,P),b&&typeof j=="object"&&!De(j)){var W=T;W&&(W=W.slice(),W.push(C)),m(R,j,E+"."+C,y,W,w,b)}}}})}})}return e.__ieDyn=1,e}()});function Ip(e,t,n){oF[e]=t,n!==!1&&(sF[t]=e)}function Z9(e){try{return e.responseText}catch{}return Us}function eX(e,t){var n=!1;if(e&&t){var r=Yr(e);if(r&&r.length>0)for(var i=t.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&Pc(t,s)&&s.toLowerCase()===i){n=!0;break}}}return n}function Nh(e,t,n,r){t&&n&&n.length>0&&(r&&oF[t]?(e.hdrs[oF[t]]=n,e.useHdrs=!0):e.url+="&"+t+"="+n)}function tX(e,t){return t&&(Ti(t)?e=[t].concat(e):De(t)&&(e=t.concat(e))),e}var Tp,iF,J9,vSe,oF,sF,nX,rX=D(()=>{ur();H9();B9();Cp();rw();rF();Q9();iF="sendAttempt",J9="&"+M9+"=true",vSe=(Tp={},Tp[1]=YL,Tp[100]=YL,Tp[200]="sent",Tp[8004]=TT,Tp[8003]=TT,Tp),oF={},sF={};Ip(nw,nw,!1);Ip(PT,PT);Ip(ZL,"Client-Id");Ip(DT,DT);Ip(RT,RT);Ip(AT,AT);Ip(eF,eF);nX=function(){function e(t,n,r,i,o){this._responseHandlers=[];var s="?cors=true&"+IT.toLowerCase()+"="+KL,a=new $9,u=!1,c=new j9,l=!1,d=0,p,f,m,h,v=!0,g=[],y={},x=[],w=null,b=!1,S,R=!1,P=!1,E,C,T,I,A;rt(e,this,function(N){var F=!0;N.initialize=function(U,K,ee,oe,de){var qe;de||(de={}),s=U+s,P=lt(de.avoidOptions)?!0:!de.avoidOptions,h=K,S=K.getCookieMgr(),b=!h.config.disableEventTimings;var Te=!!h.config.enableCompoundKey;p=ee,f=p.diagLog();var q=de.valueSanitizer,z=de.stringifyObjects;lt(de.enableCompoundKey)||(Te=!!de.enableCompoundKey),E=de.xhrTimeout,C=!!de.disableXhrSync,T=!!de.disableFetchKeepAlive,A=de.addNoResponse!==!1,l=!Oc(),w=new X9(h,q,z,Te),Me(de.useSendBeacon)||(l=!!de.useSendBeacon);var G=oe,se=de.alwaysUseXhrOverride?oe:null,pe=de.alwaysUseXhrOverride?oe:null,Ee=[3,2];if(!oe){v=!1;var it=up();it&&it.protocol&&it.protocol.toLowerCase()==="file:"&&(F=!1);var ht=[];Oc()?(ht=[2,1],Ee=[2,1,3]):ht=[1,2,3],ht=tX(ht,de.transports),oe=L(ht,!1),oe||As(f,"No available transport to send events"),G=L(ht,!0)}se||(Ee=tX(Ee,de.unloadTransports),se=L(Ee,!0)),I=!v&&(l&&ml()||!T&&mh(!0)),m=(qe={},qe[0]=oe,qe[1]=G||L([1,2,3],!0),qe[2]=se||G||L([1],!0),qe[3]=pe||L([2,3],!0)||G||L([1],!0),qe)};function L(U,K){for(var ee=0,oe=null,de=0;oe==null&&de<U.length;)ee=U[de],ee===1?dp()?oe=M:hh()&&(oe=W):ee===2&&mh(K)&&(!K||K&&!T)?oe=j:l&&ee===3&&ml()&&(oe=H),de++;return oe?{_transport:ee,_isSync:K,sendPOST:oe}:null}N._getDbgPlgTargets=function(){return[m[0],a,w,m]};function M(U,K,ee){var oe=new XDomainRequest;oe.open(ST,U.urlString),U.timeout&&(oe.timeout=U.timeout),oe.onload=function(){var de=Z9(oe);k(K,200,{},de),Pv(de)},oe.onerror=function(){k(K,400,{})},oe.ontimeout=function(){k(K,500,{})},oe.onprogress=function(){},ee?oe.send(U.data):o.set(function(){oe.send(U.data)},0)}function j(U,K,ee){var oe,de=U.urlString,qe=!1,Te=!1,q=(oe={body:U.data,method:ST},oe[A9]=!0,oe);ee&&(q.keepalive=!0,U._sendReason===2&&(qe=!0,A&&(de+=J9))),F&&(q.credentials="include"),U.headers&&Yr(U.headers).length>0&&(q.headers=U.headers),fetch(de,q).then(function(z){var G={},se=Us,pe=z.headers;pe&&pe.forEach(function(Ee,it){G[it]=Ee}),z.body&&z.text().then(function(Ee){se=Ee}),Te||(Te=!0,k(K,z.status,G,se),Pv(se))}).catch(function(z){Te||(Te=!0,k(K,0,{}))}),qe&&!Te&&(Te=!0,k(K,200,{})),!Te&&U.timeout>0&&o.set(function(){Te||(Te=!0,k(K,500,{}))},U.timeout)}function W(U,K,ee){var oe=U.urlString;function de(z,G,se){if(!z[se]&&G&&G.getResponseHeader){var pe=G.getResponseHeader(se);pe&&(z[se]=Ot(pe))}return z}function qe(z){var G={};return z.getAllResponseHeaders?G=XR(z.getAllResponseHeaders()):(G=de(G,z,JL),G=de(G,z,QL),G=de(G,z,F9)),G}function Te(z,G){k(K,z.status,qe(z),G)}ee&&U.disableXhrSync&&(ee=!1);var q=bT(ST,oe,F,!0,ee,U.timeout);kt(U.headers,function(z,G){q.setRequestHeader(z,G)}),q.onload=function(){var z=Z9(q);Te(q,z),Pv(z)},q.onerror=function(){Te(q)},q.ontimeout=function(){Te(q)},q.send(U.data)}function k(U,K,ee,oe){try{U(K,ee,oe)}catch(de){Ut(f,2,518,Bt(de))}}function H(U,K,ee){var oe=U,de=200,qe=oe._thePayload,Te=U.urlString+(A?J9:Us);try{var q=ao();if(!q.sendBeacon(Te,U.data))if(qe){var z=[];le(qe.batches,function(G){if(z&&G&&G.count()>0){for(var se=G.events(),pe=0;pe<se.length;pe++)if(!q.sendBeacon(Te,w.getEventBlob(se[pe]))){z.push(G.split(pe));break}}else z.push(G.split(0))}),yo(z,8003,qe.sendType,!0)}else de=0}catch(G){As(f,"Failed to send telemetry using sendBeacon API. Ex:"+Bt(G)),de=0}finally{k(K,de,{},Us)}}function $(U){return U===2||U===3}function V(U){return R&&$(U)&&(U=2),U}N.addQueryStringParameter=function(U,K){for(var ee=0;ee<g.length;ee++)if(g[ee].name===U){g[ee].value=K;return}g.push({name:U,value:K})},N.addHeader=function(U,K){y[U]=K},N.canSendRequest=function(){return ie()&&c.allowRequestSending()},N.sendQueuedRequests=function(U,K){lt(U)&&(U=0),R&&(U=V(U),K=2),Re(x,U,0)&&Pt(be(),0,!1,U,K||0)},N.isCompletelyIdle=function(){return!u&&d===0&&x.length===0},N.setUnloading=function(U){R=U},N.addBatch=function(U){if(U&&U.count()>0){if(a.isTenantKilled(U.iKey()))return!1;x.push(U)}return!0},N.teardown=function(){x.length>0&&Pt(be(),0,!0,2,2)},N.pause=function(){u=!0},N.resume=function(){u=!1,N.sendQueuedRequests(0,4)},N.sendSynchronousBatch=function(U,K,ee){U&&U.count()>0&&(Me(K)&&(K=1),R&&(K=V(K),ee=2),Pt([U],0,!1,K,ee||0))};function ie(){return!u&&d<n}function be(){var U=x;return x=[],U}function Re(U,K,ee){var oe=!1;return U&&U.length>0&&!u&&m[K]&&w&&(oe=K!==0||ie()&&(ee>0||c.allowRequestSending())),oe}function Le(U){var K={};return U&&le(U,function(ee,oe){K[oe]={iKey:ee.iKey(),evts:ee.events()}}),K}function Pt(U,K,ee,oe,de){if(!(!U||U.length===0)){if(u){yo(U,1,oe);return}oe=V(oe);try{var qe=U,Te=oe!==0;an(h,function(){return"HttpManager:_sendBatches"},function(q){q&&(U=U.slice(0));for(var z=[],G=null,se=Xr(),pe=m[oe]||(Te?m[1]:m[0]),Ee=pe&&pe._transport,it=I&&(R||$(oe)||Ee===3||pe._isSync&&Ee===2);Re(U,oe,K);){var ht=U.shift();ht&&ht.count()>0&&(a.isTenantKilled(ht.iKey())?z.push(ht):(G=G||w.createPayload(K,ee,Te,it,de,oe),w.appendPayload(G,ht,t)?G.overflow!==null&&(U=[G.overflow].concat(U),G.overflow=null,nr(G,se,Xr(),de),se=Xr(),G=null):(nr(G,se,Xr(),de),se=Xr(),U=[ht].concat(U),G=null)))}G&&nr(G,se,Xr(),de),U.length>0&&(x=U.concat(x)),yo(z,8004,oe)},function(){return{batches:Le(qe),retryCount:K,isTeardown:ee,isSynchronous:Te,sendReason:de,useSendBeacon:$(oe),sendType:oe}},!Te)}catch(q){Ut(f,2,48,"Unexpected Exception sending batch: "+Bt(q))}}}function Fe(U,K){var ee={url:s,hdrs:{},useHdrs:!1};K?(ee.hdrs=Cl(ee.hdrs,y),ee.useHdrs=Yr(ee.hdrs).length>0):kt(y,function(q,z){sF[q]?Nh(ee,sF[q],z,!1):(ee.hdrs[q]=z,ee.useHdrs=!0)}),Nh(ee,ZL,"NO_AUTH",K),Nh(ee,PT,$c,K);var oe=Us;le(U.apiKeys,function(q){oe.length>0&&(oe+=","),oe+=q}),Nh(ee,DT,oe,K),Nh(ee,AT,qn().toString(),K);var de=ib(U);if(kn(de)&&(ee.url+="&ext.intweb.msfpc="+de),c.shouldAddClockSkewHeaders()&&Nh(ee,RT,c.getClockSkewHeaderValue(),K),h.getWParam){var qe=h.getWParam();qe>=0&&(ee.url+="&w="+qe)}for(var Te=0;Te<g.length;Te++)ee.url+="&"+g[Te].name+"="+g[Te].value;return ee}function Je(U,K,ee){U[K]=U[K]||{},U[K][p.identifier]=ee}function nr(U,K,ee,oe){if(U&&U.payloadBlob&&U.payloadBlob.length>0){var de=!!N.sendHook,qe=m[U.sendType];!$(U.sendType)&&U.isBeacon&&U.sendReason===2&&(qe=m[2]||m[3]||qe);var Te=P;(U.isBeacon||qe._transport===3)&&(Te=!1);var q=Fe(U,Te);Te=Te||q.useHdrs;var z=Xr();an(h,function(){return"HttpManager:_doPayloadSend"},function(){for(var G=0;G<U.batches.length;G++)for(var se=U.batches[G],pe=se.events(),Ee=0;Ee<pe.length;Ee++){var it=pe[Ee];if(b){var ht=it.timings=it.timings||{};Je(ht,"sendEventStart",z),Je(ht,"serializationStart",K),Je(ht,"serializationCompleted",ee)}it[iF]>0?it[iF]++:it[iF]=1}yo(U.batches,1e3+(oe||0),U.sendType,!0);var jt={data:U.payloadBlob,urlString:q.url,headers:q.hdrs,_thePayload:U,_sendReason:oe,timeout:E,disableXhrSync:C,disableFetchKeepAlive:T};Te&&(eX(jt.headers,XL)||(jt.headers[XL]=N9),eX(jt.headers,IT)||(jt.headers[IT]=KL));var Av=null;qe&&(Av=function(ob){c.firstRequestSent();var Dv=function(QR,Vle){mu(QR,Vle,U,oe)},Ks=U.isTeardown||U.isSync;try{qe.sendPOST(ob,Dv,Ks),N.sendListener&&N.sendListener(jt,ob,Ks,U.isBeacon)}catch(QR){As(f,"Unexpected exception sending payload. Ex:"+Bt(QR)),k(Dv,0,{})}}),an(h,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Av)if(U.sendType===0&&d++,de&&!U.isBeacon&&qe._transport!==3){var ob={data:jt.data,urlString:jt.urlString,headers:Cl({},jt.headers),timeout:jt.timeout,disableXhrSync:jt.disableXhrSync,disableFetchKeepAlive:jt.disableFetchKeepAlive},Dv=!1;an(h,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{N.sendHook(ob,function(Ks){Dv=!0,!v&&!Ks._thePayload&&(Ks._thePayload=Ks._thePayload||jt._thePayload,Ks._sendReason=Ks._sendReason||jt._sendReason),Av(Ks)},U.isSync||U.isTeardown)}catch{Dv||Av(jt)}})}else Av(jt)})},function(){return{thePayload:U,serializationStart:K,serializationCompleted:ee,sendReason:oe}},U.isSync)}U.sizeExceed&&U.sizeExceed.length>0&&yo(U.sizeExceed,8003,U.sendType),U.failedEvts&&U.failedEvts.length>0&&yo(U.failedEvts,8002,U.sendType)}function is(U,K){b&&le(U,function(ee){var oe=ee.timings=ee.timings||{};Je(oe,"sendEventCompleted",K)})}function mu(U,K,ee,oe){var de=9e3,qe=null,Te=!1,q=!1;try{var z=!0;if(typeof U!==Rn){if(K){c.setClockSkew(K[JL]);var G=K[QL]||K["kill-duration-seconds"];le(a.setKillSwitchTenants(K[L9],G),function(pe){le(ee.batches,function(Ee){if(Ee.iKey()===pe){qe=qe||[];var it=Ee.split(0);ee.numEvents-=it.count(),qe.push(it)}})})}if(U==200||U==204){de=200;return}(!W9(U)||ee.numEvents<=0)&&(z=!1),de=9e3+U%1e3}if(z){de=100;var se=ee.retryCnt;ee.sendType===0&&(se<r?(Te=!0,Iv(function(){ee.sendType===0&&d--,Pt(ee.batches,se+1,ee.isTeardown,R?2:ee.sendType,5)},R,OT(se))):(q=!0,R&&(de=8001)))}}finally{Te||(c.setClockSkew(),Ba(ee,de,oe,q)),yo(qe,8004,ee.sendType)}}function Ba(U,K,ee,oe){try{oe&&p._backOffTransmission(),K===200&&(!oe&&!U.isSync&&p._clearBackOff(),rb(U.batches)),yo(U.batches,K,U.sendType,!0)}finally{U.sendType===0&&(d--,ee!==5&&N.sendQueuedRequests(U.sendType,ee))}}function rb(U){if(b){var K=Xr();le(U,function(ee){ee&&ee.count()>0&&is(ee.events(),K)})}}function Iv(U,K,ee){K?U():o.set(U,ee)}function XR(U){var K={};if(Yt(U)){var ee=Ot(U).split(/[\r\n]+/);le(ee,function(oe){if(oe){var de=oe.indexOf(": ");if(de!==-1){var qe=Ot(oe.substring(0,de)).toLowerCase(),Te=Ot(oe.substring(de+1));K[qe]=Te}else K[Ot(oe)]=1}})}return K}function ib(U){for(var K=0;K<U.batches.length;K++){var ee=U.batches[K].Msfpc();if(ee)return encodeURIComponent(ee)}return Us}function Pv(U){var K=N._responseHandlers;try{for(var ee=0;ee<K.length;ee++)try{K[ee](U)}catch(de){Ut(f,1,519,"Response handler failed: "+de)}if(U){var oe=JSON.parse(U);kn(oe.webResult)&&kn(oe.webResult[kh])&&S.set("MSFPC",oe.webResult[kh],365*86400)}}catch{}}function yo(U,K,ee,oe){if(U&&U.length>0&&i){var de=i[Rv(K)];if(de){var qe=ee!==0;an(h,function(){return"HttpManager:_sendBatchesNotification"},function(){Iv(function(){try{de.call(i,U,K,qe,ee)}catch(Te){Ut(f,1,74,"send request notification failed: "+Te)}},oe||qe,0)},function(){return{batches:Le(U),reason:K,isSync:qe,sendSync:oe,sendType:ee}},!qe)}}}function Rv(U){var K=vSe[U];return kn(K)||(K=O9,U>=9e3&&U<=9999?K=k9:U>=8e3&&U<=8999?K=TT:U>=1e3&&U<=1999&&(K=D9)),K}})}return e.__ieDyn=1,e}()});function ySe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout(e,t,n)}function xSe(e){clearTimeout(e)}function iw(e,t){return{set:e||ySe,clear:t||xSe}}var iX=D(()=>{});var wSe,oX,ESe,sX,aX,bSe,cX,_Se,Pp,LT,uX,lX,CSe,SSe,dX,pX=D(()=>{bi();ur();Cp();zL();nF();rX();rw();rF();iX();wSe=.25,oX=500,ESe=20,sX=6,aX=2,bSe=4,cX=2,_Se=1,Pp="eventsDiscarded",LT="overrideInstrumentationKey",uX="maxEventRetryAttempts",lX="maxUnloadEventRetryAttempts",CSe="addUnloadCb",SSe=function(e){ws(t,e);function t(){var n=e.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="3.2.9";var r,i=!1,o=[],s=null,a=!1,u=0,c=500,l=0,d=1e4,p={},f=Sp,m=null,h=null,v=0,g=0,y,x,w={},b,S,R=-1,P,E=!0,C=!1,T=sX,I=aX,A,N;return rt(t,n,function(F,L){ie(),F._getDbgPlgTargets=function(){return[x]},F.initialize=function(q,z,G){an(z,function(){return"PostChannel:initialize"},function(){var se=z;L.initialize(q,z,G);try{var pe=!!z[CSe];A=Lc(ks(F.identifier),z.evtNamespace&&z.evtNamespace());var Ee=F._getTelCtx();q.extensionConfig[F.identifier]=q.extensionConfig[F.identifier]||{},r=Ee.getExtCfg(F.identifier),N=iw(r.setTimeoutOverride,r.clearTimeoutOverride),E=!r.disableOptimizeObj&&ET(),M(se),r.eventsLimitInMem>0&&(d=r.eventsLimitInMem),r.immediateEventLimit>0&&(c=r.immediateEventLimit),r.autoFlushEventsLimit>0&&(b=r.autoFlushEventsLimit),Ti(r[uX])&&(T=r[uX]),Ti(r[lX])&&(I=r[lX]),Te(),r.httpXHROverride&&r.httpXHROverride.sendPOST&&(y=r.httpXHROverride),kn(q.anonCookieName)&&x.addQueryStringParameter("anoncknm",q.anonCookieName),x.sendHook=r.payloadPreprocessor,x.sendListener=r.payloadListener;var it=r.overrideEndpointUrl?r.overrideEndpointUrl:q.endpointUrl;F._notificationManager=z.getNotifyMgr(),x.initialize(it,F.core,F,y,r);var ht=q.disablePageUnloadEvents||[];gp(j,ht,A),bh(j,ht,A),_h(W,q.disablePageShowEvents,A)}catch(jt){throw F.setInitialized(!1),jt}},function(){return{coreConfig:q,core:z,extensions:G}})},F.processTelemetry=function(q,z){Ep(q,F.identifier),z=F._getTelCtx(z);var G=z.getExtCfg(F.identifier),se=!!r.disableTelemetry;G&&(se=se||!!G.disableTelemetry);var pe=q;!se&&!i&&(r[LT]&&(pe.iKey=r[LT]),G&&G[LT]&&(pe.iKey=G[LT]),k(pe,!0),C?Le(2,2):V()),F.processNext(pe,z)},F._doTeardown=function(q,z){Le(2,2),i=!0,x.teardown(),Fx(null,A),Mx(null,A),Ux(null,A),ie()};function M(q){var z=q.getWParam;q.getWParam=function(){var G=0;return r.ignoreMc1Ms0CookieProcessing&&(G=G|2),G|z()}}function j(q){var z=q||ga().event;z.type!=="beforeunload"&&(C=!0,x.setUnloading(C)),Le(2,2)}function W(q){C=!1,x.setUnloading(C)}function k(q,z){if(q.sendAttempt||(q.sendAttempt=0),q.latency||(q.latency=1),q.ext&&q.ext[tF]&&delete q.ext[tF],q.ext&&q.ext[kT]&&q.ext[kT].id&&delete q.ext[kT].id,E&&(Ep,q.ext=Ac(q.ext),q.baseData&&(q.baseData=Ac(q.baseData)),q.data&&(q.data=Ac(q.data))),q.sync){if(v||a)q.latency=3,q.sync=!1;else if(x){E&&(q=Ac(q)),x.sendSynchronousBatch(Oh.create(q.iKey,[q]),q.sync===!0?1:q.sync,3);return}}var G=q.latency,se=l,pe=d;G===4&&(se=u,pe=c);var Ee=!1;if(se<pe)Ee=!nr(q,z);else{var it=1,ht=ESe;G===4&&(it=4,ht=1),Ee=!0,is(q.iKey,q.latency,it,ht)&&(Ee=!nr(q,z))}Ee&&Rv(Pp,[q],Is.QueueFull)}F.setEventQueueLimits=function(q,z){d=q>0?q:1e4,b=z>0?z:0,Te();var G=l>q;if(!G&&S>0)for(var se=1;!G&&se<=3;se++){var pe=w[se];pe&&pe.batches&&le(pe.batches,function(Ee){Ee&&Ee.count()>=S&&(G=!0)})}Je(!0,G)},F.pause=function(){Re(),a=!0,x.pause()},F.resume=function(){a=!1,x.resume(),V()},F.addResponseHandler=function(q){x._responseHandlers.push(q)},F._loadTransmitProfiles=function(q){XR(),kt(q,function(z,G){var se=G.length;if(se>=2){var pe=se>2?G[2]:0;if(G.splice(0,se-2),G[1]<0&&(G[0]=-1),G[1]>0&&G[0]>0){var Ee=G[0]/G[1];G[0]=Math.ceil(Ee)*G[1]}pe>=0&&G[1]>=0&&pe>G[1]&&(pe=G[1]),G.push(pe),p[z]=G}})},F.flush=function(q,z,G){if(q===void 0&&(q=!0),!a)if(G=G||1,q)s==null?(Re(),Ba(1,0,G),s=be(function(){s=null,rb(z,G)},0)):o.push(z);else{var se=Re();H(1,1,G),z!=null&&z(),se&&V()}},F.setMsaAuthTicket=function(q){x.addHeader(nw,q)},F.hasEvents=$,F._setTransmitProfile=function(q){f!==q&&p[q]!==void 0&&(Re(),f=q,V())};function H(q,z,G){var se=Ba(q,z,G);return x.sendQueuedRequests(z,G),se}function $(){return l>0}function V(){if(R>=0&&Ba(R,0,P)&&x.sendQueuedRequests(0,P),u>0&&!h&&!a){var q=p[f][2];q>=0&&(h=be(function(){h=null,H(4,0,1),V()},q))}var z=p[f][1];!m&&!s&&z>=0&&!a&&($()?m=be(function(){m=null,H(g===0?3:1,0,1),g++,g%=2,V()},z):g=0)}F._backOffTransmission=function(){v<bSe&&(v++,Re(),V())},F._clearBackOff=function(){v&&(v=0,Re(),V())};function ie(){r=null,i=!1,o=[],s=null,a=!1,u=0,c=500,l=0,d=1e4,p={},f=Sp,m=null,h=null,v=0,g=0,y=null,w={},b=void 0,S=0,R=-1,P=null,E=!0,C=!1,T=sX,I=aX,A=null,N=iw(),x=new nX(oX,cX,_Se,{requeue:Pv,send:K,sent:ee,drop:oe,rspFail:de,oth:qe},N),ib(),Pt(),Te()}function be(q,z){z===0&&v&&(z=1);var G=1e3;return v&&(G=OT(v-1)),N.set(q,z*G)}function Re(){return m!==null?(N.clear(m),m=null,g=0,!0):!1}function Le(q,z){Re(),s&&(N.clear(s),s=null),a||H(1,q,z)}function Pt(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function Fe(q,z,G){var se=w[z];se||(z=1,se=w[z]);var pe=se.iKeyMap[q];return!pe&&G&&(pe=Oh.create(q),se.batches.push(pe),se.iKeyMap[q]=pe),pe}function Je(q,z){x.canSendRequest()&&!v&&(b>0&&l>b&&(z=!0),z&&s==null&&F.flush(q,null,20))}function nr(q,z){E&&(q=Ac(q));var G=q.latency,se=Fe(q.iKey,G,!0);return se.addEvent(q)?(G!==4?(l++,z&&q.sendAttempt===0&&Je(!q.sync,S>0&&se.count()>=S)):u++,!0):!1}function is(q,z,G,se){for(;G<=z;){var pe=Fe(q,z,!0);if(pe&&pe.count()>0){var Ee=pe.split(0,se),it=Ee.count();if(it>0)return G===4?u-=it:l-=it,U(Pp,[Ee],Is.QueueFull),!0}G++}return mu(),!1}function mu(){for(var q=0,z=0,G=function(pe){var Ee=w[pe];Ee&&Ee.batches&&le(Ee.batches,function(it){pe===4?q+=it.count():z+=it.count()})},se=1;se<=4;se++)G(se);l=z,u=q}function Ba(q,z,G){var se=!1,pe=z===0;return!pe||x.canSendRequest()?an(F.core,function(){return"PostChannel._queueBatches"},function(){for(var Ee=[],it=4;it>=q;){var ht=w[it];ht&&ht.batches&&ht.batches.length>0&&(le(ht.batches,function(jt){x.addBatch(jt)?se=se||jt&&jt.count()>0:Ee=Ee.concat(jt.events()),it===4?u-=jt.count():l-=jt.count()}),ht.batches=[],ht.iKeyMap={}),it--}Ee.length>0&&Rv(Pp,Ee,Is.KillSwitch),se&&R>=q&&(R=-1,P=0)},function(){return{latency:q,sendType:z,sendReason:G}},!pe):(R=R>=0?Math.min(R,q):q,P=Math.max(P,G)),se}function rb(q,z){H(1,0,z),mu(),Iv(function(){q&&q(),o.length>0?s=be(function(){s=null,rb(o.shift(),z)},0):(s=null,V())})}function Iv(q){x.isCompletelyIdle()?q():s=be(function(){s=null,Iv(q)},wSe)}function XR(){Re(),ib(),f=Sp,V()}function ib(){p={},p[Sp]=[2,1,0],p[_T]=[6,3,0],p[CT]=[18,9,0]}function Pv(q,z){var G=[],se=T;C&&(se=I),le(q,function(pe){pe&&pe.count()>0&&le(pe.events(),function(Ee){Ee&&(Ee.sync&&(Ee.latency=4,Ee.sync=!1),Ee.sendAttempt<se?(Ep(Ee,F.identifier),k(Ee,!1)):G.push(Ee))})}),G.length>0&&Rv(Pp,G,Is.NonRetryableStatus),C&&Le(2,2)}function yo(q,z){var G=F._notificationManager||{},se=G[q];if(se)try{se.apply(G,z)}catch(pe){Ut(F.diagLog(),1,74,q+" notification failed: "+pe)}}function Rv(q,z){for(var G=[],se=2;se<arguments.length;se++)G[se-2]=arguments[se];z&&z.length>0&&yo(q,[z].concat(G))}function U(q,z){for(var G=[],se=2;se<arguments.length;se++)G[se-2]=arguments[se];z&&z.length>0&&le(z,function(pe){pe&&pe.count()>0&&yo(q,[pe.events()].concat(G))})}function K(q,z,G){q&&q.length>0&&yo("eventsSendRequest",[z>=1e3&&z<=1999?z-1e3:0,G!==!0])}function ee(q,z){U("eventsSent",q,z),V()}function oe(q,z){U(Pp,q,z>=8e3&&z<=8999?z-8e3:Is.Unknown)}function de(q){U(Pp,q,Is.NonRetryableStatus),V()}function qe(q,z){U(Pp,q,Is.Unknown),V()}function Te(){!r||!r.disableAutoBatchFlushLimit?S=Math.max(oX*(cX+1),d/6):S=0}so(F,"_setTimeoutOverride",function(){return N.set},function(q){N=iw(q,N.clear)}),so(F,"_clearTimeoutOverride",function(){return N.clear},function(q){N=iw(N.set,q)})}),n}return t.__ieDyn=1,t}(yp),dX=SSe});var fX={};Xs(fX,{BE_PROFILE:()=>CT,NRT_PROFILE:()=>_T,PostChannel:()=>dX,RT_PROFILE:()=>Sp});var mX=D(()=>{pX();zL()});var gX=_(ya=>{"use strict";var TSe=ya&&ya.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ISe=ya&&ya.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hX=ya&&ya.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&TSe(t,e,n);return ISe(t,e),t};Object.defineProperty(ya,"__esModule",{value:!0});ya.oneDataSystemClientFactory=void 0;var PSe=async(e,t,n)=>{let r=await Promise.resolve().then(()=>hX((Cp(),qi(R9)))),i=await Promise.resolve().then(()=>hX((mX(),qi(fX)))),o=new r.AppInsightsCore,s=new i.PostChannel,a={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=l}let c=t.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(a,[]),o.addTelemetryInitializer(l=>{c&&(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),o},RSe=async(e,t,n)=>{let r=await PSe(e,t,n);return{logEvent:(o,s)=>{try{r==null||r.track({name:o,baseData:{name:o,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},flush:async()=>{try{r==null||r.unload()}catch(o){throw new Error(`Failed to flush app insights!
`+o.message)}}}};ya.oneDataSystemClientFactory=RSe});var uF=_(ze=>{"use strict";var aF=ze&&ze.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},cF=ze&&ze.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ze,"__esModule",{value:!0});ze.getShallowFileSize=ze.getShallowDirectorySizeSync=ze.getShallowDirectorySize=ze.confirmDirExists=ze.unlinkAsync=ze.readdirAsync=ze.readFileAsync=ze.writeFileAsync=ze.appendFileAsync=ze.accessAsync=ze.mkdirAsync=ze.lstatAsync=ze.statAsync=void 0;var qs=require("fs"),vX=require("path"),Bc=require("util");ze.statAsync=Bc.promisify(qs.stat);ze.lstatAsync=Bc.promisify(qs.lstat);ze.mkdirAsync=Bc.promisify(qs.mkdir);ze.accessAsync=Bc.promisify(qs.access);ze.appendFileAsync=Bc.promisify(qs.appendFile);ze.writeFileAsync=Bc.promisify(qs.writeFile);ze.readFileAsync=Bc.promisify(qs.readFile);ze.readdirAsync=Bc.promisify(qs.readdir);ze.unlinkAsync=Bc.promisify(qs.unlink);var ASe=function(e){return aF(void 0,void 0,void 0,function(){var t,n,r;return cF(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,ze.lstatAsync(e)];case 1:if(t=i.sent(),!t.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(n=i.sent(),!(n&&n.code==="ENOENT"))return[3,6];i.label=3;case 3:return i.trys.push([3,5,,6]),[4,ze.mkdirAsync(e)];case 4:return i.sent(),[3,6];case 5:if(r=i.sent(),r&&r.code!=="EEXIST")throw r;return[3,6];case 6:return[3,7];case 7:return[2]}})})};ze.confirmDirExists=ASe;var DSe=function(e){return aF(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return cF(this,function(a){switch(a.label){case 0:return[4,ze.readdirAsync(e)];case 1:t=a.sent(),n=0,r=0,i=t,a.label=2;case 2:return r<i.length?(o=i[r],[4,ze.statAsync(vX.join(e,o))]):[3,5];case 3:s=a.sent(),s.isFile()&&(n+=s.size),a.label=4;case 4:return r++,[3,2];case 5:return[2,n]}})})};ze.getShallowDirectorySize=DSe;var kSe=function(e){for(var t=qs.readdirSync(e),n=0,r=0;r<t.length;r++)n+=qs.statSync(vX.join(e,t[r])).size;return n};ze.getShallowDirectorySizeSync=kSe;var OSe=function(e){return aF(void 0,void 0,void 0,function(){var t;return cF(this,function(n){switch(n.label){case 0:return[4,ze.statAsync(e)];case 1:return t=n.sent(),t.isFile()?[2,t.size]:[2]}})})};ze.getShallowFileSize=OSe});var wX=_((Ap,xX)=>{"use strict";var lF=Ap&&Ap.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},dF=Ap&&Ap.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yX=Ap&&Ap.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},NSe=require("fs"),LSe=require("os"),Rp=require("path"),xa=uF(),FSe=function(){function e(){var t=this;this.TAG="Logger",this._cleanupTimeOut=60*30*1e3,this._logToFile=!1,this._logToConsole=!0;var n=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;n=="file+console"&&(this._logToFile=!0),n=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var r=process.env.APPLICATIONINSIGHTS_LOGDIR;r?Rp.isAbsolute(r)?this._tempDir=r:this._tempDir=Rp.join(process.cwd(),r):this._tempDir=Rp.join(LSe.tmpdir(),"appInsights-node"),this._fileFullPath=Rp.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(e._fileCleanupTimer||(e._fileCleanupTimer=setInterval(function(){t._fileCleanupTask()},this._cleanupTimeOut),e._fileCleanupTimer.unref()))}return e.prototype.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t?yX([t],n):n;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.info.apply(console,i)},e.prototype.warning=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t?yX([t],n):n;this._logToFile&&this._storeToDisk(i),this._logToConsole&&console.warn.apply(console,i)},e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._storeToDisk=function(t){return lF(this,void 0,void 0,function(){var n,r,i,o,s,a;return dF(this,function(u){switch(u.label){case 0:n=t+`\r
`,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,xa.confirmDirExists(this._tempDir)];case 2:return u.sent(),[3,4];case 3:return r=u.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(r&&r.message)),[2];case 4:return u.trys.push([4,6,,11]),[4,xa.accessAsync(this._fileFullPath,NSe.constants.F_OK)];case 5:return u.sent(),[3,11];case 6:i=u.sent(),u.label=7;case 7:return u.trys.push([7,9,,10]),[4,xa.appendFileAsync(this._fileFullPath,n)];case 8:return u.sent(),[2];case 9:return o=u.sent(),console.log(this.TAG,"Failed to put log into file: "+(i&&i.message)),[2];case 10:return[3,11];case 11:return u.trys.push([11,17,,18]),[4,xa.getShallowFileSize(this._fileFullPath)];case 12:return s=u.sent(),s>this.maxSizeBytes?[4,this._createBackupFile(n)]:[3,14];case 13:return u.sent(),[3,16];case 14:return[4,xa.appendFileAsync(this._fileFullPath,n)];case 15:u.sent(),u.label=16;case 16:return[3,18];case 17:return a=u.sent(),console.log(this.TAG,"Failed to create backup file: "+(a&&a.message)),[3,18];case 18:return[2]}})})},e.prototype._createBackupFile=function(t){return lF(this,void 0,void 0,function(){var n,r,i;return dF(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,4,5]),[4,xa.readFileAsync(this._fileFullPath)];case 1:return n=o.sent(),r=Rp.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,xa.writeFileAsync(r,n)];case 2:return o.sent(),[3,5];case 3:return i=o.sent(),console.log("Failed to generate backup log file",i),[3,5];case 4:return xa.writeFileAsync(this._fileFullPath,t),[7];case 5:return[2]}})})},e.prototype._fileCleanupTask=function(){return lF(this,void 0,void 0,function(){var t,n,r,i,o,s=this;return dF(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,xa.readdirAsync(this._tempDir)];case 1:t=a.sent(),t=t.filter(function(u){return Rp.basename(u).indexOf(s._backUpNameFormat)>-1}),t.sort(function(u,c){var l=new Date(parseInt(u.split(s._backUpNameFormat)[0])),d=new Date(parseInt(c.split(s._backUpNameFormat)[0]));if(l<d)return-1;if(l>=d)return 1}),n=t.length,r=0,a.label=2;case 2:return r<n-this.maxHistory?(i=Rp.join(this._tempDir,t[r]),[4,xa.unlinkAsync(i)]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return o=a.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(o&&o.message)),[3,7];case 7:return[2]}})})},e._fileCleanupTimer=null,e}();xX.exports=FSe});var Xt=_((nXe,bX)=>{"use strict";var EX=wX(),MSe=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.enableDebug&&EX.getInstance().info(this.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.disableWarnings||EX.getInstance().warning(this.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();bX.exports=MSe});var UT=_(MT=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0});MT.JsonConfig=void 0;var USe=require("fs"),FT=require("path"),_X=Xt(),qSe="APPLICATIONINSIGHTS_CONFIGURATION_FILE",jSe="APPLICATIONINSIGHTS_CONNECTION_STRING",CX="APPSETTING_",SX="APPINSIGHTS_INSTRUMENTATIONKEY",TX="APPINSIGHTS_INSTRUMENTATION_KEY",HSe="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",$Se="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",BSe="http_proxy",VSe="https_proxy",WSe="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",GSe="APPLICATION_INSIGHTS_NO_STATSBEAT",zSe="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",YSe="APPLICATION_INSIGHTS_NO_PATCH_MODULES",KSe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",XSe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",QSe="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",JSe="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",ZSe="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",eTe=function(){function e(){this.connectionString=process.env[jSe],this.instrumentationKey=process.env[SX]||process.env[CX+SX]||process.env[TX]||process.env[CX+TX],!this.connectionString&&this.instrumentationKey&&_X.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[$Se],this.extendedMetricDisablers=process.env[HSe],this.proxyHttpUrl=process.env[BSe],this.proxyHttpsUrl=process.env[VSe],this.noDiagnosticChannel=!!process.env[WSe],this.disableStatsbeat=!!process.env[GSe],this.noHttpAgentKeepAlive=!!process.env[zSe],this.noPatchModules=process.env[YSe]||"",this.enableWebInstrumentation=!!process.env[KSe]||!!process.env[JSe],this.webInstrumentationSrc=process.env[QSe]||"",this.webInstrumentationConnectionString=process.env[XSe]||process.env[ZSe]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype._loadJsonFile=function(){var t="applicationinsights.json",n=FT.join(__dirname,"../../"),r=FT.join(n,t),i=process.env[qSe];i&&(FT.isAbsolute(i)?r=i:r=FT.join(n,i));try{var o=JSON.parse(USe.readFileSync(r,"utf8"));o.disableStatsbeat!=null&&(this.disableStatsbeat=o.disableStatsbeat),o.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=o.disableStatsbeat),o.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=o.noDiagnosticChannel),o.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=o.noHttpAgentKeepAlive),o.connectionString!=null&&(this.connectionString=o.connectionString),o.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=o.extendedMetricDisablers),o.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=o.noDiagnosticChannel),o.proxyHttpUrl!=null&&(this.proxyHttpUrl=o.proxyHttpUrl),o.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=o.proxyHttpsUrl),o.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=o.proxyHttpsUrl),o.noPatchModules!=null&&(this.noPatchModules=o.noPatchModules),o.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=o.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),o.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=o.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),o.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=o.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),o.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=o.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),o.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=o.webInstrumentationConfig),o.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=o.webInstrumentationSrc),this.endpointUrl=o.endpointUrl,this.maxBatchSize=o.maxBatchSize,this.maxBatchIntervalMs=o.maxBatchIntervalMs,this.disableAppInsights=o.disableAppInsights,this.samplingPercentage=o.samplingPercentage,this.correlationIdRetryIntervalMs=o.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=o.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=o.ignoreLegacyHeaders,this.distributedTracingMode=o.distributedTracingMode,this.enableAutoCollectExternalLoggers=o.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=o.enableAutoCollectConsole,this.enableAutoCollectExceptions=o.enableAutoCollectExceptions,this.enableAutoCollectPerformance=o.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=o.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=o.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=o.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=o.enableAutoCollectRequests,this.enableAutoCollectDependencies=o.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=o.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=o.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=o.enableUseAsyncHooks,this.enableUseDiskRetryCaching=o.enableUseDiskRetryCaching,this.enableResendInterval=o.enableResendInterval,this.enableMaxBytesOnDisk=o.enableMaxBytesOnDisk,this.enableInternalDebugLogging=o.enableInternalDebugLogging,this.enableInternalWarningLogging=o.enableInternalWarningLogging,this.enableSendLiveMetrics=o.enableSendLiveMetrics,this.quickPulseHost=o.quickPulseHost}catch(s){_X.info("Missing or invalid JSON config file: ",s)}},e}();MT.JsonConfig=eTe});var BX=_((ke,$X)=>{ke=$X.exports=Ze;var yt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?yt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:yt=function(){};ke.SEMVER_SPEC_VERSION="2.0.0";var fF=256,qT=Number.MAX_SAFE_INTEGER||9007199254740991,pF=16,_t=ke.re=[],Q=ke.src=[],Ke=0,Lh=Ke++;Q[Lh]="0|[1-9]\\d*";var Fh=Ke++;Q[Fh]="[0-9]+";var vF=Ke++;Q[vF]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var PX=Ke++;Q[PX]="("+Q[Lh]+")\\.("+Q[Lh]+")\\.("+Q[Lh]+")";var RX=Ke++;Q[RX]="("+Q[Fh]+")\\.("+Q[Fh]+")\\.("+Q[Fh]+")";var mF=Ke++;Q[mF]="(?:"+Q[Lh]+"|"+Q[vF]+")";var hF=Ke++;Q[hF]="(?:"+Q[Fh]+"|"+Q[vF]+")";var yF=Ke++;Q[yF]="(?:-("+Q[mF]+"(?:\\."+Q[mF]+")*))";var xF=Ke++;Q[xF]="(?:-?("+Q[hF]+"(?:\\."+Q[hF]+")*))";var gF=Ke++;Q[gF]="[0-9A-Za-z-]+";var aw=Ke++;Q[aw]="(?:\\+("+Q[gF]+"(?:\\."+Q[gF]+")*))";var wF=Ke++,AX="v?"+Q[PX]+Q[yF]+"?"+Q[aw]+"?";Q[wF]="^"+AX+"$";var EF="[v=\\s]*"+Q[RX]+Q[xF]+"?"+Q[aw]+"?",bF=Ke++;Q[bF]="^"+EF+"$";var qh=Ke++;Q[qh]="((?:<|>)?=?)";var jT=Ke++;Q[jT]=Q[Fh]+"|x|X|\\*";var HT=Ke++;Q[HT]=Q[Lh]+"|x|X|\\*";var Dp=Ke++;Q[Dp]="[v=\\s]*("+Q[HT]+")(?:\\.("+Q[HT]+")(?:\\.("+Q[HT]+")(?:"+Q[yF]+")?"+Q[aw]+"?)?)?";var Uh=Ke++;Q[Uh]="[v=\\s]*("+Q[jT]+")(?:\\.("+Q[jT]+")(?:\\.("+Q[jT]+")(?:"+Q[xF]+")?"+Q[aw]+"?)?)?";var DX=Ke++;Q[DX]="^"+Q[qh]+"\\s*"+Q[Dp]+"$";var kX=Ke++;Q[kX]="^"+Q[qh]+"\\s*"+Q[Uh]+"$";var OX=Ke++;Q[OX]="(?:^|[^\\d])(\\d{1,"+pF+"})(?:\\.(\\d{1,"+pF+"}))?(?:\\.(\\d{1,"+pF+"}))?(?:$|[^\\d])";var zT=Ke++;Q[zT]="(?:~>?)";var $T=Ke++;Q[$T]="(\\s*)"+Q[zT]+"\\s+";_t[$T]=new RegExp(Q[$T],"g");var tTe="$1~",NX=Ke++;Q[NX]="^"+Q[zT]+Q[Dp]+"$";var LX=Ke++;Q[LX]="^"+Q[zT]+Q[Uh]+"$";var YT=Ke++;Q[YT]="(?:\\^)";var BT=Ke++;Q[BT]="(\\s*)"+Q[YT]+"\\s+";_t[BT]=new RegExp(Q[BT],"g");var nTe="$1^",FX=Ke++;Q[FX]="^"+Q[YT]+Q[Dp]+"$";var MX=Ke++;Q[MX]="^"+Q[YT]+Q[Uh]+"$";var _F=Ke++;Q[_F]="^"+Q[qh]+"\\s*("+EF+")$|^$";var CF=Ke++;Q[CF]="^"+Q[qh]+"\\s*("+AX+")$|^$";var ow=Ke++;Q[ow]="(\\s*)"+Q[qh]+"\\s*("+EF+"|"+Q[Dp]+")";_t[ow]=new RegExp(Q[ow],"g");var rTe="$1$2$3",UX=Ke++;Q[UX]="^\\s*("+Q[Dp]+")\\s+-\\s+("+Q[Dp]+")\\s*$";var qX=Ke++;Q[qX]="^\\s*("+Q[Uh]+")\\s+-\\s+("+Q[Uh]+")\\s*$";var jX=Ke++;Q[jX]="(<|>)?=?\\s*\\*";for(Tl=0;Tl<Ke;Tl++)yt(Tl,Q[Tl]),_t[Tl]||(_t[Tl]=new RegExp(Q[Tl]));var Tl;ke.parse=kp;function kp(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ze)return e;if(typeof e!="string"||e.length>fF)return null;var n=t.loose?_t[bF]:_t[wF];if(!n.test(e))return null;try{return new Ze(e,t)}catch{return null}}ke.valid=iTe;function iTe(e,t){var n=kp(e,t);return n?n.version:null}ke.clean=oTe;function oTe(e,t){var n=kp(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}ke.SemVer=Ze;function Ze(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ze){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>fF)throw new TypeError("version is longer than "+fF+" characters");if(!(this instanceof Ze))return new Ze(e,t);yt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?_t[bF]:_t[wF]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>qT||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qT||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qT||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(r){if(/^[0-9]+$/.test(r)){var i=+r;if(i>=0&&i<qT)return i}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}Ze.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Ze.prototype.toString=function(){return this.version};Ze.prototype.compare=function(e){return yt("SemVer.compare",this.version,this.options,e),e instanceof Ze||(e=new Ze(e,this.options)),this.compareMain(e)||this.comparePre(e)};Ze.prototype.compareMain=function(e){return e instanceof Ze||(e=new Ze(e,this.options)),Mh(this.major,e.major)||Mh(this.minor,e.minor)||Mh(this.patch,e.patch)};Ze.prototype.comparePre=function(e){if(e instanceof Ze||(e=new Ze(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(yt("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return Mh(n,r)}while(++t)};Ze.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};ke.inc=sTe;function sTe(e,t,n,r){typeof n=="string"&&(r=n,n=void 0);try{return new Ze(e,n).inc(t,r).version}catch{return null}}ke.diff=aTe;function aTe(e,t){if(SF(e,t))return null;var n=kp(e),r=kp(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if((s==="major"||s==="minor"||s==="patch")&&n[s]!==r[s])return i+s;return o}ke.compareIdentifiers=Mh;var IX=/^[0-9]+$/;function Mh(e,t){var n=IX.test(e),r=IX.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}ke.rcompareIdentifiers=cTe;function cTe(e,t){return Mh(t,e)}ke.major=uTe;function uTe(e,t){return new Ze(e,t).major}ke.minor=lTe;function lTe(e,t){return new Ze(e,t).minor}ke.patch=dTe;function dTe(e,t){return new Ze(e,t).patch}ke.compare=Vc;function Vc(e,t,n){return new Ze(e,n).compare(new Ze(t,n))}ke.compareLoose=pTe;function pTe(e,t){return Vc(e,t,!0)}ke.rcompare=fTe;function fTe(e,t,n){return Vc(t,e,n)}ke.sort=mTe;function mTe(e,t){return e.sort(function(n,r){return ke.compare(n,r,t)})}ke.rsort=hTe;function hTe(e,t){return e.sort(function(n,r){return ke.rcompare(n,r,t)})}ke.gt=sw;function sw(e,t,n){return Vc(e,t,n)>0}ke.lt=VT;function VT(e,t,n){return Vc(e,t,n)<0}ke.eq=SF;function SF(e,t,n){return Vc(e,t,n)===0}ke.neq=HX;function HX(e,t,n){return Vc(e,t,n)!==0}ke.gte=TF;function TF(e,t,n){return Vc(e,t,n)>=0}ke.lte=IF;function IF(e,t,n){return Vc(e,t,n)<=0}ke.cmp=WT;function WT(e,t,n,r){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return SF(e,n,r);case"!=":return HX(e,n,r);case">":return sw(e,n,r);case">=":return TF(e,n,r);case"<":return VT(e,n,r);case"<=":return IF(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}ke.Comparator=Ho;function Ho(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ho){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Ho))return new Ho(e,t);yt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===cw?this.value="":this.value=this.operator+this.semver.version,yt("comp",this)}var cw={};Ho.prototype.parse=function(e){var t=this.options.loose?_t[_F]:_t[CF],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],this.operator==="="&&(this.operator=""),n[2]?this.semver=new Ze(n[2],this.options.loose):this.semver=cw};Ho.prototype.toString=function(){return this.value};Ho.prototype.test=function(e){return yt("Comparator.test",e,this.options.loose),this.semver===cw?!0:(typeof e=="string"&&(e=new Ze(e,this.options)),WT(e,this.operator,this.semver,this.options))};Ho.prototype.intersects=function(e,t){if(!(e instanceof Ho))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var n;if(this.operator==="")return n=new Qt(e.value,t),GT(this.value,n,t);if(e.operator==="")return n=new Qt(this.value,t),GT(e.semver,n,t);var r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=WT(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=WT(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||a||u};ke.Range=Qt;function Qt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Qt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Qt(e.raw,t);if(e instanceof Ho)return new Qt(e.value,t);if(!(this instanceof Qt))return new Qt(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(n){return this.parseRange(n.trim())},this).filter(function(n){return n.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}Qt.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};Qt.prototype.toString=function(){return this.range};Qt.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?_t[qX]:_t[UX];e=e.replace(n,STe),yt("hyphen replace",e),e=e.replace(_t[ow],rTe),yt("comparator trim",e,_t[ow]),e=e.replace(_t[$T],tTe),e=e.replace(_t[BT],nTe),e=e.split(/\s+/).join(" ");var r=t?_t[_F]:_t[CF],i=e.split(" ").map(function(o){return vTe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(r)})),i=i.map(function(o){return new Ho(o,this.options)},this),i};Qt.prototype.intersects=function(e,t){if(!(e instanceof Qt))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(r){return e.set.some(function(i){return i.every(function(o){return r.intersects(o,t)})})})})};ke.toComparators=gTe;function gTe(e,t){return new Qt(e,t).set.map(function(n){return n.map(function(r){return r.value}).join(" ").trim().split(" ")})}function vTe(e,t){return yt("comp",e,t),e=wTe(e,t),yt("caret",e),e=yTe(e,t),yt("tildes",e),e=bTe(e,t),yt("xrange",e),e=CTe(e,t),yt("stars",e),e}function Qr(e){return!e||e.toLowerCase()==="x"||e==="*"}function yTe(e,t){return e.trim().split(/\s+/).map(function(n){return xTe(n,t)}).join(" ")}function xTe(e,t){var n=t.loose?_t[LX]:_t[NX];return e.replace(n,function(r,i,o,s,a){yt("tilde",e,r,i,o,s,a);var u;return Qr(i)?u="":Qr(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Qr(s)?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(yt("replaceTilde pr",a),u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",yt("tilde return",u),u})}function wTe(e,t){return e.trim().split(/\s+/).map(function(n){return ETe(n,t)}).join(" ")}function ETe(e,t){yt("caret",e,t);var n=t.loose?_t[MX]:_t[FX];return e.replace(n,function(r,i,o,s,a){yt("caret",e,r,i,o,s,a);var u;return Qr(i)?u="":Qr(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":Qr(s)?i==="0"?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(yt("replaceCaret pr",a),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(yt("no pr"),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),yt("caret return",u),u})}function bTe(e,t){return yt("replaceXRanges",e,t),e.split(/\s+/).map(function(n){return _Te(n,t)}).join(" ")}function _Te(e,t){e=e.trim();var n=t.loose?_t[kX]:_t[DX];return e.replace(n,function(r,i,o,s,a,u){yt("xRange",e,r,i,o,s,a,u);var c=Qr(o),l=c||Qr(s),d=l||Qr(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?r="<0.0.0":r="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a):l?r=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(r=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),yt("xRange return",r),r})}function CTe(e,t){return yt("replaceStars",e,t),e.trim().replace(_t[jX],"")}function STe(e,t,n,r,i,o,s,a,u,c,l,d,p){return Qr(n)?t="":Qr(r)?t=">="+n+".0.0":Qr(i)?t=">="+n+"."+r+".0":t=">="+t,Qr(u)?a="":Qr(c)?a="<"+(+u+1)+".0.0":Qr(l)?a="<"+u+"."+(+c+1)+".0":d?a="<="+u+"."+c+"."+l+"-"+d:a="<="+a,(t+" "+a).trim()}Qt.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new Ze(e,this.options));for(var t=0;t<this.set.length;t++)if(TTe(this.set[t],e,this.options))return!0;return!1};function TTe(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(yt(e[r].semver),e[r].semver!==cw&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}ke.satisfies=GT;function GT(e,t,n){try{t=new Qt(t,n)}catch{return!1}return t.test(e)}ke.maxSatisfying=ITe;function ITe(e,t,n){var r=null,i=null;try{var o=new Qt(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new Ze(r,n))}),r}ke.minSatisfying=PTe;function PTe(e,t,n){var r=null,i=null;try{var o=new Qt(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new Ze(r,n))}),r}ke.minVersion=RTe;function RTe(e,t){e=new Qt(e,t);var n=new Ze("0.0.0");if(e.test(n)||(n=new Ze("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(o){var s=new Ze(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!n||sw(n,s))&&(n=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return n&&e.test(n)?n:null}ke.validRange=ATe;function ATe(e,t){try{return new Qt(e,t).range||"*"}catch{return null}}ke.ltr=DTe;function DTe(e,t,n){return PF(e,t,"<",n)}ke.gtr=kTe;function kTe(e,t,n){return PF(e,t,">",n)}ke.outside=PF;function PF(e,t,n,r){e=new Ze(e,r),t=new Qt(t,r);var i,o,s,a,u;switch(n){case">":i=sw,o=IF,s=VT,a=">",u=">=";break;case"<":i=VT,o=TF,s=sw,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(GT(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],d=null,p=null;if(l.forEach(function(f){f.semver===cw&&(f=new Ho(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,r)?d=f:s(f.semver,p.semver,r)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===u&&s(e,p.semver))return!1}return!0}ke.prerelease=OTe;function OTe(e,t){var n=kp(e,t);return n&&n.prerelease.length?n.prerelease:null}ke.intersects=NTe;function NTe(e,t,n){return e=new Qt(e,n),t=new Qt(t,n),e.intersects(t)}ke.coerce=LTe;function LTe(e){if(e instanceof Ze)return e;if(typeof e!="string")return null;var t=e.match(_t[OX]);return t==null?null:kp(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var RF=_(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.makePatchingRequire=void 0;var FTe=require("path"),MTe=BX(),VX=cn(),GX=require("module"),UTe=Object.keys(process.binding("natives")),WX=GX.prototype.require;function qTe(e){var t={};return function(r){var i=WX.apply(this,arguments);if(e[r]){var o=GX._resolveFilename(r,this);if(t.hasOwnProperty(o))return t[o];var s=void 0;if(UTe.indexOf(r)<0)try{s=WX.call(this,FTe.join(r,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var u=i,c=0,l=e[r];c<l.length;c++){var d=l[c];if(MTe.satisfies(s,d.versionSpecifier)&&(u=d.patch(u,o),VX.channel)){var p=d.publisherName||r;VX.channel.addPatchedModule(p,s)}}return t[o]=u}return i}}KT.makePatchingRequire=qTe});var zX=_((oXe,jTe)=>{jTe.exports={name:"diagnostic-channel",version:"1.1.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var cn=_($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.channel=$o.ContextPreservingEventEmitter=$o.trueFilter=$o.makePatchingRequire=void 0;var HTe=RF(),$Te=RF();Object.defineProperty($o,"makePatchingRequire",{enumerable:!0,get:function(){return $Te.makePatchingRequire}});var BTe=function(e){return!0};$o.trueFilter=BTe;var KX=function(){function e(){this.version=zX().version,this.subscribers={},this.contextPreservationFunction=function(t){return t},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(t){var n=this.subscribers[t];return n?n.some(function(r){var i=r.filter;return!i||i(!1)}):!1},e.prototype.publish=function(t,n){if(!this.currentlyPublishing){var r=this.subscribers[t];if(r){var i={timestamp:Date.now(),data:n};this.currentlyPublishing=!0,r.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(t,n,r,i){r===void 0&&(r=$o.trueFilter),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:n,filter:r,patchCallback:i});var o=this.checkIfModuleIsAlreadyPatched(t);o&&i&&i(o.name,o.version)},e.prototype.unsubscribe=function(t,n,r){r===void 0&&(r=$o.trueFilter);var i=this.subscribers[t];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===n&&i[o].filter===r)return i.splice(o,1),!0}return!1},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(n){return n},Object.getOwnPropertyNames(this.knownPatches).forEach(function(n){return delete t.knownPatches[n]})},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t)},e.prototype.addContextPreservation=function(t){var n=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return t(n(r))}},e.prototype.registerMonkeyPatch=function(t,n){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(n)},e.prototype.getPatchesObject=function(){return this.knownPatches},e.prototype.addPatchedModule=function(t,n){for(var r=0,i=this.modulesPatched;r<i.length;r++){var o=i[r];if(o.name===t)return}this.modulesPatched.push({name:t,version:n});var s=this.subscribers[t];s&&s.forEach(function(a){a.patchCallback&&a.patchCallback(t,n)})},e.prototype.checkIfModuleIsAlreadyPatched=function(t){for(var n=0,r=this.modulesPatched;n<r.length;n++){var i=r[n];if(i.name===t)return i}return null},e}();$o.ContextPreservingEventEmitter=KX;global.diagnosticsSource||(global.diagnosticsSource=new KX,YX=require("module"),YX.prototype.require=HTe.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var YX;$o.channel=global.diagnosticsSource});var XX,QX=D(()=>{XX=typeof globalThis=="object"?globalThis:global});var JX=D(()=>{QX()});var ZX=D(()=>{JX()});var Il,AF=D(()=>{Il="1.3.0"});function VTe(e){var t=new Set([e]),n=new Set,r=e.match(e7);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(i.prerelease!=null)return function(u){return u===e};function o(a){return n.add(a),!1}function s(a){return t.add(a),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(e7);if(!c)return o(u);var l={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return l.prerelease!=null||i.major!==l.major?o(u):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(u):o(u):i.minor<=l.minor?s(u):o(u)}}var e7,t7,n7=D(()=>{AF();e7=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;t7=VTe(Il)});function wa(e,t,n,r){var i;r===void 0&&(r=!1);var o=lw[uw]=(i=lw[uw])!==null&&i!==void 0?i:{version:Il};if(!r&&o[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(o.version!==Il){var s=new Error("@opentelemetry/api: All API registration versions must match");return n.error(s.stack||s.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Il+"."),!0}function co(e){var t,n,r=(t=lw[uw])===null||t===void 0?void 0:t.version;if(!(!r||!t7(r)))return(n=lw[uw])===null||n===void 0?void 0:n[e]}function Ea(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Il+".");var n=lw[uw];n&&delete n[e]}var WTe,uw,lw,Op=D(()=>{ZX();AF();n7();WTe=Il.split(".")[0],uw=Symbol.for("opentelemetry.js.api."+WTe),lw=XX});function dw(e,t,n){var r=co("diag");if(r)return n.unshift(t),r[e].apply(r,zTe([],GTe(n),!1))}var GTe,zTe,r7,i7=D(()=>{Op();GTe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},zTe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},r7=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dw("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dw("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dw("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dw("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dw("verbose",this._namespace,t)},e}()});var Nt,XT=D(()=>{(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Nt||(Nt={}))});function o7(e,t){e<Nt.NONE?e=Nt.NONE:e>Nt.ALL&&(e=Nt.ALL),t=t||{};function n(r,i){var o=t[r];return typeof o=="function"&&e>=i?o.bind(t):function(){}}return{error:n("error",Nt.ERROR),warn:n("warn",Nt.WARN),info:n("info",Nt.INFO),debug:n("debug",Nt.DEBUG),verbose:n("verbose",Nt.VERBOSE)}}var s7=D(()=>{XT()});var YTe,KTe,XTe,Nr,Np=D(()=>{i7();s7();XT();Op();YTe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},KTe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},XTe="diag",Nr=function(){function e(){function t(i){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=co("diag");if(a)return a[i].apply(a,KTe([],YTe(o),!1))}}var n=this,r=function(i,o){var s,a,u;if(o===void 0&&(o={logLevel:Nt.INFO}),i===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=c.stack)!==null&&s!==void 0?s:c.message),!1}typeof o=="number"&&(o={logLevel:o});var l=co("diag"),d=o7((a=o.logLevel)!==null&&a!==void 0?a:Nt.INFO,i);if(l&&!o.suppressOverrideMessage){var p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return wa("diag",d,n,!0)};n.setLogger=r,n.disable=function(){Ea(XTe,n)},n.createComponentLogger=function(i){return new r7(i)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()});var QTe,JTe,a7,c7=D(()=>{QTe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},JTe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a7=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=QTe(t,2),r=n[0],i=n[1];return[r,i]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new e(this._entries);try{for(var s=JTe(r),a=s.next();!a.done;a=s.next()){var u=a.value;o._entries.delete(u)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}()});var u7,l7=D(()=>{u7=Symbol("BaggageEntryMetadata")});function d7(e){return e===void 0&&(e={}),new a7(new Map(Object.entries(e)))}function QT(e){return typeof e!="string"&&(ZTe.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:u7,toString:function(){return e}}}var ZTe,DF=D(()=>{Np();c7();l7();ZTe=Nr.instance()});function ba(e){return Symbol.for(e)}var eIe,JT,pw=D(()=>{eIe=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,i){var o=new e(n._currentContext);return o._currentContext.set(r,i),o},n.deleteValue=function(r){var i=new e(n._currentContext);return i._currentContext.delete(r),i}}return e}(),JT=new eIe});var kF,p7,f7=D(()=>{kF=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],p7=function(){function e(){function t(r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var s=console[r];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,i)}}}for(var n=0;n<kF.length;n++)this[kF[n].n]=t(kF[n].c)}return e}()});function m7(){return LF}var jh,tIe,OF,nIe,rIe,iIe,NF,oIe,sIe,aIe,LF,cIe,uIe,lIe,dIe,pIe,fIe,FF=D(()=>{jh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tIe=function(){function e(){}return e.prototype.createHistogram=function(t,n){return uIe},e.prototype.createCounter=function(t,n){return cIe},e.prototype.createUpDownCounter=function(t,n){return lIe},e.prototype.createObservableGauge=function(t,n){return pIe},e.prototype.createObservableCounter=function(t,n){return dIe},e.prototype.createObservableUpDownCounter=function(t,n){return fIe},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),OF=function(){function e(){}return e}(),nIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(OF),rIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(OF),iIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(OF),NF=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),oIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(NF),sIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(NF),aIe=function(e){jh(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(NF),LF=new tIe,cIe=new nIe,uIe=new iIe,lIe=new rIe,dIe=new oIe,pIe=new sIe,fIe=new aIe});var ZT,h7=D(()=>{(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(ZT||(ZT={}))});var eI,tI,MF=D(()=>{eI={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},tI={set:function(e,t,n){e!=null&&(e[t]=n)}}});var mIe,hIe,g7,v7=D(()=>{pw();mIe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},hIe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},g7=function(){function e(){}return e.prototype.active=function(){return JT},e.prototype.with=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return n.call.apply(n,hIe([r],mIe(i),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}()});var gIe,vIe,UF,yIe,Hh,nI=D(()=>{v7();Op();Np();gIe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},vIe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},UF="context",yIe=new g7,Hh=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return wa(UF,t,Nr.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,vIe([t,n,r],gIe(o),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return co(UF)||yIe},e.prototype.disable=function(){this._getContextManager().disable(),Ea(UF,Nr.instance())},e}()});var xn,qF=D(()=>{(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(xn||(xn={}))});var fw,mw,$h,rI=D(()=>{qF();fw="0000000000000000",mw="00000000000000000000000000000000",$h={traceId:mw,spanId:fw,traceFlags:xn.NONE}});var Pl,iI=D(()=>{rI();Pl=function(){function e(t){t===void 0&&(t=$h),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}()});function oI(e){return e.getValue(jF)||void 0}function y7(){return oI(Hh.getInstance().active())}function hw(e,t){return e.setValue(jF,t)}function x7(e){return e.deleteValue(jF)}function w7(e,t){return hw(e,new Pl(t))}function sI(e){var t;return(t=oI(e))===null||t===void 0?void 0:t.spanContext()}var jF,HF=D(()=>{pw();iI();nI();jF=ba("OpenTelemetry Context Key SPAN")});function Lp(e){return xIe.test(e)&&e!==mw}function $F(e){return wIe.test(e)&&e!==fw}function Bo(e){return Lp(e.traceId)&&$F(e.spanId)}function E7(e){return new Pl(e)}var xIe,wIe,aI=D(()=>{rI();iI();xIe=/^([0-9a-f]{32})$/i,wIe=/^[0-9a-f]{16}$/i});function EIe(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var b7,cI,BF=D(()=>{nI();HF();iI();aI();b7=Hh.getInstance(),cI=function(){function e(){}return e.prototype.startSpan=function(t,n,r){var i=!!(n!=null&&n.root);if(i)return new Pl;var o=r&&sI(r);return EIe(o)&&Bo(o)?new Pl(o):new Pl},e.prototype.startActiveSpan=function(t,n,r,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(o=n,a=r):(o=n,s=r,a=i);var u=s??b7.active(),c=this.startSpan(t,o,u),l=hw(u,c);return b7.with(l,a,void 0,c)}},e}()});var bIe,uI,VF=D(()=>{BF();bIe=new cI,uI=function(){function e(t,n,r,i){this._provider=t,this.name=n,this.version=r,this.options=i}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):bIe},e}()});var _7,C7=D(()=>{BF();_7=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new cI},e}()});var _Ie,gw,WF=D(()=>{VF();C7();_Ie=new _7,gw=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var i;return(i=this.getDelegateTracer(t,n,r))!==null&&i!==void 0?i:new uI(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:_Ie},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(t,n,r)},e}()});var Di,S7=D(()=>{(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Di||(Di={}))});var Bh,T7=D(()=>{(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Bh||(Bh={}))});var Vh,I7=D(()=>{(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Vh||(Vh={}))});function P7(e){return TIe.test(e)}function R7(e){return IIe.test(e)&&!PIe.test(e)}var GF,CIe,SIe,TIe,IIe,PIe,A7=D(()=>{GF="[_0-9a-z-*/]",CIe="[a-z]"+GF+"{0,255}",SIe="[a-z0-9]"+GF+"{0,240}@[a-z]"+GF+"{0,13}",TIe=new RegExp("^(?:"+CIe+"|"+SIe+")$"),IIe=/^[ -~]{0,255}[!-~]$/,PIe=/,|=/});var D7,RIe,k7,O7,N7,L7=D(()=>{A7();D7=32,RIe=512,k7=",",O7="=",N7=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+O7+t.get(r)),n},[]).join(k7)},e.prototype._parse=function(t){t.length>RIe||(this._internalState=t.split(k7).reverse().reduce(function(n,r){var i=r.trim(),o=i.indexOf(O7);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,r.length);P7(s)&&R7(a)&&n.set(s,a)}return n},new Map),this._internalState.size>D7&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,D7))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()});function F7(e){return new N7(e)}var M7=D(()=>{L7()});var Jr,U7=D(()=>{nI();Jr=Hh.getInstance()});var je,q7=D(()=>{Np();je=Nr.instance()});var AIe,j7,H7=D(()=>{FF();AIe=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return LF},e}(),j7=new AIe});var zF,$7,B7=D(()=>{H7();Op();Np();zF="metrics",$7=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return wa(zF,t,Nr.instance())},e.prototype.getMeterProvider=function(){return co(zF)||j7},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){Ea(zF,Nr.instance())},e}()});var YF,V7=D(()=>{B7();YF=$7.getInstance()});var W7,G7=D(()=>{W7=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}()});function z7(e){return e.getValue(KF)||void 0}function Y7(e,t){return e.setValue(KF,t)}function K7(e){return e.deleteValue(KF)}var KF,X7=D(()=>{pw();KF=ba("OpenTelemetry Baggage Key")});var XF,DIe,Q7,J7=D(()=>{Op();G7();MF();X7();DF();Np();XF="propagation",DIe=new W7,Q7=function(){function e(){this.createBaggage=d7,this.getBaggage=z7,this.setBaggage=Y7,this.deleteBaggage=K7}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return wa(XF,t,Nr.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=tI),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=eI),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){Ea(XF,Nr.instance())},e.prototype._getGlobalPropagator=function(){return co(XF)||DIe},e}()});var Wc,Z7=D(()=>{J7();Wc=Q7.getInstance()});var QF,eQ,tQ=D(()=>{Op();WF();aI();HF();Np();QF="trace",eQ=function(){function e(){this._proxyTracerProvider=new gw,this.wrapSpanContext=E7,this.isSpanContextValid=Bo,this.deleteSpan=x7,this.getSpan=oI,this.getActiveSpan=y7,this.getSpanContext=sI,this.setSpan=hw,this.setSpanContext=w7}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=wa(QF,this._proxyTracerProvider,Nr.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return co(QF)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Ea(QF,Nr.instance()),this._proxyTracerProvider=new gw},e}()});var Hn,nQ=D(()=>{tQ();Hn=eQ.getInstance()});var Fp={};Xs(Fp,{DiagConsoleLogger:()=>p7,DiagLogLevel:()=>Nt,INVALID_SPANID:()=>fw,INVALID_SPAN_CONTEXT:()=>$h,INVALID_TRACEID:()=>mw,ProxyTracer:()=>uI,ProxyTracerProvider:()=>gw,ROOT_CONTEXT:()=>JT,SamplingDecision:()=>Di,SpanKind:()=>Bh,SpanStatusCode:()=>Vh,TraceFlags:()=>xn,ValueType:()=>ZT,baggageEntryMetadataFromString:()=>QT,context:()=>Jr,createContextKey:()=>ba,createNoopMeter:()=>m7,createTraceState:()=>F7,default:()=>kIe,defaultTextMapGetter:()=>eI,defaultTextMapSetter:()=>tI,diag:()=>je,isSpanContextValid:()=>Bo,isValidSpanId:()=>$F,isValidTraceId:()=>Lp,metrics:()=>YF,propagation:()=>Wc,trace:()=>Hn});var kIe,gt=D(()=>{DF();pw();f7();XT();FF();h7();MF();VF();WF();S7();T7();I7();qF();M7();aI();rI();U7();q7();V7();Z7();nQ();kIe={context:Jr,diag:je,metrics:YF,propagation:Wc,trace:Hn}});function vw(e){return e.setValue(JF,!0)}function OIe(e){return e.deleteValue(JF)}function Mp(e){return e.getValue(JF)===!0}var JF,yw=D(()=>{gt();JF=ba("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var rQ,lI,Wh,dI,iQ,oQ,sQ,ZF=D(()=>{rQ="=",lI=";",Wh=",",dI="baggage",iQ=180,oQ=4096,sQ=8192});var n1={};Xs(n1,{getKeyPairs:()=>t1,parseKeyPairsIntoRecord:()=>LIe,parsePairKeyValue:()=>pI,serializeKeyPairs:()=>e1});function e1(e){return e.reduce(function(t,n){var r=""+t+(t!==""?Wh:"")+n;return r.length>sQ?t:r},"")}function t1(e){return e.getAllEntries().map(function(t){var n=NIe(t,2),r=n[0],i=n[1],o=encodeURIComponent(r)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(o+=lI+i.metadata.toString()),o})}function pI(e){var t=e.split(lI);if(!(t.length<=0)){var n=t.shift();if(n){var r=n.split(rQ);if(r.length===2){var i=decodeURIComponent(r[0].trim()),o=decodeURIComponent(r[1].trim()),s;return t.length>0&&(s=QT(t.join(lI))),{key:i,value:o,metadata:s}}}}}function LIe(e){return typeof e!="string"||e.length===0?{}:e.split(Wh).map(function(t){return pI(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,n){return t[n.key]=n.value,t},{})}var NIe,r1=D(()=>{gt();ZF();NIe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}});var i1,aQ=D(()=>{gt();yw();ZF();r1();i1=function(){function e(){}return e.prototype.inject=function(t,n,r){var i=Wc.getBaggage(t);if(!(!i||Mp(t))){var o=t1(i).filter(function(a){return a.length<=oQ}).slice(0,iQ),s=e1(o);s.length>0&&r.set(n,dI,s)}},e.prototype.extract=function(t,n,r){var i=r.get(n,dI),o=Array.isArray(i)?i.join(Wh):i;if(!o)return t;var s={};if(o.length===0)return t;var a=o.split(Wh);return a.forEach(function(u){var c=pI(u);if(c){var l={value:c.value};c.metadata&&(l.metadata=c.metadata),s[c.key]=l}}),Object.entries(s).length===0?t:Wc.setBaggage(t,Wc.createBaggage(s))},e.prototype.fields=function(){return[dI]},e}()});var FIe,cQ=D(()=>{FIe=function(){function e(t,n){this._monotonicClock=n,this._epochMillis=t.now(),this._performanceMillis=n.now()}return e.prototype.now=function(){var t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t},e}()});function Up(e){var t,n,r={};if(typeof e!="object"||e==null)return r;try{for(var i=uQ(Object.entries(e)),o=i.next();!o.done;o=i.next()){var s=MIe(o.value,2),a=s[0],u=s[1];if(!lQ(a)){je.warn("Invalid attribute key: "+a);continue}if(!fI(u)){je.warn("Invalid attribute value set for key: "+a);continue}Array.isArray(u)?r[a]=u.slice():r[a]=u}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function lQ(e){return typeof e=="string"&&e.length>0}function fI(e){return e==null?!0:Array.isArray(e)?UIe(e):dQ(e)}function UIe(e){var t,n,r;try{for(var i=uQ(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(s!=null){if(!r){if(dQ(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function dQ(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}var uQ,MIe,pQ=D(()=>{gt();uQ=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MIe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}});function o1(){return function(e){je.error(qIe(e))}}function qIe(e){return typeof e=="string"?e:JSON.stringify(jIe(e))}function jIe(e){for(var t={},n=e;n!==null;)Object.getOwnPropertyNames(n).forEach(function(r){if(!t[r]){var i=n[r];i&&(t[r]=String(i))}}),n=Object.getPrototypeOf(n);return t}var s1=D(()=>{gt()});function HIe(e){fQ=e}function Vo(e){try{fQ(e)}catch{}}var fQ,a1=D(()=>{s1();fQ=o1()});var uo,c1=D(()=>{(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(uo||(uo={}))});var mQ,hQ=D(()=>{mQ=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{}});function VIe(e){return BIe.indexOf(e)>-1}function GIe(e){return WIe.indexOf(e)>-1}function zIe(e,t,n,r,i){if(r===void 0&&(r=-1/0),i===void 0&&(i=1/0),typeof n[e]<"u"){var o=Number(n[e]);isNaN(o)||(o<r?t[e]=r:o>i?t[e]=i:t[e]=o)}}function YIe(e,t,n,r){r===void 0&&(r=$Ie);var i=n[e];typeof i=="string"&&(t[e]=i.split(r).map(function(o){return o.trim()}))}function XIe(e,t,n){var r=n[e];if(typeof r=="string"){var i=KIe[r.toUpperCase()];i!=null&&(t[e]=i)}}function Ew(e){var t={};for(var n in mI){var r=n;switch(r){case"OTEL_LOG_LEVEL":XIe(r,t,e);break;default:if(VIe(r))zIe(r,t,e);else if(GIe(r))YIe(r,t,e);else{var i=e[r];typeof i<"u"&&i!==null&&(t[r]=String(i))}}}return t}function u1(){return Ew(typeof process<"u"?process.env:mQ)}var $Ie,BIe,WIe,xw,ww,mI,KIe,l1=D(()=>{gt();c1();hQ();$Ie=",",BIe=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];WIe=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];xw=1/0,ww=128,mI={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Nt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:xw,OTEL_ATTRIBUTE_COUNT_LIMIT:ww,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:xw,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ww,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"otlp",OTEL_TRACES_SAMPLER:uo.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};KIe={ALL:Nt.ALL,VERBOSE:Nt.VERBOSE,DEBUG:Nt.DEBUG,INFO:Nt.INFO,WARN:Nt.WARN,ERROR:Nt.ERROR,NONE:Nt.NONE}});function lr(){var e=Ew(process.env);return Object.assign({HOSTNAME:gQ.hostname()},mI,e)}var gQ,vQ=D(()=>{gQ=B(require("os"));l1()});var QIe,yQ=D(()=>{QIe=typeof globalThis=="object"?globalThis:global});function xQ(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function e0e(e){var t;e.length===16?t=JIe:e.length===32?t=ZIe:t=Buffer.alloc(e.length/2);for(var n=0,r=0;r<e.length;r+=2){var i=xQ(e.charCodeAt(r)),o=xQ(e.charCodeAt(r+1));t.writeUInt8(i<<4|o,n++)}return t.toString("base64")}var JIe,ZIe,wQ=D(()=>{JIe=Buffer.alloc(8),ZIe=Buffer.alloc(16)});function EQ(e){return function(){for(var n=0;n<e/4;n++)hI.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,n*4);for(var n=0;n<e&&!(hI[n]>0);n++)n===e-1&&(hI[e-1]=1);return hI.toString("hex",0,e)}}var t0e,bQ,n0e,hI,_Q=D(()=>{t0e=8,bQ=16,n0e=function(){function e(){this.generateTraceId=EQ(bQ),this.generateSpanId=EQ(t0e)}return e}(),hI=Buffer.allocUnsafe(bQ)});var CQ,qp,SQ=D(()=>{CQ=require("perf_hooks"),qp=CQ.performance});var d1,gI=D(()=>{d1="1.8.0"});var Gc,r0e,i0e,o0e,s0e,a0e,c0e,u0e,l0e,d0e,p0e,f0e,m0e,h0e,TQ=D(()=>{Gc={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},r0e={OTHER_SQL:"other_sql",MSSQL:"mssql",MYSQL:"mysql",ORACLE:"oracle",DB2:"db2",POSTGRESQL:"postgresql",REDSHIFT:"redshift",HIVE:"hive",CLOUDSCAPE:"cloudscape",HSQLDB:"hsqldb",PROGRESS:"progress",MAXDB:"maxdb",HANADB:"hanadb",INGRES:"ingres",FIRSTSQL:"firstsql",EDB:"edb",CACHE:"cache",ADABAS:"adabas",FIREBIRD:"firebird",DERBY:"derby",FILEMAKER:"filemaker",INFORMIX:"informix",INSTANTDB:"instantdb",INTERBASE:"interbase",MARIADB:"mariadb",NETEZZA:"netezza",PERVASIVE:"pervasive",POINTBASE:"pointbase",SQLITE:"sqlite",SYBASE:"sybase",TERADATA:"teradata",VERTICA:"vertica",H2:"h2",COLDFUSION:"coldfusion",CASSANDRA:"cassandra",HBASE:"hbase",MONGODB:"mongodb",REDIS:"redis",COUCHBASE:"couchbase",COUCHDB:"couchdb",COSMOSDB:"cosmosdb",DYNAMODB:"dynamodb",NEO4J:"neo4j",GEODE:"geode",ELASTICSEARCH:"elasticsearch",MEMCACHED:"memcached",COCKROACHDB:"cockroachdb"},i0e={ALL:"all",EACH_QUORUM:"each_quorum",QUORUM:"quorum",LOCAL_QUORUM:"local_quorum",ONE:"one",TWO:"two",THREE:"three",LOCAL_ONE:"local_one",ANY:"any",SERIAL:"serial",LOCAL_SERIAL:"local_serial"},o0e={DATASOURCE:"datasource",HTTP:"http",PUBSUB:"pubsub",TIMER:"timer",OTHER:"other"},s0e={INSERT:"insert",EDIT:"edit",DELETE:"delete"},a0e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},c0e={IP_TCP:"ip_tcp",IP_UDP:"ip_udp",IP:"ip",UNIX:"unix",PIPE:"pipe",INPROC:"inproc",OTHER:"other"},u0e={WIFI:"wifi",WIRED:"wired",CELL:"cell",UNAVAILABLE:"unavailable",UNKNOWN:"unknown"},l0e={GPRS:"gprs",EDGE:"edge",UMTS:"umts",CDMA:"cdma",EVDO_0:"evdo_0",EVDO_A:"evdo_a",CDMA2000_1XRTT:"cdma2000_1xrtt",HSDPA:"hsdpa",HSUPA:"hsupa",HSPA:"hspa",IDEN:"iden",EVDO_B:"evdo_b",LTE:"lte",EHRPD:"ehrpd",HSPAP:"hspap",GSM:"gsm",TD_SCDMA:"td_scdma",IWLAN:"iwlan",NR:"nr",NRNSA:"nrnsa",LTE_CA:"lte_ca"},d0e={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:"SPDY",QUIC:"QUIC"},p0e={QUEUE:"queue",TOPIC:"topic"},f0e={RECEIVE:"receive",PROCESS:"process"},m0e={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},h0e={SENT:"SENT",RECEIVED:"RECEIVED"}});var IQ=D(()=>{TQ()});var Be,g0e,v0e,y0e,x0e,w0e,p1,PQ=D(()=>{Be={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},g0e={ALIBABA_CLOUD:"alibaba_cloud",AWS:"aws",AZURE:"azure",GCP:"gcp"},v0e={ALIBABA_CLOUD_ECS:"alibaba_cloud_ecs",ALIBABA_CLOUD_FC:"alibaba_cloud_fc",AWS_EC2:"aws_ec2",AWS_ECS:"aws_ecs",AWS_EKS:"aws_eks",AWS_LAMBDA:"aws_lambda",AWS_ELASTIC_BEANSTALK:"aws_elastic_beanstalk",AZURE_VM:"azure_vm",AZURE_CONTAINER_INSTANCES:"azure_container_instances",AZURE_AKS:"azure_aks",AZURE_FUNCTIONS:"azure_functions",AZURE_APP_SERVICE:"azure_app_service",GCP_COMPUTE_ENGINE:"gcp_compute_engine",GCP_CLOUD_RUN:"gcp_cloud_run",GCP_KUBERNETES_ENGINE:"gcp_kubernetes_engine",GCP_CLOUD_FUNCTIONS:"gcp_cloud_functions",GCP_APP_ENGINE:"gcp_app_engine"},y0e={EC2:"ec2",FARGATE:"fargate"},x0e={AMD64:"amd64",ARM32:"arm32",ARM64:"arm64",IA64:"ia64",PPC32:"ppc32",PPC64:"ppc64",X86:"x86"},w0e={WINDOWS:"windows",LINUX:"linux",DARWIN:"darwin",FREEBSD:"freebsd",NETBSD:"netbsd",OPENBSD:"openbsd",DRAGONFLYBSD:"dragonflybsd",HPUX:"hpux",AIX:"aix",SOLARIS:"solaris",Z_OS:"z_os"},p1={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"}});var RQ=D(()=>{PQ()});var f1={};Xs(f1,{AwsEcsLaunchtypeValues:()=>y0e,CloudPlatformValues:()=>v0e,CloudProviderValues:()=>g0e,DbCassandraConsistencyLevelValues:()=>i0e,DbSystemValues:()=>r0e,FaasDocumentOperationValues:()=>s0e,FaasInvokedProviderValues:()=>a0e,FaasTriggerValues:()=>o0e,HostArchValues:()=>x0e,HttpFlavorValues:()=>d0e,MessageTypeValues:()=>h0e,MessagingDestinationKindValues:()=>p0e,MessagingOperationValues:()=>f0e,NetHostConnectionSubtypeValues:()=>l0e,NetHostConnectionTypeValues:()=>u0e,NetTransportValues:()=>c0e,OsTypeValues:()=>w0e,RpcGrpcStatusCodeValues:()=>m0e,SemanticAttributes:()=>Gc,SemanticResourceAttributes:()=>Be,TelemetrySdkLanguageValues:()=>p1});var js=D(()=>{IQ();RQ()});var Gh,bw,AQ=D(()=>{gI();js();bw=(Gh={},Gh[Be.TELEMETRY_SDK_NAME]="opentelemetry",Gh[Be.PROCESS_RUNTIME_NAME]="node",Gh[Be.TELEMETRY_SDK_LANGUAGE]=p1.NODEJS,Gh[Be.TELEMETRY_SDK_VERSION]=d1,Gh)});function m1(e){e.unref()}var DQ=D(()=>{});var kQ=D(()=>{vQ();yQ();wQ();_Q();SQ();AQ();DQ()});var h1=D(()=>{kQ()});function vI(e){var t=e/1e3,n=Math.trunc(t),r=Number((t-n).toFixed(g1))*_w;return[n,r]}function OQ(){var e=qp.timeOrigin;if(typeof e!="number"){var t=qp;e=t.timing&&t.timing.fetchStart}return e}function NQ(e){var t=vI(OQ()),n=vI(typeof e=="number"?e:qp.now()),r=t[0]+n[0],i=t[1]+n[1];return i>_w&&(i-=_w,r+=1),[r,i]}function Cw(e){if(y1(e))return e;if(typeof e=="number")return e<OQ()?NQ(e):vI(e);if(e instanceof Date)return vI(e.getTime());throw TypeError("Invalid input type")}function v1(e,t){var n=t[0]-e[0],r=t[1]-e[1];return r<0&&(n-=1,r+=_w),[n,r]}function E0e(e){var t=g1,n=""+"0".repeat(t)+e[1]+"Z",r=n.substr(n.length-t-1),i=new Date(e[0]*1e3).toISOString();return i.replace("000Z",r)}function b0e(e){return e[0]*_w+e[1]}function _0e(e){return Math.round(e[0]*1e3+e[1]/1e6)}function yI(e){return Math.round(e[0]*1e6+e[1]/1e3)}function y1(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function x1(e){return y1(e)||typeof e=="number"||e instanceof Date}var g1,_w,LQ=D(()=>{h1();g1=9,_w=Math.pow(10,g1)});var FQ=D(()=>{});var Wo,MQ=D(()=>{(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Wo||(Wo={}))});var C0e,w1,UQ=D(()=>{gt();C0e=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w1=function(){function e(t){t===void 0&&(t={});var n;this._propagators=(n=t.propagators)!==null&&n!==void 0?n:[],this._fields=Array.from(new Set(this._propagators.map(function(r){return typeof r.fields=="function"?r.fields():[]}).reduce(function(r,i){return r.concat(i)},[])))}return e.prototype.inject=function(t,n,r){var i,o;try{for(var s=C0e(this._propagators),a=s.next();!a.done;a=s.next()){var u=a.value;try{u.inject(t,n,r)}catch(c){je.warn("Failed to inject with "+u.constructor.name+". Err: "+c.message)}}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},e.prototype.extract=function(t,n,r){return this._propagators.reduce(function(i,o){try{return o.extract(i,n,r)}catch(s){je.warn("Failed to inject with "+o.constructor.name+". Err: "+s.message)}return i},t)},e.prototype.fields=function(){return this._fields.slice()},e}()});function qQ(e){return I0e.test(e)}function jQ(e){return P0e.test(e)&&!R0e.test(e)}var E1,S0e,T0e,I0e,P0e,R0e,HQ=D(()=>{E1="[_0-9a-z-*/]",S0e="[a-z]"+E1+"{0,255}",T0e="[a-z0-9]"+E1+"{0,240}@[a-z]"+E1+"{0,13}",I0e=new RegExp("^(?:"+S0e+"|"+T0e+")$"),P0e=/^[ -~]{0,255}[!-~]$/,R0e=/,|=/});var $Q,A0e,BQ,VQ,b1,_1=D(()=>{HQ();$Q=32,A0e=512,BQ=",",VQ="=",b1=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+VQ+t.get(r)),n},[]).join(BQ)},e.prototype._parse=function(t){t.length>A0e||(this._internalState=t.split(BQ).reverse().reduce(function(n,r){var i=r.trim(),o=i.indexOf(VQ);if(o!==-1){var s=i.slice(0,o),a=i.slice(o+1,r.length);qQ(s)&&jQ(a)&&n.set(s,a)}return n},new Map),this._internalState.size>$Q&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,$Q))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}()});function WQ(e){var t=F0e.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var xI,wI,D0e,k0e,O0e,N0e,L0e,F0e,C1,GQ=D(()=>{gt();yw();_1();xI="traceparent",wI="tracestate",D0e="00",k0e="(?!ff)[\\da-f]{2}",O0e="(?![0]{32})[\\da-f]{32}",N0e="(?![0]{16})[\\da-f]{16}",L0e="[\\da-f]{2}",F0e=new RegExp("^\\s?("+k0e+")-("+O0e+")-("+N0e+")-("+L0e+")(-.*)?\\s?$");C1=function(){function e(){}return e.prototype.inject=function(t,n,r){var i=Hn.getSpanContext(t);if(!(!i||Mp(t)||!Bo(i))){var o=D0e+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||xn.NONE).toString(16);r.set(n,xI,o),i.traceState&&r.set(n,wI,i.traceState.serialize())}},e.prototype.extract=function(t,n,r){var i=r.get(n,xI);if(!i)return t;var o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return t;var s=WQ(o);if(!s)return t;s.isRemote=!0;var a=r.get(n,wI);if(a){var u=Array.isArray(a)?a.join(","):a;s.traceState=new b1(typeof u=="string"?u:void 0)}return Hn.setSpanContext(t,s)},e.prototype.fields=function(){return[xI,wI]},e}()});var zQ=D(()=>{});function M0e(e,t){return e.setValue(T1,t)}function U0e(e){return e.deleteValue(T1)}function q0e(e){return e.getValue(T1)}var T1,S1,YQ=D(()=>{gt();T1=ba("OpenTelemetry SDK Context Key RPC_METADATA");(function(e){e.HTTP="http"})(S1||(S1={}))});var EI,I1=D(()=>{gt();EI=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Di.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}()});var Sw,P1=D(()=>{gt();Sw=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Di.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}()});var j0e,KQ=D(()=>{gt();a1();I1();P1();j0e=function(){function e(t){var n,r,i,o;this._root=t.root,this._root||(Vo(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Sw),this._remoteParentSampled=(n=t.remoteParentSampled)!==null&&n!==void 0?n:new Sw,this._remoteParentNotSampled=(r=t.remoteParentNotSampled)!==null&&r!==void 0?r:new EI,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Sw,this._localParentNotSampled=(o=t.localParentNotSampled)!==null&&o!==void 0?o:new EI}return e.prototype.shouldSample=function(t,n,r,i,o,s){var a=Hn.getSpanContext(t);return!a||!Bo(a)?this._root.shouldSample(t,n,r,i,o,s):a.isRemote?a.traceFlags&xn.SAMPLED?this._remoteParentSampled.shouldSample(t,n,r,i,o,s):this._remoteParentNotSampled.shouldSample(t,n,r,i,o,s):a.traceFlags&xn.SAMPLED?this._localParentSampled.shouldSample(t,n,r,i,o,s):this._localParentNotSampled.shouldSample(t,n,r,i,o,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}()});var H0e,XQ=D(()=>{gt();H0e=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,n){return{decision:Lp(n)&&this._accumulate(n)<this._upperBound?Di.RECORD_AND_SAMPLED:Di.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var n=0,r=0;r<t.length/8;r++){var i=r*8,o=parseInt(t.slice(i,i+8),16);n=(n^o)>>>0}return n},e}()});function Y0e(e,t){return function(n){return e(t(n))}}function R1(e){if(!K0e(e)||X0e(e)!==$0e)return!1;var t=z0e(e);if(t===null)return!0;var n=ZQ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&QQ.call(n)===G0e}function K0e(e){return e!=null&&typeof e=="object"}function X0e(e){return e==null?e===void 0?V0e:B0e:jp&&jp in Object(e)?Q0e(e):J0e(e)}function Q0e(e){var t=ZQ.call(e,jp),n=e[jp],r=!1;try{e[jp]=void 0,r=!0}catch{}var i=eJ.call(e);return r&&(t?e[jp]=n:delete e[jp]),i}function J0e(e){return eJ.call(e)}var $0e,B0e,V0e,W0e,QQ,G0e,z0e,JQ,ZQ,jp,eJ,tJ=D(()=>{$0e="[object Object]",B0e="[object Null]",V0e="[object Undefined]",W0e=Function.prototype,QQ=W0e.toString,G0e=QQ.call(Object),z0e=Y0e(Object.getPrototypeOf,Object),JQ=Object.prototype,ZQ=JQ.hasOwnProperty,jp=Symbol?Symbol.toStringTag:void 0,eJ=JQ.toString});function D1(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),r=new WeakMap;e.length>0;)n=rJ(n,e.shift(),0,r);return n}function A1(e){return _I(e)?e.slice():e}function rJ(e,t,n,r){n===void 0&&(n=0);var i;if(!(n>Z0e)){if(n++,bI(e)||bI(t)||iJ(t))i=A1(t);else if(_I(e)){if(i=e.slice(),_I(t))for(var o=0,s=t.length;o<s;o++)i.push(A1(t[o]));else if(Tw(t))for(var a=Object.keys(t),o=0,s=a.length;o<s;o++){var u=a[o];i[u]=A1(t[u])}}else if(Tw(e))if(Tw(t)){if(!ePe(e,t))return t;i=Object.assign({},e);for(var a=Object.keys(t),o=0,s=a.length;o<s;o++){var u=a[o],c=t[u];if(bI(c))typeof c>"u"?delete i[u]:i[u]=c;else{var l=i[u],d=c;if(nJ(e,u,r)||nJ(t,u,r))delete i[u];else{if(Tw(l)&&Tw(d)){var p=r.get(l)||[],f=r.get(d)||[];p.push({obj:e,key:u}),f.push({obj:t,key:u}),r.set(l,p),r.set(d,f)}i[u]=rJ(i[u],c,n,r)}}}}else i=t;return i}}function nJ(e,t,n){for(var r=n.get(e[t])||[],i=0,o=r.length;i<o;i++){var s=r[i];if(s.key===t&&s.obj===e)return!0}return!1}function _I(e){return Array.isArray(e)}function iJ(e){return typeof e=="function"}function Tw(e){return!bI(e)&&!_I(e)&&!iJ(e)&&typeof e=="object"}function bI(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e>"u"||e instanceof Date||e instanceof RegExp||e===null}function ePe(e,t){return!(!R1(e)||!R1(t))}var Z0e,oJ=D(()=>{tJ();Z0e=20});function sJ(e,t){return typeof t=="string"?e===t:!!e.match(t)}function nPe(e,t){var n,r;if(!t)return!1;try{for(var i=tPe(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(sJ(e,s))return!0}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}var tPe,aJ=D(()=>{tPe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}});function rPe(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var cJ=D(()=>{});var uJ,lJ=D(()=>{uJ=function(){function e(){var t=this;this._promise=new Promise(function(n,r){t._resolve=n,t._reject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}()});var iPe,oPe,Iw,dJ=D(()=>{lJ();iPe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},oPe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Iw=function(){function e(t,n){this._callback=t,this._that=n,this._isCalled=!1,this._deferred=new uJ}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,oPe([this._that],iPe(r),!1))).then(function(o){return n._deferred.resolve(o)},function(o){return n._deferred.reject(o)})}catch(o){this._deferred.reject(o)}}return this._deferred.promise},e}()});function pJ(e,t){return new Promise(function(n){Jr.with(vw(Jr.active()),function(){e.export(t,function(r){n(r)})})})}var fJ=D(()=>{gt();yw()});var mJ={};Xs(mJ,{AlwaysOffSampler:()=>EI,AlwaysOnSampler:()=>Sw,AnchoredClock:()=>FIe,BindOnceFuture:()=>Iw,CompositePropagator:()=>w1,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>ww,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>xw,DEFAULT_ENVIRONMENT:()=>mI,ExportResultCode:()=>Wo,ParentBasedSampler:()=>j0e,RPCType:()=>S1,RandomIdGenerator:()=>n0e,SDK_INFO:()=>bw,TRACE_PARENT_HEADER:()=>xI,TRACE_STATE_HEADER:()=>wI,TraceIdRatioBasedSampler:()=>H0e,TraceState:()=>b1,TracesSamplerValues:()=>uo,VERSION:()=>d1,W3CBaggagePropagator:()=>i1,W3CTraceContextPropagator:()=>C1,_globalThis:()=>QIe,baggageUtils:()=>n1,deleteRPCMetadata:()=>U0e,getEnv:()=>lr,getEnvWithoutDefaults:()=>u1,getRPCMetadata:()=>q0e,globalErrorHandler:()=>Vo,hexToBase64:()=>e0e,hrTime:()=>NQ,hrTimeDuration:()=>v1,hrTimeToMicroseconds:()=>yI,hrTimeToMilliseconds:()=>_0e,hrTimeToNanoseconds:()=>b0e,hrTimeToTimeStamp:()=>E0e,internal:()=>k1,isAttributeKey:()=>lQ,isAttributeValue:()=>fI,isTimeInput:()=>x1,isTimeInputHrTime:()=>y1,isTracingSuppressed:()=>Mp,isUrlIgnored:()=>nPe,isWrapped:()=>rPe,loggingErrorHandler:()=>o1,merge:()=>D1,otperformance:()=>qp,parseEnvironment:()=>Ew,parseTraceParent:()=>WQ,sanitizeAttributes:()=>Up,setGlobalErrorHandler:()=>HIe,setRPCMetadata:()=>M0e,suppressTracing:()=>vw,timeInputToHrTime:()=>Cw,unrefTimer:()=>m1,unsuppressTracing:()=>OIe,urlMatches:()=>sJ});var k1,Zr=D(()=>{aQ();cQ();pQ();a1();s1();LQ();FQ();MQ();gI();r1();h1();UQ();GQ();zQ();YQ();I1();P1();KQ();XQ();yw();_1();l1();oJ();c1();aJ();cJ();dJ();gI();fJ();k1={_export:pJ}});var hJ,gJ=D(()=>{hJ="exception"});var sPe,aPe,O1,N1=D(()=>{gt();Zr();js();gJ();sPe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},aPe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},O1=function(){function e(t,n,r,i,o,s,a,u,c){a===void 0&&(a=[]),c===void 0&&(c=qp),this.attributes={},this.links=[],this.events=[],this.status={code:Vh.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this._clock=c,this.name=r,this._spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a,this.startTime=Cw(u??c.now()),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return n==null||this._isSpanEnded()?this:t.length===0?(je.warn("Invalid attribute key: "+t),this):fI(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=this._truncateToSize(n),this):(je.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var n,r;try{for(var i=sPe(Object.entries(t)),o=i.next();!o.done;o=i.next()){var s=aPe(o.value,2),a=s[0],u=s[1];this.setAttribute(a,u)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return this},e.prototype.addEvent=function(t,n,r){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return je.warn("No events allowed."),this;this.events.length>=this._spanLimits.eventCountLimit&&(je.warn("Dropping extra events."),this.events.shift()),x1(n)&&(typeof r>"u"&&(r=n),n=void 0),typeof r>"u"&&(r=this._clock.now());var i=Up(n);return this.events.push({name:t,attributes:i,time:Cw(r)}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){je.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Cw(t??this._clock.now()),this._duration=v1(this.startTime,this.endTime),this._duration[0]<0&&(je.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,n){n===void 0&&(n=this._clock.now());var r={};typeof t=="string"?r[Gc.EXCEPTION_MESSAGE]=t:t&&(t.code?r[Gc.EXCEPTION_TYPE]=t.code.toString():t.name&&(r[Gc.EXCEPTION_TYPE]=t.name),t.message&&(r[Gc.EXCEPTION_MESSAGE]=t.message),t.stack&&(r[Gc.EXCEPTION_STACKTRACE]=t.stack)),r[Gc.EXCEPTION_TYPE]||r[Gc.EXCEPTION_MESSAGE]?this.addEvent(hJ,r,n):je.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&je.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,n){return t.length<=n?t:t.substr(0,n)},e.prototype._truncateToSize=function(t){var n=this,r=this._attributeValueLengthLimit;return r<=0?(je.warn("Attribute value limit must be positive, got "+r),t):typeof t=="string"?this._truncateToLimitUtil(t,r):Array.isArray(t)?t.map(function(i){return typeof i=="string"?n._truncateToLimitUtil(i,r):i}):t},e}()});var _a,Pw=D(()=>{(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(_a||(_a={}))});var Hp,CI=D(()=>{Pw();Hp=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:_a.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}()});var zc,SI=D(()=>{Pw();zc=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:_a.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}()});var Rw,L1=D(()=>{gt();Zr();CI();SI();Rw=function(){function e(t){var n,r,i,o;this._root=t.root,this._root||(Vo(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new zc),this._remoteParentSampled=(n=t.remoteParentSampled)!==null&&n!==void 0?n:new zc,this._remoteParentNotSampled=(r=t.remoteParentNotSampled)!==null&&r!==void 0?r:new Hp,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new zc,this._localParentNotSampled=(o=t.localParentNotSampled)!==null&&o!==void 0?o:new Hp}return e.prototype.shouldSample=function(t,n,r,i,o,s){var a=Hn.getSpanContext(t);return!a||!Bo(a)?this._root.shouldSample(t,n,r,i,o,s):a.isRemote?a.traceFlags&xn.SAMPLED?this._remoteParentSampled.shouldSample(t,n,r,i,o,s):this._remoteParentNotSampled.shouldSample(t,n,r,i,o,s):a.traceFlags&xn.SAMPLED?this._localParentSampled.shouldSample(t,n,r,i,o,s):this._localParentNotSampled.shouldSample(t,n,r,i,o,s)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}()});var TI,F1=D(()=>{gt();Pw();TI=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,n){return{decision:Lp(n)&&this._accumulate(n)<this._upperBound?_a.RECORD_AND_SAMPLED:_a.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var n=0,r=0;r<t.length/8;r++){var i=r*8,o=parseInt(t.slice(i,i+8),16);n=(n^o)>>>0}return n},e}()});function II(){return{sampler:M1(cPe),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:lr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:lr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:lr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:lr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:lr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:lr().OTEL_SPAN_EVENT_COUNT_LIMIT}}}function M1(e){switch(e===void 0&&(e=lr()),e.OTEL_TRACES_SAMPLER){case uo.AlwaysOn:return new zc;case uo.AlwaysOff:return new Hp;case uo.ParentBasedAlwaysOn:return new Rw({root:new zc});case uo.ParentBasedAlwaysOff:return new Rw({root:new Hp});case uo.TraceIdRatio:return new TI(vJ(e));case uo.ParentBasedTraceIdRatio:return new Rw({root:new TI(vJ(e))});default:return je.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+uPe+'".'),new zc}}function vJ(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return je.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+zh+"."),zh;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(je.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+zh+"."),zh):t<0||t>1?(je.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+zh+"."),zh):t}var cPe,uPe,zh,U1=D(()=>{gt();Zr();CI();SI();L1();F1();cPe=lr(),uPe=uo.AlwaysOn,zh=1});function yJ(e){var t={sampler:M1()},n=II(),r=Object.assign({},n,t,e);return r.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),r}function xJ(e){var t,n,r,i,o,s,a,u,c,l,d,p,f=Object.assign({},e.spanLimits),m=u1();return f.attributeCountLimit=(s=(o=(i=(n=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&n!==void 0?n:(r=e.generalLimits)===null||r===void 0?void 0:r.attributeCountLimit)!==null&&i!==void 0?i:m.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:m.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:ww,f.attributeValueLengthLimit=(p=(d=(l=(u=(a=e.spanLimits)===null||a===void 0?void 0:a.attributeValueLengthLimit)!==null&&u!==void 0?u:(c=e.generalLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:m.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&d!==void 0?d:m.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:xw,Object.assign({},e,{spanLimits:f})}var q1=D(()=>{U1();Zr()});var wJ,EJ=D(()=>{gt();Zr();wJ=function(){function e(t,n){this._exporter=t,this._finishedSpans=[];var r=lr();this._maxExportBatchSize=typeof(n==null?void 0:n.maxExportBatchSize)=="number"?n.maxExportBatchSize:r.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(n==null?void 0:n.maxQueueSize)=="number"?n.maxQueueSize:r.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(n==null?void 0:n.scheduledDelayMillis)=="number"?n.scheduledDelayMillis:r.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(n==null?void 0:n.exportTimeoutMillis)=="number"?n.exportTimeoutMillis:r.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Iw(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(je.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&xn.SAMPLED&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())},e.prototype._flushAll=function(){var t=this;return new Promise(function(n,r){for(var i=[],o=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),s=0,a=o;s<a;s++)i.push(t._flushOneBatch());Promise.all(i).then(function(){n()}).catch(r)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(n,r){var i=setTimeout(function(){r(new Error("Timeout"))},t._exportTimeoutMillis);Jr.with(vw(Jr.active()),function(){t._exporter.export(t._finishedSpans.splice(0,t._maxExportBatchSize),function(o){var s;clearTimeout(i),o.code===Wo.SUCCESS?n():r((s=o.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})},e.prototype._maybeStartTimer=function(){var t=this;this._timer===void 0&&(this._timer=setTimeout(function(){t._flushOneBatch().then(function(){t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(n){Vo(n)})},this._scheduledDelayMillis),m1(this._timer))},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}()});var lPe,j1,bJ=D(()=>{EJ();lPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j1=function(e){lPe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onShutdown=function(){},t}(wJ)});function _J(e){return function(){for(var n=0;n<e/4;n++)PI.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,n*4);for(var n=0;n<e&&!(PI[n]>0);n++)n===e-1&&(PI[e-1]=1);return PI.toString("hex",0,e)}}var dPe,CJ,H1,PI,SJ=D(()=>{dPe=8,CJ=16,H1=function(){function e(){this.generateTraceId=_J(CJ),this.generateSpanId=_J(dPe)}return e}(),PI=Buffer.allocUnsafe(CJ)});var TJ=D(()=>{bJ();SJ()});var RI=D(()=>{TJ()});var $1,IJ=D(()=>{gt();Zr();N1();q1();RI();$1=function(){function e(t,n,r){this._tracerProvider=r;var i=yJ(n);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=n.idGenerator||new H1,this.resource=r.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,n,r){var i,o;n===void 0&&(n={}),r===void 0&&(r=Jr.active()),n.root&&(r=Hn.deleteSpan(r));var s=Hn.getSpan(r);if(Mp(r)){je.debug("Instrumentation suppressed, returning Noop Span");var a=Hn.wrapSpanContext($h);return a}var u=s==null?void 0:s.spanContext(),c=this._idGenerator.generateSpanId(),l,d,p;!u||!Hn.isSpanContextValid(u)?l=this._idGenerator.generateTraceId():(l=u.traceId,d=u.traceState,p=u.spanId);var f=(i=n.kind)!==null&&i!==void 0?i:Bh.INTERNAL,m=((o=n.links)!==null&&o!==void 0?o:[]).map(function(b){return{context:b.context,attributes:Up(b.attributes)}}),h=Up(n.attributes),v=this._sampler.shouldSample(r,l,t,f,h,m),g=v.decision===Di.RECORD_AND_SAMPLED?xn.SAMPLED:xn.NONE,y={traceId:l,spanId:c,traceFlags:g,traceState:d};if(v.decision===Di.NOT_RECORD){je.debug("Recording is off, propagating context in a non-recording span");var a=Hn.wrapSpanContext(y);return a}var x=new O1(this,r,t,y,f,p,m,n.startTime),w=Up(Object.assign(h,v.attributes));return x.setAttributes(w),x},e.prototype.startActiveSpan=function(t,n,r,i){var o,s,a;if(!(arguments.length<2)){arguments.length===2?a=n:arguments.length===3?(o=n,a=r):(o=n,s=r,a=i);var u=s??Jr.active(),c=this.startSpan(t,o,u),l=Hn.setSpan(u,c);return Jr.with(l,a,void 0,c)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}()});function PJ(){return"unknown_service:"+process.argv0}var RJ=D(()=>{});var AJ=D(()=>{});var AI,pPe,fPe,mPe,Iet,DJ=D(()=>{js();Yh();AI=require("os"),pPe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},fPe=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},mPe=function(){function e(){}return e.prototype.detect=function(t){return pPe(this,void 0,void 0,function(){var n,r;return fPe(this,function(i){return n=(r={},r[Be.HOST_NAME]=(0,AI.hostname)(),r[Be.HOST_ARCH]=this._normalizeArch((0,AI.arch)()),r),[2,new dr(n)]})})},e.prototype._normalizeArch=function(t){switch(t){case"arm":return"arm32";case"ppc":return"ppc32";case"x64":return"amd64";default:return t}},e}(),Iet=new mPe});var DI,hPe,gPe,vPe,Det,kJ=D(()=>{js();Yh();DI=require("os"),hPe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},gPe=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},vPe=function(){function e(){}return e.prototype.detect=function(t){return hPe(this,void 0,void 0,function(){var n,r;return gPe(this,function(i){return n=(r={},r[Be.OS_TYPE]=this._normalizeType((0,DI.platform)()),r[Be.OS_VERSION]=(0,DI.release)(),r),[2,new dr(n)]})})},e.prototype._normalizeType=function(t){switch(t){case"sunos":return"solaris";case"win32":return"windows";default:return t}},e}(),Det=new vPe});var OJ=D(()=>{RJ();AJ();DJ();kJ()});var B1=D(()=>{OJ()});var dr,Yh=D(()=>{js();Zr();B1();dr=function(){function e(t){this.attributes=t}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[Be.SERVICE_NAME]=PJ(),t[Be.TELEMETRY_SDK_LANGUAGE]=bw[Be.TELEMETRY_SDK_LANGUAGE],t[Be.TELEMETRY_SDK_NAME]=bw[Be.TELEMETRY_SDK_NAME],t[Be.TELEMETRY_SDK_VERSION]=bw[Be.TELEMETRY_SDK_VERSION],t))},e.prototype.merge=function(t){if(!t||!Object.keys(t.attributes).length)return this;var n=Object.assign({},this.attributes,t.attributes);return new e(n)},e.EMPTY=new e({}),e}()});var NJ=D(()=>{});var LJ=D(()=>{});var V1,yPe,xPe,wPe,zet,FJ=D(()=>{gt();js();W1();V1=function(){return V1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},V1.apply(this,arguments)},yPe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},xPe=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wPe=function(){function e(){}return e.prototype.detect=function(t){return yPe(this,void 0,void 0,function(){var n,r,i;return xPe(this,function(o){return n=typeof navigator<"u",n?(r=(i={},i[Be.PROCESS_RUNTIME_NAME]="browser",i[Be.PROCESS_RUNTIME_DESCRIPTION]="Web Browser",i[Be.PROCESS_RUNTIME_VERSION]=navigator.userAgent,i),[2,this._getResourceAttributes(r,t)]):[2,dr.empty()]})})},e.prototype._getResourceAttributes=function(t,n){return t[Be.PROCESS_RUNTIME_VERSION]===""?(je.debug("BrowserDetector failed: Unable to find required browser resources. "),dr.empty()):new dr(V1({},t))},e}(),zet=new wPe});var EPe,bPe,_Pe,CPe,SPe,Zet,MJ=D(()=>{gt();Zr();js();Yh();EPe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},bPe=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_Pe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CPe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},SPe=function(){function e(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}return e.prototype.detect=function(t){return EPe(this,void 0,void 0,function(){var n,r,i,o,s;return bPe(this,function(a){if(n={},r=lr(),i=r.OTEL_RESOURCE_ATTRIBUTES,o=r.OTEL_SERVICE_NAME,i)try{s=this._parseResourceAttributes(i),Object.assign(n,s)}catch(u){je.debug("EnvDetector failed: "+u.message)}return o&&(n[Be.SERVICE_NAME]=o),[2,new dr(n)]})})},e.prototype._parseResourceAttributes=function(t){var n,r;if(!t)return{};var i={},o=t.split(this._COMMA_SEPARATOR,-1);try{for(var s=_Pe(o),a=s.next();!a.done;a=s.next()){var u=a.value,c=u.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(c.length===2){var l=CPe(c,2),d=l[0],p=l[1];if(d=d.trim(),p=p.trim().split(/^"|"$/).join(""),!this._isValidAndNotEmpty(d))throw new Error("Attribute key "+this._ERROR_MESSAGE_INVALID_CHARS);if(!this._isValid(p))throw new Error("Attribute value "+this._ERROR_MESSAGE_INVALID_VALUE);i[d]=decodeURIComponent(p)}}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},e.prototype._isValid=function(t){return t.length<=this._MAX_LENGTH&&this._isBaggageOctetString(t)},e.prototype._isBaggageOctetString=function(t){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<33||r===44||r===59||r===92||r>126)return!1}return!0},e.prototype._isValidAndNotEmpty=function(t){return t.length>0&&this._isValid(t)},e}(),Zet=new SPe});var G1,TPe,IPe,PPe,itt,UJ=D(()=>{gt();js();Yh();G1=function(){return G1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},G1.apply(this,arguments)},TPe=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},IPe=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},PPe=function(){function e(){}return e.prototype.detect=function(t){return TPe(this,void 0,void 0,function(){var n,r;return IPe(this,function(i){return typeof process!="object"?[2,dr.empty()]:(n=(r={},r[Be.PROCESS_PID]=process.pid,r[Be.PROCESS_EXECUTABLE_NAME]=process.title||"",r[Be.PROCESS_COMMAND]=process.argv[1]||"",r[Be.PROCESS_COMMAND_LINE]=process.argv.join(" ")||"",r[Be.PROCESS_RUNTIME_VERSION]=process.versions.node,r[Be.PROCESS_RUNTIME_NAME]="nodejs",r[Be.PROCESS_RUNTIME_DESCRIPTION]="Node.js",r),[2,this._getResourceAttributes(n,t)])})})},e.prototype._getResourceAttributes=function(t,n){return t[Be.PROCESS_EXECUTABLE_NAME]===""||t[Be.PROCESS_EXECUTABLE_PATH]===""||t[Be.PROCESS_COMMAND]===""||t[Be.PROCESS_COMMAND_LINE]===""||t[Be.PROCESS_RUNTIME_VERSION]===""?(je.debug("ProcessDetector failed: Unable to find required process resources. "),dr.empty()):new dr(G1({},t))},e}(),itt=new PPe});var qJ=D(()=>{FJ();MJ();UJ()});var W1=D(()=>{Yh();B1();NJ();LJ();qJ()});var kI,jJ,HJ=D(()=>{Zr();kI=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jJ=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,n,r=[];try{for(var i=kI(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;r.push(s.forceFlush())}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return new Promise(function(a){Promise.all(r).then(function(){a()}).catch(function(u){Vo(u||new Error("MultiSpanProcessor: forceFlush failed")),a()})})},e.prototype.onStart=function(t,n){var r,i;try{for(var o=kI(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onStart(t,n)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.onEnd=function(t){var n,r;try{for(var i=kI(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;s.onEnd(t)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.shutdown=function(){var t,n,r=[];try{for(var i=kI(this._spanProcessors),o=i.next();!o.done;o=i.next()){var s=o.value;r.push(s.shutdown())}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return new Promise(function(a,u){Promise.all(r).then(function(){a()},u)})},e}()});var z1,Y1=D(()=>{z1=function(){function e(){}return e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}()});var Rl,RPe,$J=D(()=>{gt();Zr();W1();K1();U1();HJ();Y1();RI();q1();(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(Rl||(Rl={}));RPe=function(){function e(t){t===void 0&&(t={});var n;this._registeredSpanProcessors=[],this._tracers=new Map;var r=D1({},II(),xJ(t));this.resource=(n=r.resource)!==null&&n!==void 0?n:dr.empty(),this.resource=dr.default().merge(this.resource),this._config=Object.assign({},r,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var o=new j1(i);this.activeSpanProcessor=o}else this.activeSpanProcessor=new z1}return e.prototype.getTracer=function(t,n,r){var i=t+"@"+(n||"")+":"+((r==null?void 0:r.schemaUrl)||"");return this._tracers.has(i)||this._tracers.set(i,new $1({name:t,version:n,schemaUrl:r==null?void 0:r.schemaUrl},this._config,this)),this._tracers.get(i)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(n){return je.error("Error while trying to shutdown current span processor",n)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new jJ(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),Hn.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Jr.setGlobalContextManager(t.contextManager),t.propagator&&Wc.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map(function(r){return new Promise(function(i){var o,s=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+t+" ms")),o=Rl.timeout},t);r.forceFlush().then(function(){clearTimeout(s),o!==Rl.timeout&&(o=Rl.resolved,i(o))}).catch(function(a){clearTimeout(s),o=Rl.error,i(a)})})});return new Promise(function(r,i){Promise.all(n).then(function(o){var s=o.filter(function(a){return a!==Rl.resolved});s.length>0?i(s):r()}).catch(function(o){return i([o])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var n;return(n=this.constructor._registeredPropagators.get(t))===null||n===void 0?void 0:n()},e.prototype._getSpanExporter=function(t){var n;return(n=this.constructor._registeredExporters.get(t))===null||n===void 0?void 0:n()},e.prototype._buildPropagatorFromEnv=function(){var t=this,n=Array.from(new Set(lr().OTEL_PROPAGATORS)),r=n.map(function(o){var s=t._getPropagator(o);return s||je.warn('Propagator "'+o+'" requested through environment variable is unavailable.'),s}),i=r.reduce(function(o,s){return s&&o.push(s),o},[]);if(i.length!==0)return n.length===1?i[0]:new w1({propagators:i})},e.prototype._buildExporterFromEnv=function(){var t=lr().OTEL_TRACES_EXPORTER;if(t!=="none"){var n=this._getSpanExporter(t);return n||je.error('Exporter "'+t+'" requested through environment variable is unavailable.'),n}},e._registeredPropagators=new Map([["tracecontext",function(){return new C1}],["baggage",function(){return new i1}]]),e._registeredExporters=new Map,e}()});var APe,DPe,BJ=D(()=>{Zr();APe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},DPe=function(){function e(){}return e.prototype.export=function(t,n){return this._sendSpans(t,n)},e.prototype.shutdown=function(){return this._sendSpans([]),Promise.resolve()},e.prototype._exportInfo=function(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:yI(t.startTime),duration:yI(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},e.prototype._sendSpans=function(t,n){var r,i;try{for(var o=APe(t),s=o.next();!s.done;s=o.next()){var a=s.value;console.dir(this._exportInfo(a),{depth:3})}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}if(n)return n({code:Wo.SUCCESS})},e}()});var kPe,OPe,NPe,VJ=D(()=>{Zr();kPe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},OPe=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},NPe=function(){function e(){this._finishedSpans=[],this._stopped=!1}return e.prototype.export=function(t,n){var r;if(this._stopped)return n({code:Wo.FAILED,error:new Error("Exporter has been stopped")});(r=this._finishedSpans).push.apply(r,OPe([],kPe(t),!1)),setTimeout(function(){return n({code:Wo.SUCCESS})},0)},e.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()},e.prototype.reset=function(){this._finishedSpans=[]},e.prototype.getFinishedSpans=function(){return this._finishedSpans},e}()});var WJ=D(()=>{});var LPe,GJ=D(()=>{gt();Zr();LPe=function(){function e(t){this._exporter=t,this._shutdownOnce=new Iw(this._shutdown,this)}return e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&xn.SAMPLED&&k1._export(this._exporter,[t]).then(function(n){var r;n.code!==Wo.SUCCESS&&Vo((r=n.error)!==null&&r!==void 0?r:new Error("SimpleSpanProcessor: span export failed (status "+n+")"))}).catch(function(n){Vo(n)})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}()});var zJ=D(()=>{});var YJ=D(()=>{});var KJ=D(()=>{});var XJ=D(()=>{});var QJ=D(()=>{});var JJ={};Xs(JJ,{AlwaysOffSampler:()=>Hp,AlwaysOnSampler:()=>zc,BasicTracerProvider:()=>RPe,BatchSpanProcessor:()=>j1,ConsoleSpanExporter:()=>DPe,ForceFlushState:()=>Rl,InMemorySpanExporter:()=>NPe,NoopSpanProcessor:()=>z1,ParentBasedSampler:()=>Rw,RandomIdGenerator:()=>H1,SamplingDecision:()=>_a,SimpleSpanProcessor:()=>LPe,Span:()=>O1,TraceIdRatioBasedSampler:()=>TI,Tracer:()=>$1});var K1=D(()=>{IJ();$J();RI();BJ();VJ();WJ();GJ();zJ();Y1();CI();SI();L1();F1();Pw();N1();YJ();KJ();XJ();QJ()});var eZ=_(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.enable=Go.azureCoreTracing=Go.AzureMonitorSymbol=void 0;var X1=cn();Go.AzureMonitorSymbol="Azure_Monitor_Tracer";var Q1="azure-coretracing",ZJ=!1,FPe=function(e){if(ZJ)return e;try{var t=(K1(),qi(JJ)),n=(gt(),qi(Fp)),r=new t.BasicTracerProvider,i=r.getTracer("applicationinsights tracer");if(e.setTracer){var o=e.setTracer;e.setTracer=function(c){var l=c.startSpan;c.startSpan=function(d,p,f){var m=l.call(this,d,p,f),h=m.end;return m.end=function(){var v=h.apply(this,arguments);return X1.channel.publish(Q1,m),v},m},c[Go.AzureMonitorSymbol]=!0,o.call(this,c)},n.trace.getSpan(n.context.active()),e.setTracer(i)}else{var s=n.trace.setGlobalTracerProvider;n.trace.setGlobalTracerProvider=function(c){var l=c.getTracer;return c.getTracer=function(d,p){var f=l.call(this,d,p);if(!f[Go.AzureMonitorSymbol]){var m=f.startSpan;f.startSpan=function(h,v,g){var y=m.call(this,h,v,g),x=y.end;return y.end=function(){var w=x.apply(this,arguments);return X1.channel.publish(Q1,y),w},y},f[Go.AzureMonitorSymbol]=!0}return f},s.call(this,c)},r.register(),n.trace.getSpan(n.context.active());var a=require("@opentelemetry/instrumentation"),u=require("@azure/opentelemetry-instrumentation-azure-sdk");a.registerInstrumentations({instrumentations:[u.createAzureSdkInstrumentation()]})}ZJ=!0}catch{}return e};Go.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:FPe,publisherName:Q1};function MPe(){X1.channel.registerMonkeyPatch("@azure/core-tracing",Go.azureCoreTracing)}Go.enable=MPe});var nZ=_($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.enable=$p.bunyan=void 0;var tZ=cn(),UPe=function(e){var t=e.prototype._emit;return e.prototype._emit=function(n,r){var i=t.apply(this,arguments);if(!r){var o=i;o||(o=t.call(this,n,!0)),tZ.channel.publish("bunyan",{level:n.level,result:o})}return i},e};$p.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:UPe};function qPe(){tZ.channel.registerMonkeyPatch("bunyan",$p.bunyan)}$p.enable=qPe});var iZ=_(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.enable=Bp.console=void 0;var J1=cn(),rZ=require("stream"),jPe=function(e){var t=new rZ.Writable,n=new rZ.Writable;t.write=function(c){if(!c)return!0;var l=c.toString();return J1.channel.publish("console",{message:l}),!0},n.write=function(c){if(!c)return!0;var l=c.toString();return J1.channel.publish("console",{message:l,stderr:!0}),!0};for(var r=new e.Console(t,n),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(c){var l=e[c];l&&(e[c]=function(){if(r[c])try{r[c].apply(r,arguments)}catch{}return l.apply(e,arguments)})},s=0,a=i;s<a.length;s++){var u=a[s];o(u)}return e};Bp.console={versionSpecifier:">= 4.0.0",patch:jPe};function HPe(){J1.channel.registerMonkeyPatch("console",Bp.console),require("console")}Bp.enable=HPe});var oZ=_(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.enable=Vp.mongoCore=void 0;var Z1=cn(),$Pe=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var r=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Z1.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Z1.channel.bindToContext(arguments[1])),o.apply(this,arguments)},r},e};Vp.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:$Pe};function BPe(){Z1.channel.registerMonkeyPatch("mongodb-core",Vp.mongoCore)}Vp.enable=BPe});var sZ=_(ei=>{"use strict";var Kh=ei&&ei.__assign||function(){return Kh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kh.apply(this,arguments)};Object.defineProperty(ei,"__esModule",{value:!0});ei.enable=ei.mongo330=ei.mongo3=ei.mongo2=void 0;var Lr=cn(),VPe=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return Lr.channel.bindToContext(function(r){return r()})}}}),n={};return t.on("started",function(r){n[r.requestId]||(n[r.requestId]=Kh(Kh({},r),{time:new Date}))}),t.on("succeeded",function(r){var i=n[r.requestId];i&&delete n[r.requestId],typeof r.operationId=="function"?r.operationId(function(){return Lr.channel.publish("mongodb",{startedData:i,event:r,succeeded:!0})}):Lr.channel.publish("mongodb",{startedData:i,event:r,succeeded:!0})}),t.on("failed",function(r){var i=n[r.requestId];i&&delete n[r.requestId],typeof r.operationId=="function"?r.operationId(function(){return Lr.channel.publish("mongodb",{startedData:i,event:r,succeeded:!1})}):Lr.channel.publish("mongodb",{startedData:i,event:r,succeeded:!1})}),e},WPe=function(e){var t=e.instrument(),n={},r={};return t.on("started",function(i){n[i.requestId]||(r[i.requestId]=Lr.channel.bindToContext(function(o){return o()}),n[i.requestId]=Kh(Kh({},i),{time:new Date}))}),t.on("succeeded",function(i){var o=n[i.requestId];o&&delete n[i.requestId],typeof i=="object"&&typeof r[i.requestId]=="function"&&(r[i.requestId](function(){return Lr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete r[i.requestId])}),t.on("failed",function(i){var o=n[i.requestId];o&&delete n[i.requestId],typeof i=="object"&&typeof r[i.requestId]=="function"&&(r[i.requestId](function(){return Lr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete r[i.requestId])}),e},GPe=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var r=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=Lr.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Lr.channel.bindToContext(arguments[1])),o.apply(this,arguments)},r},e},zPe=function(e){GPe(e);var t=e.instrument(),n={},r={};return t.on("started",function(i){n[i.requestId]||(r[i.requestId]=Lr.channel.bindToContext(function(o){return o()}),n[i.requestId]=i)}),t.on("succeeded",function(i){var o=n[i.requestId];o&&delete n[i.requestId],typeof i=="object"&&typeof r[i.requestId]=="function"&&(r[i.requestId](function(){return Lr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete r[i.requestId])}),t.on("failed",function(i){var o=n[i.requestId];o&&delete n[i.requestId],typeof i=="object"&&typeof r[i.requestId]=="function"&&(r[i.requestId](function(){return Lr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete r[i.requestId])}),e};ei.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:VPe};ei.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:WPe};ei.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:zPe};function YPe(){Lr.channel.registerMonkeyPatch("mongodb",ei.mongo2),Lr.channel.registerMonkeyPatch("mongodb",ei.mongo3),Lr.channel.registerMonkeyPatch("mongodb",ei.mongo330)}ei.enable=YPe});var cZ=_(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0});Wp.enable=Wp.mysql=void 0;var OI=cn(),aZ=require("path"),KPe=function(e,t){var n=function(u,c){return function(l,d){var p=u[l];p&&(u[l]=function(){for(var m=arguments.length-1,h=arguments.length-1;h>=0;--h)if(typeof arguments[h]=="function"){m=h;break}else if(typeof arguments[h]<"u")break;var v=arguments[m],g={result:null,startTime:null,startDate:null};typeof v=="function"&&(d?(g.startTime=process.hrtime(),g.startDate=new Date,arguments[m]=OI.channel.bindToContext(d(g,v))):arguments[m]=OI.channel.bindToContext(v));var y=p.apply(this,arguments);return g.result=y,y})}},r=function(u,c){return n(u.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(aZ.dirname(t)+"/lib/Connection");i.forEach(function(u){return r(o,"Connection")(u)}),n(o,"Connection")("createQuery",function(u,c){return function(l){var d=process.hrtime(u.startTime),p=d[0]*1e3+d[1]/1e6|0;OI.channel.publish("mysql",{query:u.result,callbackArgs:arguments,err:l,duration:p,time:u.startDate}),c.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(aZ.dirname(t)+"/lib/Pool");return s.forEach(function(u){return r(a,"Pool")(u)}),e};Wp.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:KPe};function XPe(){OI.channel.registerMonkeyPatch("mysql",Wp.mysql)}Wp.enable=XPe});var lZ=_(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.enable=Gp.postgresPool1=void 0;var uZ=cn();function QPe(e){var t=e.prototype.connect;return e.prototype.connect=function(r){return r&&(arguments[0]=uZ.channel.bindToContext(r)),t.apply(this,arguments)},e}Gp.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:QPe};function JPe(){uZ.channel.registerMonkeyPatch("pg-pool",Gp.postgresPool1)}Gp.enable=JPe});var pZ=_(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.enable=Ca.postgres7=Ca.postgres6=void 0;var Xh=cn(),dZ=require("events"),eM="postgres";function ZPe(e,t){var n=e.Client.prototype.query,r="__diagnosticOriginalFunc";return e.Client.prototype.query=function(o,s,a){var u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime(),l;function d(p){p&&p[r]&&(p=p[r]);var f=Xh.channel.bindToContext(function(m,h){var v=process.hrtime(c);if(u.result=h&&{rowCount:h.rowCount,command:h.command},u.error=m,u.duration=Math.ceil(v[0]*1e3+v[1]/1e6),Xh.channel.publish(eM,u),m){if(p)return p.apply(this,arguments);l&&l instanceof dZ.EventEmitter&&l.emit("error",m)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(f,r,{value:p}),f}catch{return p}}try{typeof o=="string"?s instanceof Array?(u.query.preparable={text:o,args:s},a=d(a)):(u.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?u.query.plan=o.name:o.values instanceof Array?u.query.preparable={text:o.text,args:o.values}:u.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return n.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=n.apply(this,arguments),l},e}function eRe(e,t){var n=e.Client.prototype.query,r="__diagnosticOriginalFunc";return e.Client.prototype.query=function(o,s,a){var u=this,c=!!a,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime(),p;function f(m){m&&m[r]&&(m=m[r]);var h=Xh.channel.bindToContext(function(v,g){var y=process.hrtime(d);if(l.result=g&&{rowCount:g.rowCount,command:g.command},l.error=v,l.duration=Math.ceil(y[0]*1e3+y[1]/1e6),Xh.channel.publish(eM,l),v){if(m)return m.apply(this,arguments);p&&p instanceof dZ.EventEmitter&&p.emit("error",v)}else m&&m.apply(this,arguments)});try{return Object.defineProperty(h,r,{value:m}),h}catch{return m}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},c=typeof a=="function",a=c?f(a):a):(l.query.text=o,a?(c=typeof a=="function",a=c?f(a):a):(c=typeof s=="function",s=c?f(s):s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?(c=typeof a=="function",a=f(a)):s?(c=typeof s=="function",s=c?f(s):s):(c=typeof o.callback=="function",o.callback=c?f(o.callback):o.callback))}catch{return n.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,p=n.apply(this,arguments),c?p:p.then(function(m){return f()(void 0,m),new u._Promise(function(h,v){h(m)})}).catch(function(m){return f()(m,void 0),new u._Promise(function(h,v){v(m)})})},e}Ca.postgres6={versionSpecifier:"6.*",patch:ZPe};Ca.postgres7={versionSpecifier:">=7.* <=8.*",patch:eRe,publisherName:eM};function tRe(){Xh.channel.registerMonkeyPatch("pg",Ca.postgres6),Xh.channel.registerMonkeyPatch("pg",Ca.postgres7)}Ca.enable=tRe});var fZ=_(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.enable=zp.redis=void 0;var tM=cn(),nRe=function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(n){if(n){var r=n.callback;if(!r||!r.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;n.callback=tM.channel.bindToContext(function(a,u){var c=process.hrtime(o),l=c[0]*1e3+c[1]/1e6|0;tM.channel.publish("redis",{duration:l,address:i,commandObj:n,err:a,result:u,time:s}),typeof r=="function"&&r.apply(this,arguments)}),n.callback.pubsubBound=!0}}return t.call(this,n)},e};zp.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:nRe};function rRe(){tM.channel.registerMonkeyPatch("redis",zp.redis)}zp.enable=rRe});var mZ=_(Yc=>{"use strict";var NI=Yc&&Yc.__assign||function(){return NI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},NI.apply(this,arguments)};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.enable=Yc.tedious=void 0;var nM=cn(),iRe=function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function r(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return nM.channel.bindToContext(function(u,c,l){var d=process.hrtime(s);a=NI(NI({},a),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!u&&{rowCount:c,rows:l},query:{text:this.parametersByName.statement.value},error:u,duration:Math.ceil(d[0]*1e3+d[1]/1e6)}),nM.channel.publish("tedious",a),o.call(this,u,c,l)})}var i=arguments[0];arguments[0].callback=r(i.callback),t.apply(this,arguments)},e};Yc.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:iRe};function oRe(){nM.channel.registerMonkeyPatch("tedious",Yc.tedious)}Yc.enable=oRe});var hZ=_(ki=>{"use strict";var sRe=ki&&ki.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aRe=ki&&ki.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(ki,"__esModule",{value:!0});ki.enable=ki.winston2=ki.winston3=void 0;var LI=cn(),cRe=function(e){var t=e.Logger.prototype.log,n,r=function(i,o,s){var a;return n===e.config.npm.levels?a="npm":n===e.config.syslog.levels?a="syslog":a="unknown",LI.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return e.Logger.prototype.log=function(){return n=this.levels,!this.filters||this.filters.length===0?this.filters=[r]:this.filters[this.filters.length-1]!==r&&(this.filters=this.filters.filter(function(o){return o!==r}),this.filters.push(r)),t.apply(this,arguments)},e},uRe=function(e){var t=function(s,a){var u;return s.config.npm.levels[a]!=null?u="npm":s.config.syslog.levels[a]!=null?u="syslog":u="unknown",u},n=function(s){sRe(a,s);function a(u,c){var l=s.call(this,c)||this;return l.winston=u,l}return a.prototype.log=function(u,c){var l=u.message,d=u.level,p=u.meta,f=aRe(u,["message","level","meta"]);d=typeof Symbol.for=="function"?u[Symbol.for("level")]:d,l=u instanceof Error?u:l;var m=t(this.winston,d);p=p||{};for(var h in f)f.hasOwnProperty(h)&&(p[h]=f[h]);LI.channel.publish("winston",{message:l,level:d,levelKind:m,meta:p}),c()},a}(e.Transport);function r(){var s=e.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(s=arguments[0].levels);var a;for(var u in s)s.hasOwnProperty(u)&&(a=a===void 0||s[u]>s[a]?u:a);this.add(new n(e,{level:a}))}var i=e.createLogger;e.createLogger=function(){var a=e.config.npm.levels;arguments&&arguments[0]&&arguments[0].levels&&(a=arguments[0].levels);var u;for(var c in a)a.hasOwnProperty(c)&&(u=u===void 0||a[c]>a[u]?c:u);var l=i.apply(this,arguments);l.add(new n(e,{level:u}));var d=l.configure;return l.configure=function(){d.apply(this,arguments),r.apply(this,arguments)},l};var o=e.configure;return e.configure=function(){o.apply(this,arguments),r.apply(this,arguments)},e.add(new n(e)),e};ki.winston3={versionSpecifier:"3.x",patch:uRe};ki.winston2={versionSpecifier:"2.x",patch:cRe};function lRe(){LI.channel.registerMonkeyPatch("winston",ki.winston2),LI.channel.registerMonkeyPatch("winston",ki.winston3)}ki.enable=lRe});var IZ=_(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.enable=Lt.tedious=Lt.pgPool=Lt.pg=Lt.winston=Lt.redis=Lt.mysql=Lt.mongodb=Lt.mongodbCore=Lt.console=Lt.bunyan=Lt.azuresdk=void 0;var gZ=eZ();Lt.azuresdk=gZ;var vZ=nZ();Lt.bunyan=vZ;var yZ=iZ();Lt.console=yZ;var xZ=oZ();Lt.mongodbCore=xZ;var wZ=sZ();Lt.mongodb=wZ;var EZ=cZ();Lt.mysql=EZ;var bZ=lZ();Lt.pgPool=bZ;var _Z=pZ();Lt.pg=_Z;var CZ=fZ();Lt.redis=CZ;var SZ=mZ();Lt.tedious=SZ;var TZ=hZ();Lt.winston=TZ;function dRe(){vZ.enable(),yZ.enable(),xZ.enable(),wZ.enable(),EZ.enable(),_Z.enable(),bZ.enable(),CZ.enable(),TZ.enable(),gZ.enable(),SZ.enable()}Lt.enable=dRe});var UI=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.registerContextPreservation=Al.IsInitialized=void 0;var rM=Xt(),RZ=UT();Al.IsInitialized=!RZ.JsonConfig.getInstance().noDiagnosticChannel;var iM="DiagnosticChannel";if(Al.IsInitialized){Hs=IZ(),PZ=RZ.JsonConfig.getInstance().noPatchModules,FI=PZ.split(","),oM={bunyan:Hs.bunyan,console:Hs.console,mongodb:Hs.mongodb,mongodbCore:Hs.mongodbCore,mysql:Hs.mysql,redis:Hs.redis,pg:Hs.pg,pgPool:Hs.pgPool,winston:Hs.winston,azuresdk:Hs.azuresdk};for(MI in oM)FI.indexOf(MI)===-1&&(oM[MI].enable(),rM.info(iM,"Subscribed to "+MI+" events"));FI.length>0&&rM.info(iM,"Some modules will not be patched",FI)}else rM.info(iM,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Hs,PZ,FI,oM,MI;function pRe(e){if(Al.IsInitialized){var t=cn();t.channel.addContextPreservation(e)}}Al.registerContextPreservation=pRe});var Qh=_((mnt,AZ)=>{"use strict";AZ.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var pr=_((cM,DZ)=>{"use strict";var kl=cM&&cM.__assign||function(){return kl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kl.apply(this,arguments)},fRe=require("http"),sM=require("https"),aM=require("url"),Dl=require("constants"),Yp=Xt(),Jh=Qh(),mRe=UT(),hRe=function(){function e(){e._addCloseHandler()}return e.getCookie=function(t,n){var r="";if(t&&t.length&&typeof n=="string")for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++){var n=o[s];if(n=e.trim(n),n&&n.indexOf(i)===0){r=n.substring(i.length,o[s].length);break}}return r},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(t){var n=function(a,u){return String.fromCharCode(a>>u&255)},r=function(a){return n(a,24)+n(a,16)+n(a,8)+n(a,0)},i=t.map(r).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r,i=0;i<4;i++)r=e.random32(),n+=t[r&15]+t[r>>4&15]+t[r>>8&15]+t[r>>12&15]+t[r>>16&15]+t[r>>20&15]+t[r>>24&15]+t[r>>28&15];var o=t[8+Math.random()*4|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+o+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000"},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e.isError=function(t){return Object.prototype.toString.call(t)==="[object Error]"},e.isPrimitive=function(t){var n=typeof t;return n==="string"||n==="number"||n==="boolean"},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var n=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));n=n.indexOf(".")<2?"0"+n:n,r=r.length<2?"0"+r:r,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+r+":"+n},e.extractError=function(t){var n=t;return{message:t.message,code:n.code||n.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t},e.validateStringMap=function(t){if(typeof t!="object"){Yp.info("Invalid properties dropped from payload");return}var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){Yp.info("key: "+r+" was function; will not serialize");continue}else{var a=e.isArray(o)?o:e.extractObject(o);try{e.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(u){i=o.constructor.name.toString()+" (Error: "+u.message+")",Yp.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n},e.canIncludeCorrelationHeader=function(t,n){var r=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!r||r.length==0||!n)return!0;for(var i=0;i<r.length;i++){var o=new RegExp(r[i].replace(/\./g,".").replace(/\*/g,".*"));try{if(o.test(new aM.URL(n).hostname))return!1}catch{}}return!0},e.getCorrelationContextTarget=function(t,n){var r=t.headers&&t.headers[Jh.requestContextHeader];if(r)for(var i=r.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==n)return s[1]}},e.makeRequest=function(t,n,r,i,o,s){o===void 0&&(o=!0),s===void 0&&(s=!0),n&&n.indexOf("//")===0&&(n="https:"+n);var a=new aM.URL(n),u=kl(kl({},r),{host:a.hostname,port:a.port,path:a.pathname}),c=void 0;if(o&&(a.protocol==="https:"&&(c=t.proxyHttpsUrl||void 0),a.protocol==="http:"&&(c=t.proxyHttpUrl||void 0),c)){c.indexOf("//")===0&&(c="http:"+c);try{var l=new aM.URL(c);l.protocol==="https:"?(Yp.info("Proxies that use HTTPS are not supported"),c=void 0):u=kl(kl({},u),{host:l.hostname,port:l.port||"80",path:n,headers:kl(kl({},u.headers),{Host:a.hostname})})}catch{Yp.warn("Wrong proxy URL provided")}}var d=a.protocol==="https:"&&!c;return s&&(d&&t.httpsAgent!==void 0?u.agent=t.httpsAgent:!d&&t.httpAgent!==void 0?u.agent=t.httpAgent:d&&(u.agent=e._useKeepAlive?e.keepAliveAgent:e.tlsRestrictedAgent)),d?sM.request(u,i):fRe.request(u,i)},e.safeIncludeCorrelationHeader=function(t,n,r){var i;if(typeof r=="string")i=r;else if(r instanceof Array)i=r.join(",");else if(r&&typeof r.toString=="function")try{i=r.toString()}catch(o){Yp.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,r)}i?e.addCorrelationIdHeaderFromString(t,n,i):n.setHeader(Jh.requestContextHeader,Jh.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(t){if(t)try{var n=Object.prototype.toString.call(t),r="";return n==="[object Error]"?r="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":r=this.stringify(t),n+r}catch{return t.toString()}},e.stringify=function(t){try{return JSON.stringify(t)}catch(n){Yp.warn("Failed to serialize payload",n,t)}},e.addCorrelationIdHeaderFromString=function(t,n,r){var i=r.split(","),o=Jh.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||n.setHeader(Jh.requestContextHeader,r+","+Jh.requestContextSourceKey+"="+t.config.correlationId)},e._addCloseHandler=function(){e._listenerAttached||(process.on("exit",function(){e.isNodeExit=!0,e._useKeepAlive=!1}),e._listenerAttached=!0)},e._useKeepAlive=!mRe.JsonConfig.getInstance().noHttpAgentKeepAlive,e._listenerAttached=!1,e.MAX_PROPERTY_LENGTH=8192,e.keepAliveAgent=new sM.Agent({keepAlive:!0,maxSockets:25,secureOptions:Dl.SSL_OP_NO_SSLv2|Dl.SSL_OP_NO_SSLv3|Dl.SSL_OP_NO_TLSv1|Dl.SSL_OP_NO_TLSv1_1}),e.tlsRestrictedAgent=new sM.Agent({secureOptions:Dl.SSL_OP_NO_SSLv2|Dl.SSL_OP_NO_SSLv3|Dl.SSL_OP_NO_TLSv1|Dl.SSL_OP_NO_TLSv1_1}),e.isNodeExit=!1,e}();DZ.exports=hRe});var Kp=_((hnt,kZ)=>{"use strict";var uM=pr(),gRe=function(){function e(){}return e.queryCorrelationId=function(t,n){},e.cancelCorrelationIdQuery=function(t,n){},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}else return e.generateRootId()},e.getRootId=function(t){var n=t.indexOf(".");n<0&&(n=t.length);var r=t[0]==="|"?1:0;return t.substring(r,n)},e.generateRootId=function(){return"|"+uM.w3cTraceId()+"."},e.appendSuffix=function(t,n,r){if(t.length+n.length<e.requestIdMaxLength)return t+n+r;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var o=t[i-1];if(o==="."||o==="_")break}if(i<=1)return e.generateRootId();for(n=uM.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,i)+n+"#"},e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.HTTP_TIMEOUT=2500,e.requestIdMaxLength=1024,e.currentRootId=uM.randomu32(),e}();kZ.exports=gRe});var qI=_((gnt,OZ)=>{"use strict";var fr=pr(),vRe=Kp(),yRe=function(){function e(t,n){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string")if(t.split(",").length>1)this.traceId=fr.w3cTraceId(),this.spanId=fr.w3cTraceId().substr(0,16);else{var r=t.trim().split("-"),i=r.length;i>=4?(this.version=r[0],this.traceId=r[1],this.spanId=r[2],this.traceFlag=r[3]):(this.traceId=fr.w3cTraceId(),this.spanId=fr.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=fr.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=fr.w3cTraceId(),this.spanId=fr.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=fr.w3cTraceId(),this.spanId=fr.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=fr.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=fr.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=fr.w3cTraceId().substr(0,16),this.traceId=fr.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var o=vRe.getRootId(n);e.isValidTraceId(o)||(this.legacyRootId=o,o=fr.w3cTraceId()),n.indexOf("|")!==-1&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=o,this.spanId=n}else this.traceId=fr.w3cTraceId(),this.spanId=fr.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.formatOpenTelemetryTraceFlags=function(t){var n="0"+t.toString(16);return n.substring(n.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=fr.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();OZ.exports=yRe});var lM=_((vnt,NZ)=>{"use strict";var xRe=function(){function e(t){this.fieldmap=[],t&&(this.fieldmap=this.parseHeader(t))}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ")},e.validateKeyChars=function(t){var n=t.split("@");if(n.length==2){var r=n[0].trim(),i=n[1].trim(),o=!!r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),s=!!i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return o&&s}else if(n.length==1)return!!t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},e.prototype.parseHeader=function(t){var n=[],r={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],u=a.trim();if(u.length!==0){var c=u.split("=");if(c.length!==2||!e.validateKeyChars(c[0])||r[c[0]])return null;r[c[0]]=!0,n.push(u)}}return n},e.strict=!0,e}();NZ.exports=xRe});var Kc=_((ynt,LZ)=>{"use strict";var wRe=function(){function e(){}return e}();LZ.exports=wRe});var MZ=_((dM,FZ)=>{"use strict";var ERe=dM&&dM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bRe=Kc(),_Re=function(e){ERe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return t}(bRe);FZ.exports=_Re});var pM=_((xnt,UZ)=>{"use strict";var CRe=function(){function e(){}return e}();UZ.exports=CRe});var jZ=_((wnt,qZ)=>{"use strict";var SRe=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return e}();qZ.exports=SRe});var $Z=_((fM,HZ)=>{"use strict";var TRe=fM&&fM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IRe=pM(),PRe=function(e){TRe(t,e);function t(){return e.call(this)||this}return t}(IRe);HZ.exports=PRe});var hM=_((Ent,BZ)=>{"use strict";var mM;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(mM||(mM={}));BZ.exports=mM});var WZ=_((bnt,VZ)=>{"use strict";var RRe=hM(),ARe=function(){function e(){this.kind=RRe.Measurement}return e}();VZ.exports=ARe});var zZ=_((_nt,GZ)=>{"use strict";var DRe=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();GZ.exports=DRe});var vM=_((gM,YZ)=>{"use strict";var kRe=gM&&gM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ORe=Kc(),NRe=function(e){kRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return t}(ORe);YZ.exports=NRe});var XZ=_((yM,KZ)=>{"use strict";var LRe=yM&&yM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FRe=Kc(),MRe=function(e){LRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.exceptions=[],n.properties={},n.measurements={},n}return t}(FRe);KZ.exports=MRe});var JZ=_((Cnt,QZ)=>{"use strict";var URe=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();QZ.exports=URe});var eee=_((xM,ZZ)=>{"use strict";var qRe=xM&&xM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jRe=Kc(),HRe=function(e){qRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n}return t}(jRe);ZZ.exports=HRe});var nee=_((wM,tee)=>{"use strict";var $Re=wM&&wM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BRe=Kc(),VRe=function(e){$Re(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.metrics=[],n.properties={},n}return t}(BRe);tee.exports=VRe});var iee=_((EM,ree)=>{"use strict";var WRe=EM&&EM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GRe=vM(),zRe=function(e){WRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return t}(GRe);ree.exports=zRe});var see=_((bM,oee)=>{"use strict";var YRe=bM&&bM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),KRe=Kc(),XRe=function(e){YRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.success=!0,n.properties={},n.measurements={},n}return t}(KRe);oee.exports=XRe});var cee=_((_M,aee)=>{"use strict";var QRe=_M&&_M.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JRe=Kc(),ZRe=function(e){QRe(t,e);function t(){var n=e.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return t}(JRe);aee.exports=ZRe});var lee=_((Snt,uee)=>{"use strict";var CM;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(CM||(CM={}));uee.exports=CM});var pee=_((Tnt,dee)=>{"use strict";var eAe=function(){function e(){}return e}();dee.exports=eAe});var SM=_(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.AvailabilityData=MZ();On.Base=pM();On.ContextTagKeys=jZ();On.Data=$Z();On.DataPoint=WZ();On.DataPointType=hM();On.Domain=Kc();On.Envelope=zZ();On.EventData=vM();On.ExceptionData=XZ();On.ExceptionDetails=JZ();On.MessageData=eee();On.MetricData=nee();On.PageViewData=iee();On.RemoteDependencyData=see();On.RequestData=cee();On.SeverityLevel=lee();On.StackFrame=pee()});var fee=_(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.domainSupportsProperties=Zh.RemoteDependencyDataConstants=void 0;var Xp=SM(),tAe=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();Zh.RemoteDependencyDataConstants=tAe;function nAe(e){return"properties"in e||e instanceof Xp.EventData||e instanceof Xp.ExceptionData||e instanceof Xp.MessageData||e instanceof Xp.MetricData||e instanceof Xp.PageViewData||e instanceof Xp.RemoteDependencyData||e instanceof Xp.RequestData}Zh.domainSupportsProperties=nAe});var hee=_(mee=>{"use strict";Object.defineProperty(mee,"__esModule",{value:!0})});var vee=_(gee=>{"use strict";Object.defineProperty(gee,"__esModule",{value:!0})});var xee=_(yee=>{"use strict";Object.defineProperty(yee,"__esModule",{value:!0})});var Eee=_(wee=>{"use strict";Object.defineProperty(wee,"__esModule",{value:!0})});var _ee=_(bee=>{"use strict";Object.defineProperty(bee,"__esModule",{value:!0})});var See=_(Cee=>{"use strict";Object.defineProperty(Cee,"__esModule",{value:!0})});var Iee=_(Tee=>{"use strict";Object.defineProperty(Tee,"__esModule",{value:!0})});var Ree=_(Pee=>{"use strict";Object.defineProperty(Pee,"__esModule",{value:!0})});var Dee=_(Aee=>{"use strict";Object.defineProperty(Aee,"__esModule",{value:!0})});var Oee=_(kee=>{"use strict";Object.defineProperty(kee,"__esModule",{value:!0})});var Lee=_(Nee=>{"use strict";Object.defineProperty(Nee,"__esModule",{value:!0})});var Mee=_(Fee=>{"use strict";Object.defineProperty(Fee,"__esModule",{value:!0})});var Uee=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.TelemetryType=$s.TelemetryTypeString=$s.baseTypeToTelemetryType=$s.telemetryTypeToBaseType=void 0;function rAe(e){switch(e){case mr.Event:return"EventData";case mr.Exception:return"ExceptionData";case mr.Trace:return"MessageData";case mr.Metric:return"MetricData";case mr.Request:return"RequestData";case mr.Dependency:return"RemoteDependencyData";case mr.Availability:return"AvailabilityData";case mr.PageView:return"PageViewData"}}$s.telemetryTypeToBaseType=rAe;function iAe(e){switch(e){case"EventData":return mr.Event;case"ExceptionData":return mr.Exception;case"MessageData":return mr.Trace;case"MetricData":return mr.Metric;case"RequestData":return mr.Request;case"RemoteDependencyData":return mr.Dependency;case"AvailabilityData":return mr.Availability;case"PageViewData":return mr.PageView}}$s.baseTypeToTelemetryType=iAe;$s.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var mr;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"})(mr=$s.TelemetryType||($s.TelemetryType={}))});var qee=_($n=>{"use strict";var oAe=$n&&$n.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),lo=$n&&$n.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&oAe(t,e,n)};Object.defineProperty($n,"__esModule",{value:!0});lo(hee(),$n);lo(vee(),$n);lo(xee(),$n);lo(Eee(),$n);lo(_ee(),$n);lo(See(),$n);lo(Iee(),$n);lo(Ree(),$n);lo(Dee(),$n);lo(Oee(),$n);lo(Lee(),$n);lo(Mee(),$n);lo(Uee(),$n)});var Hee=_(jee=>{"use strict";Object.defineProperty(jee,"__esModule",{value:!0})});var Bee=_($ee=>{"use strict";Object.defineProperty($ee,"__esModule",{value:!0})});var Wee=_(Vee=>{"use strict";Object.defineProperty(Vee,"__esModule",{value:!0})});var zee=_(Gee=>{"use strict";Object.defineProperty(Gee,"__esModule",{value:!0})});var Kee=_(Yee=>{"use strict";Object.defineProperty(Yee,"__esModule",{value:!0})});var Qee=_(Xee=>{"use strict";Object.defineProperty(Xee,"__esModule",{value:!0})});var Zee=_(Jee=>{"use strict";Object.defineProperty(Jee,"__esModule",{value:!0})});var tte=_(ete=>{"use strict";Object.defineProperty(ete,"__esModule",{value:!0})});var nte=_(Oi=>{"use strict";var sAe=Oi&&Oi.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Ol=Oi&&Oi.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&sAe(t,e,n)};Object.defineProperty(Oi,"__esModule",{value:!0});Ol(Hee(),Oi);Ol(Bee(),Oi);Ol(Wee(),Oi);Ol(zee(),Oi);Ol(Kee(),Oi);Ol(Qee(),Oi);Ol(Zee(),Oi);Ol(tte(),Oi)});var Fr=_(Sa=>{"use strict";var aAe=Sa&&Sa.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),jI=Sa&&Sa.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&aAe(t,e,n)};Object.defineProperty(Sa,"__esModule",{value:!0});jI(fee(),Sa);jI(SM(),Sa);jI(qee(),Sa);jI(nte(),Sa)});var TM=_((Znt,rte)=>{"use strict";var cAe=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(t,n){var r=+new Date;this.duration=r-this.startTime,this.statusCode=t;var i=this.properties||{};if(n){if(typeof n=="string")i.error=n;else if(n instanceof Error)i.error=n.message;else if(typeof n=="object")for(var o in n)i[o]=n[o]&&n[o].toString&&n[o].toString()}this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();rte.exports=cAe});var RM=_((PM,ote)=>{"use strict";var uAe=PM&&PM.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HI=require("url"),lAe=Fr(),ite=pr(),po=Qh(),dAe=TM(),Nl=Kp(),pAe=lM(),IM=qI(),fAe=function(e){uAe(t,e);function t(n,r){var i=e.call(this)||this;return n&&(i.method=n.method,i.url=i._getAbsoluteUrl(n),i.startTime=+new Date,i.socketRemoteAddress=n.socket&&n.socket.remoteAddress,i.parseHeaders(n,r),n.connection&&(i.connectionRemoteAddress=n.connection.remoteAddress,i.legacySocketRemoteAddress=n.connection.socket&&n.connection.socket.remoteAddress)),i}return t.prototype.onError=function(n,r){this._setStatus(void 0,n),r&&(this.duration=r)},t.prototype.onResponse=function(n,r){this._setStatus(n.statusCode,void 0),r&&(this.duration=r)},t.prototype.getRequestTelemetry=function(n){var r=this.method;try{r+=" "+new HI.URL(this.url).pathname}catch{}var i={id:this.requestId,name:r,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(n&&n.time?i.time=n.time:this.startTime&&(i.time=new Date(this.startTime)),n){for(var o in n)i[o]||(i[o]=n[o]);if(n.properties)for(var o in n.properties)i.properties[o]=n.properties[o]}return i},t.prototype.getRequestTags=function(n){var r={};for(var i in n)r[i]=n[i];return r[t.keys.locationIp]=n[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=n[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=n[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=n[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(n),r[t.keys.operationParentId]=this.getOperationParentId(n),r[t.keys.operationId]=this.getOperationId(n),r},t.prototype.getOperationId=function(n){return n[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(n){return n[t.keys.operationParentId]||this.parentId||this.getOperationId(n)},t.prototype.getOperationName=function(n){if(n[t.keys.operationName])return n[t.keys.operationName];var r="";try{r=new HI.URL(this.url).pathname}catch{}var i=this.method;return r&&(i+=" "+r),i},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(n){if(!n.headers)return n.url;var r=n.connection?n.connection.encrypted:null,i=r||n.headers["x-forwarded-proto"]=="https"?"https":"http",o=i+"://"+n.headers.host+"/",s="",a="";try{var u=new HI.URL(n.url,o);s=u.pathname,a=u.search}catch{}var c=HI.format({protocol:i,host:n.headers.host,pathname:s,search:a});return c},t.prototype._getIp=function(){var n=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,r=function(o){var s=n.exec(o);if(s)return s[0]},i=r(this.rawHeaders["x-forwarded-for"])||r(this.rawHeaders["x-client-ip"])||r(this.rawHeaders["x-real-ip"])||r(this.connectionRemoteAddress)||r(this.socketRemoteAddress)||r(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},t.prototype._getId=function(n){var r=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(ite.getCookie(n,r));return i},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(n,r){if(this.rawHeaders=n.headers||n.rawHeaders,this.userAgent=n.headers&&n.headers["user-agent"],this.sourceCorrelationId=ite.getCorrelationContextTarget(n,po.requestContextSourceKey),n.headers){var i=n.headers[po.traceStateHeader]?n.headers[po.traceStateHeader].toString():null,o=n.headers[po.traceparentHeader]?n.headers[po.traceparentHeader].toString():null,s=n.headers[po.requestIdHeader]?n.headers[po.requestIdHeader].toString():null,a=n.headers[po.parentIdHeader]?n.headers[po.parentIdHeader].toString():null,u=n.headers[po.rootIdHeader]?n.headers[po.rootIdHeader].toString():null;this.correlationContextHeader=n.headers[po.correlationContextHeader]?n.headers[po.correlationContextHeader].toString():null,Nl.w3cEnabled&&(o||i)?(this.traceparent=new IM(o?o.toString():null),this.tracestate=o&&i&&new pAe(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?Nl.w3cEnabled?(this.traceparent=new IM(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=Nl.generateRequestId(this.parentId),this.operationId=Nl.getRootId(this.requestId)):Nl.w3cEnabled?(this.traceparent=new IM,this.traceparent.parentId=a,this.traceparent.legacyRootId=u||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=Nl.generateRequestId(u||this.parentId),this.correlationContextHeader=null,this.operationId=Nl.getRootId(this.requestId)),r&&(this.requestId=r,this.operationId=Nl.getRootId(this.requestId))}},t.parseId=function(n){var r=n.split("|");return r.length>0?r[0]:""},t.keys=new lAe.ContextTagKeys,t}(dAe);ote.exports=fAe});var bte=_((Oe,Ete)=>{Oe=Ete.exports=et;var xt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?xt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:xt=function(){};Oe.SEMVER_SPEC_VERSION="2.0.0";var DM=256,$I=Number.MAX_SAFE_INTEGER||9007199254740991,AM=16,Ct=Oe.re=[],J=Oe.src=[],Xe=0,eg=Xe++;J[eg]="0|[1-9]\\d*";var tg=Xe++;J[tg]="[0-9]+";var LM=Xe++;J[LM]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ate=Xe++;J[ate]="("+J[eg]+")\\.("+J[eg]+")\\.("+J[eg]+")";var cte=Xe++;J[cte]="("+J[tg]+")\\.("+J[tg]+")\\.("+J[tg]+")";var kM=Xe++;J[kM]="(?:"+J[eg]+"|"+J[LM]+")";var OM=Xe++;J[OM]="(?:"+J[tg]+"|"+J[LM]+")";var FM=Xe++;J[FM]="(?:-("+J[kM]+"(?:\\."+J[kM]+")*))";var MM=Xe++;J[MM]="(?:-?("+J[OM]+"(?:\\."+J[OM]+")*))";var NM=Xe++;J[NM]="[0-9A-Za-z-]+";var kw=Xe++;J[kw]="(?:\\+("+J[NM]+"(?:\\."+J[NM]+")*))";var UM=Xe++,ute="v?"+J[ate]+J[FM]+"?"+J[kw]+"?";J[UM]="^"+ute+"$";var qM="[v=\\s]*"+J[cte]+J[MM]+"?"+J[kw]+"?",jM=Xe++;J[jM]="^"+qM+"$";var ig=Xe++;J[ig]="((?:<|>)?=?)";var BI=Xe++;J[BI]=J[tg]+"|x|X|\\*";var VI=Xe++;J[VI]=J[eg]+"|x|X|\\*";var Qp=Xe++;J[Qp]="[v=\\s]*("+J[VI]+")(?:\\.("+J[VI]+")(?:\\.("+J[VI]+")(?:"+J[FM]+")?"+J[kw]+"?)?)?";var rg=Xe++;J[rg]="[v=\\s]*("+J[BI]+")(?:\\.("+J[BI]+")(?:\\.("+J[BI]+")(?:"+J[MM]+")?"+J[kw]+"?)?)?";var lte=Xe++;J[lte]="^"+J[ig]+"\\s*"+J[Qp]+"$";var dte=Xe++;J[dte]="^"+J[ig]+"\\s*"+J[rg]+"$";var pte=Xe++;J[pte]="(?:^|[^\\d])(\\d{1,"+AM+"})(?:\\.(\\d{1,"+AM+"}))?(?:\\.(\\d{1,"+AM+"}))?(?:$|[^\\d])";var XI=Xe++;J[XI]="(?:~>?)";var WI=Xe++;J[WI]="(\\s*)"+J[XI]+"\\s+";Ct[WI]=new RegExp(J[WI],"g");var mAe="$1~",fte=Xe++;J[fte]="^"+J[XI]+J[Qp]+"$";var mte=Xe++;J[mte]="^"+J[XI]+J[rg]+"$";var QI=Xe++;J[QI]="(?:\\^)";var GI=Xe++;J[GI]="(\\s*)"+J[QI]+"\\s+";Ct[GI]=new RegExp(J[GI],"g");var hAe="$1^",hte=Xe++;J[hte]="^"+J[QI]+J[Qp]+"$";var gte=Xe++;J[gte]="^"+J[QI]+J[rg]+"$";var HM=Xe++;J[HM]="^"+J[ig]+"\\s*("+qM+")$|^$";var $M=Xe++;J[$M]="^"+J[ig]+"\\s*("+ute+")$|^$";var Aw=Xe++;J[Aw]="(\\s*)"+J[ig]+"\\s*("+qM+"|"+J[Qp]+")";Ct[Aw]=new RegExp(J[Aw],"g");var gAe="$1$2$3",vte=Xe++;J[vte]="^\\s*("+J[Qp]+")\\s+-\\s+("+J[Qp]+")\\s*$";var yte=Xe++;J[yte]="^\\s*("+J[rg]+")\\s+-\\s+("+J[rg]+")\\s*$";var xte=Xe++;J[xte]="(<|>)?=?\\s*\\*";for(Ll=0;Ll<Xe;Ll++)xt(Ll,J[Ll]),Ct[Ll]||(Ct[Ll]=new RegExp(J[Ll]));var Ll;Oe.parse=Jp;function Jp(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof et)return e;if(typeof e!="string"||e.length>DM)return null;var n=t.loose?Ct[jM]:Ct[UM];if(!n.test(e))return null;try{return new et(e,t)}catch{return null}}Oe.valid=vAe;function vAe(e,t){var n=Jp(e,t);return n?n.version:null}Oe.clean=yAe;function yAe(e,t){var n=Jp(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}Oe.SemVer=et;function et(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof et){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>DM)throw new TypeError("version is longer than "+DM+" characters");if(!(this instanceof et))return new et(e,t);xt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?Ct[jM]:Ct[UM]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>$I||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$I||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$I||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(r){if(/^[0-9]+$/.test(r)){var i=+r;if(i>=0&&i<$I)return i}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}et.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};et.prototype.toString=function(){return this.version};et.prototype.compare=function(e){return xt("SemVer.compare",this.version,this.options,e),e instanceof et||(e=new et(e,this.options)),this.compareMain(e)||this.comparePre(e)};et.prototype.compareMain=function(e){return e instanceof et||(e=new et(e,this.options)),ng(this.major,e.major)||ng(this.minor,e.minor)||ng(this.patch,e.patch)};et.prototype.comparePre=function(e){if(e instanceof et||(e=new et(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(xt("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return ng(n,r)}while(++t)};et.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};Oe.inc=xAe;function xAe(e,t,n,r){typeof n=="string"&&(r=n,n=void 0);try{return new et(e,n).inc(t,r).version}catch{return null}}Oe.diff=wAe;function wAe(e,t){if(BM(e,t))return null;var n=Jp(e),r=Jp(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if((s==="major"||s==="minor"||s==="patch")&&n[s]!==r[s])return i+s;return o}Oe.compareIdentifiers=ng;var ste=/^[0-9]+$/;function ng(e,t){var n=ste.test(e),r=ste.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}Oe.rcompareIdentifiers=EAe;function EAe(e,t){return ng(t,e)}Oe.major=bAe;function bAe(e,t){return new et(e,t).major}Oe.minor=_Ae;function _Ae(e,t){return new et(e,t).minor}Oe.patch=CAe;function CAe(e,t){return new et(e,t).patch}Oe.compare=Xc;function Xc(e,t,n){return new et(e,n).compare(new et(t,n))}Oe.compareLoose=SAe;function SAe(e,t){return Xc(e,t,!0)}Oe.rcompare=TAe;function TAe(e,t,n){return Xc(t,e,n)}Oe.sort=IAe;function IAe(e,t){return e.sort(function(n,r){return Oe.compare(n,r,t)})}Oe.rsort=PAe;function PAe(e,t){return e.sort(function(n,r){return Oe.rcompare(n,r,t)})}Oe.gt=Dw;function Dw(e,t,n){return Xc(e,t,n)>0}Oe.lt=zI;function zI(e,t,n){return Xc(e,t,n)<0}Oe.eq=BM;function BM(e,t,n){return Xc(e,t,n)===0}Oe.neq=wte;function wte(e,t,n){return Xc(e,t,n)!==0}Oe.gte=VM;function VM(e,t,n){return Xc(e,t,n)>=0}Oe.lte=WM;function WM(e,t,n){return Xc(e,t,n)<=0}Oe.cmp=YI;function YI(e,t,n,r){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return BM(e,n,r);case"!=":return wte(e,n,r);case">":return Dw(e,n,r);case">=":return VM(e,n,r);case"<":return zI(e,n,r);case"<=":return WM(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}Oe.Comparator=zo;function zo(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof zo){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof zo))return new zo(e,t);xt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ow?this.value="":this.value=this.operator+this.semver.version,xt("comp",this)}var Ow={};zo.prototype.parse=function(e){var t=this.options.loose?Ct[HM]:Ct[$M],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],this.operator==="="&&(this.operator=""),n[2]?this.semver=new et(n[2],this.options.loose):this.semver=Ow};zo.prototype.toString=function(){return this.value};zo.prototype.test=function(e){return xt("Comparator.test",e,this.options.loose),this.semver===Ow?!0:(typeof e=="string"&&(e=new et(e,this.options)),YI(e,this.operator,this.semver,this.options))};zo.prototype.intersects=function(e,t){if(!(e instanceof zo))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var n;if(this.operator==="")return n=new Jt(e.value,t),KI(this.value,n,t);if(e.operator==="")return n=new Jt(this.value,t),KI(e.semver,n,t);var r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=YI(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=YI(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||a||u};Oe.Range=Jt;function Jt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Jt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Jt(e.raw,t);if(e instanceof zo)return new Jt(e.value,t);if(!(this instanceof Jt))return new Jt(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(n){return this.parseRange(n.trim())},this).filter(function(n){return n.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}Jt.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};Jt.prototype.toString=function(){return this.range};Jt.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?Ct[yte]:Ct[vte];e=e.replace(n,UAe),xt("hyphen replace",e),e=e.replace(Ct[Aw],gAe),xt("comparator trim",e,Ct[Aw]),e=e.replace(Ct[WI],mAe),e=e.replace(Ct[GI],hAe),e=e.split(/\s+/).join(" ");var r=t?Ct[HM]:Ct[$M],i=e.split(" ").map(function(o){return AAe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(r)})),i=i.map(function(o){return new zo(o,this.options)},this),i};Jt.prototype.intersects=function(e,t){if(!(e instanceof Jt))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(r){return e.set.some(function(i){return i.every(function(o){return r.intersects(o,t)})})})})};Oe.toComparators=RAe;function RAe(e,t){return new Jt(e,t).set.map(function(n){return n.map(function(r){return r.value}).join(" ").trim().split(" ")})}function AAe(e,t){return xt("comp",e,t),e=OAe(e,t),xt("caret",e),e=DAe(e,t),xt("tildes",e),e=LAe(e,t),xt("xrange",e),e=MAe(e,t),xt("stars",e),e}function ti(e){return!e||e.toLowerCase()==="x"||e==="*"}function DAe(e,t){return e.trim().split(/\s+/).map(function(n){return kAe(n,t)}).join(" ")}function kAe(e,t){var n=t.loose?Ct[mte]:Ct[fte];return e.replace(n,function(r,i,o,s,a){xt("tilde",e,r,i,o,s,a);var u;return ti(i)?u="":ti(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ti(s)?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(xt("replaceTilde pr",a),u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",xt("tilde return",u),u})}function OAe(e,t){return e.trim().split(/\s+/).map(function(n){return NAe(n,t)}).join(" ")}function NAe(e,t){xt("caret",e,t);var n=t.loose?Ct[gte]:Ct[hte];return e.replace(n,function(r,i,o,s,a){xt("caret",e,r,i,o,s,a);var u;return ti(i)?u="":ti(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ti(s)?i==="0"?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(xt("replaceCaret pr",a),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(xt("no pr"),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),xt("caret return",u),u})}function LAe(e,t){return xt("replaceXRanges",e,t),e.split(/\s+/).map(function(n){return FAe(n,t)}).join(" ")}function FAe(e,t){e=e.trim();var n=t.loose?Ct[dte]:Ct[lte];return e.replace(n,function(r,i,o,s,a,u){xt("xRange",e,r,i,o,s,a,u);var c=ti(o),l=c||ti(s),d=l||ti(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?r="<0.0.0":r="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a):l?r=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(r=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),xt("xRange return",r),r})}function MAe(e,t){return xt("replaceStars",e,t),e.trim().replace(Ct[xte],"")}function UAe(e,t,n,r,i,o,s,a,u,c,l,d,p){return ti(n)?t="":ti(r)?t=">="+n+".0.0":ti(i)?t=">="+n+"."+r+".0":t=">="+t,ti(u)?a="":ti(c)?a="<"+(+u+1)+".0.0":ti(l)?a="<"+u+"."+(+c+1)+".0":d?a="<="+u+"."+c+"."+l+"-"+d:a="<="+a,(t+" "+a).trim()}Jt.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new et(e,this.options));for(var t=0;t<this.set.length;t++)if(qAe(this.set[t],e,this.options))return!0;return!1};function qAe(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(xt(e[r].semver),e[r].semver!==Ow&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}Oe.satisfies=KI;function KI(e,t,n){try{t=new Jt(t,n)}catch{return!1}return t.test(e)}Oe.maxSatisfying=jAe;function jAe(e,t,n){var r=null,i=null;try{var o=new Jt(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new et(r,n))}),r}Oe.minSatisfying=HAe;function HAe(e,t,n){var r=null,i=null;try{var o=new Jt(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new et(r,n))}),r}Oe.minVersion=$Ae;function $Ae(e,t){e=new Jt(e,t);var n=new et("0.0.0");if(e.test(n)||(n=new et("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(o){var s=new et(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!n||Dw(n,s))&&(n=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return n&&e.test(n)?n:null}Oe.validRange=BAe;function BAe(e,t){try{return new Jt(e,t).range||"*"}catch{return null}}Oe.ltr=VAe;function VAe(e,t,n){return GM(e,t,"<",n)}Oe.gtr=WAe;function WAe(e,t,n){return GM(e,t,">",n)}Oe.outside=GM;function GM(e,t,n,r){e=new et(e,r),t=new Jt(t,r);var i,o,s,a,u;switch(n){case">":i=Dw,o=WM,s=zI,a=">",u=">=";break;case"<":i=zI,o=VM,s=Dw,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(KI(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],d=null,p=null;if(l.forEach(function(f){f.semver===Ow&&(f=new zo(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,r)?d=f:s(f.semver,p.semver,r)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===u&&s(e,p.semver))return!1}return!0}Oe.prerelease=GAe;function GAe(e,t){var n=Jp(e,t);return n&&n.prerelease.length?n.prerelease:null}Oe.intersects=zAe;function zAe(e,t,n){return e=new Jt(e,n),t=new Jt(t,n),e.intersects(t)}Oe.coerce=YAe;function YAe(e){if(e instanceof et)return e;if(typeof e!="string")return null;var t=e.match(Ct[pte]);return t==null?null:Jp(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var JI=_((ert,Ste)=>{"use strict";function zM(e){return typeof e=="function"}var ni=console.error.bind(console);function Nw(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function Lw(e){e&&e.logger&&(zM(e.logger)?ni=e.logger:ni("new logger isn't a function, not replacing"))}function _te(e,t,n){if(!e||!e[t]){ni("no original function "+t+" to wrap");return}if(!n){ni("no wrapper function"),ni(new Error().stack);return}if(!zM(e[t])||!zM(n)){ni("original object and wrapper must be functions");return}var r=e[t],i=n(r,t);return Nw(i,"__original",r),Nw(i,"__unwrap",function(){e[t]===i&&Nw(e,t,r)}),Nw(i,"__wrapped",!0),Nw(e,t,i),i}function KAe(e,t,n){if(e)Array.isArray(e)||(e=[e]);else{ni("must provide one or more modules to patch"),ni(new Error().stack);return}if(!(t&&Array.isArray(t))){ni("must provide one or more functions to wrap on modules");return}e.forEach(function(r){t.forEach(function(i){_te(r,i,n)})})}function Cte(e,t){if(!e||!e[t]){ni("no function to unwrap."),ni(new Error().stack);return}if(!e[t].__unwrap)ni("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function XAe(e,t){if(e)Array.isArray(e)||(e=[e]);else{ni("must provide one or more modules to patch"),ni(new Error().stack);return}if(!(t&&Array.isArray(t))){ni("must provide one or more functions to unwrap on modules");return}e.forEach(function(n){t.forEach(function(r){Cte(n,r)})})}Lw.wrap=_te;Lw.massWrap=KAe;Lw.unwrap=Cte;Lw.massUnwrap=XAe;Ste.exports=Lw});var t0=_((trt,Rte)=>{"use strict";var Ite=JI(),og=Ite.wrap,ZI=Ite.unwrap,Qc="wrap@before";function e0(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function QAe(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r],o=e[Qc];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function Pte(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n?n=[n]:n=[]),n}function JAe(e,t,n){var r=Pte(e,t),i=r.filter(function(o){return n.indexOf(o)===-1});i.length>0&&QAe(e,i)}function Tte(e,t){if(e){var n=e;if(typeof e=="function")n=t(e);else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r])}return n}}Rte.exports=function(t,n,r){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!n)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(u,c){var l=Pte(this,u).slice();try{var d=s.call(this,u,c);return JAe(this,u,l),d}finally{this.on.__wrapped||og(this,"on",i),this.addListener.__wrapped||og(this,"addListener",i)}}}function o(s){return function(u){if(!this._events||!this._events[u])return s.apply(this,arguments);var c=this._events[u];function l(d){return function(){this._events[u]=c;try{return d.apply(this,arguments)}finally{c=this._events[u],this._events[u]=Tte(c,r)}}}og(this,"removeListener",l);try{return this._events[u]=Tte(c,r),s.apply(this,arguments)}finally{ZI(this,"removeListener"),this._events[u]=c}}}t[Qc]?typeof t[Qc]=="function"?e0(t,Qc,[t[Qc],n]):Array.isArray(t[Qc])&&t[Qc].push(n):e0(t,Qc,n),t.__wrapped||(og(t,"addListener",i),og(t,"on",i),og(t,"emit",o),e0(t,"__unwrap",function(){ZI(t,"addListener"),ZI(t,"on"),ZI(t,"emit"),delete t[Qc],delete t.__wrapped}),e0(t,"__wrapped",!0))}});var Ote=_((nrt,kte)=>{"use strict";var mt=require("util"),Jc=require("assert"),ZAe=t0(),qt=require("async_hooks"),Fw="cls@contexts",Mw="error@context",Zt=process.env.DEBUG_CLS_HOOKED,ft=-1;kte.exports={getNamespace:Ate,createNamespace:eDe,destroyNamespace:Dte,reset:tDe,ERROR_SYMBOL:Mw};function Yo(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Yo.prototype.set=function(t,n){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=n,Zt){let r=" ".repeat(this._indent<0?0:this._indent);Vt(r+"CONTEXT-SET KEY:"+t+"="+n+" in ns:"+this.name+" currentUid:"+ft+" active:"+mt.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return n};Yo.prototype.get=function(t){if(!this.active){if(Zt){let n=qt.currentId(),r=qt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Vt(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${ft} asyncHooksCurrentId:${n} triggerId:${r} len:${this._set.length}`)}return}if(Zt){let n=qt.executionAsyncId(),r=qt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Vt(i+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+ft+" active:"+mt.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Vt(`${i}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${ft} asyncHooksCurrentId:${n} triggerId:${r} len:${this._set.length} active:${mt.inspect(this.active)}`)}return this.active[t]};Yo.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=ft,Zt){let n=qt.executionAsyncId(),r=qt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Vt(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${ft} asyncHooksCurrentId:${n} triggerId:${r} len:${this._set.length} context:${mt.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};Yo.prototype.run=function(t){let n=this.createContext();this.enter(n);try{if(Zt){let r=qt.triggerAsyncId(),i=qt.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Vt(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${ft} triggerId:${r} asyncHooksCurrentId:${i} len:${this._set.length} context:${mt.inspect(n)}`)}return t(n),n}catch(r){throw r&&(r[Mw]=n),r}finally{if(Zt){let r=qt.triggerAsyncId(),i=qt.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Vt(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${ft} triggerId:${r} asyncHooksCurrentId:${i} len:${this._set.length} ${mt.inspect(n)}`)}this.exit(n)}};Yo.prototype.runAndReturn=function(t){let n;return this.run(function(r){n=t(r)}),n};Yo.prototype.runPromise=function(t){let n=this.createContext();this.enter(n);let r=t(n);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return Zt&&Vt("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+ft+" len:"+this._set.length+" "+mt.inspect(n)),r.then(i=>(Zt&&Vt("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+ft+" len:"+this._set.length+" "+mt.inspect(n)),this.exit(n),i)).catch(i=>{throw i[Mw]=n,Zt&&Vt("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+ft+" len:"+this._set.length+" "+mt.inspect(n)),this.exit(n),i})};Yo.prototype.bind=function(t,n){n||(this.active?n=this.active:n=this.createContext());let r=this;return function(){r.enter(n);try{return t.apply(this,arguments)}catch(o){throw o&&(o[Mw]=n),o}finally{r.exit(n)}}};Yo.prototype.enter=function(t){if(Jc.ok(t,"context must be provided for entering"),Zt){let n=qt.executionAsyncId(),r=qt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Vt(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${ft} triggerId:${r} asyncHooksCurrentId:${n} len:${this._set.length} ${mt.inspect(t)}`)}this._set.push(this.active),this.active=t};Yo.prototype.exit=function(t){if(Jc.ok(t,"context must be provided for exiting"),Zt){let r=qt.executionAsyncId(),i=qt.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Vt(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${ft} triggerId:${i} asyncHooksCurrentId:${r} len:${this._set.length} ${mt.inspect(t)}`)}if(this.active===t){Jc.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let n=this._set.lastIndexOf(t);n<0?(Zt&&Vt("??ERROR?? context exiting but not entered - ignoring: "+mt.inspect(t)),Jc.ok(n>=0,`context not currently entered; can't exit. 
`+mt.inspect(this)+`
`+mt.inspect(t))):(Jc.ok(n,"can't remove top context"),this._set.splice(n,1))};Yo.prototype.bindEmitter=function(t){Jc.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let n=this,r="context@"+this.name;function i(s){s&&(s[Fw]||(s[Fw]=Object.create(null)),s[Fw][r]={namespace:n,context:n.active})}function o(s){if(!(s&&s[Fw]))return s;let a=s,u=s[Fw];return Object.keys(u).forEach(function(c){let l=u[c];a=l.namespace.bind(a,l.context)}),a}ZAe(t,i,o)};Yo.prototype.fromException=function(t){return t[Mw]};function Ate(e){return process.namespaces[e]}function eDe(e){Jc.ok(e,"namespace must be given a name."),Zt&&Vt(`NS-CREATING NAMESPACE (${e})`);let t=new Yo(e);return t.id=ft,qt.createHook({init(r,i,o,s){if(ft=qt.executionAsyncId(),t.active){if(t._contexts.set(r,t.active),Zt){let a=" ".repeat(t._indent<0?0:t._indent);Vt(`${a}INIT [${i}] (${e}) asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(ft===0){let a=qt.triggerAsyncId(),u=t._contexts.get(a);if(u){if(t._contexts.set(r,u),Zt){let c=" ".repeat(t._indent<0?0:t._indent);Vt(`${c}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${r} currentUid:${ft} triggerId:${a} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Zt){let c=" ".repeat(t._indent<0?0:t._indent);Vt(`${c}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${r} currentUid:${ft} triggerId:${a} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(Zt&&i==="PROMISE"){Vt(mt.inspect(s,{showHidden:!0}));let a=s.parentId,u=" ".repeat(t._indent<0?0:t._indent);Vt(`${u}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${a} asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(r){ft=qt.executionAsyncId();let i;if(i=t._contexts.get(r)||t._contexts.get(ft),i){if(Zt){let o=qt.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Vt(`${s}BEFORE (${e}) asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${mt.inspect(i)}`),t._indent+=2}t.enter(i)}else if(Zt){let o=qt.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Vt(`${s}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${mt.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){ft=qt.executionAsyncId();let i;if(i=t._contexts.get(r)||t._contexts.get(ft),i){if(Zt){let o=qt.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Vt(`${s}AFTER (${e}) asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${mt.inspect(i)}`)}t.exit(i)}else if(Zt){let o=qt.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Vt(`${s}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${ft} triggerId:${o} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${mt.inspect(i)}`)}},destroy(r){if(ft=qt.executionAsyncId(),Zt){let i=qt.triggerAsyncId(),o=" ".repeat(t._indent<0?0:t._indent);Vt(`${o}DESTROY (${e}) currentUid:${ft} asyncId:${r} triggerId:${i} active:${mt.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${mt.inspect(t._contexts.get(ft))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t}function Dte(e){let t=Ate(e);Jc.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Jc.ok(t.id,"don't assign to process.namespaces directly! "+mt.inspect(t)),process.namespaces[e]=null}function tDe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Dte(e)}),process.namespaces=Object.create(null)}process.namespaces={};function Vt(...e){Zt&&process._rawDebug(`${mt.format(...e)}`)}});var Lte=_((rrt,Nte)=>{"use strict";function nDe(){}Nte.exports=function(){let t=this._hooks,n=this._state,r=process.nextTick;process.nextTick=function(){if(!n.enabled)return r.apply(process,arguments);let i=new Array(arguments.length);for(let u=0;u<arguments.length;u++)i[u]=arguments[u];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new nDe,a=--n.counter;return t.init.call(s,a,0,null,null),i[0]=function(){t.pre.call(s,a);let u=!0;try{o.apply(this,arguments),u=!1}finally{u&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,a,!0),t.destroy.call(null,a)})}t.post.call(s,a,!1),t.destroy.call(null,a)},r.apply(process,i)}}});var Mte=_((irt,Fte)=>{"use strict";function rDe(){}Fte.exports=function(){let t=this._hooks,n=this._state,r=global.Promise,i=r.prototype.then;r.prototype.then=u;function o(c,l,d,p){return typeof c!="function"?p?s(d):a(d):function(){t.pre.call(l,d);try{return c.apply(this,arguments)}finally{t.post.call(l,d,!1),t.destroy.call(null,d)}}}function s(c){return function(d){return t.destroy.call(null,c),d}}function a(c){return function(d){throw t.destroy.call(null,c),d}}function u(c,l){if(!n.enabled)return i.call(this,c,l);let d=new rDe,p=--n.counter;return t.init.call(d,p,0,null,null),i.call(this,o(c,d,p,!0),o(l,d,p,!1))}}});var qte=_((ort,Ute)=>{"use strict";var fo=require("timers");function iDe(){}function oDe(){}function sDe(){}var aDe=new Map,cDe=new Map,uDe=new Map,YM=null,KM=!1;Ute.exports=function(){XM(this._hooks,this._state,"setTimeout","clearTimeout",iDe,aDe,!0),XM(this._hooks,this._state,"setInterval","clearInterval",oDe,cDe,!1),XM(this._hooks,this._state,"setImmediate","clearImmediate",sDe,uDe,!0),global.setTimeout=fo.setTimeout,global.setInterval=fo.setInterval,global.setImmediate=fo.setImmediate,global.clearTimeout=fo.clearTimeout,global.clearInterval=fo.clearInterval,global.clearImmediate=fo.clearImmediate};function XM(e,t,n,r,i,o,s){let a=fo[n],u=fo[r];fo[n]=function(){if(!t.enabled)return a.apply(fo,arguments);let c=new Array(arguments.length);for(let m=0;m<arguments.length;m++)c[m]=arguments[m];let l=c[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let d=new i,p=--t.counter,f;return e.init.call(d,p,0,null,null),c[0]=function(){YM=f,e.pre.call(d,p);let m=!0;try{l.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(d,p,!0),o.delete(f),e.destroy.call(null,p)})}e.post.call(d,p,!1),YM=null,(s||KM)&&(KM=!1,o.delete(f),e.destroy.call(null,p))},f=a.apply(fo,c),o.set(f,p),f},fo[r]=function(c){if(YM===c&&c!==null)KM=!0;else if(o.has(c)){let l=o.get(c);o.delete(c),e.destroy.call(null,l)}u.apply(fo,arguments)}}});var QM=_((srt,lDe)=>{lDe.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var $te=_((art,Hte)=>{"use strict";var qw=process.binding("async_wrap"),dDe=qw.Providers.TIMERWRAP,jte={nextTick:Lte(),promise:Mte(),timers:qte()},Uw=new Set;function pDe(){this.enabled=!1,this.counter=0}function JM(){let e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],r=this.destroyFns=[];this.init=function(i,o,s,a){if(o===dDe){Uw.add(i);return}for(let u of e)u(i,this,o,s,a)},this.pre=function(i){if(!Uw.has(i))for(let o of t)o(i,this)},this.post=function(i,o){if(!Uw.has(i))for(let s of n)s(i,this,o)},this.destroy=function(i){if(Uw.has(i)){Uw.delete(i);return}for(let o of r)o(i)}}JM.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)};function n0(e,t){let n=e.indexOf(t);n!==-1&&e.splice(n,1)}JM.prototype.remove=function(e){e.init&&n0(this.initFns,e.init),e.pre&&n0(this.preFns,e.pre),e.post&&n0(this.postFns,e.post),e.destroy&&n0(this.destroyFns,e.destroy)};function jw(){this._state=new pDe,this._hooks=new JM,this.version=QM().version,this.providers=qw.Providers;for(let e of Object.keys(jte))jte[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),qw.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}Hte.exports=jw;jw.prototype.addHooks=function(e){this._hooks.add(e)};jw.prototype.removeHooks=function(e){this._hooks.remove(e)};jw.prototype.enable=function(){this._state.enabled=!0,qw.enable()};jw.prototype.disable=function(){this._state.enabled=!1,qw.disable()}});var ZM=_((crt,fDe)=>{fDe.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var Vte=_((urt,Bte)=>{function mDe(e){try{return Error.prototype.toString.call(e)}catch(t){try{return"<error: "+t+">"}catch{return"<error>"}}}Bte.exports=function(t,n){var r=[];r.push(mDe(t));for(var i=0;i<n.length;i++){var o=n[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch{s="<error>"}}r.push("    at "+s)}return r.join(`
`)}});var Yte=_((lrt,zte)=>{var r0=Vte();function Gte(){this.extend=new Hw,this.filter=new Hw,this.format=new $w,this.version=ZM().version}var tU=!1;Gte.prototype.callSite=function e(t){t||(t={}),tU=!0;var n={};Error.captureStackTrace(n,e);var r=n.stack;return tU=!1,r=r.slice(t.slice||0),t.extend&&(r=this.extend._modify(n,r)),t.filter&&(r=this.filter._modify(n,r)),r};var Fl=new Gte;function Hw(){this._modifiers=[]}Hw.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++)t=this._modifiers[n](e,t);return t};Hw.prototype.attach=function(e){this._modifiers.push(e)};Hw.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?!1:(this._modifiers.splice(t,1),!0)};function $w(){this._formater=r0,this._previous=void 0}$w.prototype.replace=function(e){e?this._formater=e:this.restore()};$w.prototype.restore=function(){this._formater=r0,this._previous=void 0};$w.prototype._backup=function(){this._previous=this._formater};$w.prototype._roolback=function(){this._previous===r0?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&Fl.format.replace(Error.prepareStackTrace);var eU=!1;function Wte(e,t){if(tU)return t;if(eU)return r0(e,t);var n=t.concat();n=Fl.extend._modify(e,n),n=Fl.filter._modify(e,n),n=n.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:n}),eU=!0;var r=Fl.format._formater(e,n);return eU=!1,r}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return Wte},set:function(e){e===Wte?Fl.format._roolback():(Fl.format._backup(),Fl.format.replace(e))}});function hDe(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:hDe,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0});zte.exports=Fl});var rU=_((drt,nU)=>{if(global._stackChain)if(global._stackChain.version===ZM().version)nU.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else nU.exports=global._stackChain=Yte()});var Kte=_((prt,iU)=>{"use strict";var gDe=$te();if(global._asyncHook)if(global._asyncHook.version===QM().version)iU.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else rU().filter.attach(function(t,n){return n.filter(function(r){let i=r.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),iU.exports=global._asyncHook=new gDe});var tne=_((frt,ene)=>{"use strict";var En=require("util"),Zc=require("assert"),vDe=t0(),sg=Kte(),Bw="cls@contexts",Vw="error@context",Qte=[];for(let e in sg.providers)Qte[sg.providers[e]]=e;var un=process.env.DEBUG_CLS_HOOKED,Nn=-1;ene.exports={getNamespace:Jte,createNamespace:yDe,destroyNamespace:Zte,reset:xDe,ERROR_SYMBOL:Vw};function Ko(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Ko.prototype.set=function(t,n){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return un&&wn("    SETTING KEY:"+t+"="+n+" in ns:"+this.name+" uid:"+Nn+" active:"+En.inspect(this.active,!0)),this.active[t]=n,n};Ko.prototype.get=function(t){if(!this.active){un&&wn("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+Nn+" active:"+En.inspect(this.active,!0));return}return un&&wn("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+Nn+" active:"+En.inspect(this.active,!0)),this.active[t]};Ko.prototype.createContext=function(){un&&wn("   CREATING Context: "+this.name+" uid:"+Nn+" len:"+this._set.length+"  active:"+En.inspect(this.active,!0,2,!0));let t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=Nn,un&&wn("   CREATED Context: "+this.name+" uid:"+Nn+" len:"+this._set.length+"  context:"+En.inspect(t,!0,2,!0)),t};Ko.prototype.run=function(t){let n=this.createContext();this.enter(n);try{return un&&wn(" BEFORE RUN: "+this.name+" uid:"+Nn+" len:"+this._set.length+" "+En.inspect(n)),t(n),n}catch(r){throw r&&(r[Vw]=n),r}finally{un&&wn(" AFTER RUN: "+this.name+" uid:"+Nn+" len:"+this._set.length+" "+En.inspect(n)),this.exit(n)}};Ko.prototype.runAndReturn=function(t){var n;return this.run(function(r){n=t(r)}),n};Ko.prototype.runPromise=function(t){let n=this.createContext();this.enter(n);let r=t(n);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return un&&wn(" BEFORE runPromise: "+this.name+" uid:"+Nn+" len:"+this._set.length+" "+En.inspect(n)),r.then(i=>(un&&wn(" AFTER runPromise: "+this.name+" uid:"+Nn+" len:"+this._set.length+" "+En.inspect(n)),this.exit(n),i)).catch(i=>{throw i[Vw]=n,un&&wn(" AFTER runPromise: "+this.name+" uid:"+Nn+" len:"+this._set.length+" "+En.inspect(n)),this.exit(n),i})};Ko.prototype.bind=function(t,n){n||(this.active?n=this.active:n=this.createContext());let r=this;return function(){r.enter(n);try{return t.apply(this,arguments)}catch(o){throw o&&(o[Vw]=n),o}finally{r.exit(n)}}};Ko.prototype.enter=function(t){Zc.ok(t,"context must be provided for entering"),un&&wn("  ENTER "+this.name+" uid:"+Nn+" len:"+this._set.length+" context: "+En.inspect(t)),this._set.push(this.active),this.active=t};Ko.prototype.exit=function(t){if(Zc.ok(t,"context must be provided for exiting"),un&&wn("  EXIT "+this.name+" uid:"+Nn+" len:"+this._set.length+" context: "+En.inspect(t)),this.active===t){Zc.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let n=this._set.lastIndexOf(t);n<0?(un&&wn("??ERROR?? context exiting but not entered - ignoring: "+En.inspect(t)),Zc.ok(n>=0,`context not currently entered; can't exit. 
`+En.inspect(this)+`
`+En.inspect(t))):(Zc.ok(n,"can't remove top context"),this._set.splice(n,1))};Ko.prototype.bindEmitter=function(t){Zc.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let n=this,r="context@"+this.name;function i(s){s&&(s[Bw]||(s[Bw]=Object.create(null)),s[Bw][r]={namespace:n,context:n.active})}function o(s){if(!(s&&s[Bw]))return s;let a=s,u=s[Bw];return Object.keys(u).forEach(function(c){let l=u[c];a=l.namespace.bind(a,l.context)}),a}vDe(t,i,o)};Ko.prototype.fromException=function(t){return t[Vw]};function Jte(e){return process.namespaces[e]}function yDe(e){Zc.ok(e,"namespace must be given a name."),un&&wn("CREATING NAMESPACE "+e);let t=new Ko(e);return t.id=Nn,sg.addHooks({init(n,r,i,o,s){Nn=n,o?(t._contexts.set(n,t._contexts.get(o)),un&&wn("PARENTID: "+e+" uid:"+n+" parent:"+o+" provider:"+i)):t._contexts.set(Nn,t.active),un&&wn("INIT "+e+" uid:"+n+" parent:"+o+" provider:"+Qte[i]+" active:"+En.inspect(t.active,!0))},pre(n,r){Nn=n;let i=t._contexts.get(n);i?(un&&wn(" PRE "+e+" uid:"+n+" handle:"+i0(r)+" context:"+En.inspect(i)),t.enter(i)):un&&wn(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+i0(r))},post(n,r){Nn=n;let i=t._contexts.get(n);i?(un&&wn(" POST "+e+" uid:"+n+" handle:"+i0(r)+" context:"+En.inspect(i)),t.exit(i)):un&&wn(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+i0(r))},destroy(n){Nn=n,un&&wn("DESTROY "+e+" uid:"+n+" context:"+En.inspect(t._contexts.get(Nn))+" active:"+En.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t}function Zte(e){let t=Jte(e);Zc.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Zc.ok(t.id,"don't assign to process.namespaces directly! "+En.inspect(t)),process.namespaces[e]=null}function xDe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Zte(e)}),process.namespaces=Object.create(null)}process.namespaces={};sg._state&&!sg._state.enabled&&sg.enable();function wn(e){process.env.DEBUG&&process._rawDebug(e)}function i0(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name}if(un){oU=rU();for(Xte in oU.filter._modifiers)oU.filter.deattach(Xte)}var oU,Xte});var nne=_((mrt,sU)=>{"use strict";var wDe=bte();process&&wDe.gte(process.versions.node,"8.0.0")?sU.exports=Ote():sU.exports=tne()});var xne=_((Ne,yne)=>{Ne=yne.exports=tt;var wt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?wt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:wt=function(){};Ne.SEMVER_SPEC_VERSION="2.0.0";var cU=256,o0=Number.MAX_SAFE_INTEGER||9007199254740991,aU=16,St=Ne.re=[],Z=Ne.src=[],Qe=0,ag=Qe++;Z[ag]="0|[1-9]\\d*";var cg=Qe++;Z[cg]="[0-9]+";var pU=Qe++;Z[pU]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ine=Qe++;Z[ine]="("+Z[ag]+")\\.("+Z[ag]+")\\.("+Z[ag]+")";var one=Qe++;Z[one]="("+Z[cg]+")\\.("+Z[cg]+")\\.("+Z[cg]+")";var uU=Qe++;Z[uU]="(?:"+Z[ag]+"|"+Z[pU]+")";var lU=Qe++;Z[lU]="(?:"+Z[cg]+"|"+Z[pU]+")";var fU=Qe++;Z[fU]="(?:-("+Z[uU]+"(?:\\."+Z[uU]+")*))";var mU=Qe++;Z[mU]="(?:-?("+Z[lU]+"(?:\\."+Z[lU]+")*))";var dU=Qe++;Z[dU]="[0-9A-Za-z-]+";var zw=Qe++;Z[zw]="(?:\\+("+Z[dU]+"(?:\\."+Z[dU]+")*))";var hU=Qe++,sne="v?"+Z[ine]+Z[fU]+"?"+Z[zw]+"?";Z[hU]="^"+sne+"$";var gU="[v=\\s]*"+Z[one]+Z[mU]+"?"+Z[zw]+"?",vU=Qe++;Z[vU]="^"+gU+"$";var dg=Qe++;Z[dg]="((?:<|>)?=?)";var s0=Qe++;Z[s0]=Z[cg]+"|x|X|\\*";var a0=Qe++;Z[a0]=Z[ag]+"|x|X|\\*";var Zp=Qe++;Z[Zp]="[v=\\s]*("+Z[a0]+")(?:\\.("+Z[a0]+")(?:\\.("+Z[a0]+")(?:"+Z[fU]+")?"+Z[zw]+"?)?)?";var lg=Qe++;Z[lg]="[v=\\s]*("+Z[s0]+")(?:\\.("+Z[s0]+")(?:\\.("+Z[s0]+")(?:"+Z[mU]+")?"+Z[zw]+"?)?)?";var ane=Qe++;Z[ane]="^"+Z[dg]+"\\s*"+Z[Zp]+"$";var cne=Qe++;Z[cne]="^"+Z[dg]+"\\s*"+Z[lg]+"$";var une=Qe++;Z[une]="(?:^|[^\\d])(\\d{1,"+aU+"})(?:\\.(\\d{1,"+aU+"}))?(?:\\.(\\d{1,"+aU+"}))?(?:$|[^\\d])";var f0=Qe++;Z[f0]="(?:~>?)";var c0=Qe++;Z[c0]="(\\s*)"+Z[f0]+"\\s+";St[c0]=new RegExp(Z[c0],"g");var EDe="$1~",lne=Qe++;Z[lne]="^"+Z[f0]+Z[Zp]+"$";var dne=Qe++;Z[dne]="^"+Z[f0]+Z[lg]+"$";var m0=Qe++;Z[m0]="(?:\\^)";var u0=Qe++;Z[u0]="(\\s*)"+Z[m0]+"\\s+";St[u0]=new RegExp(Z[u0],"g");var bDe="$1^",pne=Qe++;Z[pne]="^"+Z[m0]+Z[Zp]+"$";var fne=Qe++;Z[fne]="^"+Z[m0]+Z[lg]+"$";var yU=Qe++;Z[yU]="^"+Z[dg]+"\\s*("+gU+")$|^$";var xU=Qe++;Z[xU]="^"+Z[dg]+"\\s*("+sne+")$|^$";var Ww=Qe++;Z[Ww]="(\\s*)"+Z[dg]+"\\s*("+gU+"|"+Z[Zp]+")";St[Ww]=new RegExp(Z[Ww],"g");var _De="$1$2$3",mne=Qe++;Z[mne]="^\\s*("+Z[Zp]+")\\s+-\\s+("+Z[Zp]+")\\s*$";var hne=Qe++;Z[hne]="^\\s*("+Z[lg]+")\\s+-\\s+("+Z[lg]+")\\s*$";var gne=Qe++;Z[gne]="(<|>)?=?\\s*\\*";for(Ml=0;Ml<Qe;Ml++)wt(Ml,Z[Ml]),St[Ml]||(St[Ml]=new RegExp(Z[Ml]));var Ml;Ne.parse=ef;function ef(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof tt)return e;if(typeof e!="string"||e.length>cU)return null;var n=t.loose?St[vU]:St[hU];if(!n.test(e))return null;try{return new tt(e,t)}catch{return null}}Ne.valid=CDe;function CDe(e,t){var n=ef(e,t);return n?n.version:null}Ne.clean=SDe;function SDe(e,t){var n=ef(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}Ne.SemVer=tt;function tt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof tt){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>cU)throw new TypeError("version is longer than "+cU+" characters");if(!(this instanceof tt))return new tt(e,t);wt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?St[vU]:St[hU]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o0||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o0||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o0||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(r){if(/^[0-9]+$/.test(r)){var i=+r;if(i>=0&&i<o0)return i}return r}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}tt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};tt.prototype.toString=function(){return this.version};tt.prototype.compare=function(e){return wt("SemVer.compare",this.version,this.options,e),e instanceof tt||(e=new tt(e,this.options)),this.compareMain(e)||this.comparePre(e)};tt.prototype.compareMain=function(e){return e instanceof tt||(e=new tt(e,this.options)),ug(this.major,e.major)||ug(this.minor,e.minor)||ug(this.patch,e.patch)};tt.prototype.comparePre=function(e){if(e instanceof tt||(e=new tt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(wt("prerelease compare",t,n,r),n===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(n===void 0)return-1;if(n===r)continue;return ug(n,r)}while(++t)};tt.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};Ne.inc=TDe;function TDe(e,t,n,r){typeof n=="string"&&(r=n,n=void 0);try{return new tt(e,n).inc(t,r).version}catch{return null}}Ne.diff=IDe;function IDe(e,t){if(wU(e,t))return null;var n=ef(e),r=ef(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if((s==="major"||s==="minor"||s==="patch")&&n[s]!==r[s])return i+s;return o}Ne.compareIdentifiers=ug;var rne=/^[0-9]+$/;function ug(e,t){var n=rne.test(e),r=rne.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}Ne.rcompareIdentifiers=PDe;function PDe(e,t){return ug(t,e)}Ne.major=RDe;function RDe(e,t){return new tt(e,t).major}Ne.minor=ADe;function ADe(e,t){return new tt(e,t).minor}Ne.patch=DDe;function DDe(e,t){return new tt(e,t).patch}Ne.compare=eu;function eu(e,t,n){return new tt(e,n).compare(new tt(t,n))}Ne.compareLoose=kDe;function kDe(e,t){return eu(e,t,!0)}Ne.rcompare=ODe;function ODe(e,t,n){return eu(t,e,n)}Ne.sort=NDe;function NDe(e,t){return e.sort(function(n,r){return Ne.compare(n,r,t)})}Ne.rsort=LDe;function LDe(e,t){return e.sort(function(n,r){return Ne.rcompare(n,r,t)})}Ne.gt=Gw;function Gw(e,t,n){return eu(e,t,n)>0}Ne.lt=l0;function l0(e,t,n){return eu(e,t,n)<0}Ne.eq=wU;function wU(e,t,n){return eu(e,t,n)===0}Ne.neq=vne;function vne(e,t,n){return eu(e,t,n)!==0}Ne.gte=EU;function EU(e,t,n){return eu(e,t,n)>=0}Ne.lte=bU;function bU(e,t,n){return eu(e,t,n)<=0}Ne.cmp=d0;function d0(e,t,n,r){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return wU(e,n,r);case"!=":return vne(e,n,r);case">":return Gw(e,n,r);case">=":return EU(e,n,r);case"<":return l0(e,n,r);case"<=":return bU(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}Ne.Comparator=Xo;function Xo(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Xo){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Xo))return new Xo(e,t);wt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Yw?this.value="":this.value=this.operator+this.semver.version,wt("comp",this)}var Yw={};Xo.prototype.parse=function(e){var t=this.options.loose?St[yU]:St[xU],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],this.operator==="="&&(this.operator=""),n[2]?this.semver=new tt(n[2],this.options.loose):this.semver=Yw};Xo.prototype.toString=function(){return this.value};Xo.prototype.test=function(e){return wt("Comparator.test",e,this.options.loose),this.semver===Yw?!0:(typeof e=="string"&&(e=new tt(e,this.options)),d0(e,this.operator,this.semver,this.options))};Xo.prototype.intersects=function(e,t){if(!(e instanceof Xo))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var n;if(this.operator==="")return n=new en(e.value,t),p0(this.value,n,t);if(e.operator==="")return n=new en(this.value,t),p0(e.semver,n,t);var r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=d0(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=d0(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||a||u};Ne.Range=en;function en(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof en)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new en(e.raw,t);if(e instanceof Xo)return new en(e.value,t);if(!(this instanceof en))return new en(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(n){return this.parseRange(n.trim())},this).filter(function(n){return n.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}en.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};en.prototype.toString=function(){return this.range};en.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?St[hne]:St[mne];e=e.replace(n,WDe),wt("hyphen replace",e),e=e.replace(St[Ww],_De),wt("comparator trim",e,St[Ww]),e=e.replace(St[c0],EDe),e=e.replace(St[u0],bDe),e=e.split(/\s+/).join(" ");var r=t?St[yU]:St[xU],i=e.split(" ").map(function(o){return MDe(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(r)})),i=i.map(function(o){return new Xo(o,this.options)},this),i};en.prototype.intersects=function(e,t){if(!(e instanceof en))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(r){return e.set.some(function(i){return i.every(function(o){return r.intersects(o,t)})})})})};Ne.toComparators=FDe;function FDe(e,t){return new en(e,t).set.map(function(n){return n.map(function(r){return r.value}).join(" ").trim().split(" ")})}function MDe(e,t){return wt("comp",e,t),e=jDe(e,t),wt("caret",e),e=UDe(e,t),wt("tildes",e),e=$De(e,t),wt("xrange",e),e=VDe(e,t),wt("stars",e),e}function ri(e){return!e||e.toLowerCase()==="x"||e==="*"}function UDe(e,t){return e.trim().split(/\s+/).map(function(n){return qDe(n,t)}).join(" ")}function qDe(e,t){var n=t.loose?St[dne]:St[lne];return e.replace(n,function(r,i,o,s,a){wt("tilde",e,r,i,o,s,a);var u;return ri(i)?u="":ri(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ri(s)?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(wt("replaceTilde pr",a),u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",wt("tilde return",u),u})}function jDe(e,t){return e.trim().split(/\s+/).map(function(n){return HDe(n,t)}).join(" ")}function HDe(e,t){wt("caret",e,t);var n=t.loose?St[fne]:St[pne];return e.replace(n,function(r,i,o,s,a){wt("caret",e,r,i,o,s,a);var u;return ri(i)?u="":ri(o)?u=">="+i+".0.0 <"+(+i+1)+".0.0":ri(s)?i==="0"?u=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(wt("replaceCaret pr",a),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(wt("no pr"),i==="0"?o==="0"?u=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):u=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":u=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),wt("caret return",u),u})}function $De(e,t){return wt("replaceXRanges",e,t),e.split(/\s+/).map(function(n){return BDe(n,t)}).join(" ")}function BDe(e,t){e=e.trim();var n=t.loose?St[cne]:St[ane];return e.replace(n,function(r,i,o,s,a,u){wt("xRange",e,r,i,o,s,a,u);var c=ri(o),l=c||ri(s),d=l||ri(a),p=d;return i==="="&&p&&(i=""),c?i===">"||i==="<"?r="<0.0.0":r="*":i&&p?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a):l?r=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(r=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),wt("xRange return",r),r})}function VDe(e,t){return wt("replaceStars",e,t),e.trim().replace(St[gne],"")}function WDe(e,t,n,r,i,o,s,a,u,c,l,d,p){return ri(n)?t="":ri(r)?t=">="+n+".0.0":ri(i)?t=">="+n+"."+r+".0":t=">="+t,ri(u)?a="":ri(c)?a="<"+(+u+1)+".0.0":ri(l)?a="<"+u+"."+(+c+1)+".0":d?a="<="+u+"."+c+"."+l+"-"+d:a="<="+a,(t+" "+a).trim()}en.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new tt(e,this.options));for(var t=0;t<this.set.length;t++)if(GDe(this.set[t],e,this.options))return!0;return!1};function GDe(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(wt(e[r].semver),e[r].semver!==Yw&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}Ne.satisfies=p0;function p0(e,t,n){try{t=new en(t,n)}catch{return!1}return t.test(e)}Ne.maxSatisfying=zDe;function zDe(e,t,n){var r=null,i=null;try{var o=new en(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new tt(r,n))}),r}Ne.minSatisfying=YDe;function YDe(e,t,n){var r=null,i=null;try{var o=new en(t,n)}catch{return null}return e.forEach(function(s){o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new tt(r,n))}),r}Ne.minVersion=KDe;function KDe(e,t){e=new en(e,t);var n=new tt("0.0.0");if(e.test(n)||(n=new tt("0.0.0-0"),e.test(n)))return n;n=null;for(var r=0;r<e.set.length;++r){var i=e.set[r];i.forEach(function(o){var s=new tt(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!n||Gw(n,s))&&(n=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return n&&e.test(n)?n:null}Ne.validRange=XDe;function XDe(e,t){try{return new en(e,t).range||"*"}catch{return null}}Ne.ltr=QDe;function QDe(e,t,n){return _U(e,t,"<",n)}Ne.gtr=JDe;function JDe(e,t,n){return _U(e,t,">",n)}Ne.outside=_U;function _U(e,t,n,r){e=new tt(e,r),t=new en(t,r);var i,o,s,a,u;switch(n){case">":i=Gw,o=bU,s=l0,a=">",u=">=";break;case"<":i=l0,o=EU,s=Gw,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(p0(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var l=t.set[c],d=null,p=null;if(l.forEach(function(f){f.semver===Yw&&(f=new Xo(">=0.0.0")),d=d||f,p=p||f,i(f.semver,d.semver,r)?d=f:s(f.semver,p.semver,r)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===u&&s(e,p.semver))return!1}return!0}Ne.prerelease=ZDe;function ZDe(e,t){var n=ef(e,t);return n&&n.prerelease.length?n.prerelease:null}Ne.intersects=eke;function eke(e,t,n){return e=new en(e,n),t=new en(t,n),e.intersects(t)}Ne.coerce=tke;function tke(e){if(e instanceof tt)return e;if(typeof e!="string")return null;var t=e.match(St[une]);return t==null?null:ef(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var bne=_((hrt,Ene)=>{var nke=JI().wrap,SU=1<<0,TU=1<<1,IU=1<<2,g0=1<<3,Tt=[],rke=0,Mr=!1,Ul=[],pg,PU;function RU(e,t){var n=e.length,r=t.length,i=[];if(n===0&&r===0)return i;for(var o=0;o<n;o++)i[o]=e[o];if(r===0)return i;for(var s=0;s<r;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}process._fatalException?(h0=!1,pg=function(t){var n=Tt.length;if(h0||n===0)return!1;var r=!1;h0=!0;for(var i=0;i<n;++i){var o=Tt[i];if(o.flags&g0){var s=fg&&fg[o.uid];r=o.error(s,t)||r}}return h0=!1,Ul.length>0&&(Tt=Ul.pop()),fg=void 0,r&&!Mr},PU=function(t,n,r){var i=[];Mr=!0;for(var o=0;o<r;++o){var s=n[o];if(i[s.uid]=s.data,!!(s.flags&SU)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Mr=!1,function(){fg=i,Ul.push(Tt),Tt=RU(n,Tt),Mr=!0;for(var u=0;u<r;++u)(n[u].flags&TU)>0&&n[u].before(this,i[n[u].uid]);Mr=!1;var c=t.apply(this,arguments);for(Mr=!0,u=0;u<r;++u)(n[u].flags&IU)>0&&n[u].after(this,i[n[u].uid]);return Mr=!1,Tt=Ul.pop(),fg=void 0,c}},nke(process,"_fatalException",function(e){return function(n){return pg(n)||e(n)}})):(CU=!1,pg=function(t){if(CU)throw t;for(var n=!1,r=Tt.length,i=0;i<r;++i){var o=Tt[i];o.flags&g0&&(n=o.error(null,t)||n)}if(!n&&Mr)throw t},PU=function(t,n,r){var i=[];Mr=!0;for(var o=0;o<r;++o){var s=n[o];if(i[s.uid]=s.data,!!(s.flags&SU)){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return Mr=!1,function(){var u=!1,c=!1;Ul.push(Tt),Tt=RU(n,Tt),Mr=!0;for(var l=0;l<r;++l)(n[l].flags&TU)>0&&n[l].before(this,i[n[l].uid]);Mr=!1;var d;try{d=t.apply(this,arguments)}catch(p){u=!0;for(var l=0;l<r;++l)if(Tt[l].flags&g0)try{c=Tt[l].error(i[n[l].uid],p)||c}catch(m){throw CU=!0,m}if(!c)throw process.removeListener("uncaughtException",pg),process._originalNextTick(function(){process.addListener("uncaughtException",pg)}),p}finally{if(!u||c){for(Mr=!0,l=0;l<r;++l)(n[l].flags&IU)>0&&n[l].after(this,i[n[l].uid]);Mr=!1}Tt=Ul.pop()}return d}},process.addListener("uncaughtException",pg));var h0,fg,CU;function ike(e,t,n){Mr=!0;for(var r=0;r<n;++r){var i=t[r];i.create&&i.create(i.data)}return Mr=!1,function(){Ul.push(Tt),Tt=RU(t,Tt);var o=e.apply(this,arguments);return Tt=Ul.pop(),o}}function oke(e){var t=Tt.length;if(t===0)return e;for(var n=Tt.slice(),r=0;r<t;++r)if(n[r].flags>0)return PU(e,n,t);return ike(e,n,t)}function Ta(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=SU),typeof e.before=="function"&&(this.before=e.before,this.flags|=TU),typeof e.after=="function"&&(this.after=e.after,this.flags|=IU),typeof e.error=="function"&&(this.error=e.error,this.flags|=g0),this.uid=++rke,this.data=t===void 0?null:t}Ta.prototype.create=void 0;Ta.prototype.before=void 0;Ta.prototype.after=void 0;Ta.prototype.error=void 0;Ta.prototype.data=void 0;Ta.prototype.uid=0;Ta.prototype.flags=0;function wne(e,t){if(typeof e!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof Ta?e:new Ta(e,t)}function ske(e,t){var n;e instanceof Ta?n=e:n=wne(e,t);for(var r=!1,i=0;i<Tt.length;i++)if(n===Tt[i]){r=!0;break}return r||Tt.push(n),n}function ake(e){for(var t=0;t<Tt.length;t++)if(e===Tt[t]){Tt.splice(t,1);break}}process.createAsyncListener=wne;process.addAsyncListener=ske;process.removeAsyncListener=ake;Ene.exports=oke});var Cne=_((vrt,_ne)=>{"use strict";_ne.exports=(e,t)=>class extends e{constructor(r){var i,o;super(a);var s=this;try{r.apply(i,o)}catch(u){o[1](u)}return s;function a(u,c){i=this,o=[l,d];function l(p){return t(s,!1),u(p)}function d(p){return t(s,!1),c(p)}}}}});var Dne=_(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Pne=JI(),y0=xne(),Ni=Pne.wrap,ql=Pne.massWrap,tn=bne(),cke=require("util"),uke=y0.gte(process.version,"6.0.0"),kU=y0.gte(process.version,"7.0.0"),lke=y0.gte(process.version,"8.0.0"),dke=y0.gte(process.version,"11.0.0"),Ia=require("net");kU&&!Ia._normalizeArgs?Ia._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],n={};typeof t=="object"&&t!==null?n=t:gke(t)?n.path=t:(n.port=t,e.length>1&&typeof e[1]=="string"&&(n.host=e[1]));var r=e[e.length-1];return typeof r!="function"?[n,null]:[n,r]}:!kU&&!Ia._normalizeConnectArgs&&(Ia._normalizeConnectArgs=function(e){var t={};function n(i){return(i=Number(i))>=0?i:!1}typeof e[0]=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&n(e[0])===!1?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var r=e[e.length-1];return typeof r=="function"?[t,r]:[t]});"_setUpListenHandle"in Ia.Server.prototype?Ni(Ia.Server.prototype,"_setUpListenHandle",Sne):Ni(Ia.Server.prototype,"_listen2",Sne);function Sne(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=tn(t._handle.onread))});try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=tn(this._handle.onconnection))}}}function Rne(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=tn(t._originalOnread)}}Ni(Ia.Socket.prototype,"connect",function(e){return function(){var t;lke&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=kU?Ia._normalizeArgs(arguments):Ia._normalizeConnectArgs(arguments),t[1]&&(t[1]=tn(t[1]));var n=e.apply(this,t);return Rne(this),n}});var pke=require("http");Ni(pke.Agent.prototype,"addRequest",function(e){return function(t){var n=t.onSocket;return t.onSocket=tn(function(r){return Rne(r),n.apply(this,arguments)}),e.apply(this,arguments)}});var AU=require("child_process");function Tne(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=tn(t._handle.onread),Ni(t._handle,"close",x0))}),e._handle&&(e._handle.onexit=tn(e._handle.onexit))}AU.ChildProcess?Ni(AU.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return Tne(this),t}}):ql(AU,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return Tne(t),t}});process._fatalException||(process._originalNextTick=process.nextTick);var LU=[];process._nextDomainTick&&LU.push("_nextDomainTick");process._tickDomainCallback&&LU.push("_tickDomainCallback");ql(process,LU,Pa);Ni(process,"nextTick",x0);var FU=["setTimeout","setInterval"];global.setImmediate&&FU.push("setImmediate");var Ane=require("timers"),fke=global.setTimeout===Ane.setTimeout;ql(Ane,FU,x0);fke&&ql(global,FU,x0);var OU=require("dns");ql(OU,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Pa);OU.resolveNaptr&&Ni(OU,"resolveNaptr",Pa);var nf=require("fs");ql(nf,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Pa);nf.lchown&&Ni(nf,"lchown",Pa);nf.lchmod&&Ni(nf,"lchmod",Pa);nf.ftruncate&&Ni(nf,"ftruncate",Pa);var Kw;try{Kw=require("zlib")}catch{}Kw&&Kw.Deflate&&Kw.Deflate.prototype&&(tf=Object.getPrototypeOf(Kw.Deflate.prototype),tf._transform?Ni(tf,"_transform",Pa):tf.write&&tf.flush&&tf.end&&ql(tf,["write","flush","end"],Pa));var tf,NU;try{NU=require("crypto")}catch{}NU&&(DU=["pbkdf2","randomBytes"],dke||DU.push("pseudoRandomBytes"),ql(NU,DU,Pa));var DU,v0=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";v0&&(Ine=process.addAsyncListener({create:function(){v0=!1}}),global.Promise.resolve(!0).then(function(){v0=!1}),process.removeAsyncListener(Ine));var Ine;v0&&mke();function mke(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var a,u,c=new e(l);c.__proto__=t.prototype;try{s.apply(a,u)}catch(d){u[1](d)}return c;function l(d,p){a=this,u=[f,m];function f(h){return r(c,!1),d(h)}function m(h){return r(c,!1),p(h)}}}if(cke.inherits(t,e),Ni(e.prototype,"then",o),e.prototype.chain&&Ni(e.prototype,"chain",o),uke)global.Promise=Cne()(e,r);else{var n=["all","race","reject","resolve","accept","defer"];n.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s])}),global.Promise=t}function r(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=tn(i))}function i(s,a,u,c){var l;try{return l=a.call(s,u),{returnVal:l,error:!1}}catch(d){return{errorVal:d,error:!0}}finally{l instanceof e?c.__asl_wrapper=function(){var p=l.__asl_wrapper||i;return p.apply(this,arguments)}:r(c,!0)}}function o(s){return function(){var u=this,c=s.apply(u,Array.prototype.map.call(arguments,l));return c.__asl_wrapper=function(p,f,m,h){return u.__asl_wrapper?(u.__asl_wrapper(p,function(){},null,c),c.__asl_wrapper(p,f,m,h)):i(p,f,m,h)},c;function l(d){return typeof d!="function"?d:tn(function(p){var f=(u.__asl_wrapper||i)(this,d,p,c);if(f.error)throw f.errorVal;return f.returnVal})}}}}function Pa(e){var t=function(){var n,r=arguments.length-1;if(typeof arguments[r]=="function"){n=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)n[i]=arguments[i];n[r]=tn(arguments[r])}return e.apply(this,n||arguments)};switch(e.length){case 1:return function(n){return arguments.length!==1?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n))};case 2:return function(n,r){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=tn(r)),e.call(this,n,r))};case 3:return function(n,r,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=tn(i)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return arguments.length!==4?t.apply(this,arguments):(typeof o=="function"&&(o=tn(o)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=tn(s)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,a){return arguments.length!==6?t.apply(this,arguments):(typeof a=="function"&&(a=tn(a)),e.call(this,n,r,i,o,s,a))};default:return t}}function x0(e){var t=function(){var n;if(typeof arguments[0]=="function"){n=Array(arguments.length),n[0]=tn(arguments[0]);for(var r=1;r<arguments.length;r++)n[r]=arguments[r]}return e.apply(this,n||arguments)};switch(e.length){case 1:return function(n){return arguments.length!==1?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n))};case 2:return function(n,r){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n,r))};case 3:return function(n,r,i){return arguments.length!==3?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return arguments.length!==4?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return arguments.length!==5?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,a){return arguments.length!==6?t.apply(this,arguments):(typeof n=="function"&&(n=tn(n)),e.call(this,n,r,i,o,s,a))};default:return t}}function hke(e){return(e=Number(e))>=0?e:!1}function gke(e){return typeof e=="string"&&hke(e)===!1}});var Fne=_((wrt,Lne)=>{"use strict";var tu=require("assert"),vke=t0(),Xw="cls@contexts",MU="error@context";process.addAsyncListener||Dne();function Bs(e){this.name=e,this.active=null,this._set=[],this.id=null}Bs.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t};Bs.prototype.get=function(e){if(this.active)return this.active[e]};Bs.prototype.createContext=function(){return Object.create(this.active)};Bs.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(n){throw n&&(n[MU]=t),n}finally{this.exit(t)}};Bs.prototype.runAndReturn=function(e){var t;return this.run(function(n){t=e(n)}),t};Bs.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(r){throw r&&(r[MU]=t),r}finally{n.exit(t)}}};Bs.prototype.enter=function(e){tu.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e};Bs.prototype.exit=function(e){if(tu.ok(e,"context must be provided for exiting"),this.active===e){tu.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);tu.ok(t>=0,"context not currently entered; can't exit"),tu.ok(t,"can't remove top context"),this._set.splice(t,1)};Bs.prototype.bindEmitter=function(e){tu.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;function r(o){o&&(o[Xw]||(o[Xw]=Object.create(null)),o[Xw][n]={namespace:t,context:t.active})}function i(o){if(!(o&&o[Xw]))return o;var s=o,a=o[Xw];return Object.keys(a).forEach(function(u){var c=a[u];s=c.namespace.bind(s,c.context)}),s}vke(e,r,i)};Bs.prototype.fromException=function(e){return e[MU]};function kne(e){return process.namespaces[e]}function yke(e){tu.ok(e,"namespace must be given a name!");var t=new Bs(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(n,r){r&&t.enter(r)},after:function(n,r){r&&t.exit(r)},error:function(n){n&&t.exit(n)}}),process.namespaces[e]=t,t}function One(e){var t=kne(e);tu.ok(t,"can't delete nonexistent namespace!"),tu.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function Nne(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){One(e)}),process.namespaces=Object.create(null)}process.namespaces||Nne();Lne.exports={getNamespace:kne,createNamespace:yke,destroyNamespace:One,reset:Nne}});var jl=_(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.CorrelationContextManager=void 0;var mg=Xt(),xke=UI(),rf=qI(),UU=lM(),Mne=RM(),w0=pr(),wke=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t},e.generateContextObject=function(t,n,r,i,o,s){return n=n||t,this.enabled?{operation:{name:r,id:t,parentId:n,traceparent:o,tracestate:s},customProperties:new Eke(i)}:null},e.spanToContextObject=function(t,n,r){var i=new rf;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=rf.formatOpenTelemetryTraceFlags(t.traceFlags)||rf.DEFAULT_TRACE_FLAG,i.parentId=n,e.generateContextObject(i.traceId,i.parentId,r,null,i)},e.runWithContext=function(t,n){var r;if(e.enabled)try{return e.session.bind(n,(r={},r[e.CONTEXT_NAME]=t,r))()}catch(i){mg.warn("Error binding to session context",w0.dumpObj(i))}return n()},e.wrapEmitter=function(t){if(e.enabled)try{e.session.bindEmitter(t)}catch(n){mg.warn("Error binding to session context",w0.dumpObj(n))}},e.wrapCallback=function(t,n){var r;if(e.enabled)try{return e.session.bind(t,n?(r={},r[e.CONTEXT_NAME]=n,r):void 0)}catch(i){mg.warn("Error binding to session context",w0.dumpObj(i))}return t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(e.forceClsHooked===!0||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=nne():this.cls=Fne()),e.session=this.cls.createNamespace("AI-CLS-Session"),xke.registerContextPreservation(function(n){try{return e.session.bind(n)}catch(r){mg.warn("Error binding to session context",w0.dumpObj(r))}})),this.enabled=!0}},e.startOperation=function(t,n){var r=t&&t.traceContext||null,i=t&&t.spanContext?t:null,o=t&&t.traceId?t:null,s=t&&t.headers;if(i)return this.spanToContextObject(i.spanContext(),i.parentSpanId,i.name);if(o)return this.spanToContextObject(o,"|"+o.traceId+"."+o.spanId+".",typeof n=="string"?n:"");var a=typeof n=="string"?n:"";if(r){var u=null,c=null;if(a=r.attributes.OperationName||a,n){var l=n;l.headers&&(l.headers.traceparent?u=new rf(l.headers.traceparent):l.headers["request-id"]&&(u=new rf(null,l.headers["request-id"])),l.headers.tracestate&&(c=new UU(l.headers.tracestate)))}u||(u=new rf(r.traceparent)),c||(c=new UU(r.tracestate));var d=void 0;if(typeof n=="object"){var p=new Mne(n);d=p.getCorrelationContextHeader(),a=p.getOperationName({})}var f=e.generateContextObject(u.traceId,u.parentId,a,d,u,c);return f}if(s){var u=new rf(s.traceparent?s.traceparent.toString():null),c=new UU(s.tracestate?s.tracestate.toString():null),p=new Mne(t),f=e.generateContextObject(u.traceId,u.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),u,c);return f}return mg.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2},e.canUseClsHooked=function(){var t=process.versions.node.split("."),n=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,r=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(n&&r)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();E0.CorrelationContextManager=wke;var Eke=function(){function e(t){this.props=[],this.addHeaderData(t)}return e.prototype.addHeaderData=function(t){var n=t?t.split(", "):[];this.props=n.map(function(r){var i=r.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value}).join(", ")},e.prototype.getProperty=function(t){for(var n=0;n<this.props.length;++n){var r=this.props[n];if(r.key===t)return r.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n)){mg.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);return}for(var r=0;r<this.props.length;++r){var i=this.props[r];if(i.key===t){i.value=n;return}}this.props.push({key:t,value:n})},e.bannedCharacters=/[,=]/,e}()});var ln=_(ae=>{"use strict";var Vs;Object.defineProperty(ae,"__esModule",{value:!0});ae.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=ae.WEB_INSTRUMENTATION_DEFAULT_SOURCE=ae.TIME_SINCE_ENQUEUED=ae.ENQUEUED_TIME=ae.MessageBusDestination=ae.MicrosoftEventHub=ae.AzNamespace=ae.StatsbeatNetworkCategory=ae.StatsbeatFeatureType=ae.StatsbeatInstrumentation=ae.StatsbeatFeature=ae.StatsbeatCounter=ae.StatsbeatAttach=ae.StatsbeatResourceProvider=ae.StatsbeatTelemetryName=ae.HeartBeatMetricName=ae.DependencyTypeName=ae.TelemetryTypeStringToQuickPulseDocumentType=ae.TelemetryTypeStringToQuickPulseType=ae.QuickPulseType=ae.QuickPulseDocumentType=ae.PerformanceToQuickPulseCounter=ae.MetricId=ae.PerformanceCounter=ae.QuickPulseCounter=ae.DEFAULT_LIVEMETRICS_HOST=ae.DEFAULT_LIVEMETRICS_ENDPOINT=ae.DEFAULT_BREEZE_ENDPOINT=ae.APPLICATION_INSIGHTS_SDK_VERSION=void 0;ae.APPLICATION_INSIGHTS_SDK_VERSION="2.5.0";ae.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";ae.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";ae.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Ur;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Ur=ae.QuickPulseCounter||(ae.QuickPulseCounter={}));var b0;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(b0=ae.PerformanceCounter||(ae.PerformanceCounter={}));var bke;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"})(bke=ae.MetricId||(ae.MetricId={}));ae.PerformanceToQuickPulseCounter=(Vs={},Vs[b0.PROCESSOR_TIME]=Ur.PROCESSOR_TIME,Vs[b0.REQUEST_RATE]=Ur.REQUEST_RATE,Vs[b0.REQUEST_DURATION]=Ur.REQUEST_DURATION,Vs[Ur.COMMITTED_BYTES]=Ur.COMMITTED_BYTES,Vs[Ur.REQUEST_FAILURE_RATE]=Ur.REQUEST_FAILURE_RATE,Vs[Ur.DEPENDENCY_RATE]=Ur.DEPENDENCY_RATE,Vs[Ur.DEPENDENCY_FAILURE_RATE]=Ur.DEPENDENCY_FAILURE_RATE,Vs[Ur.DEPENDENCY_DURATION]=Ur.DEPENDENCY_DURATION,Vs[Ur.EXCEPTION_RATE]=Ur.EXCEPTION_RATE,Vs);ae.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};ae.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};ae.TelemetryTypeStringToQuickPulseType={EventData:ae.QuickPulseType.Event,ExceptionData:ae.QuickPulseType.Exception,MessageData:ae.QuickPulseType.Trace,MetricData:ae.QuickPulseType.Metric,RequestData:ae.QuickPulseType.Request,RemoteDependencyData:ae.QuickPulseType.Dependency,AvailabilityData:ae.QuickPulseType.Availability,PageViewData:ae.QuickPulseType.PageView};ae.TelemetryTypeStringToQuickPulseDocumentType={EventData:ae.QuickPulseDocumentType.Event,ExceptionData:ae.QuickPulseDocumentType.Exception,MessageData:ae.QuickPulseDocumentType.Trace,MetricData:ae.QuickPulseDocumentType.Metric,RequestData:ae.QuickPulseDocumentType.Request,RemoteDependencyData:ae.QuickPulseDocumentType.Dependency,AvailabilityData:ae.QuickPulseDocumentType.Availability,PageViewData:ae.QuickPulseDocumentType.PageView};ae.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};ae.HeartBeatMetricName="HeartBeat";ae.StatsbeatTelemetryName="Statsbeat";ae.StatsbeatResourceProvider={appsvc:"appsvc",functions:"functions",vm:"vm",unknown:"unknown"};ae.StatsbeatAttach={codeless:"codeless",sdk:"sdk"};ae.StatsbeatCounter={REQUEST_SUCCESS:"Request Success Count",REQUEST_FAILURE:"Request Failure Count",REQUEST_DURATION:"Request Duration",RETRY_COUNT:"Retry Count",THROTTLE_COUNT:"Throttle Count",EXCEPTION_COUNT:"Exception Count",ATTACH:"Attach",FEATURE:"Feature"};var _ke;(function(e){e[e.NONE=0]="NONE",e[e.DISK_RETRY=1]="DISK_RETRY",e[e.AAD_HANDLING=2]="AAD_HANDLING",e[e.WEB_SNIPPET=4]="WEB_SNIPPET"})(_ke=ae.StatsbeatFeature||(ae.StatsbeatFeature={}));var Cke;(function(e){e[e.NONE=0]="NONE",e[e.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",e[e.MONGODB=2]="MONGODB",e[e.MYSQL=4]="MYSQL",e[e.REDIS=8]="REDIS",e[e.POSTGRES=16]="POSTGRES",e[e.BUNYAN=32]="BUNYAN",e[e.WINSTON=64]="WINSTON",e[e.CONSOLE=128]="CONSOLE"})(Cke=ae.StatsbeatInstrumentation||(ae.StatsbeatInstrumentation={}));var Ske;(function(e){e[e.Feature=0]="Feature",e[e.Instrumentation=1]="Instrumentation"})(Ske=ae.StatsbeatFeatureType||(ae.StatsbeatFeatureType={}));var Tke;(function(e){e[e.Breeze=0]="Breeze",e[e.Quickpulse=1]="Quickpulse"})(Tke=ae.StatsbeatNetworkCategory||(ae.StatsbeatNetworkCategory={}));ae.AzNamespace="az.namespace";ae.MicrosoftEventHub="Microsoft.EventHub";ae.MessageBusDestination="message_bus.destination";ae.ENQUEUED_TIME="enqueuedTime";ae.TIME_SINCE_ENQUEUED="timeSinceEnqueued";ae.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";ae.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var qne=_(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.dispose=hg.enable=void 0;var Une=Fr(),Ike=ln(),_0=cn(),Hl=[],qU=function(e){var t=e.data.message;Hl.forEach(function(n){t instanceof Error?n.trackException({exception:t}):(t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),n.trackTrace({message:t,severity:e.data.stderr?Une.SeverityLevel.Warning:Une.SeverityLevel.Information}))})};function Pke(e,t){if(e){var n=Hl.find(function(r){return r==t});if(n)return;Hl.length===0&&_0.channel.subscribe("console",qU,_0.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(Ike.StatsbeatInstrumentation.CONSOLE)}),Hl.push(t)}else Hl=Hl.filter(function(r){return r!=t}),Hl.length===0&&_0.channel.unsubscribe("console",qU)}hg.enable=Pke;function Rke(){_0.channel.unsubscribe("console",qU),Hl=[]}hg.dispose=Rke});var jne=_(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.dispose=vg.enable=void 0;var gg=Fr(),Ake=ln(),C0=cn(),$l=[],Dke={10:gg.SeverityLevel.Verbose,20:gg.SeverityLevel.Verbose,30:gg.SeverityLevel.Information,40:gg.SeverityLevel.Warning,50:gg.SeverityLevel.Error,60:gg.SeverityLevel.Critical},jU=function(e){var t=e.data.result;$l.forEach(function(n){try{var r=JSON.parse(t);if(r.err){var i=new Error(r.err.message);i.name=r.err.name,i.stack=r.err.stack,n.trackException({exception:i});return}}catch{}var o=Dke[e.data.level];n.trackTrace({message:t,severity:o})})};function kke(e,t){if(e){var n=$l.find(function(r){return r==t});if(n)return;$l.length===0&&C0.channel.subscribe("bunyan",jU,C0.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(Ake.StatsbeatInstrumentation.BUNYAN)}),$l.push(t)}else $l=$l.filter(function(r){return r!=t}),$l.length===0&&C0.channel.unsubscribe("bunyan",jU)}vg.enable=kke;function Oke(){C0.channel.unsubscribe("bunyan",jU),$l=[]}vg.dispose=Oke});var Hne=_(yg=>{"use strict";Object.defineProperty(yg,"__esModule",{value:!0});yg.dispose=yg.enable=void 0;var Nke=ln(),hr=Fr(),S0=cn(),Bl=[],Lke={syslog:function(e){var t={emerg:hr.SeverityLevel.Critical,alert:hr.SeverityLevel.Critical,crit:hr.SeverityLevel.Critical,error:hr.SeverityLevel.Error,warning:hr.SeverityLevel.Warning,notice:hr.SeverityLevel.Information,info:hr.SeverityLevel.Information,debug:hr.SeverityLevel.Verbose};return t[e]===void 0?hr.SeverityLevel.Information:t[e]},npm:function(e){var t={error:hr.SeverityLevel.Error,warn:hr.SeverityLevel.Warning,info:hr.SeverityLevel.Information,verbose:hr.SeverityLevel.Verbose,debug:hr.SeverityLevel.Verbose,silly:hr.SeverityLevel.Verbose};return t[e]===void 0?hr.SeverityLevel.Information:t[e]},unknown:function(e){return hr.SeverityLevel.Information}},HU=function(e){var t=e.data.message;Bl.forEach(function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var r=Lke[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}})};function Fke(e,t){if(e){var n=Bl.find(function(r){return r==t});if(n)return;Bl.length===0&&S0.channel.subscribe("winston",HU,S0.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(Nke.StatsbeatInstrumentation.WINSTON)}),Bl.push(t)}else Bl=Bl.filter(function(r){return r!=t}),Bl.length===0&&S0.channel.unsubscribe("winston",HU)}yg.enable=Fke;function Mke(){S0.channel.unsubscribe("winston",HU),Bl=[]}yg.dispose=Mke});var Bne=_((Trt,$ne)=>{"use strict";var Uke=UI(),qke=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(t,n){Uke.IsInitialized&&(qne().enable(t&&n,this._client),jne().enable(t,this._client),Hne().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();$ne.exports=qke});var Wne=_((Irt,Vne)=>{"use strict";var jke=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||parseInt(n[0])===13&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var r=function(i,o,s){s===void 0&&(s=new Error(e._FALLBACK_ERROR_MESSAGE));var a={exception:s};a.contextObjects={},a.contextObjects.Error=s,n._client.trackException(a),n._client.flush({isAppCrashing:!0}),i&&o&&process.listeners(o).length===1&&(console.error(s),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();Vne.exports=jke});var I0=_((Prt,Gne)=>{"use strict";var T0=require("os"),Qo=ln(),Hke=function(){function e(t,n,r){n===void 0&&(n=6e4),r===void 0&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=T0.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval(function(){return r.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if(typeof t=="string")r=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")r=t;else return;e._intervalRequestExecutionTime+=r,n===!1&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if(typeof t=="string")r=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")r=t;else return;e._intervalDependencyExecutionTime+=r,n===!1&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var t=T0.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var n=0,r=0,i=0,o=0,s=0,a=0;t&&a<t.length;a++){var u=t[a],c=this._lastCpus[a],l="% cpu("+a+") ",d=u.model,p=u.speed,f=u.times,m=c.times,h=f.user-m.user||0;n+=h;var v=f.sys-m.sys||0;r+=v;var g=f.nice-m.nice||0;i+=g;var y=f.idle-m.idle||0;o+=y;var x=f.irq-m.irq||0;s+=x}var w=void 0;if(typeof process.cpuUsage=="function"){var b=process.cpuUsage(),S=process.hrtime(),R=b.user-this._lastAppCpuUsage.user+(b.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var P=(S[0]-this._lastHrtime[0])*1e6+(S[1]-this._lastHrtime[1])/1e3||0;w=100*R/(P*t.length)}this._lastAppCpuUsage=b,this._lastHrtime=S}var E=n+r+i+o+s||1;this._client.trackMetric({name:Qo.PerformanceCounter.PROCESSOR_TIME,value:(E-o)/E*100}),this._client.trackMetric({name:Qo.PerformanceCounter.PROCESS_TIME,value:w||n/E*100})}this._lastCpus=t},e.prototype._trackMemory=function(){var t=T0.freemem(),n=process.memoryUsage().rss,r=T0.totalmem()-t;this._client.trackMetric({name:Qo.PerformanceCounter.PRIVATE_BYTES,value:n}),this._client.trackMetric({name:Qo.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Qo.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,i=n.totalFailedRequestCount-t.totalFailedRequestCount||0,o=n.time-t.time,s=o/1e3,a=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,o>0){var u=r/s,c=i/s;this._client.trackMetric({name:Qo.PerformanceCounter.REQUEST_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:Qo.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Qo.QuickPulseCounter.REQUEST_FAILURE_RATE,value:c})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,i=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,o=n.time-t.time,s=o/1e3,a=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,o>0){var u=r/s,c=i/s;this._client.trackMetric({name:Qo.QuickPulseCounter.DEPENDENCY_RATE,value:u}),this._client.trackMetric({name:Qo.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:c}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:Qo.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,i=n.time-t.time,o=i/1e3;if(i>0){var s=r/o;this._client.trackMetric({name:Qo.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();Gne.exports=Hke});var zne=_(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});P0.AggregatedMetricCounter=void 0;var $ke=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return e}();P0.AggregatedMetricCounter=$ke});var Yne=_(R0=>{"use strict";Object.defineProperty(R0,"__esModule",{value:!0});R0.PreaggregatedMetricPropertyNames=void 0;R0.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var BU=_(($U,Kne)=>{"use strict";var D0=$U&&$U.__assign||function(){return D0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},D0.apply(this,arguments)},A0=ln(),Bke=zne(),Vke=Yne(),Wke=function(){function e(t,n){n===void 0&&(n=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=n}return e.prototype.enable=function(t,n){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._collectionInterval=n||this._collectionInterval,this._handle=setInterval(function(){return r.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){if(e.isEnabled()){var n=e._getAggregatedCounter(t,this._exceptionCountersCollection);n.totalCount++}},e.countTrace=function(t){if(e.isEnabled()){var n=e._getAggregatedCounter(t,this._traceCountersCollection);n.totalCount++}},e.countRequest=function(t,n){if(e.isEnabled()){var r,i=e._getAggregatedCounter(n,this._requestCountersCollection);if(typeof t=="string")r=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")r=t;else return;i.intervalExecutionTime+=r,i.totalCount++}},e.countDependency=function(t,n){if(e.isEnabled()){var r=e._getAggregatedCounter(n,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;r.intervalExecutionTime+=i,r.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(t,n){for(var r=!1,i=0;i<n.length;i++){if(t===n[i].dimensions)return n[i];if(Object.keys(t).length===Object.keys(n[i].dimensions).length){for(var o in t)if(t[o]!=n[i].dimensions[o]){r=!0;break}if(!r)return n[i];r=!1}}var s=new Bke.AggregatedMetricCounter(t);return n.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var n=e._requestCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime,o=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/r||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,i>0&&r>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:n.dimensions,value:o,count:r,aggregationInterval:i,metricType:A0.MetricId.REQUESTS_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var n=e._dependencyCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime,o=(n.intervalExecutionTime-n.lastIntervalExecutionTime)/r||0;n.lastIntervalExecutionTime=n.intervalExecutionTime,i>0&&r>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:n.dimensions,value:o,count:r,aggregationInterval:i,metricType:A0.MetricId.DEPENDENCIES_DURATION}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var n=e._exceptionCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime;i>0&&r>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:n.dimensions,value:r,count:r,aggregationInterval:i,metricType:A0.MetricId.EXCEPTIONS_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var n=e._traceCountersCollection[t];n.time=+new Date;var r=n.totalCount-n.lastTotalCount||0,i=n.time-n.lastTime;i>0&&r>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:n.dimensions,value:r,count:r,aggregationInterval:i,metricType:A0.MetricId.TRACES_COUNT}),n.lastTotalCount=n.totalCount,n.lastTime=n.time}},e.prototype._trackPreAggregatedMetric=function(t){var n={};for(var r in t.dimensions)n[Vke.PreaggregatedMetricPropertyNames[r]]=t.dimensions[r];n=D0(D0({},n),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:n,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();Kne.exports=Wke});var Qne=_((WU,Xne)=>{"use strict";var Gke=WU&&WU.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jo=require("url"),VU=Fr(),zke=pr(),Yke=Qh(),Kke=TM(),Xke=Kp(),Qke=function(e){Gke(t,e);function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return t.prototype.onError=function(n){this._setStatus(void 0,n)},t.prototype.onResponse=function(n){this._setStatus(n.statusCode,void 0),this.correlationId=zke.getCorrelationContextTarget(n,Yke.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(n,r){var i=this.method.toUpperCase(),o=VU.RemoteDependencyDataConstants.TYPE_HTTP,s="";try{var a=new Jo.URL(this.url);a.search=void 0,a.hash=void 0,i+=" "+a.pathname,s=a.hostname,a.port&&(s+=":"+a.port)}catch{}this.correlationId?(o=VU.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==Xke.correlationIdPrefix&&(s+=" | "+this.correlationId)):o=VU.RemoteDependencyDataConstants.TYPE_HTTP;var u={id:r,name:i,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(n&&n.time?u.time=n.time:this.startTime&&(u.time=new Date(this.startTime)),n){for(var c in n)u[c]||(u[c]=n[c]);if(n.properties)for(var c in n.properties)u.properties[c]=n.properties[c]}return u},t._getUrlFromRequestOptions=function(n,r){if(typeof n=="string")if(n.indexOf("http://")===0||n.indexOf("https://")===0)try{n=new Jo.URL(n)}catch{}else try{var i=new Jo.URL("http://"+n);i.port==="443"?n=new Jo.URL("https://"+n):n=new Jo.URL("http://"+n)}catch{}else{if(n&&typeof Jo.URL=="function"&&n instanceof Jo.URL)return Jo.format(n);var o=n;n={},o&&Object.keys(o).forEach(function(u){n[u]=o[u]})}if(n.path&&n.host)try{var s=new Jo.URL(n.path,"http://"+n.host+n.path);n.pathname=s.pathname,n.search=s.search}catch{}if(n.path&&n.hostname&&!n.host)try{var s=new Jo.URL(n.path,"http://"+n.hostname+n.path);n.pathname=s.pathname,n.search=s.search}catch{}if(n.host&&n.port)try{var a=new Jo.URL("http://"+n.host);!a.port&&n.port&&(n.hostname=n.host,delete n.host)}catch{}return n.protocol=n.protocol||r.agent&&r.agent.protocol||r.protocol||void 0,n.hostname=n.hostname||"localhost",Jo.format(n)},t}(Kke);Xne.exports=Qke});var Jne=_(xg=>{"use strict";var k0=xg&&xg.__assign||function(){return k0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},k0.apply(this,arguments)};Object.defineProperty(xg,"__esModule",{value:!0});xg.parseEventHubSpan=void 0;var GU=(gt(),qi(Fp)),Jke=(Zr(),qi(mJ)),Zke=(js(),qi(f1)),Qw=ln(),eOe=function(e){var t=0,n=0,r=Jke.hrTimeToMilliseconds(e.startTime);return e.links.forEach(function(i){var o=i.attributes,s=o==null?void 0:o[Qw.ENQUEUED_TIME];s&&(t+=1,n+=r-(parseFloat(s.toString())||0))}),Math.max(n/(t||1),0)},tOe=function(e,t){var n,r=e.attributes[Qw.AzNamespace],i=(e.attributes[Zke.SemanticAttributes.NET_PEER_NAME]||e.attributes["peer.address"]||"unknown").replace(/\/$/g,""),o=e.attributes[Qw.MessageBusDestination]||"unknown";switch(e.kind){case GU.SpanKind.CLIENT:t.dependencyTypeName=r,t.target=i+"/"+o;break;case GU.SpanKind.PRODUCER:t.dependencyTypeName=Qw.DependencyTypeName.QueueMessage+" | "+r,t.target=i+"/"+o;break;case GU.SpanKind.CONSUMER:t.source=i+"/"+o,t.measurements=k0(k0({},t.measurements),(n={},n[Qw.TIME_SINCE_ENQUEUED]=eOe(e),n));break;default:}};xg.parseEventHubSpan=tOe});var tre=_(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});O0.spanToTelemetryContract=void 0;var Zne=require("url"),Ws=(gt(),qi(Fp)),Ve=(js(),qi(f1)),nu=ln(),nOe=Jne(),rOe=pr();function iOe(e){for(var t={},n=0,r=Object.keys(e.attributes);n<r.length;n++){var i=r[n];i.startsWith("http.")||i.startsWith("rpc.")||i.startsWith("db.")||i.startsWith("peer.")||i.startsWith("net.")||(t[i]=e.attributes[i])}var o=e.links.map(function(s){return{operation_Id:s.context.traceId,id:s.context.spanId}});return o.length>0&&(t["_MS.links"]=rOe.stringify(o)),t}function oOe(e){return e===Ve.DbSystemValues.DB2||e===Ve.DbSystemValues.DERBY||e===Ve.DbSystemValues.MARIADB||e===Ve.DbSystemValues.MSSQL||e===Ve.DbSystemValues.ORACLE||e===Ve.DbSystemValues.SQLITE||e===Ve.DbSystemValues.OTHER_SQL||e===Ve.DbSystemValues.HSQLDB||e===Ve.DbSystemValues.H2}function ere(e){var t=e.attributes[Ve.SemanticAttributes.HTTP_METHOD];if(t){var n=e.attributes[Ve.SemanticAttributes.HTTP_URL];if(n)return String(n);var r=e.attributes[Ve.SemanticAttributes.HTTP_SCHEME],i=e.attributes[Ve.SemanticAttributes.HTTP_TARGET];if(r&&i){var o=e.attributes[Ve.SemanticAttributes.HTTP_HOST];if(o)return r+"://"+o+i;var s=e.attributes[Ve.SemanticAttributes.NET_PEER_PORT];if(s){var a=e.attributes[Ve.SemanticAttributes.NET_PEER_NAME];if(a)return r+"://"+a+":"+s+i;var u=e.attributes[Ve.SemanticAttributes.NET_PEER_IP];if(u)return r+"://"+u+":"+s+i}}}return""}function zU(e){var t=e.attributes[Ve.SemanticAttributes.PEER_SERVICE],n=e.attributes[Ve.SemanticAttributes.HTTP_HOST],r=e.attributes[Ve.SemanticAttributes.HTTP_URL],i=e.attributes[Ve.SemanticAttributes.NET_PEER_NAME],o=e.attributes[Ve.SemanticAttributes.NET_PEER_IP];return t?String(t):n?String(n):r?String(r):i?String(i):o?String(o):""}function sOe(e){var t={name:e.name,success:e.status.code!=Ws.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};e.kind===Ws.SpanKind.PRODUCER&&(t.dependencyTypeName=nu.DependencyTypeName.QueueMessage),e.kind===Ws.SpanKind.INTERNAL&&e.parentSpanId&&(t.dependencyTypeName=nu.DependencyTypeName.InProc);var n=e.attributes[Ve.SemanticAttributes.HTTP_METHOD],r=e.attributes[Ve.SemanticAttributes.DB_SYSTEM],i=e.attributes[Ve.SemanticAttributes.RPC_SYSTEM];if(n){t.dependencyTypeName=nu.DependencyTypeName.Http;var o=e.attributes[Ve.SemanticAttributes.HTTP_URL];if(o){var s="";try{var a=new Zne.URL(String(o));s=a.pathname}catch{}t.name=n+" "+s}t.data=ere(e);var u=e.attributes[Ve.SemanticAttributes.HTTP_STATUS_CODE];u&&(t.resultCode=String(u));var c=zU(e);if(c){try{var l=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),d=l.exec(c);if(d!=null){var p=d[1],f=d[3];(p=="https"&&f==":443"||p=="http"&&f==":80")&&(c=d[1]+d[2]+d[4])}}catch{}t.target=""+c}}else if(r){String(r)===Ve.DbSystemValues.MYSQL?t.dependencyTypeName="mysql":String(r)===Ve.DbSystemValues.POSTGRESQL?t.dependencyTypeName="postgresql":String(r)===Ve.DbSystemValues.MONGODB?t.dependencyTypeName="mongodb":String(r)===Ve.DbSystemValues.REDIS?t.dependencyTypeName="redis":oOe(String(r))?t.dependencyTypeName="SQL":t.dependencyTypeName=String(r);var m=e.attributes[Ve.SemanticAttributes.DB_STATEMENT],h=e.attributes[Ve.SemanticAttributes.DB_OPERATION];m?t.data=String(m):h&&(t.data=String(h));var c=zU(e),v=e.attributes[Ve.SemanticAttributes.DB_NAME];c?t.target=v?c+"|"+v:""+c:t.target=v?""+v:""+r}else if(i){t.dependencyTypeName=nu.DependencyTypeName.Grpc;var g=e.attributes[Ve.SemanticAttributes.RPC_GRPC_STATUS_CODE];g&&(t.resultCode=String(g));var c=zU(e);c?t.target=""+c:i&&(t.target=String(i))}return t}function aOe(e){var t={name:e.name,success:e.status.code!=Ws.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},n=e.attributes[Ve.SemanticAttributes.HTTP_METHOD],r=e.attributes[Ve.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(n){if(e.kind==Ws.SpanKind.SERVER){var i=e.attributes[Ve.SemanticAttributes.HTTP_ROUTE],o=e.attributes[Ve.SemanticAttributes.HTTP_URL];if(i)t.name=n+" "+i;else if(o)try{var s=new Zne.URL(String(o));t.name=n+" "+s.pathname}catch{}}t.url=ere(e);var a=e.attributes[Ve.SemanticAttributes.HTTP_STATUS_CODE];a&&(t.resultCode=String(a))}else r&&(t.resultCode=String(r));return t}function cOe(e){var t;switch(e.kind){case Ws.SpanKind.CLIENT:case Ws.SpanKind.PRODUCER:case Ws.SpanKind.INTERNAL:t=sOe(e);break;case Ws.SpanKind.SERVER:case Ws.SpanKind.CONSUMER:t=aOe(e);break}var n=e.spanContext?e.spanContext():e.context(),r=""+n.spanId,i=Math.round(e.duration[0]*1e3+e.duration[1]/1e6);return t.id=r,t.duration=i,t.properties=iOe(e),e.attributes[nu.AzNamespace]&&(e.kind===Ws.SpanKind.INTERNAL&&(t.dependencyTypeName=nu.DependencyTypeName.InProc+" | "+e.attributes[nu.AzNamespace]),e.attributes[nu.AzNamespace]===nu.MicrosoftEventHub&&nOe.parseEventHubSpan(e,t)),t}O0.spanToTelemetryContract=cOe});var rre=_(Wl=>{"use strict";var wg=Wl&&Wl.__assign||function(){return wg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},wg.apply(this,arguments)};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.AsyncScopeManager=Wl.OpenTelemetryScopeManagerWrapper=void 0;var Vl=jl(),uOe=require("events"),nre=function(){function e(){}return e.prototype.active=function(){var t=this,n=Vl.CorrelationContextManager.getCurrentContext();return wg(wg({},n),{getValue:function(r){return t._activeSymbol?r===t._activeSymbol?n:!1:(t._activeSymbol=r,n)},setValue:function(){}})},e.prototype.with=function(t,n){var r=t.parentSpanId,i=t.name,o=e._spanToContext(t,r,i);return Vl.CorrelationContextManager.runWithContext(o,n)()},e.prototype.bind=function(t){return typeof t=="function"?Vl.CorrelationContextManager.wrapCallback(t):(t instanceof uOe.EventEmitter&&Vl.CorrelationContextManager.wrapEmitter(t),t)},e.prototype.enable=function(){return Vl.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return Vl.CorrelationContextManager.disable(),this},e._spanToContext=function(t,n,r){var i=t.spanContext?t.spanContext():t.context(),o=wg(wg({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),s=n?"|"+i.traceId+"."+n+".":i.traceId,a=Vl.CorrelationContextManager.getCurrentContext();a&&(o.traceId=a.operation.id,n||(s=a.operation.parentId));var u=Vl.CorrelationContextManager.spanToContextObject(o,s,r);return u},e}();Wl.OpenTelemetryScopeManagerWrapper=nre;Wl.AsyncScopeManager=new nre});var ire=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.enable=Gl.subscriber=void 0;var Jw=(gt(),qi(Fp)),lOe=ln(),YU=cn(),dOe=tre(),pOe=rre(),of=[],fOe=function(e){try{var t=e.data,n=dOe.spanToTelemetryContract(t);pOe.AsyncScopeManager.with(t,function(){of.forEach(function(r){t.kind===Jw.SpanKind.SERVER||t.kind===Jw.SpanKind.CONSUMER?r.trackRequest(n):(t.kind===Jw.SpanKind.CLIENT||t.kind===Jw.SpanKind.INTERNAL||t.kind===Jw.SpanKind.PRODUCER)&&r.trackDependency(n)})})}catch{}};Gl.subscriber=fOe;function mOe(e,t){if(e){var n=of.find(function(r){return r==t});if(n)return;of.length===0&&YU.channel.subscribe("azure-coretracing",Gl.subscriber,YU.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(lOe.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),of.push(t)}else of=of.filter(function(r){return r!=t}),of.length===0&&YU.channel.unsubscribe("azure-coretracing",Gl.subscriber)}Gl.enable=mOe});var ore=_(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.enable=zl.subscriber=void 0;var hOe=ln(),KU=cn(),sf=[],gOe=function(e){e.data.event.commandName!=="ismaster"&&sf.forEach(function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})})};zl.subscriber=gOe;function vOe(e,t){if(e){var n=sf.find(function(r){return r==t});if(n)return;sf.length===0&&KU.channel.subscribe("mongodb",zl.subscriber,KU.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(hOe.StatsbeatInstrumentation.MONGODB)}),sf.push(t)}else sf=sf.filter(function(r){return r!=t}),sf.length===0&&KU.channel.unsubscribe("mongodb",zl.subscriber)}zl.enable=vOe});var sre=_(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.enable=Yl.subscriber=void 0;var yOe=ln(),XU=cn(),af=[],xOe=function(e){af.forEach(function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=n._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:a,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})})};Yl.subscriber=xOe;function wOe(e,t){if(e){var n=af.find(function(r){return r==t});if(n)return;af.length===0&&XU.channel.subscribe("mysql",Yl.subscriber,XU.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(yOe.StatsbeatInstrumentation.MYSQL)}),af.push(t)}else af=af.filter(function(r){return r!=t}),af.length===0&&XU.channel.unsubscribe("mysql",Yl.subscriber)}Yl.enable=wOe});var are=_(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.enable=Kl.subscriber=void 0;var EOe=ln(),QU=cn(),cf=[],bOe=function(e){cf.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})})};Kl.subscriber=bOe;function _Oe(e,t){if(e){var n=cf.find(function(r){return r==t});if(n)return;cf.length===0&&QU.channel.subscribe("redis",Kl.subscriber,QU.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(EOe.StatsbeatInstrumentation.REDIS)}),cf.push(t)}else cf=cf.filter(function(r){return r!=t}),cf.length===0&&QU.channel.unsubscribe("redis",Kl.subscriber)}Kl.enable=_Oe});var cre=_(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.enable=Xl.subscriber=void 0;var COe=ln(),JU=cn(),uf=[],SOe=function(e){uf.forEach(function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})})};Xl.subscriber=SOe;function TOe(e,t){if(e){var n=uf.find(function(r){return r==t});if(n)return;uf.length===0&&JU.channel.subscribe("postgres",Xl.subscriber,JU.trueFilter,function(r,i){var o=t.getStatsbeat();o&&o.addInstrumentation(COe.StatsbeatInstrumentation.POSTGRES)}),uf.push(t)}else uf=uf.filter(function(r){return r!=t}),uf.length===0&&JU.channel.unsubscribe("postgres",Xl.subscriber)}Xl.enable=TOe});var _g=_((eq,ure)=>{"use strict";var N0=eq&&eq.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Eg=require("http"),bg=require("https"),L0=Xt(),ZU=pr(),Ql=Qh(),IOe=Qne(),Zw=jl(),F0=qI(),POe=UI(),eE=Kp(),ROe=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),POe.IsInitialized&&(ire().enable(t,this._client),ore().enable(t,this._client),sre().enable(t,this._client),are().enable(t,this._client),cre().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=Eg.request,r=bg.request,i=function(o,s){try{var a=!s[e.disableCollectionRequestOption]&&!o[e.alreadyAutoCollectedFlag],u=null;if(s.headers&&(u=s.headers["User-Agent"]||s.headers["user-agent"],u&&u.toString().indexOf("azsdk-js")!==-1&&(a=!1)),o&&s&&a&&(Zw.CorrelationContextManager.wrapEmitter(o),t._isEnabled))if(o[e.alreadyAutoCollectedFlag]=!0,Zw.CorrelationContextManager.getCurrentContext())e.trackRequest(t._client,{options:s,request:o});else{var c=null;if(eE.w3cEnabled){var l=new F0;c=l.traceId}else{var d=eE.generateRequestId(null);c=eE.getRootId(d)}var p=Zw.CorrelationContextManager.generateContextObject(c);Zw.CorrelationContextManager.runWithContext(p,function(){e.trackRequest(t._client,{options:s,request:o})})}}catch(f){L0.warn("Failed to generate dependency telemetry.",ZU.dumpObj(f))}};Eg.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=n.call.apply(n,N0([Eg,o],s));return i(u,o),u},bg.request=function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=r.call.apply(r,N0([bg,o],s));return i(u,o),u},Eg.get=function(o){for(var s,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=(s=Eg.request).call.apply(s,N0([Eg,o],a));return c.end(),c},bg.get=function(o){for(var s,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=(s=bg.request).call.apply(s,N0([bg,o],a));return c.end(),c}},e.trackRequest=function(t,n){if(!n.options||!n.request||!t){L0.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t);return}var r=new IOe(n.options,n.request),i=Zw.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&F0.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(eE.w3cEnabled){var a=new F0;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(ZU.canIncludeCorrelationHeader(t,r.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var u=n.request.getHeader(Ql.requestContextHeader);try{ZU.safeIncludeCorrelationHeader(t,n.request,u)}catch(d){L0.warn("Request-Context header could not be set. Correlation of requests may be lost",d)}if(i&&i.operation)try{if(n.request.setHeader(Ql.requestIdHeader,o),t.config.ignoreLegacyHeaders||(n.request.setHeader(Ql.parentIdHeader,i.operation.id),n.request.setHeader(Ql.rootIdHeader,o)),s||i.operation.traceparent)n.request.setHeader(Ql.traceparentHeader,s||i.operation.traceparent.toString());else if(eE.w3cEnabled){var a=new F0().toString();n.request.setHeader(Ql.traceparentHeader,a)}if(i.operation.tracestate){var c=i.operation.tracestate.toString();c&&n.request.setHeader(Ql.traceStateHeader,c)}var l=i.customProperties.serializeToHeader();l&&n.request.setHeader(Ql.correlationContextHeader,l)}catch(d){L0.warn("Correlation headers could not be set. Correlation of requests may be lost.",d)}}n.request.on&&(n.request.on("response",function(d){if(!n.isProcessed){n.isProcessed=!0,r.onResponse(d);var p=r.getDependencyTelemetry(n,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=n.options,p.contextObjects["http.ClientRequest"]=n.request,p.contextObjects["http.ClientResponse"]=d,t.trackDependency(p)}}),n.request.on("error",function(d){if(!n.isProcessed){n.isProcessed=!0,r.onError(d);var p=r.getDependencyTelemetry(n,o);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=n.options,p.contextObjects["http.ClientRequest"]=n.request,p.contextObjects.Error=d,t.trackDependency(p)}}),n.request.on("abort",function(){if(!n.isProcessed){n.isProcessed=!0,r.onError(new Error("The request has been aborted and the network socket has closed."));var d=r.getDependencyTelemetry(n,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=n.options,d.contextObjects["http.ClientRequest"]=n.request,t.trackDependency(d)}}))},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();ure.exports=ROe});var tq=_(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});M0.AzureVirtualMachine=void 0;var lre=Xt(),AOe=pr(),DOe=_g(),kOe="http://169.254.169.254/metadata/instance/compute",OOe="api-version=2017-12-01",NOe="format=json",LOe="UNREACH",FOe=function(){function e(){}return e.getAzureComputeMetadata=function(t,n){var r,i=this,o={},s=kOe+"?"+OOe+"&"+NOe,a=(r={method:"GET"},r[DOe.disableCollectionRequestOption]=!0,r.headers={Metadata:"True"},r),u=AOe.makeRequest(t,s,a,function(c){if(c.statusCode===200){o.isVM=!0;var l="";c.on("data",function(d){l+=d}),c.on("end",function(){try{var d=JSON.parse(l);o.id=d.vmId||"",o.subscriptionId=d.subscriptionId||"",o.osType=d.osType||""}catch(p){lre.info(e.TAG,p)}n(o)})}else n(o)},!1,!1);u&&(setTimeout(function(){i._requestTimedOut=!0,u.abort()},e.HTTP_TIMEOUT),u.on("error",function(c){i._requestTimedOut&&c&&(c.name="telemetry timeout",c.message="telemetry request timed out"),c&&c.message&&c.message.indexOf(LOe)>-1?o.isVM=!1:lre.info(e.TAG,c),n(o)}),u.end())},e.HTTP_TIMEOUT=2500,e.TAG="AzureVirtualMachine",e}();M0.AzureVirtualMachine=FOe});var Cg=_((jrt,dre)=>{"use strict";var ru=require("os"),MOe=require("fs"),UOe=require("path"),qOe=Fr(),jOe=ln(),HOe=Xt(),$Oe=function(){function e(t){this.keys=new qOe.ContextTagKeys,this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||UOe.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(MOe.readFileSync(t,"utf8"));n&&typeof n.version=="string"&&(e.appVersion[t]=n.version)}catch(r){HOe.info("unable to read app version: ",r)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=ru&&ru.hostname(),this.tags[this.keys.deviceOSVersion]=ru&&ru.type()+" "+ru.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=ru&&ru.arch(),this.tags["ai.device.osPlatform"]=ru&&ru.platform()},e.prototype._loadInternalContext=function(){e.sdkVersion=jOe.APPLICATION_INSIGHTS_SDK_VERSION,this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();dre.exports=$Oe});var mre=_((Hrt,fre)=>{"use strict";var BOe=require("os"),VOe=tq(),pre=ln(),WOe=Cg(),GOe=function(){function e(t){this._collectionInterval=9e5,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(n._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(t,n){var r=this,i=!1,o={},s=WOe.sdkVersion;o.sdk=s,o.osType=BOe.type(),process.env.WEBSITE_SITE_NAME?(o.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",o.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",o.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?o.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&this._isVM===void 0&&(i=!0,VOe.AzureVirtualMachine.getAzureComputeMetadata(t,function(a){r._isVM=a.isVM,r._isVM&&(o.azInst_vmId=a.id,o.azInst_subscriptionId=a.subscriptionId,o.azInst_osType=a.osType),r._client.trackMetric({name:pre.HeartBeatMetricName,value:0,properties:o}),n()})),i||(this._client.trackMetric({name:pre.HeartBeatMetricName,value:0,properties:o}),n())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();fre.exports=GOe});var hre=_(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.isContentTypeHeaderHtml=Pe.insertSnippetByIndex=Pe.getContentEncodingFromHeaders=Pe.isSupportedContentEncoding=Pe.findBufferEncodingType=Pe.isBufferType=Pe.getBrotliDecompressSync=Pe.getBrotliDecompressAsync=Pe.getBrotliCompressSync=Pe.getBrotliCompressAsync=Pe.inflateAsync=Pe.deflateAsync=Pe.gunzipAsync=Pe.gzipAsync=Pe.isBrotliSupperted=Pe.bufferEncodingTypes=Pe.contentEncodingMethod=void 0;var q0=require("zlib"),Sg=require("util"),U0;(function(e){e.GZIP="gzip",e.DEFLATE="deflate",e.BR="br"})(U0=Pe.contentEncodingMethod||(Pe.contentEncodingMethod={}));Pe.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var zOe=function(){var e=process.versions.node.split(".")[0];return parseInt(e)>=10};Pe.isBrotliSupperted=zOe;Pe.gzipAsync=Sg.promisify(q0.gzip);Pe.gunzipAsync=Sg.promisify(q0.gunzip);Pe.deflateAsync=Sg.promisify(q0.deflate);Pe.inflateAsync=Sg.promisify(q0.inflate);var YOe=function(e){var t=Pe.isBrotliSupperted();return t&&typeof e.brotliCompress=="function"?Sg.promisify(e.brotliCompress):null};Pe.getBrotliCompressAsync=YOe;var KOe=function(e){var t=Pe.isBrotliSupperted();return t&&typeof e.brotliCompressSync=="function"?e.brotliCompressSync:null};Pe.getBrotliCompressSync=KOe;var XOe=function(e){var t=Pe.isBrotliSupperted();return t&&typeof e.brotliDecompress=="function"?Sg.promisify(e.brotliDecompress):null};Pe.getBrotliDecompressAsync=XOe;var QOe=function(e){var t=Pe.isBrotliSupperted();return t&&typeof e.brotliDecompressSync=="function"?e.brotliDecompressSync:null};Pe.getBrotliDecompressSync=QOe;var JOe=function(e,t){var n=t||"utf8",r=!1;if(Buffer.isEncoding(n)){var i=Buffer.from(e.toString(n),n);r=i.toJSON().data.toString()===e.toJSON().data.toString()}return r};Pe.isBufferType=JOe;var ZOe=function(e){var t=null;for(var n in Pe.bufferEncodingTypes){var r=Pe.bufferEncodingTypes[n];if(Buffer.isEncoding(r)&&Pe.isBufferType(e,r)){t=r;break}}return t};Pe.findBufferEncodingType=ZOe;var eNe=function(e){var t=null;switch(e){case"gzip":t=U0.GZIP;break;case"br":t=U0.BR;break;case"deflate":t=U0.DEFLATE;break;default:}return t};Pe.isSupportedContentEncoding=eNe;var tNe=function(e){var t=[],n=e.getHeader("Content-Encoding");if(!n)return null;if(typeof n=="string"){var r=Pe.isSupportedContentEncoding(n);r&&t.push(r)}return t};Pe.getContentEncodingFromHeaders=tNe;var nNe=function(e,t,n){if(e<0)return null;var r=null,i=t.substring(0,e),o=t.substring(e);return r=i+'<script type="text/javascript">'+n+"</script>"+o,r};Pe.insertSnippetByIndex=nNe;var rNe=function(e){var t=!1,n=e.getHeader("Content-Type");return n&&(typeof n=="string"?t=n.indexOf("html")>=0:t=n.toString().indexOf("html")>=0),t};Pe.isContentTypeHeaderHtml=rNe});var gre=_(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.getResourceProvider=Zn.getOsPrefix=Zn.isFunctionApp=Zn.isWebApp=Zn.isLinux=Zn.isWindows=void 0;var iNe=function(){return process.platform==="win32"};Zn.isWindows=iNe;var oNe=function(){return process.platform==="linux"};Zn.isLinux=oNe;var sNe=function(){return!!process.env.WEBSITE_SITE_NAME};Zn.isWebApp=sNe;var aNe=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};Zn.isFunctionApp=aNe;var cNe=function(){return Zn.isWindows()?"w":Zn.isLinux()?"l":"u"};Zn.getOsPrefix=cNe;var uNe=function(){return Zn.isWebApp()?"a":Zn.isFunctionApp()?"f":"u"};Zn.getResourceProvider=uNe});var nq=_((Vrt,yre)=>{"use strict";var vre=ln(),lNe=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR),r=n.reduce(function(o,s){var a=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var u=a[0].toLowerCase(),c=a[1];o[u]=c}return o},{});if(Object.keys(r).length>0){if(r.endpointsuffix){var i=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+i+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+i+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||vre.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||vre.DEFAULT_LIVEMETRICS_ENDPOINT}return r},e.isIkeyValid=function(t){if(!t||t=="")return!1;var n="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",r=new RegExp(n);return r.test(t)},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();yre.exports=lNe});var xre={};Xs(xre,{webSnippet:()=>dNe});var dNe,wre=D(()=>{dNe=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var Tre=_((Wrt,Sre)=>{"use strict";var Ere=require("http"),bre=require("https"),Tg=require("zlib"),Ra=Xt(),Zo=hre(),_re=gre(),tE=ln(),Cre=nq(),pNe=(wre(),qi(xre)),fNe=function(){function e(t){var n;if(this._isIkeyValid=!0,e.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");e.INSTANCE=this,e._aiUrl=tE.WEB_INSTRUMENTATION_DEFAULT_SOURCE,e._aiDeprecatedUrl=tE.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var r=this._getWebSnippetIkey((n=t.config)===null||n===void 0?void 0:n.webInstrumentationConnectionString);this._webInstrumentationIkey=r||t.config.instrumentationKey,this._clientWebInstrumentationConfig=t.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=t.config.webInstrumentationSrc,this._statsbeat=t.getStatsbeat()}return e.prototype.enable=function(t,n){this._isEnabled=t,this._webInstrumentationIkey=this._getWebSnippetIkey(n)||this._webInstrumentationIkey,e._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(tE.StatsbeatFeature.WEB_SNIPPET),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(tE.StatsbeatFeature.WEB_SNIPPET)},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._getWebSnippetIkey=function(t){var n=null;try{var r=Cre.parse(t),i=r.instrumentationkey||"";Cre.isIkeyValid(i)?(this._isIkeyValid=!0,n=i):(this._isIkeyValid=!1,Ra.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(o){Ra.info("get web snippet ikey error: "+o)}return n},e.prototype._getWebInstrumentationReplacedStr=function(){var t=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),n=_re.getOsPrefix(),r=_re.getResourceProvider(),i=this._webInstrumentationIkey+`",\r
`+t+` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`+r+n+"d_n_",o=pNe.webSnippet.replace("INSTRUMENTATION_KEY",i);return this._clientWebInstrumentationSrc?o.replace(tE.WEB_INSTRUMENTATION_DEFAULT_SOURCE+".2.min.js",this._clientWebInstrumentationSrc):o},e.prototype._getClientWebInstrumentationConfigStr=function(t){var n="";try{t!=null&&t.length>0&&t.forEach(function(r){var i=r.name;if(i!==void 0){var o=r.value,s="";switch(typeof o){case"function":break;case"object":break;case"string":s=" "+i+': "'+o+`",\r
`,n+=s;break;default:s=" "+i+": "+o+`,\r
`,n+=s;break}}})}catch{this._isEnabled=!1,Ra.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return n},e.prototype._initialize=function(){this._isInitialized=!0;var t=Ere.createServer,n=bre.createServer,r=this._isEnabled;Ere.createServer=function(i){var o=i;return o&&(i=function(s,a){var u=a.write,c=s.method=="GET";a.write=function(p,f,m){try{if(r&&c){var h=Zo.getContentEncodingFromHeaders(a),v=void 0;if(typeof f=="string"&&(v=f),h==null)e.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(a,p,void 0,v));else if(h.length){var g=h[0];arguments[0]=e.INSTANCE.InjectWebSnippet(a,p,g)}}}catch(y){Ra.warn("Inject snippet error: "+y)}return u.apply(a,arguments)};var l=a.end;return a.end=function(p,f,m){if(r&&c)try{if(r&&c){var h=Zo.getContentEncodingFromHeaders(a),v=void 0;if(typeof f=="string"&&(v=f),h==null)e.INSTANCE.ValidateInjection(a,p)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(a,p,void 0,v));else if(h.length){var g=h[0];arguments[0]=e.INSTANCE.InjectWebSnippet(a,p,g)}}}catch(y){Ra.warn("Inject snipet error: "+y)}return l.apply(a,arguments)},o(s,a)}),t(i)},bre.createServer=function(i,o){var s=o;if(s)return o=function(a,u){var c=a.method=="GET",l=u.write,d=u.end;return u.write=function(f,m,h){try{if(r&&c){var v=Zo.getContentEncodingFromHeaders(u),g=void 0;if(typeof m=="string"&&(g=m),v==null)e.INSTANCE.ValidateInjection(u,f)&&(arguments[0]=this.InjectWebSnippet(u,f,void 0,g));else if(v.length){var y=v[0];arguments[0]=e.INSTANCE.InjectWebSnippet(u,f,y)}}}catch(x){Ra.warn("Inject snippet error: "+x)}return l.apply(u,arguments)},u.end=function(f,m,h){try{if(r&&c){var v=Zo.getContentEncodingFromHeaders(u),g=void 0;if(typeof m=="string"&&(g=m),v==null)e.INSTANCE.ValidateInjection(u,f)&&(arguments[0]=e.INSTANCE.InjectWebSnippet(u,f,void 0,g));else if(v.length){var y=v[0];arguments[0]=e.INSTANCE.InjectWebSnippet(u,f,y)}}}catch(x){Ra.warn("Inject snippet error: "+x)}return d.apply(u,arguments)},s(a,u)},n(i,o)}},e.prototype.ValidateInjection=function(t,n){try{if(!t||!n||t.statusCode!=200)return!1;var r=Zo.isContentTypeHeaderHtml(t);if(!r)return!1;var i=n.slice().toString();if(i.indexOf("<head>")>=0&&i.indexOf("</head>")>=0&&i.indexOf(e._aiUrl)<0&&i.indexOf(e._aiDeprecatedUrl)<0)return!0}catch(o){Ra.info("validate injections error: "+o)}return!1},e.prototype.InjectWebSnippet=function(t,n,r,i){try{var o=!!r;if(o)t.removeHeader("Content-Length"),n=this._getInjectedCompressBuffer(t,n,r),t.setHeader("Content-Length",n.length);else{var s=n.toString(),a=s.indexOf("</head>");if(a<0)return n;var u=Zo.insertSnippetByIndex(a,s,e._snippet);if(typeof n=="string")t.removeHeader("Content-Length"),n=u,t.setHeader("Content-Length",Buffer.byteLength(n));else if(Buffer.isBuffer(n)){var c=i||"utf8",l=Zo.isBufferType(n,c);if(l){t.removeHeader("Content-Length");var d=Buffer.from(u).toString(c);n=Buffer.from(d,c),t.setHeader("Content-Length",n.length)}}}}catch(p){Ra.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return n},e.prototype._getInjectedCompressBuffer=function(t,n,r){try{switch(r){case Zo.contentEncodingMethod.GZIP:var i=Tg.gunzipSync(n);if(this.ValidateInjection(t,i)){var o=this.InjectWebSnippet(t,i);n=Tg.gzipSync(o)}break;case Zo.contentEncodingMethod.DEFLATE:var s=Tg.inflateSync(n);if(this.ValidateInjection(t,s)){var a=this.InjectWebSnippet(t,s);n=Tg.deflateSync(a)}break;case Zo.contentEncodingMethod.BR:var u=Zo.getBrotliDecompressSync(Tg),c=Zo.getBrotliCompressSync(Tg);if(u&&c){var l=u(n);if(this.ValidateInjection(t,l)){var d=this.InjectWebSnippet(t,l);n=c(d)}break}}}catch(p){Ra.info("get web injection compress buffer error: "+p)}return n},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();Sre.exports=fNe});var iq=_((Grt,Dre)=>{"use strict";var Ire=require("http"),Pre=require("https"),Rre=Xt(),Are=pr(),mNe=Qh(),rq=RM(),iu=jl(),hNe=I0(),gNe=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||hNe.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(t,n){t&&!this._isAutoCorrelating?iu.CorrelationContextManager.enable(n):!t&&this._isAutoCorrelating&&iu.CorrelationContextManager.disable(),this._isAutoCorrelating=t},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(t){if(this._isAutoCorrelating)return iu.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate())},e.prototype._registerRequest=function(t,n,r){var i=this,o=new rq(t),s=this._generateCorrelationContext(o);iu.CorrelationContextManager.runWithContext(s,function(){i._isEnabled&&(t[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(i._client,{request:t,response:n},o)),typeof r=="function"&&r(t,n)})},e.prototype._initialize=function(){if(this._isInitialized=!0,!e.HANDLER_READY){e.HANDLER_READY=!0;var t=function(o){if(o){if(typeof o!="function")throw new Error("onRequest handler must be a function");return function(s,a){var u;iu.CorrelationContextManager.wrapEmitter(s),iu.CorrelationContextManager.wrapEmitter(a);var c=s&&!s[e.alreadyAutoCollectedFlag];s&&c?(u=e.INSTANCE)===null||u===void 0||u._registerRequest(s,a,o):typeof o=="function"&&o(s,a)}}},n=function(o){var s=o.addListener.bind(o);o.addListener=function(a,u){switch(a){case"request":case"checkContinue":return s(a,t(u));default:return s(a,u)}},o.on=o.addListener},r=Ire.createServer;Ire.createServer=function(o,s){if(s&&typeof s=="function"){var a=r(o,t(s));return n(a),a}else{var a=r(t(o));return n(a),a}};var i=Pre.createServer;Pre.createServer=function(o,s){var a=i(o,t(s));return n(a),a}}},e.trackRequestSync=function(t,n){if(!n.request||!n.response||!t){Rre.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t);return}n.isProcessed=!1,e.addResponseCorrelationIdHeader(t,n.response);var r=iu.CorrelationContextManager.getCurrentContext(),i=new rq(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)},e.trackRequest=function(t,n,r){if(!n.request||!n.response||!t){Rre.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t);return}n.isProcessed=!1;var i=iu.CorrelationContextManager.getCurrentContext(),o=r||new rq(n.request,i&&i.operation.parentId);Are.canIncludeCorrelationHeader(t,o.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=o.getOperationId(t.context.tags)||i.operation.id,i.operation.name=o.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",function(){e.endRequest(t,o,n,null,null)}),n.request.on&&n.request.on("error",function(s){e.endRequest(t,o,n,null,s)}),n.request.on&&n.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,o,n,null,s)})},e.addResponseCorrelationIdHeader=function(t,n){if(t.config&&t.config.correlationId&&n.getHeader&&n.setHeader&&!n.headersSent){var r=n.getHeader(mNe.requestContextHeader);Are.safeIncludeCorrelationHeader(t,n,r)}},e.endRequest=function(t,n,r,i,o){if(!r.isProcessed){r.isProcessed=!0,o?n.onError(o,i):n.onResponse(r.response,i);var s=n.getRequestTelemetry(r);if(s.tagOverrides=n.getRequestTags(t.context.tags),r.tagOverrides)for(var a in r.tagOverrides)s.tagOverrides[a]=r.tagOverrides[a];var u=n.getLegacyRootId();u&&(s.properties.ai_legacyRootId=u),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=r.request,s.contextObjects["http.ServerResponse"]=r.response,t.trackRequest(s)}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,iu.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.HANDLER_READY=!1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();Dre.exports=gNe});var Nre=_((sq,Ore)=>{"use strict";var es=sq&&sq.__assign||function(){return es=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},es.apply(this,arguments)},oq=require("os"),lf=Fr(),kre=ln(),vNe=pr(),yNe=Xt(),xNe=vNe.w3cTraceId(),wNe=function(){function e(){}return e.createQuickPulseEnvelope=function(t,n,r,i){var o=oq&&typeof oq.hostname=="function"&&oq.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,u={Documents:n.length>0?n:null,InstrumentationKey:r.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:xNe,MachineName:o,Instance:s,RoleName:a};return u},e.createQuickPulseMetric=function(t){var n;return n={Name:t.name,Value:t.value,Weight:t.count||1},n},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case lf.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case lf.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case lf.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case lf.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case lf.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.name,i=es(es({},n),{Name:r});return i},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.severityLevel||0,i=es(es({},n),{Message:t.data.baseData.message,SeverityLevel:lf.SeverityLevel[r]});return i},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData.exceptions,i="",o="",s="";r&&r.length>0&&(r[0].parsedStack&&r[0].parsedStack.length>0?r[0].parsedStack.forEach(function(u){i+=u.assembly+`
`}):r[0].stack&&r[0].stack.length>0&&(i=r[0].stack),o=r[0].message,s=r[0].typeName);var a=es(es({},n),{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData,i=es(es({},n),{Name:r.name,Success:r.success,Duration:r.duration,ResponseCode:r.responseCode,OperationName:r.name});return i},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),r=t.data.baseData,i=es(es({},n),{Name:r.name,Target:r.target,Success:r.success,Duration:r.duration,ResultCode:r.resultCode,CommandName:r.data,OperationName:n.OperationId,DependencyTypeName:r.type});return i},e.createQuickPulseDocument=function(t){var n,r,i,o;t.data.baseType?(r=kre.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=kre.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):yNe.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],o=e.aggregateProperties(t);var s={DocumentType:n,__type:r,OperationId:i,Version:"1.0",Properties:o};return s},e.aggregateProperties=function(t){var n=[],r=t.data.baseData.measurements||{};for(var i in r)if(r.hasOwnProperty(i)){var o=r[i],s={key:i,value:o};n.push(s)}var a=t.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};n.push(s)}return n},e.keys=new lf.ContextTagKeys,e}();Ore.exports=wNe});var Fre=_((zrt,Lre)=>{"use strict";var ENe=function(){return(Date.now()+621355968e5)*1e4};Lre.exports={getTransmissionTime:ENe}});var jre=_((nE,qre)=>{"use strict";var Mre=nE&&nE.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Ure=nE&&nE.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bNe=require("https"),_Ne=_g(),aq=Xt(),CNe=Fre(),cq=pr(),SNe=require("url"),ts={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},TNe=function(){function e(t,n){this._config=t,this._consecutiveErrors=0,this._getAuthorizationHandler=n}return e.prototype.ping=function(t,n,r){var i=[{name:ts.streamId,value:t.StreamId},{name:ts.machineName,value:t.MachineName},{name:ts.roleName,value:t.RoleName},{name:ts.instanceName,value:t.Instance},{name:ts.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,n,r,"ping",i)},e.prototype.post=function(t,n,r){return Mre(this,void 0,void 0,function(){return Ure(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],n,r,"post")];case 1:return i.sent(),[2]}})})},e.prototype._submitData=function(t,n,r,i,o){return Mre(this,void 0,void 0,function(){var s,a,u,c,l,d,p,f,m=this;return Ure(this,function(h){switch(h.label){case 0:if(s=cq.stringify(t),a=(p={},p[_Ne.disableCollectionRequestOption]=!0,p.host=n&&n.length>0?n:this._config.quickPulseHost,p.method=ts.method,p.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,p.headers=(f={Expect:"100-continue"},f[ts.time]=CNe.getTransmissionTime(),f["Content-Type"]="application/json",f["Content-Length"]=Buffer.byteLength(s),f),p),o&&o.length>0&&o.forEach(function(v){return a.headers[v.name]=v.value}),i!=="post")return[3,4];if(u=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!u)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,u.addAuthorizationHeader(a)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),l="Failed to get AAD bearer token for the Application. Error:",aq.info(e.TAG,l,c),[2];case 4:return this._config.httpsAgent?a.agent=this._config.httpsAgent:a.agent=cq.tlsRestrictedAgent,d=bNe.request(a,function(v){if(v.statusCode==200){var g=v.headers[ts.subscribed]==="true",y=null;try{y=v.headers[ts.endpointRedirect]?new SNe.URL(v.headers[ts.endpointRedirect].toString()).host:null}catch(w){m._onError("Failed to parse redirect header from QuickPulse: "+cq.dumpObj(w))}var x=v.headers[ts.pollingIntervalHint]?parseInt(v.headers[ts.pollingIntervalHint].toString()):null;m._consecutiveErrors=0,r(g,v,y,x)}else m._onError("StatusCode:"+v.statusCode+" StatusMessage:"+v.statusMessage),r()}),d.on("error",function(v){m._onError(v),r()}),d.write(s),d.end(),[2]}})})},e.prototype._onError=function(t){this._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN===0?(n="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",aq.warn(e.TAG,n,t)):aq.info(e.TAG,n,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();qre.exports=TNe});var Wre=_((rE,Vre)=>{"use strict";var Hre=rE&&rE.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},$re=rE&&rE.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bre=Xt(),uq=Nre(),INe=jre(),PNe=ln(),RNe=Cg(),ANe=function(){function e(t,n,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=n||new RNe,this._sender=new INe(this.config,r),this._isEnabled=!1}return e.prototype.addCollector=function(t){this._collectors.push(t)},e.prototype.trackMetric=function(t){this._addMetric(t)},e.prototype.addDocument=function(t){if(this._isCollectingData){var n=uq.telemetryEnvelopeToQuickPulseDocument(t);n&&this._documents.push(n)}},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(n){n.enable(t)})},e.prototype._addMetric=function(t){var n=t.value,r=t.count||1,i=PNe.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+n*r)/(this._metrics[i].Weight+r),this._metrics[i].Weight+=r):(this._metrics[i]=uq.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return Hre(this,void 0,void 0,function(){var t,n,r,i,o=this;return $re(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(a){return o._metrics[a]}),n=uq.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(n)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(n),s.label=3;case 3:return r=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:r,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(t){return Hre(this,void 0,void 0,function(){return $re(this,function(n){switch(n.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return n.sent(),[2]}})})},e.prototype._quickPulseDone=function(t,n,r,i){t!=null?(this._isCollectingData!==t&&(Bre.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,r&&r.length>0&&(this._redirectedHost=r,Bre.info("Redirecting endpoint to: ",r)),i&&i>0&&(this._pollingIntervalHint=i),n&&n.statusCode<300&&n.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();Vre.exports=ANe});var Gre=_(Ig=>{"use strict";var j0=Ig&&Ig.__assign||function(){return j0=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},j0.apply(this,arguments)};Object.defineProperty(Ig,"__esModule",{value:!0});Ig.AutoCollectNativePerformance=void 0;var iE=Cg(),DNe=Xt(),kNe=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t,n,r){var i=this;if(n===void 0&&(n={}),r===void 0&&(r=6e4),e._metricsAvailable==null&&t&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");e._emitter=new o,e._metricsAvailable=!0,DNe.info("Native metrics module successfully loaded!")}catch{e._metricsAvailable=!1;return}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,r),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},r),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(t,n){var r=n.disableAllExtendedMetrics,i=n.extendedMetricDisablers;if(r)return{isEnabled:!1,disabledMetrics:{}};if(i){var o=i.split(","),s={};if(o.length>0)for(var a=0,u=o;a<u.length;a++){var c=u[a];s[c]=!0}return typeof t=="object"?{isEnabled:!0,disabledMetrics:j0(j0({},t),s)}:{isEnabled:t,disabledMetrics:s}}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:t}},e.prototype._trackNativeMetrics=function(){var t=!0;typeof this._isEnabled!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var n=e._emitter.getGCData();for(var r in n){var i=n[r].metrics,o=r+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:o,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var n=e._emitter.getLoopData(),r=n.loopUsage;if(r.count!=0){var i="Event Loop CPU Time",o=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:i,value:r.total,count:r.count,min:r.min,max:r.max,stdDev:o,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var t,n,r;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),o=i.heapUsed,s=i.heapTotal,a=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,n)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+iE.sdkVersion,r)})}},e}();Ig.AutoCollectNativePerformance=kNe});var Kre=_(Jl=>{"use strict";var zre=Jl&&Jl.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Yre=Jl&&Jl.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.AzureFunctionsHook=void 0;var H0=Xt(),lq=jl(),ONe=function(){function e(t){this._client=t,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core");var n=this._functionsCoreModule.getProgrammingModel();n.name==="@azure/functions"&&n.version.startsWith("3.")?(this._addPreInvocationHook(),this._addPostInvocationHook()):H0.warn('AzureFunctionsHook does not support model "'+n.name+'" version "'+n.version+'"')}catch{H0.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return e.prototype.enable=function(t){this._autoGenerateIncomingRequests=t},e.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},e.prototype._addPreInvocationHook=function(){var t=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(n){return zre(t,void 0,void 0,function(){var r,i;return Yre(this,function(o){r=n.invocationContext;try{i=lq.CorrelationContextManager.startOperation(r),i.customProperties.setProperty("InvocationId",r.invocationId),r.traceContext.attributes&&(i.customProperties.setProperty("ProcessId",r.traceContext.attributes.ProcessId),i.customProperties.setProperty("LogLevel",r.traceContext.attributes.LogLevel),i.customProperties.setProperty("Category",r.traceContext.attributes.Category),i.customProperties.setProperty("HostInstanceId",r.traceContext.attributes.HostInstanceId),i.customProperties.setProperty("AzFuncLiveLogsSessionId",r.traceContext.attributes["#AzFuncLiveLogsSessionId"])),n.functionCallback=lq.CorrelationContextManager.wrapCallback(n.functionCallback,i),this._isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(n.hookData.appInsightsExtractedContext=i,n.hookData.appInsightsStartTime=Date.now())}catch(s){return H0.warn("Failed to propagate context in Azure Functions",s),[2]}return[2]})})}))},e.prototype._addPostInvocationHook=function(){var t=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(n){return zre(t,void 0,void 0,function(){var r,i,o,s,a,u=this;return Yre(this,function(c){try{this._autoGenerateIncomingRequests&&(r=n.invocationContext,this._isHttpTrigger(r)&&(i=n.inputs[0],i&&(o=n.hookData.appInsightsStartTime||Date.now(),s=this._getAzureFunctionResponse(n,r),a=n.hookData.appInsightsExtractedContext,a?lq.CorrelationContextManager.runWithContext(a,function(){u._createIncomingRequestTelemetry(i,s,o,a.operation.parentId)}):this._createIncomingRequestTelemetry(i,s,o,null))))}catch(l){H0.warn("Error creating automatic incoming request in Azure Functions",l)}return[2]})})}))},e.prototype._createIncomingRequestTelemetry=function(t,n,r,i){for(var o=200,s=0,a=[n.statusCode,n.status];s<a.length;s++){var u=a[s];if(typeof u=="number"&&Number.isInteger(u)){o=u;break}else if(typeof u=="string"){var c=parseInt(u);if(!isNaN(c)){o=c;break}}}this._client.trackRequest({name:t.method+" "+t.url,resultCode:o,success:0<o&&o<400,url:t.url,time:new Date(r),duration:Date.now()-r,id:i}),this._client.flush()},e.prototype._getAzureFunctionResponse=function(t,n){var r=n.bindingDefinitions.find(function(i){return i.direction==="out"&&i.type.toLowerCase()==="http"});return(r==null?void 0:r.name)==="$return"?t.result:r&&n.bindings&&n.bindings[r.name]!==void 0?n.bindings[r.name]:n.res},e.prototype._isHttpTrigger=function(t){return t.bindingDefinitions.find(function(n){var r;return((r=n.type)===null||r===void 0?void 0:r.toLowerCase())==="httptrigger"})},e.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},e}();Jl.AzureFunctionsHook=ONe});var dq=_((Qrt,Jre)=>{"use strict";var NNe=Kp(),Xre=nq(),Xrt=Xt(),Qre=ln(),LNe=require("url"),FNe=UT(),MNe=function(){function e(t){this._endpointBase=Qre.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var n=this._connectionString,r=Xre.parse(t),i=Xre.parse(n),o=!r.instrumentationkey&&Object.keys(r).length>0?null:t,s=this._instrumentationKey;this.instrumentationKey=r.instrumentationkey||o||i.instrumentationkey||s;var a=""+(this.endpointUrl||r.ingestionendpoint||i.ingestionendpoint||this._endpointBase);a.endsWith("/")&&(a=a.slice(0,-1)),this.endpointUrl=a+"/v2.1/track",this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=r.ingestionendpoint||i.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||r.liveendpoint||i.liveendpoint||process.env[e.ENV_quickPulseHost]||Qre.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new LNe.URL(this.quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(t){this._profileQueryEndpoint=t,this.correlationId=NNe.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(t){e._validateInstrumentationKey(t),this._instrumentationKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(t){this._webInstrumentationConnectionString=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(t){this._webInstrumentationConnectionString=t},enumerable:!1,configurable:!0}),e.prototype._mergeConfig=function(){var t=FNe.JsonConfig.getInstance();this._connectionString=t.connectionString,this._instrumentationKey=t.instrumentationKey,this.correlationHeaderExcludedDomains=t.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=t.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=t.disableAllExtendedMetrics,this.disableAppInsights=t.disableAppInsights,this.disableStatsbeat=t.disableStatsbeat,this.distributedTracingMode=t.distributedTracingMode,this.enableAutoCollectConsole=t.enableAutoCollectConsole,this.enableAutoCollectDependencies=t.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=t.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=t.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=t.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=t.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=t.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=t.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=t.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=t.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=t.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=t.enableInternalDebugLogging,this.enableInternalWarningLogging=t.enableInternalWarningLogging,this.enableResendInterval=t.enableResendInterval,this.enableMaxBytesOnDisk=t.enableMaxBytesOnDisk,this.enableSendLiveMetrics=t.enableSendLiveMetrics,this.enableUseAsyncHooks=t.enableUseAsyncHooks,this.enableUseDiskRetryCaching=t.enableUseDiskRetryCaching,this.endpointUrl=t.endpointUrl,this.extendedMetricDisablers=t.extendedMetricDisablers,this.ignoreLegacyHeaders=t.ignoreLegacyHeaders,this.maxBatchIntervalMs=t.maxBatchIntervalMs,this.maxBatchSize=t.maxBatchSize,this.proxyHttpUrl=t.proxyHttpUrl,this.proxyHttpsUrl=t.proxyHttpsUrl,this.quickPulseHost=t.quickPulseHost,this.samplingPercentage=t.samplingPercentage,this.enableWebInstrumentation=t.enableWebInstrumentation,this._webInstrumentationConnectionString=t.webInstrumentationConnectionString,this.webInstrumentationConfig=t.webInstrumentationConfig,this.webInstrumentationSrc=t.webInstrumentationSrc},e._validateInstrumentationKey=function(t){var n="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",r=new RegExp(n);return r.test(t)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e}();Jre.exports=MNe});function $0(){return Pg.create()}var Zre,Pg,pq=D(()=>{Zre=new Set(["Deserialize","Serialize","Retry","Sign"]),Pg=class{constructor(t){var n;this._policies=[],this._policies=(n=t==null?void 0:t.slice(0))!==null&&n!==void 0?n:[],this._orderedPolicies=void 0}addPolicy(t,n={}){if(n.phase&&n.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(n.phase&&!Zre.has(n.phase))throw new Error(`Invalid phase name: ${n.phase}`);if(n.afterPhase&&!Zre.has(n.afterPhase))throw new Error(`Invalid afterPhase name: ${n.afterPhase}`);this._policies.push({policy:t,options:n}),this._orderedPolicies=void 0}removePolicy(t){let n=[];return this._policies=this._policies.filter(r=>t.name&&r.policy.name===t.name||t.phase&&r.options.phase===t.phase?(n.push(r.policy),!1):!0),this._orderedPolicies=void 0,n}sendRequest(t,n){return this.getOrderedPolicies().reduceRight((o,s)=>a=>s.sendRequest(a,o),o=>t.sendRequest(o))(n)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Pg(this._policies)}static create(){return new Pg}orderPolicies(){let t=[],n=new Map;function r(m){return{name:m,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let i=r("Serialize"),o=r("None"),s=r("Deserialize"),a=r("Retry"),u=r("Sign"),c=[i,o,s,a,u];function l(m){return m==="Retry"?a:m==="Serialize"?i:m==="Deserialize"?s:m==="Sign"?u:o}for(let m of this._policies){let h=m.policy,v=m.options,g=h.name;if(n.has(g))throw new Error("Duplicate policy names not allowed in pipeline");let y={policy:h,dependsOn:new Set,dependants:new Set};v.afterPhase&&(y.afterPhase=l(v.afterPhase),y.afterPhase.hasAfterPolicies=!0),n.set(g,y),l(v.phase).policies.add(y)}for(let m of this._policies){let{policy:h,options:v}=m,g=h.name,y=n.get(g);if(!y)throw new Error(`Missing node for policy ${g}`);if(v.afterPolicies)for(let x of v.afterPolicies){let w=n.get(x);w&&(y.dependsOn.add(w),w.dependants.add(y))}if(v.beforePolicies)for(let x of v.beforePolicies){let w=n.get(x);w&&(w.dependsOn.add(y),y.dependants.add(w))}}function d(m){m.hasRun=!0;for(let h of m.policies)if(!(h.afterPhase&&(!h.afterPhase.hasRun||h.afterPhase.policies.size))&&h.dependsOn.size===0){t.push(h.policy);for(let v of h.dependants)v.dependsOn.delete(h);n.delete(h.policy.name),m.policies.delete(h)}}function p(){for(let m of c){if(d(m),m.policies.size>0&&m!==o){o.hasRun||d(o);return}m.hasAfterPolicies&&d(o)}}let f=0;for(;n.size>0;){f++;let m=t.length;if(p(),t.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return t}}});function nie(e,...t){process.stderr.write(`${eie.default.format(e,...t)}${tie.EOL}`)}var eie,tie,rie=D(()=>{eie=B(require("util")),tie=require("os")});function hq(e){oie=e,fq=[],mq=[];let t=/\*/g,n=e.split(",").map(r=>r.trim().replace(t,".*?"));for(let r of n)r.startsWith("-")?mq.push(new RegExp(`^${r.substr(1)}$`)):fq.push(new RegExp(`^${r}$`));for(let r of B0)r.enabled=gq(r.namespace)}function gq(e){if(e.endsWith("*"))return!0;for(let t of mq)if(t.test(e))return!1;for(let t of fq)if(t.test(e))return!0;return!1}function UNe(){let e=oie||"";return hq(""),e}function aie(e){let t=Object.assign(n,{enabled:gq(e),destroy:qNe,log:sie.log,namespace:e,extend:jNe});function n(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))}return B0.push(t),t}function qNe(){let e=B0.indexOf(this);return e>=0?(B0.splice(e,1),!0):!1}function jNe(e){let t=aie(`${this.namespace}:${e}`);return t.log=this.log,t}var iie,oie,fq,mq,B0,sie,Rg,cie=D(()=>{rie();iie=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,fq=[],mq=[],B0=[];iie&&hq(iie);sie=Object.assign(e=>aie(e),{enable:hq,enabled:gq,disable:UNe,log:nie});Rg=sie});function HNe(e){if(e&&!fie(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${xq.join(",")}`);vq=e;let t=[];for(let n of lie)pie(n)&&t.push(n.namespace);Rg.enable(t.join(","))}function G0(e){let t=yq.extend(e);return die(yq,t),{error:W0(t,"error"),warning:W0(t,"warning"),info:W0(t,"info"),verbose:W0(t,"verbose")}}function die(e,t){t.log=(...n)=>{e.log(...n)}}function W0(e,t){let n=Object.assign(e.extend(t),{level:t});if(die(e,n),pie(n)){let r=Rg.disable();Rg.enable(r+","+n.namespace)}return lie.add(n),n}function pie(e){return!!(vq&&uie[e.level]<=uie[vq])}function fie(e){return xq.includes(e)}var lie,V0,vq,yq,xq,uie,wq=D(()=>{cie();lie=new Set,V0=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,yq=Rg("azure");yq.log=(...e)=>{Rg.log(...e)};xq=["verbose","info","warning","error"];V0&&(fie(V0)?HNe(V0):console.error(`AZURE_LOG_LEVEL set to unknown log level '${V0}'; logging is not enabled. Acceptable values: ${xq.join(", ")}.`));uie={verbose:400,info:300,warning:200,error:100}});var gr,Ag=D(()=>{wq();gr=G0("core-rest-pipeline")});var Eq,z0,mie=D(()=>{z0=typeof process<"u"&&!!process.version&&!!(!((Eq=process.versions)===null||Eq===void 0)&&Eq.node)});function bq(e){if(e.aborted)return;e.onabort&&e.onabort.call(e);let t=Dg.get(e);t&&t.slice().forEach(n=>{n.call(e,{type:"abort"})}),Y0.set(e,!0)}var Dg,Y0,df,hie=D(()=>{Dg=new WeakMap,Y0=new WeakMap,df=class{constructor(){this.onabort=null,Dg.set(this,[]),Y0.set(this,!1)}get aborted(){if(!Y0.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return Y0.get(this)}static get none(){return new df}addEventListener(t,n){if(!Dg.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Dg.get(this).push(n)}removeEventListener(t,n){if(!Dg.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let r=Dg.get(this),i=r.indexOf(n);i>-1&&r.splice(i,1)}dispatchEvent(t){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}});var Aa,oE,gie=D(()=>{hie();Aa=class extends Error{constructor(t){super(t),this.name="AbortError"}},oE=class{constructor(t){if(this._signal=new df,!!t){Array.isArray(t)||(t=arguments);for(let n of t)n.aborted?this.abort():n.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){bq(this._signal)}static timeout(t){let n=new df,r=setTimeout(bq,t,n);return typeof r.unref=="function"&&r.unref(),n}}});var K0=D(()=>{gie()});function _q(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}var vie=D(()=>{});function sE(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}var Cq=D(()=>{});function kg(e){if(sE(e)){let t=typeof e.name=="string",n=typeof e.message=="string";return t&&n}return!1}function Og(e){if(kg(e))return e.message;{let t;try{typeof e=="object"&&e?t=JSON.stringify(e):t=String(e)}catch{t="[unable to stringify input]"}return`Unknown error ${t}`}}var yie=D(()=>{Cq()});var Ng=D(()=>{mie();vie();Cq();yie()});var Sq,$Ne,BNe,Lg,Tq=D(()=>{Ng();Sq="REDACTED",$Ne=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],BNe=["api-version"],Lg=class{constructor({additionalAllowedHeaderNames:t=[],additionalAllowedQueryParameters:n=[]}={}){t=$Ne.concat(t),n=BNe.concat(n),this.allowedHeaderNames=new Set(t.map(r=>r.toLowerCase())),this.allowedQueryParameters=new Set(n.map(r=>r.toLowerCase()))}sanitize(t){let n=new Set;return JSON.stringify(t,(r,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(r==="headers")return this.sanitizeHeaders(i);if(r==="url")return this.sanitizeUrl(i);if(r==="query")return this.sanitizeQuery(i);if(r==="body")return;if(r==="response")return;if(r==="operationSpec")return;if(Array.isArray(i)||sE(i)){if(n.has(i))return"[Circular]";n.add(i)}return i},2)}sanitizeHeaders(t){let n={};for(let r of Object.keys(t))this.allowedHeaderNames.has(r.toLowerCase())?n[r]=t[r]:n[r]=Sq;return n}sanitizeQuery(t){if(typeof t!="object"||t===null)return t;let n={};for(let r of Object.keys(t))this.allowedQueryParameters.has(r.toLowerCase())?n[r]=t[r]:n[r]=Sq;return n}sanitizeUrl(t){if(typeof t!="string"||t===null)return t;let n=new URL(t);if(!n.search)return t;for(let[r]of n.searchParams)this.allowedQueryParameters.has(r.toLowerCase())||n.searchParams.set(r,Sq);return n.toString()}}});function X0(e={}){var t;let n=(t=e.logger)!==null&&t!==void 0?t:gr.info,r=new Lg({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:Iq,async sendRequest(i,o){if(!n.enabled)return o(i);n(`Request: ${r.sanitize(i)}`);let s=await o(i);return n(`Response status code: ${s.status}`),n(`Headers: ${r.sanitize(s.headers)}`),s}}}var Iq,Pq=D(()=>{Ag();Tq();Iq="logPolicy"});function Q0(e={}){let{maxRetries:t=20}=e;return{name:Rq,async sendRequest(n,r){let i=await r(n);return wie(r,i,t)}}}async function wie(e,t,n,r=0){let{request:i,status:o,headers:s}=t,a=s.get("location");if(a&&(o===300||o===301&&xie.includes(i.method)||o===302&&xie.includes(i.method)||o===303&&i.method==="POST"||o===307)&&r<n){let u=new URL(a,i.url);i.url=u.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let c=await e(i);return wie(e,c,n,r+1)}return t}var Rq,xie,Aq=D(()=>{Rq="redirectPolicy",xie=["GET","HEAD"]});function Eie(){return"User-Agent"}function bie(e){e.set("Node",process.version),e.set("OS",`(${Fg.arch()}-${Fg.type()}-${Fg.release()})`)}var Fg,_ie=D(()=>{Fg=B(require("os"))});var J0,Dq=D(()=>{J0="1.10.1"});function VNe(e){let t=[];for(let[n,r]of e){let i=r?`${n}/${r}`:n;t.push(i)}return t.join(" ")}function Cie(){return Eie()}function Z0(e){let t=new Map;t.set("core-rest-pipeline",J0),bie(t);let n=VNe(t);return e?`${e} ${n}`:n}var kq=D(()=>{_ie();Dq()});function eP(e={}){let t=Z0(e.userAgentPrefix);return{name:Oq,async sendRequest(n,r){return n.headers.has(Sie)||n.headers.set(Sie,t),r(n)}}}var Sie,Oq,Nq=D(()=>{kq();Sie=Cie(),Oq="userAgentPolicy"});function tP(){return{name:Lq,async sendRequest(e,t){return e.method!=="HEAD"&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e)}}}var Lq,Fq=D(()=>{Lq="decompressResponsePolicy"});function nP(e,t,n){return new Promise((r,i)=>{let o,s,a=()=>i(new Aa(n!=null&&n.abortErrorMsg?n==null?void 0:n.abortErrorMsg:WNe)),u=()=>{n!=null&&n.abortSignal&&s&&n.abortSignal.removeEventListener("abort",s)};if(s=()=>(o&&clearTimeout(o),u(),a()),n!=null&&n.abortSignal&&n.abortSignal.aborted)return a();o=setTimeout(()=>{u(),r(t)},e),n!=null&&n.abortSignal&&n.abortSignal.addEventListener("abort",s)})}function Tie(e,t){let n=e.headers.get(t);if(!n)return;let r=Number(n);if(!Number.isNaN(r))return r}var WNe,rP=D(()=>{K0();WNe="The operation was aborted."});function Iie(e){if(e&&[429,503].includes(e.status))try{for(let i of GNe){let o=Tie(e,i);if(o===0||o)return o*(i===Mq?1e3:1)}let t=e.headers.get(Mq);if(!t)return;let r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch{return}}function Pie(e){return Number.isFinite(Iie(e))}function iP(){return{name:"throttlingRetryStrategy",retry({response:e}){let t=Iie(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}}var Mq,GNe,oP=D(()=>{rP();Mq="Retry-After",GNe=["retry-after-ms","x-ms-retry-after-ms",Mq]});function Mg(e={}){var t,n;let r=(t=e.retryDelayInMs)!==null&&t!==void 0?t:zNe,i=(n=e.maxRetryDelayInMs)!==null&&n!==void 0?n:YNe,o=r;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:a,responseError:u}){let c=XNe(u),l=c&&e.ignoreSystemErrors,d=KNe(a),p=d&&e.ignoreHttpStatusCodes;if(a&&(Pie(a)||!d)||p||l)return{skipStrategy:!0};if(u&&!c&&!d)return{errorToThrow:u};let m=o*Math.pow(2,s),h=Math.min(i,m);return o=h/2+_q(0,h/2),{retryAfterInMs:o}}}}function KNe(e){return!!(e&&e.status!==void 0&&(e.status>=500||e.status===408)&&e.status!==501&&e.status!==505)}function XNe(e){return e?e.code==="ETIMEDOUT"||e.code==="ESOCKETTIMEDOUT"||e.code==="ECONNREFUSED"||e.code==="ECONNRESET"||e.code==="ENOENT":!1}var zNe,YNe,sP=D(()=>{Ng();oP();zNe=1e3,YNe=1e3*64});function Da(e,t={maxRetries:3}){let n=t.logger||Rie;return{name:QNe,async sendRequest(r,i){var o,s;let a,u,c=-1;e:for(;;){c+=1,a=void 0,u=void 0;try{n.info(`Retry ${c}: Attempting to send request`,r.requestId),a=await i(r),n.info(`Retry ${c}: Received a response from request`,r.requestId)}catch(l){if(n.error(`Retry ${c}: Received an error from request`,r.requestId),u=l,!l||u.name!=="RestError")throw l;a=u.response}if(!((o=r.abortSignal)===null||o===void 0)&&o.aborted)throw n.error(`Retry ${c}: Request aborted.`),new Aa;if(c>=((s=t.maxRetries)!==null&&s!==void 0?s:3)){if(n.info(`Retry ${c}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),u)throw u;if(a)return a;throw new Error("Maximum retries reached with no response or error to throw")}n.info(`Retry ${c}: Processing ${e.length} retry strategies.`);t:for(let l of e){let d=l.logger||Rie;d.info(`Retry ${c}: Processing retry strategy ${l.name}.`);let p=l.retry({retryCount:c,response:a,responseError:u});if(p.skipStrategy){d.info(`Retry ${c}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:h}=p;if(f)throw d.error(`Retry ${c}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){d.info(`Retry ${c}: Retry strategy ${l.name} retries after ${m}`),await nP(m,void 0,{abortSignal:r.abortSignal});continue e}if(h){d.info(`Retry ${c}: Retry strategy ${l.name} redirects to ${h}`),r.url=h;continue e}}if(u)throw n.info("None of the retry strategies could work with the received error. Throwing it."),u;if(a)return n.info("None of the retry strategies could work with the received response. Returning it."),a}}}}var Rie,QNe,Ug=D(()=>{rP();wq();K0();Rie=G0("core-rest-pipeline retryPolicy"),QNe="retryPolicy"});function aP(e={}){var t;return{name:JNe,sendRequest:Da([iP(),Mg(e)],{maxRetries:(t=e.maxRetries)!==null&&t!==void 0?t:3}).sendRequest}}var JNe,Uq=D(()=>{sP();oP();Ug();JNe="defaultRetryPolicy"});var kie=_((Xit,Die)=>{var Aie=require("stream").Stream,ZNe=require("util");Die.exports=Gs;function Gs(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}ZNe.inherits(Gs,Aie);Gs.create=function(e,t){var n=new this;t=t||{};for(var r in t)n[r]=t[r];n.source=e;var i=e.emit;return e.emit=function(){return n._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),n.pauseStream&&e.pause(),n};Object.defineProperty(Gs.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});Gs.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};Gs.prototype.resume=function(){this._released||this.release(),this.source.resume()};Gs.prototype.pause=function(){this.source.pause()};Gs.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]};Gs.prototype.pipe=function(){var e=Aie.prototype.pipe.apply(this,arguments);return this.resume(),e};Gs.prototype._handleEmit=function(e){if(this._released){this.emit.apply(this,e);return}e[0]==="data"&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e)};Gs.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}});var Fie=_((Qit,Lie)=>{var eLe=require("util"),Nie=require("stream").Stream,Oie=kie();Lie.exports=dn;function dn(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}eLe.inherits(dn,Nie);dn.create=function(e){var t=new this;e=e||{};for(var n in e)t[n]=e[n];return t};dn.isStreamLike=function(e){return typeof e!="function"&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"&&!Buffer.isBuffer(e)};dn.prototype.append=function(e){var t=dn.isStreamLike(e);if(t){if(!(e instanceof Oie)){var n=Oie.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=n}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this};dn.prototype.pipe=function(e,t){return Nie.prototype.pipe.call(this,e,t),this.resume(),e};dn.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};dn.prototype._realGetNext=function(){var e=this._streams.shift();if(typeof e>"u"){this.end();return}if(typeof e!="function"){this._pipeNext(e);return}var t=e;t(function(n){var r=dn.isStreamLike(n);r&&(n.on("data",this._checkDataSize.bind(this)),this._handleErrors(n)),this._pipeNext(n)}.bind(this))};dn.prototype._pipeNext=function(e){this._currentStream=e;var t=dn.isStreamLike(e);if(t){e.on("end",this._getNext.bind(this)),e.pipe(this,{end:!1});return}var n=e;this.write(n),this._getNext()};dn.prototype._handleErrors=function(e){var t=this;e.on("error",function(n){t._emitError(n)})};dn.prototype.write=function(e){this.emit("data",e)};dn.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};dn.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};dn.prototype.end=function(){this._reset(),this.emit("end")};dn.prototype.destroy=function(){this._reset(),this.emit("close")};dn.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};dn.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}};dn.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};dn.prototype._emitError=function(e){this._reset(),this.emit("error",e)}});var Mie=_((Jit,tLe)=>{tLe.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var qie=_((Zit,Uie)=>{Uie.exports=Mie()});var $ie=_(Li=>{"use strict";var cP=qie(),nLe=require("path").extname,jie=/^\s*([^;\s]*)(?:;|\s|$)/,rLe=/^text\//i;Li.charset=Hie;Li.charsets={lookup:Hie};Li.contentType=iLe;Li.extension=oLe;Li.extensions=Object.create(null);Li.lookup=sLe;Li.types=Object.create(null);aLe(Li.extensions,Li.types);function Hie(e){if(!e||typeof e!="string")return!1;var t=jie.exec(e),n=t&&cP[t[1].toLowerCase()];return n&&n.charset?n.charset:t&&rLe.test(t[1])?"UTF-8":!1}function iLe(e){if(!e||typeof e!="string")return!1;var t=e.indexOf("/")===-1?Li.lookup(e):e;if(!t)return!1;if(t.indexOf("charset")===-1){var n=Li.charset(t);n&&(t+="; charset="+n.toLowerCase())}return t}function oLe(e){if(!e||typeof e!="string")return!1;var t=jie.exec(e),n=t&&Li.extensions[t[1].toLowerCase()];return!n||!n.length?!1:n[0]}function sLe(e){if(!e||typeof e!="string")return!1;var t=nLe("x."+e).toLowerCase().substr(1);return t&&Li.types[t]||!1}function aLe(e,t){var n=["nginx","apache",void 0,"iana"];Object.keys(cP).forEach(function(i){var o=cP[i],s=o.extensions;if(!(!s||!s.length)){e[i]=s;for(var a=0;a<s.length;a++){var u=s[a];if(t[u]){var c=n.indexOf(cP[t[u]].source),l=n.indexOf(o.source);if(t[u]!=="application/octet-stream"&&(c>l||c===l&&t[u].substr(0,12)==="application/"))continue}t[u]=i}}})}});var Vie=_((tot,Bie)=>{Bie.exports=cLe;function cLe(e){var t=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;t?t(e):setTimeout(e,0)}});var qq=_((not,Gie)=>{var Wie=Vie();Gie.exports=uLe;function uLe(e){var t=!1;return Wie(function(){t=!0}),function(r,i){t?e(r,i):Wie(function(){e(r,i)})}}});var jq=_((rot,zie)=>{zie.exports=lLe;function lLe(e){Object.keys(e.jobs).forEach(dLe.bind(e)),e.jobs={}}function dLe(e){typeof this.jobs[e]=="function"&&this.jobs[e]()}});var Hq=_((iot,Kie)=>{var Yie=qq(),pLe=jq();Kie.exports=fLe;function fLe(e,t,n,r){var i=n.keyedList?n.keyedList[n.index]:n.index;n.jobs[i]=mLe(t,i,e[i],function(o,s){i in n.jobs&&(delete n.jobs[i],o?pLe(n):n.results[i]=s,r(o,n.results))})}function mLe(e,t,n,r){var i;return e.length==2?i=e(n,Yie(r)):i=e(n,t,Yie(r)),i}});var $q=_((oot,Xie)=>{Xie.exports=hLe;function hLe(e,t){var n=!Array.isArray(e),r={index:0,keyedList:n||t?Object.keys(e):null,jobs:{},results:n?{}:[],size:n?Object.keys(e).length:e.length};return t&&r.keyedList.sort(n?t:function(i,o){return t(e[i],e[o])}),r}});var Bq=_((sot,Qie)=>{var gLe=jq(),vLe=qq();Qie.exports=yLe;function yLe(e){Object.keys(this.jobs).length&&(this.index=this.size,gLe(this),vLe(e)(null,this.results))}});var Zie=_((aot,Jie)=>{var xLe=Hq(),wLe=$q(),ELe=Bq();Jie.exports=bLe;function bLe(e,t,n){for(var r=wLe(e);r.index<(r.keyedList||e).length;)xLe(e,t,r,function(i,o){if(i){n(i,o);return}if(Object.keys(r.jobs).length===0){n(null,r.results);return}}),r.index++;return ELe.bind(r,n)}});var Vq=_((cot,uP)=>{var eoe=Hq(),_Le=$q(),CLe=Bq();uP.exports=SLe;uP.exports.ascending=toe;uP.exports.descending=TLe;function SLe(e,t,n,r){var i=_Le(e,n);return eoe(e,t,i,function o(s,a){if(s){r(s,a);return}if(i.index++,i.index<(i.keyedList||e).length){eoe(e,t,i,o);return}r(null,i.results)}),CLe.bind(i,r)}function toe(e,t){return e<t?-1:e>t?1:0}function TLe(e,t){return-1*toe(e,t)}});var roe=_((uot,noe)=>{var ILe=Vq();noe.exports=PLe;function PLe(e,t,n){return ILe(e,t,null,n)}});var ooe=_((lot,ioe)=>{ioe.exports={parallel:Zie(),serial:roe(),serialOrdered:Vq()}});var aoe=_((dot,soe)=>{soe.exports=function(e,t){return Object.keys(t).forEach(function(n){e[n]=e[n]||t[n]}),e}});var loe=_((pot,uoe)=>{var Yq=Fie(),coe=require("util"),Wq=require("path"),RLe=require("http"),ALe=require("https"),DLe=require("url").parse,kLe=require("fs"),OLe=require("stream").Stream,Gq=$ie(),NLe=ooe(),zq=aoe();uoe.exports=ot;coe.inherits(ot,Yq);function ot(e){if(!(this instanceof ot))return new ot(e);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],Yq.call(this),e=e||{};for(var t in e)this[t]=e[t]}ot.LINE_BREAK=`\r
`;ot.DEFAULT_CONTENT_TYPE="application/octet-stream";ot.prototype.append=function(e,t,n){n=n||{},typeof n=="string"&&(n={filename:n});var r=Yq.prototype.append.bind(this);if(typeof t=="number"&&(t=""+t),coe.isArray(t)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(e,t,n),o=this._multiPartFooter();r(i),r(t),r(o),this._trackLength(i,t,n)};ot.prototype._trackLength=function(e,t,n){var r=0;n.knownLength!=null?r+=+n.knownLength:Buffer.isBuffer(t)?r=t.length:typeof t=="string"&&(r=Buffer.byteLength(t)),this._valueLength+=r,this._overheadLength+=Buffer.byteLength(e)+ot.LINE_BREAK.length,!(!t||!t.path&&!(t.readable&&t.hasOwnProperty("httpVersion"))&&!(t instanceof OLe))&&(n.knownLength||this._valuesToMeasure.push(t))};ot.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?e.end!=null&&e.end!=1/0&&e.start!=null?t(null,e.end+1-(e.start?e.start:0)):kLe.stat(e.path,function(n,r){var i;if(n){t(n);return}i=r.size-(e.start?e.start:0),t(null,i)}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(n){e.pause(),t(null,+n.headers["content-length"])}),e.resume()):t("Unknown stream")};ot.prototype._multiPartHeader=function(e,t,n){if(typeof n.header=="string")return n.header;var r=this._getContentDisposition(t,n),i=this._getContentType(t,n),o="",s={"Content-Disposition":["form-data",'name="'+e+'"'].concat(r||[]),"Content-Type":[].concat(i||[])};typeof n.header=="object"&&zq(s,n.header);var a;for(var u in s)s.hasOwnProperty(u)&&(a=s[u],a!=null&&(Array.isArray(a)||(a=[a]),a.length&&(o+=u+": "+a.join("; ")+ot.LINE_BREAK)));return"--"+this.getBoundary()+ot.LINE_BREAK+o+ot.LINE_BREAK};ot.prototype._getContentDisposition=function(e,t){var n,r;return typeof t.filepath=="string"?n=Wq.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?n=Wq.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(n=Wq.basename(e.client._httpMessage.path||"")),n&&(r='filename="'+n+'"'),r};ot.prototype._getContentType=function(e,t){var n=t.contentType;return!n&&e.name&&(n=Gq.lookup(e.name)),!n&&e.path&&(n=Gq.lookup(e.path)),!n&&e.readable&&e.hasOwnProperty("httpVersion")&&(n=e.headers["content-type"]),!n&&(t.filepath||t.filename)&&(n=Gq.lookup(t.filepath||t.filename)),!n&&typeof e=="object"&&(n=ot.DEFAULT_CONTENT_TYPE),n};ot.prototype._multiPartFooter=function(){return function(e){var t=ot.LINE_BREAK,n=this._streams.length===0;n&&(t+=this._lastBoundary()),e(t)}.bind(this)};ot.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+ot.LINE_BREAK};ot.prototype.getHeaders=function(e){var t,n={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(n[t.toLowerCase()]=e[t]);return n};ot.prototype.setBoundary=function(e){this._boundary=e};ot.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};ot.prototype.getBuffer=function(){for(var e=new Buffer.alloc(0),t=this.getBoundary(),n=0,r=this._streams.length;n<r;n++)typeof this._streams[n]!="function"&&(Buffer.isBuffer(this._streams[n])?e=Buffer.concat([e,this._streams[n]]):e=Buffer.concat([e,Buffer.from(this._streams[n])]),(typeof this._streams[n]!="string"||this._streams[n].substring(2,t.length+2)!==t)&&(e=Buffer.concat([e,Buffer.from(ot.LINE_BREAK)])));return Buffer.concat([e,Buffer.from(this._lastBoundary())])};ot.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(Math.random()*10).toString(16);this._boundary=e};ot.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e};ot.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e};ot.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;if(this._streams.length&&(t+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(e.bind(this,null,t));return}NLe.parallel(this._valuesToMeasure,this._lengthRetriever,function(n,r){if(n){e(n);return}r.forEach(function(i){t+=i}),e(null,t)})};ot.prototype.submit=function(e,t){var n,r,i={method:"post"};return typeof e=="string"?(e=DLe(e),r=zq({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},i)):(r=zq(e,i),r.port||(r.port=r.protocol=="https:"?443:80)),r.headers=this.getHeaders(e.headers),r.protocol=="https:"?n=ALe.request(r):n=RLe.request(r),this.getLength(function(o,s){if(o&&o!=="Unknown stream"){this._error(o);return}if(s&&n.setHeader("Content-Length",s),this.pipe(n),t){var a,u=function(c,l){return n.removeListener("error",u),n.removeListener("response",a),t.call(this,c,l)};a=u.bind(this,null),n.on("error",u),n.on("response",a)}}.bind(this)),n};ot.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))};ot.prototype.toString=function(){return"[object FormData]"}});function lP(){return{name:Kq,async sendRequest(e,t){if(e.formData){let n=e.headers.get("Content-Type");n&&n.indexOf("application/x-www-form-urlencoded")!==-1?(e.body=LLe(e.formData),e.formData=void 0):await FLe(e.formData,e)}return t(e)}}}function LLe(e){let t=new URLSearchParams;for(let[n,r]of Object.entries(e))if(Array.isArray(r))for(let i of r)t.append(n,i.toString());else t.append(n,r.toString());return t.toString()}async function FLe(e,t){let n=new doe.default;for(let i of Object.keys(e)){let o=e[i];if(Array.isArray(o))for(let s of o)n.append(i,s);else n.append(i,o)}t.body=n,t.formData=void 0;let r=t.headers.get("Content-Type");r&&r.indexOf("multipart/form-data")!==-1&&t.headers.set("Content-Type",`multipart/form-data; boundary=${n.getBoundary()}`);try{let i=await new Promise((o,s)=>{n.getLength((a,u)=>{a?s(a):o(u)})});t.headers.set("Content-Length",i)}catch{}}var doe,Kq,Xq=D(()=>{doe=B(loe()),Kq="formDataPolicy"});var poe=_(Qq=>{"use strict";Object.defineProperty(Qq,"__esModule",{value:!0});function MLe(e){return function(t,n){return new Promise((r,i)=>{e.call(this,t,n,(o,s)=>{o?i(o):r(s)})})}}Qq.default=MLe});var ej=_((Zq,moe)=>{"use strict";var foe=Zq&&Zq.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ULe=require("events"),qLe=foe(yu()),jLe=foe(poe()),cE=qLe.default("agent-base");function HLe(e){return!!e&&typeof e.addRequest=="function"}function Jq(){let{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function dP(e,t){return new dP.Agent(e,t)}(function(e){class t extends ULe.EventEmitter{constructor(r,i){super();let o=i;typeof r=="function"?this.callback=r:r&&(o=r),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Jq()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Jq()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=Jq()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,r._last=!0,r.shouldKeepAlive=!1;let s=!1,a=null,u=o.timeout||this.timeout,c=f=>{r._hadError||(r.emit("error",f),r._hadError=!0)},l=()=>{a=null,s=!0;let f=new Error(`A "socket" was not created for HTTP request before ${u}ms`);f.code="ETIMEOUT",c(f)},d=f=>{s||(a!==null&&(clearTimeout(a),a=null),c(f))},p=f=>{if(s)return;if(a!=null&&(clearTimeout(a),a=null),HLe(f)){cE("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(r,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),r.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);c(m)};if(typeof this.callback!="function"){c(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(cE("Converting legacy callback function to promise"),this.promisifiedCallback=jLe.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(a=setTimeout(l,u)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{cE("Resolving socket for %o request: %o",o.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,o)).then(p,d)}catch(f){Promise.reject(f).catch(d)}}freeSocket(r,i){cE("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){cE("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(dP||(dP={}));moe.exports=dP});var hoe=_(lE=>{"use strict";var $Le=lE&&lE.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lE,"__esModule",{value:!0});var BLe=$Le(yu()),uE=BLe.default("https-proxy-agent:parse-proxy-response");function VLe(e){return new Promise((t,n)=>{let r=0,i=[];function o(){let d=e.read();d?l(d):e.once("readable",o)}function s(){e.removeListener("end",u),e.removeListener("error",c),e.removeListener("close",a),e.removeListener("readable",o)}function a(d){uE("onclose had error %o",d)}function u(){uE("onend")}function c(d){s(),uE("onerror %o",d),n(d)}function l(d){i.push(d),r+=d.length;let p=Buffer.concat(i,r);if(p.indexOf(`\r
\r
`)===-1){uE("have not received end of HTTP headers yet..."),o();return}let m=p.toString("ascii",0,p.indexOf(`\r
`)),h=+m.split(" ")[1];uE("got proxy server response: %o",m),t({statusCode:h,buffered:p})}e.on("error",c),e.on("close",a),e.on("end",u),o()})}lE.default=VLe});var yoe=_(pf=>{"use strict";var WLe=pf&&pf.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},qg=pf&&pf.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pf,"__esModule",{value:!0});var goe=qg(require("net")),voe=qg(require("tls")),GLe=qg(require("url")),zLe=qg(require("assert")),YLe=qg(yu()),KLe=ej(),XLe=qg(hoe()),dE=YLe.default("https-proxy-agent:agent"),tj=class extends KLe.Agent{constructor(t){let n;if(typeof t=="string"?n=GLe.default.parse(t):n=t,!n)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");dE("creating new HttpsProxyAgent instance: %o",n),super(n);let r=Object.assign({},n);this.secureProxy=n.secureProxy||ZLe(r.protocol),r.host=r.hostname||r.host,typeof r.port=="string"&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(t,n){return WLe(this,void 0,void 0,function*(){let{proxy:r,secureProxy:i}=this,o;i?(dE("Creating `tls.Socket`: %o",r),o=voe.default.connect(r)):(dE("Creating `net.Socket`: %o",r),o=goe.default.connect(r));let s=Object.assign({},r.headers),u=`CONNECT ${`${n.host}:${n.port}`} HTTP/1.1\r
`;r.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:c,port:l,secureEndpoint:d}=n;JLe(l,d)||(c+=`:${l}`),s.Host=c,s.Connection="close";for(let v of Object.keys(s))u+=`${v}: ${s[v]}\r
`;let p=XLe.default(o);o.write(`${u}\r
`);let{statusCode:f,buffered:m}=yield p;if(f===200){if(t.once("socket",QLe),n.secureEndpoint){dE("Upgrading socket connection to TLS");let v=n.servername||n.host;return voe.default.connect(Object.assign(Object.assign({},eFe(n,"host","hostname","path","port")),{socket:o,servername:v}))}return o}o.destroy();let h=new goe.default.Socket({writable:!1});return h.readable=!0,t.once("socket",v=>{dE("replaying proxy buffer for failed request"),zLe.default(v.listenerCount("data")>0),v.push(m),v.push(null)}),h})}};pf.default=tj;function QLe(e){e.resume()}function JLe(e,t){return!!(!t&&e===80||t&&e===443)}function ZLe(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function eFe(e,...t){let n={},r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}});var woe=_((ij,xoe)=>{"use strict";var tFe=ij&&ij.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},nj=tFe(yoe());function rj(e){return new nj.default(e)}(function(e){e.HttpsProxyAgent=nj.default,e.prototype=nj.default.prototype})(rj||(rj={}));xoe.exports=rj});var Eoe=_(oj=>{"use strict";Object.defineProperty(oj,"__esModule",{value:!0});function nFe(e,t,{signal:n}={}){return new Promise((r,i)=>{function o(){n==null||n.removeEventListener("abort",o),e.removeListener(t,s),e.removeListener("error",a)}function s(...u){o(),r(u)}function a(u){o(),i(u)}n==null||n.addEventListener("abort",o),e.on(t,s),e.on("error",a)})}oj.default=nFe});var boe=_(ff=>{"use strict";var rFe=ff&&ff.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},pE=ff&&ff.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ff,"__esModule",{value:!0});var iFe=pE(require("net")),oFe=pE(require("tls")),sj=pE(require("url")),sFe=pE(yu()),aFe=pE(Eoe()),cFe=ej(),Zl=(0,sFe.default)("http-proxy-agent");function uFe(e){return typeof e=="string"?/^https:?$/i.test(e):!1}var aj=class extends cFe.Agent{constructor(t){let n;if(typeof t=="string"?n=sj.default.parse(t):n=t,!n)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Zl("Creating new HttpProxyAgent instance: %o",n),super(n);let r=Object.assign({},n);this.secureProxy=n.secureProxy||uFe(r.protocol),r.host=r.hostname||r.host,typeof r.port=="string"&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(t,n){return rFe(this,void 0,void 0,function*(){let{proxy:r,secureProxy:i}=this,o=sj.default.parse(t.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=n.hostname||n.host||null),o.port==null&&typeof n.port&&(o.port=String(n.port)),o.port==="80"&&(o.port=""),t.path=sj.default.format(o),r.auth&&t.setHeader("Proxy-Authorization",`Basic ${Buffer.from(r.auth).toString("base64")}`);let s;if(i?(Zl("Creating `tls.Socket`: %o",r),s=oFe.default.connect(r)):(Zl("Creating `net.Socket`: %o",r),s=iFe.default.connect(r)),t._header){let a,u;Zl("Regenerating stored HTTP header string for request"),t._header=null,t._implicitHeader(),t.output&&t.output.length>0?(Zl("Patching connection write() output buffer with updated header"),a=t.output[0],u=a.indexOf(`\r
\r
`)+4,t.output[0]=t._header+a.substring(u),Zl("Output buffer: %o",t.output)):t.outputData&&t.outputData.length>0&&(Zl("Patching connection write() output buffer with updated header"),a=t.outputData[0].data,u=a.indexOf(`\r
\r
`)+4,t.outputData[0].data=t._header+a.substring(u),Zl("Output buffer: %o",t.outputData[0].data))}return yield(0,aFe.default)(s,"connect"),s})}};ff.default=aj});var Coe=_((lj,_oe)=>{"use strict";var lFe=lj&&lj.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},cj=lFe(boe());function uj(e){return new cj.default(e)}(function(e){e.HttpProxyAgent=cj.default,e.prototype=cj.default.prototype})(uj||(uj={}));_oe.exports=uj});function pP(e){if(process.env[e])return process.env[e];if(process.env[e.toLowerCase()])return process.env[e.toLowerCase()]}function gFe(){if(!process)return;let e=pP(dFe),t=pP(fFe),n=pP(pFe);return e||t||n}function vFe(e,t,n){if(t.length===0)return!1;let r=new URL(e).hostname;if(n!=null&&n.has(r))return n.get(r);let i=!1;for(let o of t)o[0]==="."?(r.endsWith(o)||r.length===o.length-1&&r===o.slice(1))&&(i=!0):r===o&&(i=!0);return n==null||n.set(r,i),i}function yFe(){let e=pP(mFe);return Roe=!0,e?e.split(",").map(t=>t.trim()).filter(t=>t.length):[]}function pj(e){if(!e&&(e=gFe(),!e))return;let t=new URL(e);return{host:(t.protocol?t.protocol+"//":"")+t.hostname,port:Number.parseInt(t.port||"80"),username:t.username,password:t.password}}function Toe(e,{headers:t,tlsSettings:n}){let r;try{r=new URL(e.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}n&&gr.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:r.hostname,port:e.port,protocol:r.protocol,headers:t.toJSON()};return e.username&&e.password?i.auth=`${e.username}:${e.password}`:e.username&&(i.auth=`${e.username}`),i}function xFe(e,t){if(e.agent)return;let r=new URL(e.url).protocol!=="https:",i=e.proxySettings;if(i)if(r){if(!t.httpProxyAgent){let o=Toe(i,e);t.httpProxyAgent=new Poe.HttpProxyAgent(o)}e.agent=t.httpProxyAgent}else{if(!t.httpsProxyAgent){let o=Toe(i,e);t.httpsProxyAgent=new Ioe.HttpsProxyAgent(o)}e.agent=t.httpsProxyAgent}}function fP(e=pj(),t){Roe||Soe.push(...yFe());let n={};return{name:dj,async sendRequest(r,i){var o;return!r.proxySettings&&!vFe(r.url,(o=t==null?void 0:t.customNoProxyList)!==null&&o!==void 0?o:Soe,t!=null&&t.customNoProxyList?void 0:hFe)&&(r.proxySettings=e),r.proxySettings&&xFe(r,n),i(r)}}}var Ioe,Poe,dFe,pFe,fFe,mFe,dj,Soe,Roe,hFe,fj=D(()=>{Ioe=B(woe()),Poe=B(Coe());Ag();dFe="HTTPS_PROXY",pFe="HTTP_PROXY",fFe="ALL_PROXY",mFe="NO_PROXY",dj="proxyPolicy",Soe=[],Roe=!1,hFe=new Map});function mP(e="x-ms-client-request-id"){return{name:mj,async sendRequest(t,n){return t.headers.has(e)||t.headers.set(e,t.requestId),n(t)}}}var mj,hj=D(()=>{mj="setClientRequestIdPolicy"});function hP(e){return{name:gj,sendRequest:async(t,n)=>(t.tlsSettings||(t.tlsSettings=e),n(t))}}var gj,vj=D(()=>{gj="tlsPolicy"});function Aoe(e={}){let t=new mf(e.parentContext);return e.span&&(t=t.setValue(jg.span,e.span)),e.namespace&&(t=t.setValue(jg.namespace,e.namespace)),t}var jg,mf,yj=D(()=>{jg={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};mf=class{constructor(t){this._contextMap=t instanceof mf?new Map(t._contextMap):new Map}setValue(t,n){let r=new mf(this);return r._contextMap.set(t,n),r}getValue(t){return this._contextMap.get(t)}deleteValue(t){let n=new mf(this);return n._contextMap.delete(t),n}}});function wFe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function EFe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:wFe(),tracingContext:Aoe({parentContext:t.tracingContext})}),withContext(e,t,...n){return t(...n)}}}function fE(){return xj||(xj=EFe()),xj}var xj,Doe=D(()=>{yj()});function wj(e){let{namespace:t,packageName:n,packageVersion:r}=e;function i(c,l,d){var p;let f=fE().startSpan(c,Object.assign(Object.assign({},d),{packageName:n,packageVersion:r,tracingContext:(p=l==null?void 0:l.tracingOptions)===null||p===void 0?void 0:p.tracingContext})),m=f.tracingContext,h=f.span;m.getValue(jg.namespace)||(m=m.setValue(jg.namespace,t)),h.setAttribute("az.namespace",m.getValue(jg.namespace));let v=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l==null?void 0:l.tracingOptions),{tracingContext:m})});return{span:h,updatedOptions:v}}async function o(c,l,d,p){let{span:f,updatedOptions:m}=i(c,l,p);try{let h=await s(m.tracingOptions.tracingContext,()=>Promise.resolve(d(m,f)));return f.setStatus({status:"success"}),h}catch(h){throw f.setStatus({status:"error",error:h}),h}finally{f.end()}}function s(c,l,...d){return fE().withContext(c,l,...d)}function a(c){return fE().parseTraceparentHeader(c)}function u(c){return fE().createRequestHeaders(c)}return{startSpan:i,withSpan:o,withContext:s,parseTraceparentHeader:a,createRequestHeaders:u}}var koe=D(()=>{Doe();yj()});var Ooe=D(()=>{koe()});var Noe,Loe,Foe=D(()=>{Noe=require("util"),Loe=Noe.inspect.custom});function gP(e){return e instanceof ii?!0:kg(e)&&e.name==="RestError"}var bFe,ii,vP=D(()=>{Ng();Foe();Tq();bFe=new Lg,ii=class extends Error{constructor(t,n={}){super(t),this.name="RestError",this.code=n.code,this.statusCode=n.statusCode,this.request=n.request,this.response=n.response,Object.setPrototypeOf(this,ii.prototype)}[Loe](){return`RestError: ${this.message} 
 ${bFe.sanitize(this)}`}};ii.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";ii.PARSE_ERROR="PARSE_ERROR"});function yP(e={}){let t=Z0(e.userAgentPrefix),n=_Fe();return{name:Ej,async sendRequest(r,i){var o,s;if(!n||!(!((o=r.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(r);let{span:a,tracingContext:u}=(s=CFe(n,r,t))!==null&&s!==void 0?s:{};if(!a||!u)return i(r);try{let c=await n.withContext(u,i,r);return TFe(a,c),c}catch(c){throw SFe(a,c),c}}}}function _Fe(){try{return wj({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:J0})}catch(e){gr.warning(`Error when creating the TracingClient: ${Og(e)}`);return}}function CFe(e,t,n){try{let{span:r,updatedOptions:i}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":t.method,"http.url":t.url,requestId:t.requestId}});if(!r.isRecording()){r.end();return}n&&r.setAttribute("http.user_agent",n);let o=e.createRequestHeaders(i.tracingOptions.tracingContext);for(let[s,a]of Object.entries(o))t.headers.set(s,a);return{span:r,tracingContext:i.tracingOptions.tracingContext}}catch(r){gr.warning(`Skipping creating a tracing span due to an error: ${Og(r)}`);return}}function SFe(e,t){try{e.setStatus({status:"error",error:kg(t)?t:void 0}),gP(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(n){gr.warning(`Skipping tracing span processing due to an error: ${Og(n)}`)}}function TFe(e,t){try{e.setAttribute("http.status_code",t.status);let n=t.headers.get("x-ms-request-id");n&&e.setAttribute("serviceRequestId",n),e.setStatus({status:"success"}),e.end()}catch(n){gr.warning(`Skipping tracing span processing due to an error: ${Og(n)}`)}}var Ej,bj=D(()=>{Ooe();Dq();kq();Ag();Ng();vP();Ej="tracingPolicy"});function Moe(e){let t=$0();return z0&&(e.tlsOptions&&t.addPolicy(hP(e.tlsOptions)),t.addPolicy(fP(e.proxyOptions)),t.addPolicy(tP())),t.addPolicy(lP()),t.addPolicy(eP(e.userAgentOptions)),t.addPolicy(mP()),t.addPolicy(aP(e.retryOptions),{phase:"Retry"}),t.addPolicy(yP(e.userAgentOptions),{afterPhase:"Retry"}),z0&&t.addPolicy(Q0(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy(X0(e.loggingOptions),{afterPhase:"Sign"}),t}var Uoe=D(()=>{Pq();pq();Aq();Nq();Fq();Uq();Xq();Ng();fj();hj();vj();bj()});function xP(e){return e.toLowerCase()}function*IFe(e){for(let t of e.values())yield[t.name,t.value]}function Hg(e){return new _j(e)}var _j,wP=D(()=>{_j=class{constructor(t){if(this._headersMap=new Map,t)for(let n of Object.keys(t))this.set(n,t[n])}set(t,n){this._headersMap.set(xP(t),{name:t,value:String(n)})}get(t){var n;return(n=this._headersMap.get(xP(t)))===null||n===void 0?void 0:n.value}has(t){return this._headersMap.has(xP(t))}delete(t){this._headersMap.delete(xP(t))}toJSON(t={}){let n={};if(t.preserveCase)for(let r of this._headersMap.values())n[r.name]=r.value;else for(let[r,i]of this._headersMap)n[r]=i.value;return n}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return IFe(this._headersMap)}}});function mE(e){return e&&typeof e.pipe=="function"}function qoe(e){return new Promise(t=>{e.on("close",t),e.on("end",t),e.on("error",t)})}function Hoe(e){return e&&typeof e.byteLength=="number"}function RFe(e){let t=Hg();for(let n of Object.keys(e.headers)){let r=e.headers[n];Array.isArray(r)?r.length>0&&t.set(n,r[0]):r&&t.set(n,r)}return t}function AFe(e,t){let n=t.get("Content-Encoding");if(n==="gzip"){let r=bP.createGunzip();return e.pipe(r),r}else if(n==="deflate"){let r=bP.createInflate();return e.pipe(r),r}return e}function DFe(e){return new Promise((t,n)=>{let r=[];e.on("data",i=>{Buffer.isBuffer(i)?r.push(i):r.push(Buffer.from(i))}),e.on("end",()=>{t(Buffer.concat(r).toString("utf8"))}),e.on("error",i=>{i&&(i==null?void 0:i.name)==="AbortError"?n(i):n(new ii(`Error reading response as text: ${i.message}`,{code:ii.PARSE_ERROR}))})})}function kFe(e){return e?Buffer.isBuffer(e)?e.length:mE(e)?null:Hoe(e)?e.byteLength:typeof e=="string"?Buffer.from(e).length:null:0}function $oe(){return new Cj}var $g,Bg,bP,joe,PFe,EP,Cj,Boe=D(()=>{$g=B(require("http")),Bg=B(require("https")),bP=B(require("zlib")),joe=require("stream");K0();wP();vP();Ag();PFe={};EP=class extends joe.Transform{constructor(t){super(),this.loadedBytes=0,this.progressCallback=t}_transform(t,n,r){this.push(t),this.loadedBytes+=t.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),r()}catch(i){r(i)}}},Cj=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(t){var n,r,i;let o=new oE,s;if(t.abortSignal){if(t.abortSignal.aborted)throw new Aa("The operation was aborted.");s=d=>{d.type==="abort"&&o.abort()},t.abortSignal.addEventListener("abort",s)}t.timeout>0&&setTimeout(()=>{o.abort()},t.timeout);let a=t.headers.get("Accept-Encoding"),u=(a==null?void 0:a.includes("gzip"))||(a==null?void 0:a.includes("deflate")),c=typeof t.body=="function"?t.body():t.body;if(c&&!t.headers.has("Content-Length")){let d=kFe(c);d!==null&&t.headers.set("Content-Length",d)}let l;try{if(c&&t.onUploadProgress){let v=t.onUploadProgress,g=new EP(v);g.on("error",y=>{gr.error("Error in upload progress",y)}),mE(c)?c.pipe(g):g.end(c),c=g}let d=await this.makeRequest(t,o,c),p=RFe(d),m={status:(n=d.statusCode)!==null&&n!==void 0?n:0,headers:p,request:t};if(t.method==="HEAD")return d.resume(),m;l=u?AFe(d,p):d;let h=t.onDownloadProgress;if(h){let v=new EP(h);v.on("error",g=>{gr.error("Error in download progress",g)}),l.pipe(v),l=v}return!((r=t.streamResponseStatusCodes)===null||r===void 0)&&r.has(Number.POSITIVE_INFINITY)||!((i=t.streamResponseStatusCodes)===null||i===void 0)&&i.has(m.status)?m.readableStreamBody=l:m.bodyAsText=await DFe(l),m}finally{if(t.abortSignal&&s){let d=Promise.resolve();mE(c)&&(d=qoe(c));let p=Promise.resolve();mE(l)&&(p=qoe(l)),Promise.all([d,p]).then(()=>{var f;s&&((f=t.abortSignal)===null||f===void 0||f.removeEventListener("abort",s))}).catch(f=>{gr.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(t,n,r){var i;let o=new URL(t.url),s=o.protocol!=="https:";if(s&&!t.allowInsecureConnection)throw new Error(`Cannot connect to ${t.url} while allowInsecureConnection is false.`);let u={agent:(i=t.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(t,s),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:t.method,headers:t.headers.toJSON({preserveCase:!0})};return new Promise((c,l)=>{let d=s?$g.request(u,c):Bg.request(u,c);d.once("error",p=>{var f;l(new ii(p.message,{code:(f=p.code)!==null&&f!==void 0?f:ii.REQUEST_SEND_ERROR,request:t}))}),n.signal.addEventListener("abort",()=>{let p=new Aa("The operation was aborted.");d.destroy(p),l(p)}),r&&mE(r)?r.pipe(d):r?typeof r=="string"||Buffer.isBuffer(r)?d.end(r):Hoe(r)?d.end(ArrayBuffer.isView(r)?Buffer.from(r.buffer):Buffer.from(r)):(gr.error("Unrecognized body type",r),l(new ii("Unrecognized body type"))):d.end()})}getOrCreateAgent(t,n){var r;let i=t.disableKeepAlive;if(n)return i?$g.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new $g.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!t.tlsSettings)return Bg.globalAgent;let o=(r=t.tlsSettings)!==null&&r!==void 0?r:PFe,s=this.cachedHttpsAgents.get(o);return s&&s.options.keepAlive===!i||(gr.info("No cached TLS Agent exist, creating a new Agent"),s=new Bg.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,s)),s}}}});function Voe(){return $oe()}var Woe=D(()=>{Boe()});function Sj(){return _P>CP.length-16&&(Goe.default.randomFillSync(CP),_P=0),CP.slice(_P,_P+=16)}var Goe,CP,_P,zoe=D(()=>{Goe=B(require("crypto")),CP=new Uint8Array(256),_P=CP.length});var Yoe,Koe=D(()=>{Yoe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function OFe(e){return typeof e=="string"&&Yoe.test(e)}var Xoe,Qoe=D(()=>{Koe();Xoe=OFe});function NFe(e,t=0){let n=(vr[e[t+0]]+vr[e[t+1]]+vr[e[t+2]]+vr[e[t+3]]+"-"+vr[e[t+4]]+vr[e[t+5]]+"-"+vr[e[t+6]]+vr[e[t+7]]+"-"+vr[e[t+8]]+vr[e[t+9]]+"-"+vr[e[t+10]]+vr[e[t+11]]+vr[e[t+12]]+vr[e[t+13]]+vr[e[t+14]]+vr[e[t+15]]).toLowerCase();if(!Xoe(n))throw TypeError("Stringified UUID is invalid");return n}var vr,Joe,Zoe=D(()=>{Qoe();vr=[];for(let e=0;e<256;++e)vr.push((e+256).toString(16).substr(1));Joe=NFe});function LFe(e,t,n){e=e||{};let r=e.random||(e.rng||Sj)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return Joe(r)}var Tj,ese=D(()=>{zoe();Zoe();Tj=LFe});var tse=D(()=>{ese()});function nse(){return Tj()}var rse=D(()=>{tse()});function ise(e){return new Ij(e)}var Ij,ose=D(()=>{wP();rse();Ij=class{constructor(t){var n,r,i,o,s,a,u;this.url=t.url,this.body=t.body,this.headers=(n=t.headers)!==null&&n!==void 0?n:Hg(),this.method=(r=t.method)!==null&&r!==void 0?r:"GET",this.timeout=(i=t.timeout)!==null&&i!==void 0?i:0,this.formData=t.formData,this.disableKeepAlive=(o=t.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=t.proxySettings,this.streamResponseStatusCodes=t.streamResponseStatusCodes,this.withCredentials=(s=t.withCredentials)!==null&&s!==void 0?s:!1,this.abortSignal=t.abortSignal,this.tracingOptions=t.tracingOptions,this.onUploadProgress=t.onUploadProgress,this.onDownloadProgress=t.onDownloadProgress,this.requestId=t.requestId||nse(),this.allowInsecureConnection=(a=t.allowInsecureConnection)!==null&&a!==void 0?a:!1,this.enableBrowserStreams=(u=t.enableBrowserStreams)!==null&&u!==void 0?u:!1}}});function ase(e={}){var t;return Da([Mg(Object.assign(Object.assign({},e),{ignoreSystemErrors:!0}))],{maxRetries:(t=e.maxRetries)!==null&&t!==void 0?t:3})}var sse,cse=D(()=>{sP();Ug();sse="exponentialRetryPolicy"});function use(e={}){var t;return{name:Pj,sendRequest:Da([Mg(Object.assign(Object.assign({},e),{ignoreHttpStatusCodes:!0}))],{maxRetries:(t=e.maxRetries)!==null&&t!==void 0?t:3}).sendRequest}}var Pj,lse=D(()=>{sP();Ug();Pj="systemErrorRetryPolicy"});function dse(e={}){var t;return{name:Rj,sendRequest:Da([iP()],{maxRetries:(t=e.maxRetries)!==null&&t!==void 0?t:3}).sendRequest}}var Rj,pse=D(()=>{oP();Ug();Rj="throttlingRetryPolicy"});async function MFe(e,t,n){async function r(){if(Date.now()<n)try{return await e()}catch{return null}else{let o=await e();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await r();for(;i===null;)await nP(t),i=await r();return i}function fse(e,t){let n=null,r=null,i,o=Object.assign(Object.assign({},FFe),t),s={get isRefreshing(){return n!==null},get shouldRefresh(){var u;return!s.isRefreshing&&((u=r==null?void 0:r.expiresOnTimestamp)!==null&&u!==void 0?u:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return r===null||r.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function a(u,c){var l;return s.isRefreshing||(n=MFe(()=>e.getToken(u,c),o.retryIntervalInMs,(l=r==null?void 0:r.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(p=>(n=null,r=p,i=c.tenantId,r)).catch(p=>{throw n=null,r=null,i=void 0,p})),n}return async(u,c)=>i!==c.tenantId||!!c.claims||s.mustRefresh?a(u,c):(s.shouldRefresh&&a(u,c),r)}var FFe,mse=D(()=>{rP();FFe={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2}});async function UFe(e){let{scopes:t,getAccessToken:n,request:r}=e,i={abortSignal:r.abortSignal,tracingOptions:r.tracingOptions},o=await n(t,i);o&&e.request.headers.set("Authorization",`Bearer ${o.token}`)}function qFe(e){let t=e.headers.get("WWW-Authenticate");if(e.status===401&&t)return t}function hse(e){var t;let{credential:n,scopes:r,challengeCallbacks:i}=e,o=e.logger||gr,s=Object.assign({authorizeRequest:(t=i==null?void 0:i.authorizeRequest)!==null&&t!==void 0?t:UFe,authorizeRequestOnChallenge:i==null?void 0:i.authorizeRequestOnChallenge},i),a=n?fse(n):()=>Promise.resolve(null);return{name:Aj,async sendRequest(u,c){if(!u.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await s.authorizeRequest({scopes:Array.isArray(r)?r:[r],request:u,getAccessToken:a,logger:o});let l,d;try{l=await c(u)}catch(p){d=p,l=p.response}if(s.authorizeRequestOnChallenge&&(l==null?void 0:l.status)===401&&qFe(l)&&await s.authorizeRequestOnChallenge({scopes:Array.isArray(r)?r:[r],request:u,response:l,getAccessToken:a,logger:o}))return c(u);if(d)throw d;return l}}}var Aj,gse=D(()=>{mse();Ag();Aj="bearerTokenAuthenticationPolicy"});function vse(){return{name:Dj,async sendRequest(e,t){if(typeof e.body=="string"&&e.body.startsWith("[")){let n=JSON.parse(e.body);Array.isArray(n)&&(e.body=n.map(r=>JSON.stringify(r)+`
`).join(""))}return t(e)}}}var Dj,yse=D(()=>{Dj="ndJsonPolicy"});var xse={};Xs(xse,{RestError:()=>ii,bearerTokenAuthenticationPolicy:()=>hse,bearerTokenAuthenticationPolicyName:()=>Aj,createDefaultHttpClient:()=>Voe,createEmptyPipeline:()=>$0,createHttpHeaders:()=>Hg,createPipelineFromOptions:()=>Moe,createPipelineRequest:()=>ise,decompressResponsePolicy:()=>tP,decompressResponsePolicyName:()=>Lq,defaultRetryPolicy:()=>aP,exponentialRetryPolicy:()=>ase,exponentialRetryPolicyName:()=>sse,formDataPolicy:()=>lP,formDataPolicyName:()=>Kq,getDefaultProxySettings:()=>pj,isRestError:()=>gP,logPolicy:()=>X0,logPolicyName:()=>Iq,ndJsonPolicy:()=>vse,ndJsonPolicyName:()=>Dj,proxyPolicy:()=>fP,proxyPolicyName:()=>dj,redirectPolicy:()=>Q0,redirectPolicyName:()=>Rq,retryPolicy:()=>Da,setClientRequestIdPolicy:()=>mP,setClientRequestIdPolicyName:()=>mj,systemErrorRetryPolicy:()=>use,systemErrorRetryPolicyName:()=>Pj,throttlingRetryPolicy:()=>dse,throttlingRetryPolicyName:()=>Rj,tlsPolicy:()=>hP,tlsPolicyName:()=>gj,tracingPolicy:()=>yP,tracingPolicyName:()=>Ej,userAgentPolicy:()=>eP,userAgentPolicyName:()=>Oq});var wse=D(()=>{pq();Uoe();Woe();wP();ose();vP();Fq();cse();hj();Pq();fj();Aq();lse();pse();Ug();bj();Uq();Nq();vj();Xq();gse();yse()});var _se=_((hE,bse)=>{"use strict";var jFe=hE&&hE.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},HFe=hE&&hE.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Ese=(wse(),qi(xse)),$Fe="https://monitor.azure.com//.default";function BFe(e){return null}var VFe=function(){function e(t){var n=[$Fe];this._azureTokenPolicy=Ese.bearerTokenAuthenticationPolicy({credential:t,scopes:n})}return e.prototype.addAuthorizationHeader=function(t){return jFe(this,void 0,void 0,function(){var n,r;return HFe(this,function(i){switch(i.label){case 0:return n="authorization",r=Ese.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(r,BFe)];case 1:return i.sent(),t.headers[n]=r.headers.get(n),[2]}})})},e}();bse.exports=VFe});var Sse=_((uat,Cse)=>{"use strict";var WFe=Xt(),GFe=pr(),zFe=function(){function e(t,n,r,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=n,this._getBatchIntervalMs=r,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(t,n,r){this._sender.setDiskRetryMode(t,n,r)},e.prototype.send=function(t){var n=this;if(!this._isDisabled()){if(!t){WFe.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){n._timeoutHandle=null,n.triggerSend(!1)},this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(t,n){var r=this._buffer.length<1;r||(t||GFe.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof n=="function"&&n("data saved on crash")):this._sender.send(this._buffer,n)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&typeof n=="function"&&n("no data to send")},e}();Cse.exports=zFe});var Tse=_(SP=>{"use strict";Object.defineProperty(SP,"__esModule",{value:!0});SP.azureRoleEnvironmentTelemetryProcessor=void 0;function YFe(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e.tags[t.keys.cloudRoleInstance]=process.env.WEBSITE_INSTANCE_ID)}SP.azureRoleEnvironmentTelemetryProcessor=YFe});var Rse=_(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});Vg.getSamplingHashCode=Vg.samplingTelemetryProcessor=void 0;var Ise=Fr();function KFe(e,t){var n=e.sampleRate,r=!1;return n==null||n>=100||e.data&&Ise.TelemetryType.Metric===Ise.baseTypeToTelemetryType(e.data.baseType)?!0:(t.correlationContext&&t.correlationContext.operation?r=Pse(t.correlationContext.operation.id)<n:r=Math.random()*100<n,r)}Vg.samplingTelemetryProcessor=KFe;function Pse(e){var t=-2147483648,n=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(var i=0;i<e.length;i++)r=((r<<5)+r|0)+e.charCodeAt(i)|0;return r=r<=t?n:Math.abs(r),r/n*100}Vg.getSamplingHashCode=Pse});var Ase=_(TP=>{"use strict";Object.defineProperty(TP,"__esModule",{value:!0});TP.performanceMetricsTelemetryProcessor=void 0;var kj=I0(),Oj=Fr();function XFe(e,t){switch(t&&t.addDocument(e),e.data.baseType){case Oj.TelemetryTypeString.Exception:kj.countException();break;case Oj.TelemetryTypeString.Request:var n=e.data.baseData;kj.countRequest(n.duration,n.success);break;case Oj.TelemetryTypeString.Dependency:var r=e.data.baseData;kj.countDependency(r.duration,r.success);break}return!0}TP.performanceMetricsTelemetryProcessor=XFe});var Dse=_(Wg=>{"use strict";var ka=Wg&&Wg.__assign||function(){return ka=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ka.apply(this,arguments)};Object.defineProperty(Wg,"__esModule",{value:!0});Wg.preAggregatedMetricsTelemetryProcessor=void 0;var QFe=Fr(),gE=BU(),IP=Fr();function JFe(e,t){if(gE.isEnabled())switch(e.data.baseType){case IP.TelemetryTypeString.Exception:var n=e.data.baseData;n.properties=ka(ka({},n.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var r={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};gE.countException(r);break;case IP.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=ka(ka({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var o={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:QFe.SeverityLevel[i.severity]};gE.countTrace(o);break;case IP.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=ka(ka({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};gE.countRequest(s.duration,a);break;case IP.TelemetryTypeString.Dependency:var u=e.data.baseData;u.properties=ka(ka({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var c={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:u.success,dependencyType:u.type,dependencyTarget:u.target,dependencyResultCode:u.resultCode};gE.countDependency(u.duration,c);break}return!0}Wg.preAggregatedMetricsTelemetryProcessor=JFe});var kse=_(Oa=>{"use strict";var ZFe=Oa&&Oa.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),PP=Oa&&Oa.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&ZFe(t,e,n)};Object.defineProperty(Oa,"__esModule",{value:!0});PP(Tse(),Oa);PP(Rse(),Oa);PP(Ase(),Oa);PP(Dse(),Oa)});var Nj=_((hat,Lse)=>{"use strict";var Se=Fr(),ns=pr(),Ose=jl(),e1e=function(){function e(){}return e.createEnvelope=function(t,n,r,i,o){var s=null;switch(n){case Se.TelemetryType.Trace:s=e.createTraceData(t);break;case Se.TelemetryType.Dependency:s=e.createDependencyData(t);break;case Se.TelemetryType.Event:s=e.createEventData(t);break;case Se.TelemetryType.Exception:s=e.createExceptionData(t);break;case Se.TelemetryType.Request:s=e.createRequestData(t);break;case Se.TelemetryType.Metric:s=e.createMetricData(t);break;case Se.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case Se.TelemetryType.PageView:s=e.createPageViewData(t);break}if(s&&s.baseData&&Se.domainSupportsProperties(s.baseData)){if(r)if(!s.baseData.properties)s.baseData.properties=r;else for(var a in r)s.baseData.properties[a]||(s.baseData.properties[a]=r[a]);e.addAzureFunctionsCorrelationProperties(s.baseData.properties),s.baseData.properties&&(s.baseData.properties=ns.validateStringMap(s.baseData.properties))}var u=o&&o.instrumentationKey||"",c=new Se.Envelope;return c.data=s,c.iKey=u,c.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,t.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=o?o.samplingPercentage:100,n===Se.TelemetryType.Metric&&(c.sampleRate=100),c},e.addAzureFunctionsCorrelationProperties=function(t){var n=Ose.CorrelationContextManager.getCurrentContext();if(n&&n.customProperties&&n.customProperties.getProperty instanceof Function){t=t||{};var r=n.customProperties.getProperty("InvocationId");r&&(t.InvocationId=r),r=n.customProperties.getProperty("ProcessId"),r&&(t.ProcessId=r),r=n.customProperties.getProperty("LogLevel"),r&&(t.LogLevel=r),r=n.customProperties.getProperty("Category"),r&&(t.Category=r),r=n.customProperties.getProperty("HostInstanceId"),r&&(t.HostInstanceId=r),r=n.customProperties.getProperty("AzFuncLiveLogsSessionId"),r&&(t.AzFuncLiveLogsSessionId=r)}},e.createTraceData=function(t){var n=new Se.MessageData;n.message=t.message,n.properties=t.properties,isNaN(t.severity)?n.severityLevel=Se.SeverityLevel.Information:n.severityLevel=t.severity;var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Trace),r.baseData=n,r},e.createDependencyData=function(t){var n=new Se.RemoteDependencyData;typeof t.name=="string"&&(n.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),n.data=t.data,n.target=t.target,n.duration=ns.msToTimeSpan(t.duration),n.success=t.success,n.type=t.dependencyTypeName,n.properties=t.properties,n.resultCode=t.resultCode?t.resultCode.toString():"0",t.id?n.id=t.id:n.id=ns.w3cTraceId();var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Dependency),r.baseData=n,r},e.createEventData=function(t){var n=new Se.EventData;n.name=t.name,n.properties=t.properties,n.measurements=t.measurements;var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Event),r.baseData=n,r},e.createExceptionData=function(t){var n=new Se.ExceptionData;n.properties=t.properties,isNaN(t.severity)?n.severityLevel=Se.SeverityLevel.Error:n.severityLevel=t.severity,n.measurements=t.measurements,n.exceptions=[];var r=t.exception.stack,i=new Se.ExceptionDetails;i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(r),i.hasFullStack=ns.isArray(i.parsedStack)&&i.parsedStack.length>0,n.exceptions.push(i);var o=new Se.Data;return o.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Exception),o.baseData=n,o},e.createRequestData=function(t){var n=new Se.RequestData;t.id?n.id=t.id:n.id=ns.w3cTraceId(),n.name=t.name,n.url=t.url,n.source=t.source,n.duration=ns.msToTimeSpan(t.duration),n.responseCode=t.resultCode?t.resultCode.toString():"0",n.success=t.success,n.properties=t.properties,n.measurements=t.measurements;var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Request),r.baseData=n,r},e.createMetricData=function(t){var n=new Se.MetricData;n.metrics=[];var r=new Se.DataPoint;r.count=isNaN(t.count)?1:t.count,r.kind=Se.DataPointType.Aggregation,r.max=isNaN(t.max)?t.value:t.max,r.min=isNaN(t.min)?t.value:t.min,r.name=t.name,r.stdDev=isNaN(t.stdDev)?0:t.stdDev,r.value=t.value,r.ns=t.namespace,n.metrics.push(r),n.properties=t.properties;var i=new Se.Data;return i.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Metric),i.baseData=n,i},e.createAvailabilityData=function(t){var n=new Se.AvailabilityData;t.id?n.id=t.id:n.id=ns.w3cTraceId(),n.name=t.name,n.duration=ns.msToTimeSpan(t.duration),n.success=t.success,n.runLocation=t.runLocation,n.message=t.message,n.measurements=t.measurements,n.properties=t.properties;var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.Availability),r.baseData=n,r},e.createPageViewData=function(t){var n=new Se.PageViewData;n.name=t.name,n.duration=ns.msToTimeSpan(t.duration),n.url=t.url,n.measurements=t.measurements,n.properties=t.properties;var r=new Se.Data;return r.baseType=Se.telemetryTypeToBaseType(Se.TelemetryType.PageView),r.baseData=n,r},e.getTags=function(t,n){var r=Ose.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var o in t.tags)i[o]=t.tags[o];if(n)for(var o in n)i[o]=n[o];return r&&(i[t.keys.operationId]=i[t.keys.operationId]||r.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||r.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||r.operation.parentId),i},e.parseStack=function(t){var n=void 0;if(typeof t=="string"){var r=t.split(`
`);n=[];for(var i=0,o=0,s=0;s<=r.length;s++){var a=r[s];if(Nse.regex.test(a)){var u=new Nse(r[s],i++);o+=u.sizeInBytes,n.push(u)}}var c=32*1024;if(o>c)for(var l=0,d=n.length-1,p=0,f=l,m=d;l<d;){var h=n[l].sizeInBytes,v=n[d].sizeInBytes;if(p+=h+v,p>c){var g=m-f+1;n.splice(f,g);break}f=l,m=d,l++,d--}}return n},e}(),Nse=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=ns.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=ns.trim(r[2])||this.method,this.fileName=ns.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();Lse.exports=e1e});var Fse=_(ed=>{"use strict";var t1e=ed&&ed.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},n1e=ed&&ed.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ed,"__esModule",{value:!0});ed.FileAccessControl=void 0;var r1e=require("fs"),i1e=require("os"),Gg=require("child_process"),o1e=Xt(),s1e=function(){function e(){}return e.checkFileProtection=function(){if(!e.OS_PROVIDES_FILE_PROTECTION&&!e.OS_FILE_PROTECTION_CHECKED)if(e.OS_FILE_PROTECTION_CHECKED=!0,e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=r1e.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||o1e.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0},e.applyACLRules=function(t){return t1e(this,void 0,void 0,function(){var n,r;return n1e(this,function(i){switch(i.label){case 0:if(!e.USE_ICACLS)return[3,7];if(e.ACLED_DIRECTORIES[t]!==void 0)return[3,6];e.ACLED_DIRECTORIES[t]=!1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return n=i.sent(),[4,this._runICACLS(this._getACLArguments(t,n))];case 3:return i.sent(),e.ACLED_DIRECTORIES[t]=!0,[3,5];case 4:throw r=i.sent(),e.ACLED_DIRECTORIES[t]=!1,r;case 5:return[3,7];case 6:if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)");i.label=7;case 7:return[2]}})})},e.applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=!0;return}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e._runICACLS=function(t){return new Promise(function(n,r){var i=Gg.spawn(e.ICACLS_PATH,t,{windowsHide:!0});i.on("error",function(o){return r(o)}),i.on("close",function(o,s){o===0?n():r(new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+o+")"))})})},e._runICACLSSync=function(t){if(Gg.spawnSync){var n=Gg.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(n.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},e._getACLIdentity=function(){return new Promise(function(t,n){e.ACL_IDENTITY&&t(e.ACL_IDENTITY);var r=Gg.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),i="";r.stdout.on("data",function(o){return i+=o}),r.on("error",function(o){return n(o)}),r.on("close",function(o,s){e.ACL_IDENTITY=i&&i.trim(),o===0?t(e.ACL_IDENTITY):n(new Error("Getting ACL identity did not succeed (PS returned code "+o+")"))})})},e._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(Gg.spawnSync){var t=Gg.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e._getACLArguments=function(t,n){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",n+":(OI)(CI)F","/inheritance:r"]},e.TAG="FileAccessControl",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.OS_FILE_PROTECTION_CHECKED=!1,e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS=i1e.type()==="Windows_NT",e}();ed.FileAccessControl=s1e});var Fj=_((yE,Use)=>{"use strict";var RP=yE&&yE.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},AP=yE&&yE.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lj=require("fs"),a1e=require("os"),hf=require("path"),c1e=require("zlib"),td=ln(),u1e=_g(),ou=uF(),Fi=pr(),l1e=require("url"),Mse=Xt(),vE=Fse(),d1e=439,p1e=402,f1e=[200,206,402,408,429,439,500],m1e=function(){function e(t,n,r,i,o,s,a){this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=i,this._statsbeat=o,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=n,this._fileCleanupTimer=null,this._tempDir=hf.join(a1e.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=s||!1,this._shutdownStatsbeat=a,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return e.prototype.setDiskRetryMode=function(t,n,r){var i=this;t&&vE.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=vE.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&t,typeof n=="number"&&n>=0&&(this._resendInterval=Math.floor(n)),typeof r=="number"&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!vE.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(td.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(td.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},e.prototype.send=function(t,n){return RP(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,d=this;return AP(this,function(p){switch(p.label){case 0:if(!t)return[3,5];if(r=this._redirectedHost||this._config.endpointUrl,i=new l1e.URL(r).hostname,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},s=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!s)return[3,4];this._statsbeat&&this._statsbeat.addFeature(td.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,s.addAuthorizationHeader(o)];case 2:return p.sent(),[3,4];case 3:return a=p.sent(),u="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(u+="This batch of telemetry items will be retried. ",this._storeToDisk(t)),u+="Error:"+a.toString(),this._logWarn(u),typeof n=="function"&&n(u),[2];case 4:c="",t.forEach(function(f){var m=Fi.stringify(f);typeof m=="string"&&(c+=m+`
`)}),c.length>0&&(c=c.substring(0,c.length-1)),l=Buffer.from?Buffer.from(c):new Buffer(c),c1e.gzip(l,function(f,m){var h=m;f?(d._logWarn(Fi.dumpObj(f)),h=l,o.headers["Content-Length"]=l.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=m.length.toString()),d._logInfo(Fi.dumpObj(o)),o[u1e.disableCollectionRequestOption]=!0;var v=+new Date,g=function(x){x.setEncoding("utf-8");var w="";x.on("data",function(b){w+=b}),x.on("end",function(){var b=+new Date,S=b-v;if(d._numConsecutiveFailures=0,d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&(f1e.includes(x.statusCode)?d._statsbeatHasReachedIngestionAtLeastOnce=!0:d._statsbeatFailedToIngest()),d._statsbeat&&(x.statusCode==p1e||x.statusCode==d1e?d._statsbeat.countThrottle(td.StatsbeatNetworkCategory.Breeze,i,x.statusCode):d._statsbeat.countRequest(td.StatsbeatNetworkCategory.Breeze,i,S,x.statusCode===200,x.statusCode)),d._enableDiskRetryMode){if(x.statusCode===200)d._resendTimer||(d._resendTimer=setTimeout(function(){d._resendTimer=null,d._sendFirstFileOnDisk()},d._resendInterval),d._resendTimer.unref());else if(d._isRetriable(x.statusCode))try{d._statsbeat&&d._statsbeat.countRetry(td.StatsbeatNetworkCategory.Breeze,i,x.statusCode);var R=JSON.parse(w),P=[];R.errors&&(R.errors.forEach(function(T){(T.statusCode==429||T.statusCode==500||T.statusCode==503)&&P.push(t[T.index])}),P.length>0&&d._storeToDisk(P))}catch{d._storeToDisk(t)}}if(x.statusCode===307||x.statusCode===308)if(d._numConsecutiveRedirects++,d._numConsecutiveRedirects<10){var E=x.headers.location?x.headers.location.toString():null;E&&(d._redirectedHost=E,d.send(t,n))}else{var C={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};d._statsbeat&&d._statsbeat.countException(td.StatsbeatNetworkCategory.Breeze,i,C),typeof n=="function"&&n("Error sending telemetry because of circular redirects.")}else d._numConsecutiveRedirects=0,typeof n=="function"&&n(w),d._logInfo(w),typeof d._onSuccess=="function"&&d._onSuccess(w)})},y=Fi.makeRequest(d._config,r,o,g);y.setTimeout(e.HTTP_TIMEOUT,function(){d._requestTimedOut=!0,y.abort()}),y.on("error",function(x){if(d._isStatsbeatSender&&!d._statsbeatHasReachedIngestionAtLeastOnce&&d._statsbeatFailedToIngest(),d._numConsecutiveFailures++,d._statsbeat&&d._statsbeat.countException(td.StatsbeatNetworkCategory.Breeze,i,x),!d._enableDiskRetryMode||d._numConsecutiveFailures>0&&d._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var w="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";d._enableDiskRetryMode&&(w="Ingestion endpoint could not be reached "+d._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),d._logWarn(w,Fi.dumpObj(x))}else{var w="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";d._logInfo(w,Fi.dumpObj(x))}d._onErrorHelper(x),typeof n=="function"&&(x?(d._requestTimedOut&&(x.name="telemetry timeout",x.message="telemetry request timed out"),n(Fi.dumpObj(x))):n("Error sending telemetry")),d._enableDiskRetryMode&&d._storeToDisk(t)}),y.write(h),y.end()}),p.label=5;case 5:return[2]}})})},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(Fi.stringify(t))},e.prototype._isRetriable=function(t){return t===206||t===401||t===403||t===408||t===429||t===500||t===502||t===503||t===504},e.prototype._logInfo=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._isStatsbeatSender||Mse.info(e.TAG,t,n)},e.prototype._logWarn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._isStatsbeatSender||Mse.warn(e.TAG,t,n)},e.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},e.prototype._storeToDisk=function(t){return RP(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return AP(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,ou.confirmDirExists(this._tempDir)];case 1:return c.sent(),[3,3];case 2:return n=c.sent(),this._logWarn("Failed to create folder to put telemetry: "+Fi.dumpObj(n)),this._onErrorHelper(n),[2];case 3:return c.trys.push([3,5,,6]),[4,vE.FileAccessControl.applyACLRules(this._tempDir)];case 4:return c.sent(),[3,6];case 5:return r=c.sent(),this._logWarn("Failed to apply file access control to folder: "+Fi.dumpObj(r)),this._onErrorHelper(r),[2];case 6:return c.trys.push([6,8,,9]),[4,ou.getShallowDirectorySize(this._tempDir)];case 7:return i=c.sent(),i>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+i),[2]):[3,9];case 8:return o=c.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+Fi.dumpObj(o)),this._onErrorHelper(o),[2];case 9:return c.trys.push([9,11,,12]),s=new Date().getTime()+".ai.json",a=hf.join(this._tempDir,s),this._logInfo("saving data to disk at: "+a),[4,ou.writeFileAsync(a,Fi.stringify(t),{mode:384})];case 10:return c.sent(),[3,12];case 11:return u=c.sent(),this._logWarn("Failed to persist telemetry to disk: "+Fi.dumpObj(u)),this._onErrorHelper(u),[2];case 12:return[2]}})})},e.prototype._storeToDiskSync=function(t){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),Lj.existsSync(this._tempDir)||Lj.mkdirSync(this._tempDir),vE.FileAccessControl.applyACLRulesSync(this._tempDir);var n=ou.getShallowDirectorySizeSync(this._tempDir);if(n>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var r=new Date().getTime()+".ai.json",i=hf.join(this._tempDir,r);this._logInfo("saving data before crash to disk at: "+i),Lj.writeFileSync(i,t,{mode:384})}catch(o){this._logWarn("Error while saving data to disk: "+Fi.dumpObj(o)),this._onErrorHelper(o)}},e.prototype._sendFirstFileOnDisk=function(){return RP(this,void 0,void 0,function(){var t,n,r,i,o,s;return AP(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,ou.readdirAsync(this._tempDir)];case 1:return t=a.sent(),t=t.filter(function(u){return hf.basename(u).indexOf(".ai.json")>-1}),t.length>0?(n=t[0],r=hf.join(this._tempDir,n),[4,ou.readFileAsync(r)]):[3,5];case 2:return i=a.sent(),[4,ou.unlinkAsync(r)];case 3:return a.sent(),o=JSON.parse(i.toString()),[4,this.send(o)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return s=a.sent(),this._onErrorHelper(s),[3,7];case 7:return[2]}})})},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t)},e.prototype._fileCleanupTask=function(){return RP(this,void 0,void 0,function(){var t,n,r,i,o,s,a=this;return AP(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),[4,ou.readdirAsync(this._tempDir)];case 1:if(t=u.sent(),t=t.filter(function(c){return hf.basename(c).indexOf(".ai.json")>-1}),!(t.length>0))return[3,5];n=0,u.label=2;case 2:return n<t.length?(r=new Date(parseInt(t[n].split(".ai.json")[0])),i=new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>r,i?(o=hf.join(this._tempDir,t[n]),[4,ou.unlinkAsync(o).catch(function(c){a._onErrorHelper(c)})]):[3,4]):[3,5];case 3:u.sent(),u.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return s=u.sent(),s.code!="ENOENT"&&this._onErrorHelper(s),[3,7];case 7:return[2]}})})},e.TAG="Sender",e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.HTTP_TIMEOUT=2e4,e}();Use.exports=m1e});var qse=_(DP=>{"use strict";Object.defineProperty(DP,"__esModule",{value:!0});DP.NetworkStatsbeat=void 0;var h1e=function(){function e(t,n){this.endpoint=t,this.host=n,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return e}();DP.NetworkStatsbeat=h1e});var Vse=_((gf,Bse)=>{"use strict";var Na=gf&&gf.__assign||function(){return Na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Na.apply(this,arguments)},Mj=gf&&gf.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})},Uj=gf&&gf.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},g1e=require("os"),v1e=Nj(),jse=Xt(),y1e=Fj(),Wt=ln(),x1e=Fr(),w1e=tq(),E1e=dq(),Hse=Cg(),b1e=qse(),$se=pr(),_1e="node",C1e=function(){function e(t,n){this._attach=Wt.StatsbeatAttach.sdk,this._feature=Wt.StatsbeatFeature.NONE,this._instrumentation=Wt.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=t,this._context=n||new Hse;var r=this._getConnectionString(t);this._statsbeatConfig=new E1e(r),this._statsbeatConfig.samplingPercentage=100,this._sender=new y1e(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),t?(this._handle||(this._handle=setInterval(function(){n.trackShortIntervalStatsbeats()},e.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this.trackLongIntervalStatsbeats(),this._longHandle=setInterval(function(){n.trackLongIntervalStatsbeats()},e.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.setCodelessAttach=function(){this._attach=Wt.StatsbeatAttach.codeless},e.prototype.addFeature=function(t){this._feature|=t},e.prototype.removeFeature=function(t){this._feature&=~t},e.prototype.addInstrumentation=function(t){this._instrumentation|=t},e.prototype.removeInstrumentation=function(t){this._instrumentation&=~t},e.prototype.countRequest=function(t,n,r,i,o){if(this.isEnabled()){var s=this._getNetworkStatsbeatCounter(t,n);if(s.totalRequestCount++,s.intervalRequestExecutionTime+=r,i===!1){if(!o)return;var a=s.totalFailedRequestCount.find(function(u){return o===u.statusCode});a?a.count++:s.totalFailedRequestCount.push({statusCode:o,count:1})}else s.totalSuccesfulRequestCount++}},e.prototype.countException=function(t,n,r){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(t,n),o=i.exceptionCount.find(function(s){return r.name===s.exceptionType});o?o.count++:i.exceptionCount.push({exceptionType:r.name,count:1})}},e.prototype.countThrottle=function(t,n,r){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(t,n),o=i.throttleCount.find(function(s){return r===s.statusCode});o?o.count++:i.throttleCount.push({statusCode:r,count:1})}},e.prototype.countRetry=function(t,n,r){if(this.isEnabled()){var i=this._getNetworkStatsbeatCounter(t,n),o=i.retryCount.find(function(s){return r===s.statusCode});o?o.count++:i.retryCount.push({statusCode:r,count:1})}},e.prototype.trackShortIntervalStatsbeats=function(){return Mj(this,void 0,void 0,function(){var t,n;return Uj(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return r.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(t),this._trackRequestsCount(t),[4,this._sendStatsbeats()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),jse.info(e.TAG,"Failed to send Statsbeat metrics: "+$se.dumpObj(n)),[3,4];case 4:return[2]}})})},e.prototype.trackLongIntervalStatsbeats=function(){return Mj(this,void 0,void 0,function(){var t,n,r,i,o;return Uj(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return s.sent(),t={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},n=Object.assign({rpId:this._resourceIdentifier},t),this._statbeatMetrics.push({name:Wt.StatsbeatCounter.ATTACH,value:1,properties:n}),this._instrumentation!=Wt.StatsbeatInstrumentation.NONE&&(r=Object.assign({feature:this._instrumentation,type:Wt.StatsbeatFeatureType.Instrumentation},t),this._statbeatMetrics.push({name:Wt.StatsbeatCounter.FEATURE,value:1,properties:r})),this._feature!=Wt.StatsbeatFeature.NONE&&(i=Object.assign({feature:this._feature,type:Wt.StatsbeatFeatureType.Feature},t),this._statbeatMetrics.push({name:Wt.StatsbeatCounter.FEATURE,value:1,properties:i})),[4,this._sendStatsbeats()];case 2:return s.sent(),[3,4];case 3:return o=s.sent(),jse.info(e.TAG,"Failed to send Statsbeat metrics: "+$se.dumpObj(o)),[3,4];case 4:return[2]}})})},e.prototype._getNetworkStatsbeatCounter=function(t,n){for(var r=this._getShortHost(n),i=0;i<this._networkStatsbeatCollection.length;i++)if(t===this._networkStatsbeatCollection[i].endpoint&&r===this._networkStatsbeatCollection[i].host)return this._networkStatsbeatCollection[i];var o=new b1e.NetworkStatsbeat(t,r);return this._networkStatsbeatCollection.push(o),o},e.prototype._trackRequestDuration=function(t){for(var n=0;n<this._networkStatsbeatCollection.length;n++){var r=this._networkStatsbeatCollection[n];r.time=+new Date;var i=r.totalRequestCount-r.lastRequestCount||0,o=r.intervalRequestExecutionTime-r.lastIntervalRequestExecutionTime,s=o>0&&o/i||0;if(r.lastIntervalRequestExecutionTime=r.intervalRequestExecutionTime,i>0){var a=Object.assign({endpoint:this._networkStatsbeatCollection[n].endpoint,host:this._networkStatsbeatCollection[n].host},t);this._statbeatMetrics.push({name:Wt.StatsbeatCounter.REQUEST_DURATION,value:s,properties:a})}r.lastRequestCount=r.totalRequestCount,r.lastTime=r.time}},e.prototype._getShortHost=function(t){var n=t;try{var r=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),i=r.exec(t);i!=null&&i.length>1&&(n=i[1]),n=n.replace(".in.applicationinsights.azure.com","")}catch{}return n},e.prototype._trackRequestsCount=function(t){for(var n=this,r=function(a){o=i._networkStatsbeatCollection[a];var u=Object.assign({endpoint:o.endpoint,host:o.host},t);o.totalSuccesfulRequestCount>0&&(i._statbeatMetrics.push({name:Wt.StatsbeatCounter.REQUEST_SUCCESS,value:o.totalSuccesfulRequestCount,properties:u}),o.totalSuccesfulRequestCount=0),o.totalFailedRequestCount.length>0&&(o.totalFailedRequestCount.forEach(function(c){u=Object.assign(Na(Na({},u),{statusCode:c.statusCode})),n._statbeatMetrics.push({name:Wt.StatsbeatCounter.REQUEST_FAILURE,value:c.count,properties:u})}),o.totalFailedRequestCount=[]),o.retryCount.length>0&&(o.retryCount.forEach(function(c){u=Object.assign(Na(Na({},u),{statusCode:c.statusCode})),n._statbeatMetrics.push({name:Wt.StatsbeatCounter.RETRY_COUNT,value:c.count,properties:u})}),o.retryCount=[]),o.throttleCount.length>0&&(o.throttleCount.forEach(function(c){u=Object.assign(Na(Na({},u),{statusCode:c.statusCode})),n._statbeatMetrics.push({name:Wt.StatsbeatCounter.THROTTLE_COUNT,value:c.count,properties:u})}),o.throttleCount=[]),o.exceptionCount.length>0&&(o.exceptionCount.forEach(function(c){u=Object.assign(Na(Na({},u),{exceptionType:c.exceptionType})),n._statbeatMetrics.push({name:Wt.StatsbeatCounter.EXCEPTION_COUNT,value:c.count,properties:u})}),o.exceptionCount=[])},i=this,o,s=0;s<this._networkStatsbeatCollection.length;s++)r(s)},e.prototype._sendStatsbeats=function(){return Mj(this,void 0,void 0,function(){var t,n,r,i;return Uj(this,function(o){switch(o.label){case 0:for(t=[],n=0;n<this._statbeatMetrics.length;n++)r={name:this._statbeatMetrics[n].name,value:this._statbeatMetrics[n].value,properties:this._statbeatMetrics[n].properties},i=v1e.createEnvelope(r,x1e.TelemetryType.Metric,null,this._context,this._statsbeatConfig),i.name=Wt.StatsbeatTelemetryName,t.push(i);return this._statbeatMetrics=[],[4,this._sender.send(t)];case 1:return o.sent(),[2]}})})},e.prototype._getCustomProperties=function(){this._language=_1e,this._cikey=this._config.instrumentationKey,this._sdkVersion=Hse.sdkVersion,this._os=g1e.type(),this._runtimeVersion=process.version},e.prototype._getResourceProvider=function(){var t=this;return new Promise(function(n,r){var i=!1;t._resourceProvider=Wt.StatsbeatResourceProvider.unknown,t._resourceIdentifier=Wt.StatsbeatResourceProvider.unknown,process.env.WEBSITE_SITE_NAME?(t._resourceProvider=Wt.StatsbeatResourceProvider.appsvc,t._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(t._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(t._resourceProvider=Wt.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(t._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):t._config&&(t._isVM===void 0||t._isVM==!0?(i=!0,w1e.AzureVirtualMachine.getAzureComputeMetadata(t._config,function(o){t._isVM=o.isVM,t._isVM&&(t._resourceProvider=Wt.StatsbeatResourceProvider.vm,t._resourceIdentifier=o.id+"/"+o.subscriptionId,o.osType&&(t._os=o.osType)),n()})):t._resourceProvider=Wt.StatsbeatResourceProvider.unknown),i||n()})},e.prototype._shutdownStatsbeat=function(){this.enable(!1)},e.prototype._getConnectionString=function(t){for(var n=t.endpointUrl,r=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],i=0;i<r.length;i++)if(n.indexOf(r[i])>-1)return e.EU_CONNECTION_STRING;return e.NON_EU_CONNECTION_STRING},e.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",e.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",e.STATS_COLLECTION_SHORT_INTERVAL=9e5,e.STATS_COLLECTION_LONG_INTERVAL=864e5,e.TAG="Statsbeat",e}();Bse.exports=C1e});var zse=_((yat,Gse)=>{"use strict";var S1e=require("url"),T1e=dq(),I1e=_se(),P1e=Cg(),su=Fr(),R1e=Sse(),kP=kse(),Wse=jl(),A1e=Vse(),D1e=Fj(),qj=pr(),OP=Xt(),k1e=Nj(),O1e=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=!1;var n=new T1e(t);if(this.config=n,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new P1e,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new A1e(this.config,this.context),this._statsbeat.enable(!0));var r=new D1e(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new R1e(function(){return n.disableAppInsights},function(){return n.maxBatchSize},function(){return n.maxBatchIntervalMs},r)}return e.prototype.trackAvailability=function(t){this.track(t,su.TelemetryType.Availability)},e.prototype.trackPageView=function(t){this.track(t,su.TelemetryType.PageView)},e.prototype.trackTrace=function(t){this.track(t,su.TelemetryType.Trace)},e.prototype.trackMetric=function(t){this.track(t,su.TelemetryType.Metric)},e.prototype.trackException=function(t){t&&t.exception&&!qj.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,su.TelemetryType.Exception)},e.prototype.trackEvent=function(t){this.track(t,su.TelemetryType.Event)},e.prototype.trackRequest=function(t){this.track(t,su.TelemetryType.Request)},e.prototype.trackDependency=function(t){if(t&&!t.target&&t.data)try{t.target=new S1e.URL(t.data).host}catch(n){t.target=null,OP.warn(e.TAG,"The URL object is failed to create.",n)}this.track(t,su.TelemetryType.Dependency)},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:!1,t?t.callback:void 0)},e.prototype.track=function(t,n){if(t&&su.telemetryTypeToBaseType(n)){var r=k1e.createEnvelope(t,n,this.commonProperties,this.context,this.config);t.time&&(r.time=t.time.toISOString()),this._enableAzureProperties&&kP.azureRoleEnvironmentTelemetryProcessor(r,this.context);var i=this.runTelemetryProcessors(r,t.contextObjects);i=i&&kP.samplingTelemetryProcessor(r,{correlationContext:Wse.CorrelationContextManager.getCurrentContext()}),kP.preAggregatedMetricsTelemetryProcessor(r,this.context),i&&(kP.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),this.channel.send(r))}else OP.warn(e.TAG,"track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t},e.prototype.getAuthorizationHandler=function(t){return t&&t.aadTokenCredential?(this.authorizationHandler||(OP.info(e.TAG,"Adding authorization handler"),this.authorizationHandler=new I1e(t.aadTokenCredential)),this.authorizationHandler):null},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,n){var r=!0,i=this._telemetryProcessors.length;if(i===0)return r;n=n||{},n.correlationContext=Wse.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[t,n])===!1){r=!1;break}}catch(a){r=!0,OP.warn(e.TAG,"One of telemetry processors failed, telemetry item will be sent.",a,t)}return r&&(t&&t.tags&&(t.tags=qj.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=qj.validateStringMap(t.data.baseData.properties))),r},e.prototype.getStatsbeat=function(){return this._statsbeat},e.TAG="TelemetryClient",e}();Gse.exports=O1e});var Xse=_((jj,Kse)=>{"use strict";var N1e=jj&&jj.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),L1e=zse(),Yse=iq(),F1e=_g(),NP=Xt(),M1e=function(e){N1e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.trackNodeHttpRequestSync=function(n){n&&n.request&&n.response&&n.duration?Yse.trackRequestSync(this,n):NP.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(n){(n.duration||n.error)&&NP.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),n&&n.request&&n.response?Yse.trackRequest(this,n):NP.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(n){n&&n.request?F1e.trackRequest(this,n):NP.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(L1e);Kse.exports=M1e});var Jse=_(Qse=>{"use strict";Object.defineProperty(Qse,"__esModule",{value:!0})});var iae=_(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.dispose=ne.Configuration=ne.wrapWithCorrelationContext=ne.startOperation=ne.getCorrelationContext=ne.start=ne.setup=ne.liveMetricsClient=ne.defaultClient=ne.DistributedTracingModes=void 0;var Vj=jl(),U1e=Bne(),q1e=Wne(),eae=I0(),j1e=BU(),H1e=mre(),$1e=Tre(),B1e=_g(),V1e=iq(),tae=Kp(),wE=Xt(),W1e=Wre(),Wj=Gre(),G1e=Kre();ne.TelemetryClient=Xse();ne.Contracts=Fr();ne.azureFunctionsTypes=Jse();var nae;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"})(nae=ne.DistributedTracingModes||(ne.DistributedTracingModes={}));var Mi=z1e(),LP=Mi.isConsole(),FP=Mi.isConsoleLog(),MP=Mi.isExceptions(),UP=Mi.isPerformance(),qP=Mi.isPreAggregatedMetrics(),jP=Mi.isHeartBeat(),HP=Mi.isRequests(),$P=Mi.isDependencies(),Hj=Mi.isDiskRetry(),EE=Mi.isCorrelating(),BP,VP=Mi.isSendingLiveMetrics(),Gj=Mi.isNativePerformance(),zj,vf=Mi.isSnippetInjection(),WP=Mi.isAzureFunctions();function z1e(){return{isConsole:function(){return!0},isConsoleLog:function(){return!1},isExceptions:function(){return!0},isPerformance:function(){return!0},isPreAggregatedMetrics:function(){return!0},isHeartBeat:function(){return!1},isRequests:function(){return!0},isDependencies:function(){return!0},isDiskRetry:function(){return!0},isCorrelating:function(){return!0},isSendingLiveMetrics:function(){return!1},isNativePerformance:function(){return!0},isSnippetInjection:function(){return!1},isAzureFunctions:function(){return!1}}}var $j=void 0,Bj=void 0,xE=void 0,bE,_E,CE,SE,TE,zg,Yg,yf,IE,PE,mo=!1,Zse;function Y1e(e){return ne.defaultClient?wE.info("The default client is already setup"):(ne.defaultClient=new ne.TelemetryClient(e),K1e(),bE=new U1e(ne.defaultClient),_E=new q1e(ne.defaultClient),CE=new eae(ne.defaultClient),SE=new j1e(ne.defaultClient),TE=new H1e(ne.defaultClient),zg=new $1e(ne.defaultClient),yf=new V1e(ne.defaultClient),IE=new B1e(ne.defaultClient),Yg||(Yg=new Wj.AutoCollectNativePerformance(ne.defaultClient)),PE=new G1e.AzureFunctionsHook(ne.defaultClient)),ne.defaultClient&&ne.defaultClient.channel&&ne.defaultClient.channel.setUseDiskRetryCaching(Hj,$j,Bj),Yj}ne.setup=Y1e;function rae(){return ne.defaultClient?(mo=!0,bE.enable(LP,FP),_E.enable(MP),CE.enable(UP),SE.enable(qP),TE.enable(jP),Yg.enable(Gj,zj),yf.useAutoCorrelation(EE,BP),yf.enable(HP),IE.enable($P),zg.enable(vf,xE),ne.liveMetricsClient&&VP&&ne.liveMetricsClient.enable(VP),PE.enable(WP)):wE.warn("Start cannot be called before setup"),Yj}ne.start=rae;function K1e(){LP=ne.defaultClient.config.enableAutoCollectExternalLoggers!==void 0?ne.defaultClient.config.enableAutoCollectExternalLoggers:LP,FP=ne.defaultClient.config.enableAutoCollectConsole!==void 0?ne.defaultClient.config.enableAutoCollectConsole:FP,MP=ne.defaultClient.config.enableAutoCollectExceptions!==void 0?ne.defaultClient.config.enableAutoCollectExceptions:MP,UP=ne.defaultClient.config.enableAutoCollectPerformance!==void 0?ne.defaultClient.config.enableAutoCollectPerformance:UP,qP=ne.defaultClient.config.enableAutoCollectPreAggregatedMetrics!==void 0?ne.defaultClient.config.enableAutoCollectPreAggregatedMetrics:qP,jP=ne.defaultClient.config.enableAutoCollectHeartbeat!==void 0?ne.defaultClient.config.enableAutoCollectHeartbeat:jP,HP=ne.defaultClient.config.enableAutoCollectRequests!==void 0?ne.defaultClient.config.enableAutoCollectRequests:HP,$P=ne.defaultClient.config.enableAutoDependencyCorrelation!==void 0?ne.defaultClient.config.enableAutoDependencyCorrelation:$P,EE=ne.defaultClient.config.enableAutoDependencyCorrelation!==void 0?ne.defaultClient.config.enableAutoDependencyCorrelation:EE,BP=ne.defaultClient.config.enableUseAsyncHooks!==void 0?ne.defaultClient.config.enableUseAsyncHooks:BP,vf=ne.defaultClient.config.enableWebInstrumentation!==void 0?ne.defaultClient.config.enableWebInstrumentation:vf,vf=ne.defaultClient.config.enableAutoWebSnippetInjection===!0?!0:vf,WP=ne.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions!==void 0?ne.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions:WP;var e=Wj.AutoCollectNativePerformance.parseEnabled(ne.defaultClient.config.enableAutoCollectExtendedMetrics,ne.defaultClient.config);Gj=e.isEnabled,zj=e.disabledMetrics}function X1e(){return EE?Vj.CorrelationContextManager.getCurrentContext():null}ne.getCorrelationContext=X1e;function Q1e(e,t){return Vj.CorrelationContextManager.startOperation(e,t)}ne.startOperation=Q1e;function J1e(e,t){return Vj.CorrelationContextManager.wrapCallback(e,t)}ne.wrapWithCorrelationContext=J1e;var Yj=function(){function e(){}return e.setDistributedTracingMode=function(t){return tae.w3cEnabled=t===nae.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,n){return n===void 0&&(n=!1),LP=t,FP=n,mo&&bE.enable(t,n),e},e.setAutoCollectExceptions=function(t){return MP=t,mo&&_E.enable(t),e},e.setAutoCollectPerformance=function(t,n){n===void 0&&(n=!0),UP=t;var r=Wj.AutoCollectNativePerformance.parseEnabled(n,ne.defaultClient.config);return Gj=r.isEnabled,zj=r.disabledMetrics,mo&&(CE.enable(t),Yg.enable(r.isEnabled,r.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return qP=t,mo&&SE.enable(t),e},e.setAutoCollectHeartbeat=function(t){return jP=t,mo&&TE.enable(t),e},e.enableAutoWebSnippetInjection=function(t,n){return vf=t,xE=n,mo&&zg.enable(t,xE),e},e.enableWebInstrumentation=function(t,n){return vf=t,xE=n,mo&&zg.enable(t,xE),e},e.setAutoCollectRequests=function(t){return HP=t,mo&&yf.enable(t),e},e.setAutoCollectDependencies=function(t){return $P=t,mo&&IE.enable(t),e},e.setAutoDependencyCorrelation=function(t,n){return EE=t,BP=n,mo&&yf.useAutoCorrelation(t,n),e},e.setUseDiskRetryCaching=function(t,n,r){return Hj=t,$j=n,Bj=r,ne.defaultClient&&ne.defaultClient.channel&&ne.defaultClient.channel.setUseDiskRetryCaching(Hj,$j,Bj),e},e.setInternalLogging=function(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!0),wE.enableDebug=t,wE.disableWarnings=!n,e},e.setAutoCollectIncomingRequestAzureFunctions=function(t){return WP=t,mo&&PE.enable(t),e},e.setSendLiveMetrics=function(t){return t===void 0&&(t=!1),ne.defaultClient?(!ne.liveMetricsClient&&t?(ne.liveMetricsClient=new W1e(ne.defaultClient.config,ne.defaultClient.context,ne.defaultClient.getAuthorizationHandler),Zse=new eae(ne.liveMetricsClient,1e3,!0),ne.liveMetricsClient.addCollector(Zse),ne.defaultClient.quickPulseClient=ne.liveMetricsClient):ne.liveMetricsClient&&ne.liveMetricsClient.enable(t),VP=t,e):(wE.warn("Live metrics client cannot be setup without the default client"),e)},e.start=rae,e}();ne.Configuration=Yj;function Z1e(){tae.w3cEnabled=!0,ne.defaultClient=null,mo=!1,bE&&bE.dispose(),_E&&_E.dispose(),CE&&CE.dispose(),SE&&SE.dispose(),TE&&TE.dispose(),zg&&zg.dispose(),Yg&&Yg.dispose(),yf&&yf.dispose(),IE&&IE.dispose(),ne.liveMetricsClient&&(ne.liveMetricsClient.enable(!1),VP=!1,ne.liveMetricsClient=void 0),PE&&PE.dispose()}ne.dispose=Z1e});var oae=_(au=>{"use strict";var eMe=au&&au.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),tMe=au&&au.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),GP=au&&au.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&eMe(t,e,n);return tMe(t,e),t};Object.defineProperty(au,"__esModule",{value:!0});var Kj=GP(require("os")),nd=GP(require("vscode")),nMe=GP(require("https")),rMe=S5(),iMe=T5(),RE=I5(),oMe=gX(),sMe=async(e,t)=>{let n;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let i=await Promise.resolve().then(()=>GP(iae()));i.defaultClient?(n=new i.TelemetryClient(e),n.channel.setUseDiskRetryCaching(!0)):(i.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),n=i.defaultClient),nd&&nd.env&&(n.context.tags[n.context.keys.userId]=nd.env.machineId,n.context.tags[n.context.keys.sessionId]=nd.env.sessionId,n.context.tags[n.context.keys.cloudRole]=nd.env.appName,n.context.tags[n.context.keys.cloudRoleInstance]=nd.env.appName)}catch(i){return Promise.reject(`Failed to initialize app insights!
`+i.message)}return t!=null&&t.length&&aMe(n,t),{logEvent:(i,o)=>{try{n==null||n.trackEvent({name:i,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},flush:async()=>{try{n==null||n.flush()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}}}};function aMe(e,t){e.addTelemetryProcessor(n=>(Array.isArray(n.tags)?n.tags.forEach(r=>RE.TelemetryUtil.applyReplacements(r,t)):n.tags&&RE.TelemetryUtil.applyReplacements(n.tags,t),n.data.baseData&&RE.TelemetryUtil.applyReplacements(n.data.baseData,t),!0))}function cMe(){return{sendPOST:(t,n)=>{let r={method:"POST",headers:{...t.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)}};try{let i=nMe.request(t.urlString,r,o=>{o.on("data",function(s){n(o.statusCode??200,o.headers,s.toString())}),o.on("error",function(){n(0,{})})});i.write(t.data),i.end()}catch{n(0,{})}}}}var Xj=class extends rMe.BaseTelemetryReporter{constructor(t,n){let r=s=>sMe(s,n);RE.TelemetryUtil.shouldUseOneDataSystemSDK(t)&&(r=s=>(0,oMe.oneDataSystemClientFactory)(s,nd,cMe()));let i={release:Kj.release(),platform:Kj.platform(),architecture:Kj.arch()},o=new iMe.BaseTelemetrySender(t,r);if(t&&t.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(o,nd,{additionalCommonProperties:RE.TelemetryUtil.getAdditionalCommonProperties(i)})}};au.default=Xj});var Qj=_(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var zP=require("vscode"),Kg=class{constructor(t,n,r){this.extensionName=t,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(t){let n=/\-[a-zA-Z0-9]+$/;return t.split(n)[0]}getFilterValue(t){switch(t){case cu.ApplicationVersion:return Kg.trimVersionSuffix(zP.version);case cu.Build:return zP.env.appName;case cu.ClientId:return zP.env.machineId;case cu.ExtensionName:return this.extensionName;case cu.ExtensionVersion:return Kg.trimVersionSuffix(this.extensionVersion);case cu.Language:return zP.env.language;case cu.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let t=new Map,n=Object.values(cu);for(let r of n)t.set(r,this.getFilterValue(r));return t}};xf.VSCodeFilterProvider=Kg;var cu;(function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"})(cu=xf.Filters||(xf.Filters={}));var uMe;(function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"})(uMe=xf.TargetPopulation||(xf.TargetPopulation={}))});var sae=_(Zj=>{"use strict";Object.defineProperty(Zj,"__esModule",{value:!0});var Jj=class{constructor(t){this.telemetry=t,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let t=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,t}};Zj.BaseFeatureProvider=Jj});var aae=_(tH=>{"use strict";Object.defineProperty(tH,"__esModule",{value:!0});var lMe=sae(),eH=class extends lMe.BaseFeatureProvider{constructor(t,n){super(t),this.telemetry=t,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let t=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let i of r.keys()){let o=r.get(i);t.set(i,o)}}return t}PostEventToTelemetry(t){if(this.cachedTelemetryEvents.includes(t))return;let n=JSON.stringify(t);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(t)}};tH.FilteredFeatureProvider=eH});var cae=_(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});var dMe=aae();Xg.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var nH="ErrorType",rH=class extends dMe.FilteredFeatureProvider{constructor(t,n,r){super(n,r),this.httpClient=t,this.telemetry=n,this.filterProviders=r}async fetch(){let t=this.getFilters(),n={};for(let a of t.keys()){let u=t.get(a);n[a]=u}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let u=a,c=new Map;u.response?c.set(nH,"ServerError"):u.request?c.set(nH,"NoResponse"):c.set(nH,"GenericError"),this.telemetry.postEvent(Xg.TASAPI_FETCHERROR_EVENTNAME,c)}if(!r)throw Error(Xg.TASAPI_FETCHERROR_EVENTNAME);t.keys.length>0&&this.PostEventToTelemetry(n);let i=r.data,o=i.Configs,s=[];for(let a of o)if(a.Parameters)for(let u of Object.keys(a.Parameters)){let c=u+(a.Parameters[u]?"":"cf");s.includes(c)||s.push(c)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};Xg.TasApiFeatureProvider=rH});var iH=_((Tat,uae)=>{"use strict";uae.exports=function(t,n){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return t.apply(n,i)}}});var qr=_((Iat,fae)=>{"use strict";var pMe=iH(),rd=Object.prototype.toString;function aH(e){return Array.isArray(e)}function oH(e){return typeof e>"u"}function fMe(e){return e!==null&&!oH(e)&&e.constructor!==null&&!oH(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function lae(e){return rd.call(e)==="[object ArrayBuffer]"}function mMe(e){return rd.call(e)==="[object FormData]"}function hMe(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&lae(e.buffer),t}function gMe(e){return typeof e=="string"}function vMe(e){return typeof e=="number"}function dae(e){return e!==null&&typeof e=="object"}function YP(e){if(rd.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function yMe(e){return rd.call(e)==="[object Date]"}function xMe(e){return rd.call(e)==="[object File]"}function wMe(e){return rd.call(e)==="[object Blob]"}function pae(e){return rd.call(e)==="[object Function]"}function EMe(e){return dae(e)&&pae(e.pipe)}function bMe(e){return rd.call(e)==="[object URLSearchParams]"}function _Me(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function CMe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function cH(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),aH(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function sH(){var e={};function t(i,o){YP(e[o])&&YP(i)?e[o]=sH(e[o],i):YP(i)?e[o]=sH({},i):aH(i)?e[o]=i.slice():e[o]=i}for(var n=0,r=arguments.length;n<r;n++)cH(arguments[n],t);return e}function SMe(e,t,n){return cH(t,function(i,o){n&&typeof i=="function"?e[o]=pMe(i,n):e[o]=i}),e}function TMe(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}fae.exports={isArray:aH,isArrayBuffer:lae,isBuffer:fMe,isFormData:mMe,isArrayBufferView:hMe,isString:gMe,isNumber:vMe,isObject:dae,isPlainObject:YP,isUndefined:oH,isDate:yMe,isFile:xMe,isBlob:wMe,isFunction:pae,isStream:EMe,isURLSearchParams:bMe,isStandardBrowserEnv:CMe,forEach:cH,merge:sH,extend:SMe,trim:_Me,stripBOM:TMe}});var KP=_((Pat,hae)=>{"use strict";var Qg=qr();function mae(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}hae.exports=function(t,n,r){if(!n)return t;var i;if(r)i=r(n);else if(Qg.isURLSearchParams(n))i=n.toString();else{var o=[];Qg.forEach(n,function(u,c){u===null||typeof u>"u"||(Qg.isArray(u)?c=c+"[]":u=[u],Qg.forEach(u,function(d){Qg.isDate(d)?d=d.toISOString():Qg.isObject(d)&&(d=JSON.stringify(d)),o.push(mae(c)+"="+mae(d))}))}),i=o.join("&")}if(i){var s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}});var vae=_((Rat,gae)=>{"use strict";var IMe=qr();function XP(){this.handlers=[]}XP.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};XP.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};XP.prototype.forEach=function(t){IMe.forEach(this.handlers,function(r){r!==null&&t(r)})};gae.exports=XP});var xae=_((Aat,yae)=>{"use strict";var PMe=qr();yae.exports=function(t,n){PMe.forEach(t,function(i,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[o])})}});var QP=_((Dat,wae)=>{"use strict";wae.exports=function(t,n,r,i,o){return t.config=n,r&&(t.code=r),t.request=i,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var JP=_((kat,Eae)=>{"use strict";Eae.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var ZP=_((Oat,bae)=>{"use strict";var RMe=QP();bae.exports=function(t,n,r,i,o){var s=new Error(t);return RMe(s,n,r,i,o)}});var uH=_((Nat,_ae)=>{"use strict";var AMe=ZP();_ae.exports=function(t,n,r){var i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):n(AMe("Request failed with status code "+r.status,r.config,null,r.request,r))}});var Sae=_((Lat,Cae)=>{"use strict";var eR=qr();Cae.exports=eR.isStandardBrowserEnv()?function(){return{write:function(n,r,i,o,s,a){var u=[];u.push(n+"="+encodeURIComponent(r)),eR.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),eR.isString(o)&&u.push("path="+o),eR.isString(s)&&u.push("domain="+s),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Iae=_((Fat,Tae)=>{"use strict";Tae.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}});var Rae=_((Mat,Pae)=>{"use strict";Pae.exports=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}});var lH=_((Uat,Aae)=>{"use strict";var DMe=Iae(),kMe=Rae();Aae.exports=function(t,n){return t&&!DMe(n)?kMe(t,n):n}});var kae=_((qat,Dae)=>{"use strict";var dH=qr(),OMe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Dae.exports=function(t){var n={},r,i,o;return t&&dH.forEach(t.split(`
`),function(a){if(o=a.indexOf(":"),r=dH.trim(a.substr(0,o)).toLowerCase(),i=dH.trim(a.substr(o+1)),r){if(n[r]&&OMe.indexOf(r)>=0)return;r==="set-cookie"?n[r]=(n[r]?n[r]:[]).concat([i]):n[r]=n[r]?n[r]+", "+i:i}}),n}});var Lae=_((jat,Nae)=>{"use strict";var Oae=qr();Nae.exports=Oae.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function i(o){var s=o;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(s){var a=Oae.isString(s)?i(s):s;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}()});var Jg=_((Hat,Fae)=>{"use strict";function pH(e){this.message=e}pH.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};pH.prototype.__CANCEL__=!0;Fae.exports=pH});var Uae=_(($at,Mae)=>{"use strict";var tR=qr(),NMe=uH(),LMe=Sae(),FMe=KP(),MMe=lH(),UMe=kae(),qMe=Lae(),fH=ZP(),jMe=JP(),HMe=Jg();Mae.exports=function(t){return new Promise(function(r,i){var o=t.data,s=t.headers,a=t.responseType,u;function c(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}tR.isFormData(o)&&delete s["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.Authorization="Basic "+btoa(d+":"+p)}var f=MMe(t.baseURL,t.url);l.open(t.method.toUpperCase(),FMe(f,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function m(){if(l){var v="getAllResponseHeaders"in l?UMe(l.getAllResponseHeaders()):null,g=!a||a==="text"||a==="json"?l.responseText:l.response,y={data:g,status:l.status,statusText:l.statusText,headers:v,config:t,request:l};NMe(function(w){r(w),c()},function(w){i(w),c()},y),l=null}}if("onloadend"in l?l.onloadend=m:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(m)},l.onabort=function(){l&&(i(fH("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){i(fH("Network Error",t,null,l)),l=null},l.ontimeout=function(){var g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",y=t.transitional||jMe;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),i(fH(g,t,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},tR.isStandardBrowserEnv()){var h=(t.withCredentials||qMe(f))&&t.xsrfCookieName?LMe.read(t.xsrfCookieName):void 0;h&&(s[t.xsrfHeaderName]=h)}"setRequestHeader"in l&&tR.forEach(s,function(g,y){typeof o>"u"&&y.toLowerCase()==="content-type"?delete s[y]:l.setRequestHeader(y,g)}),tR.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&a!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(u=function(v){l&&(i(!v||v&&v.type?new HMe("canceled"):v),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u))),o||(o=null),l.send(o)})}});var nR=_((Bat,qae)=>{qae.exports={version:"0.26.1"}});var Gae=_((Vat,Wae)=>{"use strict";var AE=qr(),jae=uH(),$Me=lH(),Hae=KP(),BMe=require("http"),VMe=require("https"),WMe=Uf().http,GMe=Uf().https,$ae=require("url"),zMe=require("zlib"),YMe=nR().version,Zg=ZP(),rR=QP(),KMe=JP(),XMe=Jg(),Bae=/https:?/;function Vae(e,t,n){if(e.hostname=t.host,e.host=t.host,e.port=t.port,e.path=n,t.auth){var r=Buffer.from(t.auth.username+":"+t.auth.password,"utf8").toString("base64");e.headers["Proxy-Authorization"]="Basic "+r}e.beforeRedirect=function(o){o.headers.host=o.host,Vae(o,t,o.href)}}Wae.exports=function(t){return new Promise(function(r,i){var o;function s(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}var a=function(V){s(),r(V)},u=!1,c=function(V){s(),u=!0,i(V)},l=t.data,d=t.headers,p={};if(Object.keys(d).forEach(function(V){p[V.toLowerCase()]=V}),"user-agent"in p?d[p["user-agent"]]||delete d[p["user-agent"]]:d["User-Agent"]="axios/"+YMe,l&&!AE.isStream(l)){if(!Buffer.isBuffer(l))if(AE.isArrayBuffer(l))l=Buffer.from(new Uint8Array(l));else if(AE.isString(l))l=Buffer.from(l,"utf-8");else return c(Zg("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));if(t.maxBodyLength>-1&&l.length>t.maxBodyLength)return c(Zg("Request body larger than maxBodyLength limit",t));p["content-length"]||(d["Content-Length"]=l.length)}var f=void 0;if(t.auth){var m=t.auth.username||"",h=t.auth.password||"";f=m+":"+h}var v=$Me(t.baseURL,t.url),g=$ae.parse(v),y=g.protocol||"http:";if(!f&&g.auth){var x=g.auth.split(":"),w=x[0]||"",b=x[1]||"";f=w+":"+b}f&&p.authorization&&delete d[p.authorization];var S=Bae.test(y),R=S?t.httpsAgent:t.httpAgent;try{Hae(g.path,t.params,t.paramsSerializer).replace(/^\?/,"")}catch($){var P=new Error($.message);P.config=t,P.url=t.url,P.exists=!0,c(P)}var E={path:Hae(g.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:d,agent:R,agents:{http:t.httpAgent,https:t.httpsAgent},auth:f};t.socketPath?E.socketPath=t.socketPath:(E.hostname=g.hostname,E.port=g.port);var C=t.proxy;if(!C&&C!==!1){var T=y.slice(0,-1)+"_proxy",I=process.env[T]||process.env[T.toUpperCase()];if(I){var A=$ae.parse(I),N=process.env.no_proxy||process.env.NO_PROXY,F=!0;if(N){var L=N.split(",").map(function(V){return V.trim()});F=!L.some(function(V){return V?V==="*"||V[0]==="."&&g.hostname.substr(g.hostname.length-V.length)===V?!0:g.hostname===V:!1})}if(F&&(C={host:A.hostname,port:A.port,protocol:A.protocol},A.auth)){var M=A.auth.split(":");C.auth={username:M[0],password:M[1]}}}}C&&(E.headers.host=g.hostname+(g.port?":"+g.port:""),Vae(E,C,y+"//"+g.hostname+(g.port?":"+g.port:"")+E.path));var j,W=S&&(C?Bae.test(C.protocol):!0);t.transport?j=t.transport:t.maxRedirects===0?j=W?VMe:BMe:(t.maxRedirects&&(E.maxRedirects=t.maxRedirects),j=W?GMe:WMe),t.maxBodyLength>-1&&(E.maxBodyLength=t.maxBodyLength),t.insecureHTTPParser&&(E.insecureHTTPParser=t.insecureHTTPParser);var k=j.request(E,function(V){if(!k.aborted){var ie=V,be=V.req||k;if(V.statusCode!==204&&be.method!=="HEAD"&&t.decompress!==!1)switch(V.headers["content-encoding"]){case"gzip":case"compress":case"deflate":ie=ie.pipe(zMe.createUnzip()),delete V.headers["content-encoding"];break}var Re={status:V.statusCode,statusText:V.statusMessage,headers:V.headers,config:t,request:be};if(t.responseType==="stream")Re.data=ie,jae(a,c,Re);else{var Le=[],Pt=0;ie.on("data",function(Je){Le.push(Je),Pt+=Je.length,t.maxContentLength>-1&&Pt>t.maxContentLength&&(u=!0,ie.destroy(),c(Zg("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,be)))}),ie.on("aborted",function(){u||(ie.destroy(),c(Zg("error request aborted",t,"ERR_REQUEST_ABORTED",be)))}),ie.on("error",function(Je){k.aborted||c(rR(Je,t,null,be))}),ie.on("end",function(){try{var Je=Le.length===1?Le[0]:Buffer.concat(Le);t.responseType!=="arraybuffer"&&(Je=Je.toString(t.responseEncoding),(!t.responseEncoding||t.responseEncoding==="utf8")&&(Je=AE.stripBOM(Je))),Re.data=Je}catch(nr){c(rR(nr,t,nr.code,Re.request,Re))}jae(a,c,Re)})}}});if(k.on("error",function(V){k.aborted&&V.code!=="ERR_FR_TOO_MANY_REDIRECTS"||c(rR(V,t,null,k))}),k.on("socket",function(V){V.setKeepAlive(!0,1e3*60)}),t.timeout){var H=parseInt(t.timeout,10);if(isNaN(H)){c(Zg("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",k));return}k.setTimeout(H,function(){k.abort();var V="";t.timeoutErrorMessage?V=t.timeoutErrorMessage:V="timeout of "+t.timeout+"ms exceeded";var ie=t.transitional||KMe;c(Zg(V,t,ie.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k))})}(t.cancelToken||t.signal)&&(o=function($){k.aborted||(k.abort(),c(!$||$&&$.type?new XMe("canceled"):$))},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o))),AE.isStream(l)?l.on("error",function(V){c(rR(V,t,null,k))}).pipe(k):k.end(l)})}});var oR=_((Wat,Kae)=>{"use strict";var yr=qr(),zae=xae(),QMe=QP(),JMe=JP(),ZMe={"Content-Type":"application/x-www-form-urlencoded"};function Yae(e,t){!yr.isUndefined(e)&&yr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function eUe(){var e;return typeof XMLHttpRequest<"u"?e=Uae():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(e=Gae()),e}function tUe(e,t,n){if(yr.isString(e))try{return(t||JSON.parse)(e),yr.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var iR={transitional:JMe,adapter:eUe(),transformRequest:[function(t,n){return zae(n,"Accept"),zae(n,"Content-Type"),yr.isFormData(t)||yr.isArrayBuffer(t)||yr.isBuffer(t)||yr.isStream(t)||yr.isFile(t)||yr.isBlob(t)?t:yr.isArrayBufferView(t)?t.buffer:yr.isURLSearchParams(t)?(Yae(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):yr.isObject(t)||n&&n["Content-Type"]==="application/json"?(Yae(n,"application/json"),tUe(t)):t}],transformResponse:[function(t){var n=this.transitional||iR.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,o=!r&&this.responseType==="json";if(o||i&&yr.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?QMe(s,this,"E_JSON_PARSE"):s}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};yr.forEach(["delete","get","head"],function(t){iR.headers[t]={}});yr.forEach(["post","put","patch"],function(t){iR.headers[t]=yr.merge(ZMe)});Kae.exports=iR});var Qae=_((Gat,Xae)=>{"use strict";var nUe=qr(),rUe=oR();Xae.exports=function(t,n,r){var i=this||rUe;return nUe.forEach(r,function(s){t=s.call(i,t,n)}),t}});var mH=_((zat,Jae)=>{"use strict";Jae.exports=function(t){return!!(t&&t.__CANCEL__)}});var tce=_((Yat,ece)=>{"use strict";var Zae=qr(),hH=Qae(),iUe=mH(),oUe=oR(),sUe=Jg();function gH(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sUe("canceled")}ece.exports=function(t){gH(t),t.headers=t.headers||{},t.data=hH.call(t,t.data,t.headers,t.transformRequest),t.headers=Zae.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Zae.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var n=t.adapter||oUe.adapter;return n(t).then(function(i){return gH(t),i.data=hH.call(t,i.data,i.headers,t.transformResponse),i},function(i){return iUe(i)||(gH(t),i&&i.response&&(i.response.data=hH.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})}});var vH=_((Kat,nce)=>{"use strict";var ho=qr();nce.exports=function(t,n){n=n||{};var r={};function i(l,d){return ho.isPlainObject(l)&&ho.isPlainObject(d)?ho.merge(l,d):ho.isPlainObject(d)?ho.merge({},d):ho.isArray(d)?d.slice():d}function o(l){if(ho.isUndefined(n[l])){if(!ho.isUndefined(t[l]))return i(void 0,t[l])}else return i(t[l],n[l])}function s(l){if(!ho.isUndefined(n[l]))return i(void 0,n[l])}function a(l){if(ho.isUndefined(n[l])){if(!ho.isUndefined(t[l]))return i(void 0,t[l])}else return i(void 0,n[l])}function u(l){if(l in n)return i(t[l],n[l]);if(l in t)return i(void 0,t[l])}var c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return ho.forEach(Object.keys(t).concat(Object.keys(n)),function(d){var p=c[d]||o,f=p(d);ho.isUndefined(f)&&p!==u||(r[d]=f)}),r}});var oce=_((Xat,ice)=>{"use strict";var aUe=nR().version,yH={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){yH[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var rce={};yH.transitional=function(t,n,r){function i(o,s){return"[Axios v"+aUe+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return function(o,s,a){if(t===!1)throw new Error(i(s," has been removed"+(n?" in "+n:"")));return n&&!rce[s]&&(rce[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,a):!0}};function cUe(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],u=a===void 0||s(a,o,e);if(u!==!0)throw new TypeError("option "+o+" must be "+u);continue}if(n!==!0)throw Error("Unknown option "+o)}}ice.exports={assertOptions:cUe,validators:yH}});var dce=_((Qat,lce)=>{"use strict";var cce=qr(),uUe=KP(),sce=vae(),ace=tce(),sR=vH(),uce=oce(),ev=uce.validators;function DE(e){this.defaults=e,this.interceptors={request:new sce,response:new sce}}DE.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=sR(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&uce.assertOptions(r,{silentJSONParsing:ev.transitional(ev.boolean),forcedJSONParsing:ev.transitional(ev.boolean),clarifyTimeoutError:ev.transitional(ev.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(o=o&&f.synchronous,i.unshift(f.fulfilled,f.rejected))});var s=[];this.interceptors.response.forEach(function(f){s.push(f.fulfilled,f.rejected)});var a;if(!o){var u=[ace,void 0];for(Array.prototype.unshift.apply(u,i),u=u.concat(s),a=Promise.resolve(n);u.length;)a=a.then(u.shift(),u.shift());return a}for(var c=n;i.length;){var l=i.shift(),d=i.shift();try{c=l(c)}catch(p){d(p);break}}try{a=ace(c)}catch(p){return Promise.reject(p)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};DE.prototype.getUri=function(t){return t=sR(this.defaults,t),uUe(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};cce.forEach(["delete","get","head","options"],function(t){DE.prototype[t]=function(n,r){return this.request(sR(r||{},{method:t,url:n,data:(r||{}).data}))}});cce.forEach(["post","put","patch"],function(t){DE.prototype[t]=function(n,r,i){return this.request(sR(i||{},{method:t,url:n,data:r}))}});lce.exports=DE});var fce=_((Jat,pce)=>{"use strict";var lUe=Jg();function tv(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(i){t=i});var n=this;this.promise.then(function(r){if(n._listeners){var i,o=n._listeners.length;for(i=0;i<o;i++)n._listeners[i](r);n._listeners=null}}),this.promise.then=function(r){var i,o=new Promise(function(s){n.subscribe(s),i=s}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i){n.reason||(n.reason=new lUe(i),t(n.reason))})}tv.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};tv.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};tv.prototype.unsubscribe=function(t){if(this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};tv.source=function(){var t,n=new tv(function(i){t=i});return{token:n,cancel:t}};pce.exports=tv});var hce=_((Zat,mce)=>{"use strict";mce.exports=function(t){return function(r){return t.apply(null,r)}}});var vce=_((ect,gce)=>{"use strict";var dUe=qr();gce.exports=function(t){return dUe.isObject(t)&&t.isAxiosError===!0}});var wce=_((tct,xH)=>{"use strict";var yce=qr(),pUe=iH(),aR=dce(),fUe=vH(),mUe=oR();function xce(e){var t=new aR(e),n=pUe(aR.prototype.request,t);return yce.extend(n,aR.prototype,t),yce.extend(n,t),n.create=function(i){return xce(fUe(e,i))},n}var La=xce(mUe);La.Axios=aR;La.Cancel=Jg();La.CancelToken=fce();La.isCancel=mH();La.VERSION=nR().version;La.all=function(t){return Promise.all(t)};La.spread=hce();La.isAxiosError=vce();xH.exports=La;xH.exports.default=La});var bce=_((nct,Ece)=>{Ece.exports=wce()});var _ce=_(EH=>{"use strict";Object.defineProperty(EH,"__esModule",{value:!0});var hUe=bce(),wH=class{constructor(t){this.endpoint=t}get(t){return hUe.default.get(this.endpoint,Object.assign(Object.assign({},t),{proxy:!1}))}};EH.AxiosHttpClient=wH});var Cce=_(_H=>{"use strict";Object.defineProperty(_H,"__esModule",{value:!0});var bH=class{constructor(){this.storage=new Map}async getValue(t,n){return this.storage.has(t)?await Promise.resolve(this.storage.get(t)):await Promise.resolve(n||void 0)}setValue(t,n){this.storage.set(t,n)}};_H.MemoryKeyValueStorage=bH});var Sce=_(SH=>{"use strict";Object.defineProperty(SH,"__esModule",{value:!0});var gUe=Cce(),CH=class{constructor(t,n,r,i,o){this.telemetry=t,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new gUe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}get features(){return this._features}set features(t){this._features=t,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}async getFeaturesAsync(t=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,t)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(t,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let i of t){for(let o of i.features)r.features.includes(o)||r.features.push(o);for(let o of i.configs){let s=r.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):r.configs.push(o)}r.assignmentContext+=i.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let t;this.storage&&(t=await this.storage.getValue(this.storageKey),t!==void 0&&t.configs===void 0&&(t.configs=[])),this.features.features.length===0&&(this.features=t||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(t){return this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isCachedFlightEnabled(t){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(t),this.features.features.includes(t)}async isFlightEnabledAsync(t){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(t),n.features.includes(t)}getTreatmentVariable(t,n){var r;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${t}.${n}`),(r=this.features.configs.find(o=>o.Id===t))===null||r===void 0?void 0:r.Parameters[n]}async getTreatmentVariableAsync(t,n,r){if(r){let i=this.featuresConsumed,o=this.getTreatmentVariable(t,n);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(t,n)}PostEventToTelemetry(t){this.cachedTelemetryEvents.includes(t)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",t]])),this.cachedTelemetryEvents.push(t))}invokeInit(){this.init()}addFeatureProvider(...t){if(!(t==null||this.featureProviders==null))for(let n of t)this.featureProviders.push(n)}};SH.ExperimentationServiceBase=CH});var Tce=_(IH=>{"use strict";Object.defineProperty(IH,"__esModule",{value:!0});var TH=class{constructor(t){this.fetchInterval=t}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(t){this.onTick=t}StartPolling(t=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(t&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};IH.PollingService=TH});var Ice=_(RH=>{"use strict";Object.defineProperty(RH,"__esModule",{value:!0});var vUe=Sce(),yUe=Tce(),PH=class extends vUe.ExperimentationServiceBase{constructor(t,n,r,i,o,s,a){if(super(t,i,o,s,a),this.telemetry=t,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=i,this.telemetryEventName=o,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new yUe.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(t=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(t);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(t)}};RH.ExperimentationServiceAutoPolling=PH});var Pce=_(AH=>{"use strict";Object.defineProperty(AH,"__esModule",{value:!0});var xUe=cae(),wUe=_ce(),EUe=Ice(),cR=class extends EUe.ExperimentationServiceAutoPolling{constructor(t){super(t.telemetry,t.filterProviders||[],t.refetchInterval!=null?t.refetchInterval:0,t.assignmentContextTelemetryPropertyName,t.telemetryEventName,t.storageKey,t.keyValueStorage),this.options=t,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new xUe.TasApiFeatureProvider(new wUe.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};AH.ExperimentationService=cR;cR.REFRESH_RATE_IN_MINUTES=30});var Rce=_(DH=>{"use strict";Object.defineProperty(DH,"__esModule",{value:!0});var bUe=Pce();DH.ExperimentationService=bUe.ExperimentationService});var Ace=_(OH=>{"use strict";Object.defineProperty(OH,"__esModule",{value:!0});var kH=class{constructor(t){this.mementoGlobalStorage=t}async getValue(t,n){return await this.mementoGlobalStorage.get(t)||n}setValue(t,n){this.mementoGlobalStorage.update(t,n)}};OH.MementoKeyValueStorage=kH});var Dce=_(LH=>{"use strict";Object.defineProperty(LH,"__esModule",{value:!0});var NH=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(t){return!1}isCachedFlightEnabled(t){return Promise.resolve(!1)}isFlightEnabledAsync(t){return Promise.resolve(!1)}getTreatmentVariable(t,n){}getTreatmentVariableAsync(t,n){return Promise.resolve(void 0)}};LH.default=NH});var Oce=_(uR=>{"use strict";Object.defineProperty(uR,"__esModule",{value:!0});var _Ue=Qj(),CUe=Rce(),FH=require("vscode"),SUe=Ace(),TUe=Dce(),IUe="https://default.exp-tas.com/vscode/ab",PUe="query-expfeature",RUe="abexp.assignmentcontext",AUe="VSCode.ABExp.FeatureData",DUe=1e3*60*30;function kce(e,t,n,r,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=FH.workspace.getConfiguration("telemetry");if(!(FH.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):FH.env.isTelemetryEnabled))return new TUe.default;let c=[new _Ue.VSCodeFilterProvider(e,t,n),...o],l=new SUe.MementoKeyValueStorage(i);return new CUe.ExperimentationService({filterProviders:c,telemetry:r,storageKey:AUe,keyValueStorage:l,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:RUe,telemetryEventName:PUe,endpoint:IUe,refetchInterval:DUe})}uR.getExperimentationService=kce;async function kUe(e,t,n,r,i,...o){let s=kce(e,t,n,r,i,...o);return await s.initializePromise,s}uR.getExperimentationServiceAsync=kUe});var Lce=_(kE=>{"use strict";Object.defineProperty(kE,"__esModule",{value:!0});var Nce=Oce();kE.getExperimentationService=Nce.getExperimentationService;kE.getExperimentationServiceAsync=Nce.getExperimentationServiceAsync;var OUe=Qj();kE.TargetPopulation=OUe.TargetPopulation});var Ale=_((Zft,Sje)=>{Sje.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.315.1",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.82.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.mountWaylandSocket":{scope:"application",type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"Dev Containers Developer"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"canReopenInTunnel"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"true"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"true"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"view == dockerContainers",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"remoteName =~ /^(wsl)?$/ && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist definitions compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist definitions compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",definitions:"npx npm-run-all --npm-path npm definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --up 3 "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/container-features/{devcontainer-features.json,feature-scripts.env,fish-debian.sh,homebrew-debian.sh,install.sh}" dist',"dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module dev-containers-user-cli-copy-definitions","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-copy-definitions":'copyfiles --up 3 "node_modules/@devcontainers/cli/node_modules/vscode-dev-containers/container-features/{devcontainer-features.json,feature-scripts.env,fish-debian.sh,homebrew-debian.sh,install.sh}" dev-containers-user-cli/dist',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@types/chai":"^4.3.4","@types/follow-redirects":"^1.14.1","@types/js-yaml":"^4.0.5","@types/markdown-it":"^12.2.3","@types/minimist":"^1.2.2","@types/mocha":"^10.0.1","@types/ncp":"^2.0.5","@types/node":"^18.15.3","@types/pull-stream":"^3.6.2","@types/recursive-readdir":"^2.2.1","@types/semver":"^7.3.13","@types/stats-lite":"^2.2.0","@types/tar":"^6.1.4","@types/vscode":"~1.75.0","@types/yargs":"^17.0.22","@typescript-eslint/eslint-plugin":"^5.55.0","@typescript-eslint/experimental-utils":"^5.55.0","@typescript-eslint/parser":"^5.55.0","@vscode/l10n-dev":"^0.0.26",ajv:"^8.12.0",chai:"^4.3.7",copyfiles:"^2.4.1",esbuild:"^0.17.12",eslint:"^8.36.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^8.0.3",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^10.2.0","npm-run-all":"^4.1.5","npm-watch":"^0.11.0","p-all":"^4.0.0",rimraf:"^4.4.0","stats-lite":"^2.2.0","ts-node":"^10.9.1",typescript:"^5.0.2","typescript-formatter":"^7.2.2",vinyl:"^3.0.0","vinyl-fs":"^3.0.3",vsce:"^2.15.0"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#efb3ffca505e252a58d8bf4d48da5ffe4becf0e2","@vscode/extension-telemetry":"^0.7.7","@vscode/l10n":"^0.0.13",applicationinsights:"^2.5.0","find-process":"^1.4.7","follow-redirects":"^1.15.2","js-yaml":"^4.1.0","jsonc-parser":"^3.2.0",muxrpc:"^6.7.3","node-pty":"^0.10.1","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.5.2","stream-to-pull-stream":"^1.7.3",tar:"^6.1.13","vscode-tas-client":"^0.1.63","vscode-uri":"^3.0.7",yargs:"~17.7.1"}}});var eHe={};Xs(eHe,{activate:()=>Tje,attachToContainer:()=>JE,deactivate:()=>Aje});module.exports=qi(eHe);var O=B(require("vscode")),Nle=B(Er()),te=require("vscode"),Lle=B(require("os")),KR=B(require("fs")),pn=B(require("path")),Fle=B(require("querystring"));function Nv(e,t=!1){let n=e.length,r=0,i="",o=0,s=16,a=0,u=0,c=0,l=0,d=0;function p(x,w){let b=0,S=0;for(;b<x||!w;){let R=e.charCodeAt(r);if(R>=48&&R<=57)S=S*16+R-48;else if(R>=65&&R<=70)S=S*16+R-65+10;else if(R>=97&&R<=102)S=S*16+R-97+10;else break;r++,b++}return b<x&&(S=-1),S}function f(x){r=x,i="",o=0,s=16,d=0}function m(){let x=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&kf(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&kf(e.charCodeAt(r)))for(r++;r<e.length&&kf(e.charCodeAt(r));)r++;else return d=3,e.substring(x,r);let w=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&kf(e.charCodeAt(r))){for(r++;r<e.length&&kf(e.charCodeAt(r));)r++;w=r}else d=3;return e.substring(x,w)}function h(){let x="",w=r;for(;;){if(r>=n){x+=e.substring(w,r),d=2;break}let b=e.charCodeAt(r);if(b===34){x+=e.substring(w,r),r++;break}if(b===92){if(x+=e.substring(w,r),r++,r>=n){d=2;break}switch(e.charCodeAt(r++)){case 34:x+='"';break;case 92:x+="\\";break;case 47:x+="/";break;case 98:x+="\b";break;case 102:x+="\f";break;case 110:x+=`
`;break;case 114:x+="\r";break;case 116:x+="	";break;case 117:let R=p(4,!0);R>=0?x+=String.fromCharCode(R):d=4;break;default:d=5}w=r;continue}if(b>=0&&b<=31)if(Ov(b)){x+=e.substring(w,r),d=2;break}else d=6;r++}return x}function v(){if(i="",d=0,o=r,u=a,l=c,r>=n)return o=n,s=17;let x=e.charCodeAt(r);if(JR(x)){do r++,i+=String.fromCharCode(x),x=e.charCodeAt(r);while(JR(x));return s=15}if(Ov(x))return r++,i+=String.fromCharCode(x),x===13&&e.charCodeAt(r)===10&&(r++,i+=`
`),a++,c=r,s=14;switch(x){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=h(),s=10;case 47:let w=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<n&&!Ov(e.charCodeAt(r));)r++;return i=e.substring(w,r),s=12}if(e.charCodeAt(r+1)===42){r+=2;let b=n-1,S=!1;for(;r<b;){let R=e.charCodeAt(r);if(R===42&&e.charCodeAt(r+1)===47){r+=2,S=!0;break}r++,Ov(R)&&(R===13&&e.charCodeAt(r)===10&&r++,a++,c=r)}return S||(r++,d=1),i=e.substring(w,r),s=13}return i+=String.fromCharCode(x),r++,s=16;case 45:if(i+=String.fromCharCode(x),r++,r===n||!kf(e.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;r<n&&g(x);)r++,x=e.charCodeAt(r);if(o!==r){switch(i=e.substring(o,r),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(x),r++,s=16}}function g(x){if(JR(x)||Ov(x))return!1;switch(x){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let x;do x=v();while(x>=12&&x<=15);return x}return{setPosition:f,getPosition:()=>r,scan:t?y:v,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>r-o,getTokenStartLine:()=>u,getTokenStartCharacter:()=>o-l,getTokenError:()=>d}}function JR(e){return e===32||e===9}function Ov(e){return e===10||e===13}function kf(e){return e>=48&&e<=57}var Y$;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(Y$||(Y$={}));function ZR(e,t,n){let r,i,o,s,a;if(t){for(s=t.offset,a=s+t.length,o=s;o>0&&!Lv(e,o-1);)o--;let x=a;for(;x<e.length&&!Lv(e,x);)x++;i=e.substring(o,x),r=fde(i,n)}else i=e,r=0,o=0,s=0,a=e.length;let u=mde(n,e),c=0,l=0,d;n.insertSpaces?d=Of(" ",n.tabSize||4):d="	";let p=Nv(i,!1),f=!1;function m(){return c>1?Of(u,c)+Of(d,r+l):u+Of(d,r+l)}function h(){let x=p.scan();for(c=0;x===15||x===14;)x===14&&n.keepLines?c+=1:x===14&&(c=1),x=p.scan();return f=x===16||p.getTokenError()!==0,x}let v=[];function g(x,w,b){!f&&(!t||w<a&&b>s)&&e.substring(w,b)!==x&&v.push({offset:w,length:b-w,content:x})}let y=h();if(n.keepLines&&c>0&&g(Of(u,c),0,0),y!==17){let x=p.getTokenOffset()+o,w=Of(d,r);g(w,o,x)}for(;y!==17;){let x=p.getTokenOffset()+p.getTokenLength()+o,w=h(),b="",S=!1;for(;c===0&&(w===12||w===13);){let P=p.getTokenOffset()+o;g(" ",x,P),x=p.getTokenOffset()+p.getTokenLength()+o,S=w===12,b=S?m():"",w=h()}if(w===2)y!==1&&l--,n.keepLines&&c>0||!n.keepLines&&y!==1?b=m():n.keepLines&&(b=" ");else if(w===4)y!==3&&l--,n.keepLines&&c>0||!n.keepLines&&y!==3?b=m():n.keepLines&&(b=" ");else{switch(y){case 3:case 1:l++,n.keepLines&&c>0||!n.keepLines?b=m():b=" ";break;case 5:n.keepLines&&c>0||!n.keepLines?b=m():b=" ";break;case 12:b=m();break;case 13:c>0?b=m():S||(b=" ");break;case 6:n.keepLines&&c>0?b=m():S||(b=" ");break;case 10:n.keepLines&&c>0?b=m():w===6&&!S&&(b="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&c>0?b=m():(w===12||w===13)&&!S?b=" ":w!==5&&w!==17&&(f=!0);break;case 16:f=!0;break}c>0&&(w===12||w===13)&&(b=m())}w===17&&(n.keepLines&&c>0?b=m():b=n.insertFinalNewline?u:"");let R=p.getTokenOffset()+o;g(b,x,R),y=w}return v}function Of(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}function fde(e,t){let n=0,r=0,i=t.tabSize||4;for(;n<e.length;){let o=e.charAt(n);if(o===" ")r++;else if(o==="	")r+=i;else break;n++}return Math.floor(r/i)}function mde(e,t){for(let n=0;n<t.length;n++){let r=t.charAt(n);if(r==="\r")return n+1<t.length&&t.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return e&&e.eol||`
`}function Lv(e,t){return`\r
`.indexOf(e.charAt(t))!==-1}var Fv;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Fv||(Fv={}));function K$(e,t){let n=[],r=new Object,i,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(u,c,l,d){o.value=u,o.offset=c,o.length=l,o.type=d,o.colonOffset=void 0,i=o}try{db(e,{onObjectBegin:(u,c)=>{if(t<=u)throw r;i=void 0,s=t>u,n.push("")},onObjectProperty:(u,c,l)=>{if(t<c||(a(u,c,l,"property"),n[n.length-1]=u,t<=c+l))throw r},onObjectEnd:(u,c)=>{if(t<=u)throw r;i=void 0,n.pop()},onArrayBegin:(u,c)=>{if(t<=u)throw r;i=void 0,n.push(0)},onArrayEnd:(u,c)=>{if(t<=u)throw r;i=void 0,n.pop()},onLiteralValue:(u,c,l)=>{if(t<c||(a(u,c,l,Q$(u)),t<=c+l))throw r},onSeparator:(u,c,l)=>{if(t<=c)throw r;if(u===":"&&i&&i.type==="property")i.colonOffset=c,s=!1,i=void 0;else if(u===","){let d=n[n.length-1];typeof d=="number"?n[n.length-1]=d+1:(s=!0,n[n.length-1]=""),i=void 0}}})}catch(u){if(u!==r)throw u}return{path:n,previousNode:i,isAtPropertyKey:s,matches:u=>{let c=0;for(let l=0;c<u.length&&l<n.length;l++)if(u[c]===n[l]||u[c]==="*")c++;else if(u[c]!=="**")return!1;return c===u.length}}}function X$(e,t=[],n=Fv.DEFAULT){let r=null,i=[],o=[];function s(u){Array.isArray(i)?i.push(u):r!==null&&(i[r]=u)}return db(e,{onObjectBegin:()=>{let u={};s(u),o.push(i),i=u,r=null},onObjectProperty:u=>{r=u},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let u=[];s(u),o.push(i),i=u,r=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(u,c,l)=>{t.push({error:u,offset:c,length:l})}},n),i[0]}function lb(e,t=[],n=Fv.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(u){r.type==="property"&&(r.length=u-r.offset,r=r.parent)}function o(u){return r.children.push(u),u}db(e,{onObjectBegin:u=>{r=o({type:"object",offset:u,length:-1,parent:r,children:[]})},onObjectProperty:(u,c,l)=>{r=o({type:"property",offset:c,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:u,offset:c,length:l,parent:r})},onObjectEnd:(u,c)=>{i(u+c),r.length=u+c-r.offset,r=r.parent,i(u+c)},onArrayBegin:(u,c)=>{r=o({type:"array",offset:u,length:-1,parent:r,children:[]})},onArrayEnd:(u,c)=>{r.length=u+c-r.offset,r=r.parent,i(u+c)},onLiteralValue:(u,c,l)=>{o({type:Q$(u),offset:c,length:l,parent:r,value:u}),i(c+l)},onSeparator:(u,c,l)=>{r.type==="property"&&(u===":"?r.colonOffset=c:u===","&&i(c))},onError:(u,c,l)=>{t.push({error:u,offset:c,length:l})}},n);let a=r.children[0];return a&&delete a.parent,a}function Mv(e,t){if(!e)return;let n=e;for(let r of t)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let i=!1;for(let o of n.children)if(Array.isArray(o.children)&&o.children[0].value===r&&o.children.length===2){n=o.children[1],i=!0;break}if(!i)return}else{let i=r;if(n.type!=="array"||i<0||!Array.isArray(n.children)||i>=n.children.length)return;n=n.children[i]}return n}function ub(e){switch(e.type){case"array":return e.children.map(ub);case"object":let t=Object.create(null);for(let n of e.children){let r=n.children[1];r&&(t[n.children[0].value]=ub(r))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function db(e,t,n=Fv.DEFAULT){let r=Nv(e,!1),i=[];function o(I){return I?()=>I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function s(I){return I?()=>I(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}function a(I){return I?A=>I(A,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function u(I){return I?A=>I(A,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}let c=s(t.onObjectBegin),l=u(t.onObjectProperty),d=o(t.onObjectEnd),p=s(t.onArrayBegin),f=o(t.onArrayEnd),m=u(t.onLiteralValue),h=a(t.onSeparator),v=o(t.onComment),g=a(t.onError),y=n&&n.disallowComments,x=n&&n.allowTrailingComma;function w(){for(;;){let I=r.scan();switch(r.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:y||b(11);break;case 2:b(12);break;case 6:b(16);break}switch(I){case 12:case 13:y?b(10):v();break;case 16:b(1);break;case 15:case 14:break;default:return I}}}function b(I,A=[],N=[]){if(g(I),A.length+N.length>0){let F=r.getToken();for(;F!==17;){if(A.indexOf(F)!==-1){w();break}else if(N.indexOf(F)!==-1)break;F=w()}}}function S(I){let A=r.getTokenValue();return I?m(A):(l(A),i.push(A)),w(),!0}function R(){switch(r.getToken()){case 11:let I=r.getTokenValue(),A=Number(I);isNaN(A)&&(b(2),A=0),m(A);break;case 7:m(null);break;case 8:m(!0);break;case 9:m(!1);break;default:return!1}return w(),!0}function P(){return r.getToken()!==10?(b(3,[],[2,5]),!1):(S(!1),r.getToken()===6?(h(":"),w(),T()||b(4,[],[2,5])):b(5,[],[2,5]),i.pop(),!0)}function E(){c(),w();let I=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(I||b(4,[],[]),h(","),w(),r.getToken()===2&&x)break}else I&&b(6,[],[]);P()||b(4,[],[2,5]),I=!0}return d(),r.getToken()!==2?b(7,[2],[]):w(),!0}function C(){p(),w();let I=!0,A=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(A||b(4,[],[]),h(","),w(),r.getToken()===4&&x)break}else A&&b(6,[],[]);I?(i.push(0),I=!1):i[i.length-1]++,T()||b(4,[],[4,5]),A=!0}return f(),I||i.pop(),r.getToken()!==4?b(8,[4],[]):w(),!0}function T(){switch(r.getToken()){case 3:return C();case 1:return E();case 10:return S(!0);default:return R()}}return w(),r.getToken()===17?n.allowEmptyContent?!0:(b(4,[],[]),!1):T()?(r.getToken()!==17&&b(9,[],[]),!0):(b(4,[],[]),!1)}function Q$(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}function J$(e,t,n,r){let i=t.slice(),s=lb(e,[]),a,u;for(;i.length>0&&(u=i.pop(),a=Mv(s,i),a===void 0&&n!==void 0);)typeof u=="string"?n={[u]:n}:n=[n];if(a)if(a.type==="object"&&typeof u=="string"&&Array.isArray(a.children)){let c=Mv(a,[u]);if(c!==void 0)if(n===void 0){if(!c.parent)throw new Error("Malformed AST");let l=a.children.indexOf(c.parent),d,p=c.parent.offset+c.parent.length;if(l>0){let f=a.children[l-1];d=f.offset+f.length}else d=a.offset+1,a.children.length>1&&(p=a.children[1].offset);return ud(e,{offset:d,length:p-d,content:""},r)}else return ud(e,{offset:c.offset,length:c.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let l=`${JSON.stringify(u)}: ${JSON.stringify(n)}`,d=r.getInsertionIndex?r.getInsertionIndex(a.children.map(f=>f.children[0].value)):a.children.length,p;if(d>0){let f=a.children[d-1];p={offset:f.offset+f.length,length:0,content:","+l}}else a.children.length===0?p={offset:a.offset+1,length:0,content:l}:p={offset:a.offset+1,length:0,content:l+","};return ud(e,p,r)}}else if(a.type==="array"&&typeof u=="number"&&Array.isArray(a.children)){let c=u;if(c===-1){let l=`${JSON.stringify(n)}`,d;if(a.children.length===0)d={offset:a.offset+1,length:0,content:l};else{let p=a.children[a.children.length-1];d={offset:p.offset+p.length,length:0,content:","+l}}return ud(e,d,r)}else if(n===void 0&&a.children.length>=0){let l=u,d=a.children[l],p;if(a.children.length===1)p={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===l){let f=a.children[l-1],m=f.offset+f.length,h=a.offset+a.length;p={offset:m,length:h-2-m,content:""}}else p={offset:d.offset,length:a.children[l+1].offset-d.offset,content:""};return ud(e,p,r)}else if(n!==void 0){let l,d=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>u){let p=a.children[u];l={offset:p.offset,length:p.length,content:d}}else if(a.children.length===0||u===0)l={offset:a.offset+1,length:0,content:a.children.length===0?d:d+","};else{let p=u>a.children.length?a.children.length:u,f=a.children[p-1];l={offset:f.offset+f.length,length:0,content:","+d}}return ud(e,l,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${c} as length is not sufficient`)}else throw new Error(`Can not add ${typeof u!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return ud(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function ud(e,t,n){if(!n.formattingOptions)return[t];let r=pb(e,t),i=t.offset,o=t.offset+t.content.length;if(t.length===0||t.content.length===0){for(;i>0&&!Lv(r,i-1);)i--;for(;o<r.length&&!Lv(r,o);)o++}let s=ZR(r,{offset:i,length:o-i},{...n.formattingOptions,keepLines:!1});for(let u=s.length-1;u>=0;u--){let c=s[u];r=pb(r,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}let a=e.length-(r.length-o)-i;return[{offset:i,length:a,content:r.substring(i,o)}]}function pb(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}var Z$;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(Z$||(Z$={}));var e2;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(e2||(e2={}));var n2=K$,Ge=X$,ld=lb,os=Mv;var fb=ub;var t2;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(t2||(t2={}));function Cn(e,t,n,r){return J$(e,t,n,r)}function ci(e,t){let n=t.slice(0).sort((i,o)=>{let s=i.offset-o.offset;return s===0?i.length-o.length:s}),r=e.length;for(let i=n.length-1;i>=0;i--){let o=n[i];if(o.offset+o.length<=r)e=pb(e,o);else throw new Error("Overlapping edit");r=o.offset}return e}var Ht=B(require("fs")),Qs=require("util");function br(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(!n&&r.isFile())))}function r2(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(!n&&r.isDirectory())))}function i2(e){return new Promise(t=>Ht.stat(e,(n,r)=>t(!n&&r.isSocket())))}var st=(0,Qs.promisify)(Ht.readFile),mb=(0,Qs.promisify)(Ht.writeFile),lHe=(0,Qs.promisify)(Ht.appendFile),Va=(0,Qs.promisify)(Ht.rename),hu=(0,Qs.promisify)(Ht.readdir),o2=(0,Qs.promisify)(Ht.unlink),ss=e=>new Promise((t,n)=>Ht.mkdir(e,{recursive:!0},r=>r?n(r):t())),s2=(0,Qs.promisify)(Ht.rmdir),gu=(0,Qs.promisify)(Ht.rm),dHe=(0,Qs.promisify)(Ht.copyFile);function eA(e,t,n){let r=e.relative(t,n);return!!r&&!r.startsWith("..")&&!e.isAbsolute(r)}var Ue=B(require("vscode")),xr=require("vscode"),WE=B(require("path"));var sx=B(require("path")),$m=B(Er());var l2=B(require("os")),qv=B(require("fs")),d2=B(require("path"));var tA=require("events"),Wa=class{constructor(...t){this.nodeEmitter=new tA.EventEmitter;this.event=t=>(this.nodeEmitter.on("event",t),{dispose:()=>{this.nodeEmitter.off("event",t)}});this.disposables=t}fire(t){this.nodeEmitter.emit("event",t)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(t=>t.dispose())}},hb=class{constructor(){this.nodeEmitter=new tA.EventEmitter;this.event=t=>{let n=r=>r.results.push(t(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}}}fire(t){let n=[];return this.nodeEmitter.emit("event",{data:t,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function a2(e,t){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:t,package:e,getTelemetryLevel:()=>"off"}}var ji=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(ji||{}),rA={info:3,debug:2,trace:1},yde=Object.keys(rA).reduce((e,t)=>(e[rA[t]]=t,e),[]);function vb(e){return rA[e]||3}function xo(e){return yde[e]||3}var Ce={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},vu=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function p2(e,t){let n=!!t;return{event:r=>{n&&(n=!1,e.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:t}))),e.forEach(i=>i.event(r))}}}function f2(e,t){let n=Ede(e);return{event(r){let i=wde(r,t());i&&n.write(i)},join:n.join}}function m2(e,t,n){return{event(r){let i=xde(r,t(),n.getTime());i&&e(i)}}}function Hi(e,t=2){return{event:e.event,write(n,r=t){e.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=t){e.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=t){let i=Date.now();return e.event({type:"start",level:r,timestamp:i,text:n}),i},stop(n,r,i=t){e.event({type:"stop",level:i,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return e.dimensions},onDidChangeDimensions:e.onDidChangeDimensions}}function xde(e,t,n){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":return`[${Uv(c2,`${e.timestamp-n} ms`)}] ${gb(e.text)}`;case"raw":return e.text;case"start":return 1>=t?`${Uv(Sde,`[${e.timestamp-n} ms] Start`)}: ${gb(e.text)}`:`[${Uv(c2,`${e.timestamp-n} ms`)}] Start: ${gb(e.text)}`;case"stop":return 1>=t?`${Uv(Cde,`[${e.timestamp-n} ms] Stop`)} (${e.timestamp-e.startTimestamp} ms): ${gb(e.text)}`:void 0;default:throw h2(e)}}function gb(e){return Ide(e).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function wde(e,t){if(!(!("level"in e)||e.level<t))switch(e.type){case"text":case"raw":return`[${new Date(e.timestamp).toISOString()}] ${nA(e.text)}`;case"start":return`[${new Date(e.timestamp).toISOString()}] Start: ${nA(e.text)}`;case"stop":return 2>=t?`[${new Date(e.timestamp).toISOString()}] Stop (${e.timestamp-e.startTimestamp} ms): ${nA(e.text)}`:void 0;default:throw h2(e)}}function nA(e){return e.replace(vu,"").replace(/(\r?\n)?$/,l2.EOL)}function h2(e){return new Error(`Unknown log event type: ${e.type}`)}function Ede(e){let t=[],n=!1,r,i;function o(){n=!1,i&&!t.length&&(r=void 0,i(),i=void 0)}function s(a,u=!1){if(a&&t.push(a),!u&&!n&&t.length){n=!0;let c=t.join("");t.length=0,qv.appendFile(e,c,l=>{l&&(l.code==="ENOENT"?qv.mkdir(d2.dirname(e),{recursive:!0},d=>{d?(o(),console.error(d)):qv.appendFile(e,c,p=>{o(),p&&console.error(p),s()})}):(o(),console.error(l))),o(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>i=a):Promise.resolve())}}var bde="38;2;143;99;79",g2="38;2;99;143;79",_de="38;2;86;156;214",Cde=bde,Sde=g2,c2=g2,Tde=_de;function Uv(e,t){return t.split(`
`).map(n=>`\x1B[1m\x1B[${e}m${n}\x1B[39m\x1B[22m`).join(`
`)}function Ide(e){let t,n=0,r=[];for(vu.lastIndex=0;t=vu.exec(e);)r.push(u2(e.substring(n,t.index))),r.push(t[0]),n=vu.lastIndex;return r.push(u2(e.substr(n))),r.join("")}function u2(e){let t=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,i=[];for(;n=t.exec(e);)i.push(e.substring(r,n.index)),i.push(Uv(Tde,n[0])),r=t.lastIndex;return i.push(e.substr(r)),i.join("")}function pt(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[31m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function iA(e){return e.split(/\r?\n/).map(t=>`\x1B[1m\x1B[33m${t}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var he=class extends Error{constructor(n){var r;super(n.originalError&&n.originalError.message||n.description);this.manageContainer=!1;this.actions=[];this.data={};Object.assign(this,n),(r=this.originalError)!=null&&r.stack&&(this.stack=this.originalError.stack)}};var ge=B(require("path")),OC=B(require("fs")),f6=B(Uf()),wO=require("string_decoder"),NC=B(N_());var AC=B(require("crypto")),m6=B(wk()),Pm=B(Er());var Rxe=B(require("path")),pO=require("string_decoder");var bC=B(require("path")),DY=B(require("fs")),kY=B(require("os")),_m=B(require("child_process")),dO=require("string_decoder");var _Y=B(require("path")),CY=B(require("assert"));var Mz;(()=>{"use strict";var e={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,c){for(var l,d="",p=0,f=-1,m=0,h=0;h<=u.length;++h){if(h<u.length)l=u.charCodeAt(h);else{if(l===47)break;l=47}if(l===47){if(!(f===h-1||m===1))if(f!==h-1&&m===2){if(d.length<2||p!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var v=d.lastIndexOf("/");if(v!==d.length-1){v===-1?(d="",p=0):p=(d=d.slice(0,v)).length-1-d.lastIndexOf("/"),f=h,m=0;continue}}else if(d.length===2||d.length===1){d="",p=0,f=h,m=0;continue}}c&&(d.length>0?d+="/..":d="..",p=2)}else d.length>0?d+="/"+u.slice(f+1,h):d=u.slice(f+1,h),p=h-f-1;f=h,m=0}else l===46&&m!==-1?++m:m=-1}return d}var a={resolve:function(){for(var u,c="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var p;d>=0?p=arguments[d]:(u===void 0&&(u=process.cwd()),p=u),o(p),p.length!==0&&(c=p+"/"+c,l=p.charCodeAt(0)===47)}return c=s(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(u){if(o(u),u.length===0)return".";var c=u.charCodeAt(0)===47,l=u.charCodeAt(u.length-1)===47;return(u=s(u,!c)).length!==0||c||(u="."),u.length>0&&l&&(u+="/"),c?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,c=0;c<arguments.length;++c){var l=arguments[c];o(l),l.length>0&&(u===void 0?u=l:u+="/"+l)}return u===void 0?".":a.normalize(u)},relative:function(u,c){if(o(u),o(c),u===c||(u=a.resolve(u))===(c=a.resolve(c)))return"";for(var l=1;l<u.length&&u.charCodeAt(l)===47;++l);for(var d=u.length,p=d-l,f=1;f<c.length&&c.charCodeAt(f)===47;++f);for(var m=c.length-f,h=p<m?p:m,v=-1,g=0;g<=h;++g){if(g===h){if(m>h){if(c.charCodeAt(f+g)===47)return c.slice(f+g+1);if(g===0)return c.slice(f+g)}else p>h&&(u.charCodeAt(l+g)===47?v=g:g===0&&(v=0));break}var y=u.charCodeAt(l+g);if(y!==c.charCodeAt(f+g))break;y===47&&(v=g)}var x="";for(g=l+v+1;g<=d;++g)g!==d&&u.charCodeAt(g)!==47||(x.length===0?x+="..":x+="/..");return x.length>0?x+c.slice(f+v):(f+=v,c.charCodeAt(f)===47&&++f,c.slice(f))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var c=u.charCodeAt(0),l=c===47,d=-1,p=!0,f=u.length-1;f>=1;--f)if((c=u.charCodeAt(f))===47){if(!p){d=f;break}}else p=!1;return d===-1?l?"/":".":l&&d===1?"//":u.slice(0,d)},basename:function(u,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');o(u);var l,d=0,p=-1,f=!0;if(c!==void 0&&c.length>0&&c.length<=u.length){if(c.length===u.length&&c===u)return"";var m=c.length-1,h=-1;for(l=u.length-1;l>=0;--l){var v=u.charCodeAt(l);if(v===47){if(!f){d=l+1;break}}else h===-1&&(f=!1,h=l+1),m>=0&&(v===c.charCodeAt(m)?--m==-1&&(p=l):(m=-1,p=h))}return d===p?p=h:p===-1&&(p=u.length),u.slice(d,p)}for(l=u.length-1;l>=0;--l)if(u.charCodeAt(l)===47){if(!f){d=l+1;break}}else p===-1&&(f=!1,p=l+1);return p===-1?"":u.slice(d,p)},extname:function(u){o(u);for(var c=-1,l=0,d=-1,p=!0,f=0,m=u.length-1;m>=0;--m){var h=u.charCodeAt(m);if(h!==47)d===-1&&(p=!1,d=m+1),h===46?c===-1?c=m:f!==1&&(f=1):c!==-1&&(f=-1);else if(!p){l=m+1;break}}return c===-1||d===-1||f===0||f===1&&c===d-1&&c===l+1?"":u.slice(c,d)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(c,l){var d=l.dir||l.root,p=l.base||(l.name||"")+(l.ext||"");return d?d===l.root?d+p:d+"/"+p:p}(0,u)},parse:function(u){o(u);var c={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return c;var l,d=u.charCodeAt(0),p=d===47;p?(c.root="/",l=1):l=0;for(var f=-1,m=0,h=-1,v=!0,g=u.length-1,y=0;g>=l;--g)if((d=u.charCodeAt(g))!==47)h===-1&&(v=!1,h=g+1),d===46?f===-1?f=g:y!==1&&(y=1):f!==-1&&(y=-1);else if(!v){m=g+1;break}return f===-1||h===-1||y===0||y===1&&f===h-1&&f===m+1?h!==-1&&(c.base=c.name=m===0&&p?u.slice(1,h):u.slice(m,h)):(m===0&&p?(c.name=u.slice(1,f),c.base=u.slice(1,h)):(c.name=u.slice(m,f),c.base=u.slice(m,h)),c.ext=u.slice(f,h)),m>0?c.dir=u.slice(0,m-1):p&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,i.exports=a}},t={};function n(i){var o=t[i];if(o!==void 0)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.d=(i,o)=>{for(var s in o)n.o(o,s)&&!n.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},n.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),n.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{var i;if(n.r(r),n.d(r,{URI:()=>v,Utils:()=>T}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var o=navigator.userAgent;i=o.indexOf("Windows")>=0}var s,a,u=(s=function(L,M){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,W){j.__proto__=W}||function(j,W){for(var k in W)Object.prototype.hasOwnProperty.call(W,k)&&(j[k]=W[k])},s(L,M)},function(L,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function j(){this.constructor=L}s(L,M),L.prototype=M===null?Object.create(M):(j.prototype=M.prototype,new j)}),c=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//;function p(L,M){if(!L.scheme&&M)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(L.authority,'", path: "').concat(L.path,'", query: "').concat(L.query,'", fragment: "').concat(L.fragment,'"}'));if(L.scheme&&!c.test(L.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(L.path){if(L.authority){if(!l.test(L.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(L.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var f="",m="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,v=function(){function L(M,j,W,k,H,$){$===void 0&&($=!1),typeof M=="object"?(this.scheme=M.scheme||f,this.authority=M.authority||f,this.path=M.path||f,this.query=M.query||f,this.fragment=M.fragment||f):(this.scheme=function(V,ie){return V||ie?V:"file"}(M,$),this.authority=j||f,this.path=function(V,ie){switch(V){case"https":case"http":case"file":ie?ie[0]!==m&&(ie=m+ie):ie=m}return ie}(this.scheme,W||f),this.query=k||f,this.fragment=H||f,p(this,$))}return L.isUri=function(M){return M instanceof L||!!M&&typeof M.authority=="string"&&typeof M.fragment=="string"&&typeof M.path=="string"&&typeof M.query=="string"&&typeof M.scheme=="string"&&typeof M.fsPath=="string"&&typeof M.with=="function"&&typeof M.toString=="function"},Object.defineProperty(L.prototype,"fsPath",{get:function(){return S(this,!1)},enumerable:!1,configurable:!0}),L.prototype.with=function(M){if(!M)return this;var j=M.scheme,W=M.authority,k=M.path,H=M.query,$=M.fragment;return j===void 0?j=this.scheme:j===null&&(j=f),W===void 0?W=this.authority:W===null&&(W=f),k===void 0?k=this.path:k===null&&(k=f),H===void 0?H=this.query:H===null&&(H=f),$===void 0?$=this.fragment:$===null&&($=f),j===this.scheme&&W===this.authority&&k===this.path&&H===this.query&&$===this.fragment?this:new y(j,W,k,H,$)},L.parse=function(M,j){j===void 0&&(j=!1);var W=h.exec(M);return W?new y(W[2]||f,C(W[4]||f),C(W[5]||f),C(W[7]||f),C(W[9]||f),j):new y(f,f,f,f,f)},L.file=function(M){var j=f;if(i&&(M=M.replace(/\\/g,m)),M[0]===m&&M[1]===m){var W=M.indexOf(m,2);W===-1?(j=M.substring(2),M=m):(j=M.substring(2,W),M=M.substring(W)||m)}return new y("file",j,M,f,f)},L.from=function(M){var j=new y(M.scheme,M.authority,M.path,M.query,M.fragment);return p(j,!0),j},L.prototype.toString=function(M){return M===void 0&&(M=!1),R(this,M)},L.prototype.toJSON=function(){return this},L.revive=function(M){if(M){if(M instanceof L)return M;var j=new y(M);return j._formatted=M.external,j._fsPath=M._sep===g?M.fsPath:null,j}return M},L}(),g=i?1:void 0,y=function(L){function M(){var j=L!==null&&L.apply(this,arguments)||this;return j._formatted=null,j._fsPath=null,j}return u(M,L),Object.defineProperty(M.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=S(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),M.prototype.toString=function(j){return j===void 0&&(j=!1),j?R(this,!0):(this._formatted||(this._formatted=R(this,!1)),this._formatted)},M.prototype.toJSON=function(){var j={$mid:1};return this._fsPath&&(j.fsPath=this._fsPath,j._sep=g),this._formatted&&(j.external=this._formatted),this.path&&(j.path=this.path),this.scheme&&(j.scheme=this.scheme),this.authority&&(j.authority=this.authority),this.query&&(j.query=this.query),this.fragment&&(j.fragment=this.fragment),j},M}(v),x=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function w(L,M,j){for(var W=void 0,k=-1,H=0;H<L.length;H++){var $=L.charCodeAt(H);if($>=97&&$<=122||$>=65&&$<=90||$>=48&&$<=57||$===45||$===46||$===95||$===126||M&&$===47||j&&$===91||j&&$===93||j&&$===58)k!==-1&&(W+=encodeURIComponent(L.substring(k,H)),k=-1),W!==void 0&&(W+=L.charAt(H));else{W===void 0&&(W=L.substr(0,H));var V=x[$];V!==void 0?(k!==-1&&(W+=encodeURIComponent(L.substring(k,H)),k=-1),W+=V):k===-1&&(k=H)}}return k!==-1&&(W+=encodeURIComponent(L.substring(k))),W!==void 0?W:L}function b(L){for(var M=void 0,j=0;j<L.length;j++){var W=L.charCodeAt(j);W===35||W===63?(M===void 0&&(M=L.substr(0,j)),M+=x[W]):M!==void 0&&(M+=L[j])}return M!==void 0?M:L}function S(L,M){var j;return j=L.authority&&L.path.length>1&&L.scheme==="file"?"//".concat(L.authority).concat(L.path):L.path.charCodeAt(0)===47&&(L.path.charCodeAt(1)>=65&&L.path.charCodeAt(1)<=90||L.path.charCodeAt(1)>=97&&L.path.charCodeAt(1)<=122)&&L.path.charCodeAt(2)===58?M?L.path.substr(1):L.path[1].toLowerCase()+L.path.substr(2):L.path,i&&(j=j.replace(/\//g,"\\")),j}function R(L,M){var j=M?b:w,W="",k=L.scheme,H=L.authority,$=L.path,V=L.query,ie=L.fragment;if(k&&(W+=k,W+=":"),(H||k==="file")&&(W+=m,W+=m),H){var be=H.indexOf("@");if(be!==-1){var Re=H.substr(0,be);H=H.substr(be+1),(be=Re.lastIndexOf(":"))===-1?W+=j(Re,!1,!1):(W+=j(Re.substr(0,be),!1,!1),W+=":",W+=j(Re.substr(be+1),!1,!0)),W+="@"}(be=(H=H.toLowerCase()).lastIndexOf(":"))===-1?W+=j(H,!1,!0):(W+=j(H.substr(0,be),!1,!0),W+=H.substr(be))}if($){if($.length>=3&&$.charCodeAt(0)===47&&$.charCodeAt(2)===58)(Le=$.charCodeAt(1))>=65&&Le<=90&&($="/".concat(String.fromCharCode(Le+32),":").concat($.substr(3)));else if($.length>=2&&$.charCodeAt(1)===58){var Le;(Le=$.charCodeAt(0))>=65&&Le<=90&&($="".concat(String.fromCharCode(Le+32),":").concat($.substr(2)))}W+=j($,!0,!1)}return V&&(W+="?",W+=j(V,!1,!1)),ie&&(W+="#",W+=M?ie:w(ie,!1,!1)),W}function P(L){try{return decodeURIComponent(L)}catch{return L.length>3?L.substr(0,3)+P(L.substr(3)):L}}var E=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(L){return L.match(E)?L.replace(E,function(M){return P(M)}):L}var T,I=n(470),A=function(L,M,j){if(j||arguments.length===2)for(var W,k=0,H=M.length;k<H;k++)!W&&k in M||(W||(W=Array.prototype.slice.call(M,0,k)),W[k]=M[k]);return L.concat(W||Array.prototype.slice.call(M))},N=I.posix||I,F="/";(function(L){L.joinPath=function(M){for(var j=[],W=1;W<arguments.length;W++)j[W-1]=arguments[W];return M.with({path:N.join.apply(N,A([M.path],j,!1))})},L.resolvePath=function(M){for(var j=[],W=1;W<arguments.length;W++)j[W-1]=arguments[W];var k=M.path,H=!1;k[0]!==F&&(k=F+k,H=!0);var $=N.resolve.apply(N,A([k],j,!1));return H&&$[0]===F&&!M.authority&&($=$.substring(1)),M.with({path:$})},L.dirname=function(M){if(M.path.length===0||M.path===F)return M;var j=N.dirname(M.path);return j.length===1&&j.charCodeAt(0)===46&&(j=""),M.with({path:j})},L.basename=function(M){return N.basename(M.path)},L.extname=function(M){return N.extname(M.path)}})(T||(T={}))})(),Mz=r})();var{URI:ye,Utils:Ki}=Mz;var Uz=B(require("path"));var Ou=B(Er());function At(e,t){if(by(t)){let n=e.dirname(t);return{isWorkspaceFile:!0,workspaceOrFolderPath:t,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:t,rootFolderPath:t,configFolderPath:t}}function by(e){return Uz.extname(e)===".code-workspace"}async function G_(e,t){if(t.isWorkspaceFile)try{let n=t.rootFolderPath,r=(await e.readFile(t.workspaceOrFolderPath)).toString(),o=Ge(r).folders;if(o&&o.length>0){for(let s of o){let a=s.path,u;if(a){if(e.path.isAbsolute(a))return Ou.t("Workspace contains an absolute folder path '{0}'.",a);u=e.path.resolve(n,a)}else{let c=s.uri;return c?ye.parse(c).scheme!=="file"?Ou.t("Workspace contains folder '{0}' not on the local file system.",c):Ou.t("Workspace contains an absolute folder path '{0}'.",c):Ou.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!Lve(e,u,n))return Ou.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",u,n)}return}return Ou.t("Workspace does not define any folders")}catch(n){return Ou.t("Problems loading workspace file {0}: {1}",t.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function Lve(e,t,n){return t===n?!0:!t||!n||n.length>t.length||t.length>n.length&&t.charAt(n.length)!==e.path.sep?!1:Fve(e.platform,n,t.substr(0,n.length))}function Fve(e,t,n){return e==="linux"?t===n:t.toLowerCase()===n.toLowerCase()}var Sn=B(require("path")),uC=B(N_()),Zk=B(require("crypto")),aC=B(_y()),yY=require("string_decoder");var eO=B(Er());var Cy=B(require("path"));async function B3(e,t){let n=await Ik(e,"agent-socket");if(!n){t.write("gpg-agent: No agent-socket found in container.");return}let r=await Ik(e,"homedir");try{let{stdout:i}=await e.exec(`ls '${r}/private-keys-v1.d' 2>/dev/null`);if(i.trim()){t.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}return n}async function V3(e,t,n,r){let i=await $3(e,"agent-extra-socket",r);if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${e.type} host.`);return}let o=(async()=>{await t.exec(`mkdir -p -m 700 '${Cy.posix.dirname(n)}'`);let s=await $3(e,"homedir",r),a=await Ik(t,"homedir");s&&a&&(await kd(e,t,e.path.join(s,"pubring.kbx"),Cy.posix.join(a,"pubring.kbx"),"gpg"),await kd(e,t,e.path.join(s,"pubring.gpg"),Cy.posix.join(a,"pubring.gpg"),"gpg"),await kd(e,t,e.path.join(s,"trustdb.gpg"),Cy.posix.join(a,"trustdb.gpg"),"gpg")),await cye(e,r)})();return{cliHost:e,remoteGpgSocket:n,localGpgSocket:i,ready:o}}async function $3(e,t,n){try{let{stdout:r}=await ce({exec:e.exec,cmd:"gpgconf",args:["--list-dir",t],output:n,print:!0}),i=r.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${t}:(.*)$`,"m").exec(i);o&&(i=o[1])}return e.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch{return}}async function Ik(e,t){try{let{stdout:n}=await e.exec(`gpgconf --list-dir ${t}`),r=n.trim();if(r.indexOf(`
`)!==-1){let i=new RegExp(`^${t}:(.*)$`,"m").exec(r);if(i)return i[1]}return r}catch{return}}async function cye(e,t){try{await ce({exec:e.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:t})}catch{}}var z3=B(require("path"));async function Sy(e,t,n){if(!("exec"in e)){for(let r=t,i="";r!==i;i=r,r=e.path.dirname(r))if(await e.isFile(e.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await ce({exec:e.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:t,output:n}),i=r.toString().trim();return e.path.resolve(t,i)}catch{return}}async function Pk(e,t,n,r){try{return await ce({exec:e.exec,cmd:"git",args:["ls-remote",t],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(i){return(i==null?void 0:i.code)==="ENOENT"?void 0:!1}}async function Y3(e,t,n,r,i){let o=r[1],s={get:"fill",store:"approve",erase:"reject"}[o];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${o}`);let a=await W3(n?e:t,s,i).catch(u=>{if(n)throw u});return!n&&(a==null?void 0:a.code)!==0&&(a=await W3(e,s,i),a.code===0&&(n=!0)),{result:a,preferLocalCLIHost:n}}async function W3({exec:e},t,n){try{let{stdout:r,stderr:i}=await ce({exec:e,cmd:"git",args:["credential",t],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Ce});return{stdout:r.toString(),stderr:i.toString(),code:0}}catch(r){if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:i,stderr:o,code:s}=r;return{stdout:i.toString(),stderr:o.toString(),code:s||0}}}async function K3(e,t,n){let r=await Rk(e,t,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let i=r.indexOf("/");if(i===-1)return;let o=r.substr(0,i),s=r.substr(i+1);try{let{stdout:a}=await ce({exec:e.exec,cmd:"git",args:["remote","get-url",o],cwd:t.rootFolderPath,output:n}),u=a.toString().trim();if(u.endsWith(".git")&&(u=u.substr(0,u.length-4)),u.startsWith("https://github.com/")){let c=await pye(e,t,o,n);if(c&&s!==c)return`${u}/tree/${s}`}return u}catch{return}}async function X3(e,t,n){if(!("exec"in e)){let i=await Sy(e,t.rootFolderPath,n);if(!i)return;try{return(await e.readFile(e.path.join(i,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;return[]}}let r;try{let{stdout:i}=await ce({exec:e.exec,cmd:"git",args:["remote","-v"],cwd:t.rootFolderPath,output:n});r=i.toString()}catch{return}return Array.from(new Set(uye(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function uye(e,t,n){return{[Symbol.iterator]:function*(){let r;for(;r=e.exec(t);)yield r[n],e.lastIndex===r.index&&e.lastIndex++}}}async function Q3(e,t,n){return await lye(e,t,n)||dye(e,t,n)}async function lye(e,t,n){try{let{stdout:r}=await ce({exec:e.exec,cmd:"git",args:["status","--porcelain"],cwd:t.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function dye(e,t,n){let r=await Rk(e,t,n);if(r)try{let{stdout:i}=await ce({exec:e.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:t.rootFolderPath,output:n});return!!i.toString().trim()}catch{return}}async function J3(e,t,n,r){let i=await Rk(e,t,r);if(!i)return!1;try{let o=e.platform==="win32"?n.replace(/\\/g,"/"):n;return await ce({exec:e.exec,cmd:"git",args:["cat-file","-e",`${i}:${o}`],cwd:t.rootFolderPath,output:r}),!0}catch{return!1}}async function Rk(e,t,n){try{let{stdout:r}=await ce({exec:e.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:t.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function pye(e,t,n,r){try{let{stdout:i}=await ce({exec:e.exec,cmd:"git",args:["remote","show",n],cwd:t.rootFolderPath,output:r});return(i.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function Z3(e,t,n,r,i,o){let{extensionPath:s}=e;if(await t.isFolder(t.path.join(n,".git")))return{gitClone:void 0,gitUnshallow:void 0};await t.mkdirp(n);let a=r.tokenEnvVar?{...r.env,GIT_ASKPASS:t.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:t.env[r.tokenEnvVar]}:r.env,u=[];r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules");let c=pc({ptyExec:t.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:a,output:Hi(i,3)}),l=r.fullClone?c:(async()=>(await c,await pc({ptyExec:t.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:a,output:o}),pc({ptyExec:t.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:a,output:o})))();return{gitClone:c,gitUnshallow:l}}async function X_(e,t,n){await Ty(e,t,[".gitconfig"],"git"),await fye(e,t,n),await mye(e,t.shellServer)}var e4=["git","config"];async function fye(e,t,n){let{cliHost:r}=e,i=await G3(r);if(!await r.isFile(i)&&(r.type==="local"||(r=await ps(process.cwd(),e.loadNativeModule,e.output),i=await G3(r),!await r.isFile(i))))return;let o=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[t.homeFolder,".config"];return z3.posix.join(...a,...e4)})();await kd(r,t.shellServer,i,o,"git")}async function G3(e){let{env:t}=e,n=t.XDG_CONFIG_HOME?[t.XDG_CONFIG_HOME]:[await e.homedir(),".config"];return e.path.join(...n,...e4)}async function mye(e,t){await t.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${e.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}var Lu=require("stream");async function t4(e,t){let{stdout:n}=await e.exec(`cat /proc/${t}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let i=r.indexOf("=");return i!==-1?[r.slice(0,i),r.slice(i+1)]:[]}).reduce((r,[i,o])=>(i&&(r[i]=o),r),{})}async function Ak(e){let t=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await e.exec(t,{logOutput:!1}),r=6,i=n.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,u,c,l,d,p])=>{let f=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:f[1],pgrp:f[2],cwd:u,mntNS:c,cmd:p.replace(/\0/g," "),env:d.split("\0").reduce((m,h)=>{let v=h.indexOf("=");return v!==-1&&(m[h.substr(0,v)]=h.substr(v+1)),m},{})}}),mntNS:o}}function n4(e){let t={};return e.forEach(n=>t[n.pid]={process:n,childProcesses:[]}),e.filter(n=>n.ppid).forEach(n=>{var r;return(r=t[n.ppid])==null?void 0:r.childProcesses.push(t[n.pid])}),t}function Dk(e,t="  ",n="  "){return`${n}${e.process.pid}: ${e.process.cmd}
${e.childProcesses.map(r=>Dk(r,t,n+t))}`}var Io=B(require("path")),s4=B(require("fs"));async function Po(e,t=process.cwd(),n=process.env){if(process.platform!=="win32")return e;if(Io.isAbsolute(e))return await kk(e)||e;if(/[/\\]/.test(e)){let s=Io.join(t,e);return await kk(s)||s}let r,i;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,i=a.split(Io.delimiter).filter(Boolean),i.push(Io.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(i===void 0||i.length===0){let s=new Error(`No PATH to look up executable '${e}'.`);throw s.code="ENOENT",s}for(let s of i){let a;Io.isAbsolute(s)?a=Io.join(s,e):a=Io.join(t,s,e);let u=await kk(a);if(u)return u}let o=new Error(`Exectuable '${e}' not found on PATH '${r}'.`);throw o.code="ENOENT",o}var r4=process.env.PATHEXT,i4=r4?r4.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function kk(e){if(i4.indexOf(Io.extname(e))!==-1)return await o4(e)?e:void 0;for(let t of i4){let n=e+t;if(await o4(n))return n}}function o4(e){return new Promise(t=>s4.stat(e,(n,r)=>t(!n&&r.isFile())))}var Ok="dev-containers-",a4="credentials not found in native keychain";async function l4(e,t,n,r,i,o){let s=await c4(n?e:t,r,i,o).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await c4(e,r,i,o),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function c4(e,t,n,r){let i,o=t[1];try{let s=o==="store"?JSON.parse(n).ServerURL:n.trim(),a=await hye(e,s,r);if(!a)return{stdout:o==="get"?a4:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return o!=="get"?{stdout:`Docker credential command not supported without credential helper: ${o}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(o!=="get")return{stdout:`Docker credential command not supported without credential helper: ${o}.`,stderr:"",code:1};let[l,d]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:l,Secret:d}),stderr:"",code:0}}i=`docker-credential-${a.helper}`;let{stdout:u,stderr:c}=await ce({exec:e.exec,cmd:i,args:t.slice(1),stdin:Buffer.from(n),output:Ce});return{stdout:u.toString(),stderr:c.toString(),code:0}}catch(s){if(i&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:o==="get"?a4:`Docker credential helper '${i}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:u,code:c}=s;return{stdout:a.toString(),stderr:u.toString(),code:c||0}}}async function hye(e,t,n){var i,o,s,a,u;n.write(`Looking up Docker credential helper for '${t}'.`);try{let c=Ge((await e.readFile(e.path.join(await e.homedir(),".docker","config.json"))).toString()),l=ye.parse(t).authority||t,d=(i=c==null?void 0:c.credHelpers)==null?void 0:i[l];if(d)return{helper:d};let p=(s=(o=c==null?void 0:c.auths)==null?void 0:o[t])==null?void 0:s.identitytoken;if(p)return{identitytoken:p};let f=(u=(a=c==null?void 0:c.auths)==null?void 0:a[t])==null?void 0:u.auth;if(f)return{auth:f};if(c!=null&&c.credsStore)return{helper:c.credsStore}}catch(c){(c==null?void 0:c.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(c==null?void 0:c.message)||String(c)}.`)}let r=await d4(e);return r?{helper:r}:void 0}async function Nk(e,t){let n=e.path.join(await e.homedir(),".docker","config.json");try{let r=await e.readFile(n),i=Ge(r.toString());return!!(i!=null&&i.credsStore)||Object.keys((i==null?void 0:i.credHelpers)||{}).some(o=>{var s;return(s=i==null?void 0:i.credHelpers)==null?void 0:s[o]})||Object.keys((i==null?void 0:i.auths)||{}).some(o=>{var s,a;return(a=(s=i==null?void 0:i.auths)==null?void 0:s[o])==null?void 0:a.auth})||u4(e)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(t.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):u4(e)}}async function u4(e){let t=await d4(e);return!!t&&await gye(e,`docker-credential-${t}`)}async function d4(e){if(e.platform==="darwin")return"osxkeychain";if(e.platform==="win32")return"wincred";if(e.platform==="linux")try{return await ce({exec:e.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Ce}),"pass"}catch{return"secretservice"}}async function gye(e,t){try{return e.platform==="win32"?!!await Po(t,e.cwd,e.env):(await ce({exec:e.exec,cmd:"/bin/sh",args:["-c",`command -v '${t}' >/dev/null 2>&1`],output:Ce}),!0)}catch{return!1}}function Nu(e){return`remote.containers.${e}`}function fc(e){return`dev.containers.${e}`}var Fk=B(require("path"));var vye=B(require("http")),yye=B(require("https"));function Lk(e,t={}){return new Promise((n,r)=>{let i=e.startsWith("https:")?yye:vye,o;if(Object.keys(t).length>0){let a=new URL(e);o={headers:t,host:a.host,path:a.pathname}}i.get(o??e,a=>{var u;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let c=(u=a.headers)==null?void 0:u.location;c&&n(Lk(c,t))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}}).on("error",r)})}async function Kn(e){let t=await st(Fk.join(e,"package.json"),"utf8");return JSON.parse(t)}async function Iy(e){let t=await st(Fk.join(e,"product.json"),"utf8"),n=JSON.parse(t);return n.commit||(n.commit=await Mk(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function Mk(e="insider"){let t=`https://update.code.visualstudio.com/api/update/server-linux-x64/${e}/latest`,n=await Lk(t);return JSON.parse(n.toString()).version}function Q_(e){return["bin",e.serverApplicationName]}var oxe=cY(),gY=Kk(),Qk=fY(),sxe=hY();async function lC(e,t,n){var F,L,M,j,W,k;let{cliHost:r,wslCLIHost:i,output:o}=e,{shellServer:s,launchRootShellServer:a}=t,u="Launching Dev Containers helper.",c=o.start(u);if(Fu)return o.stop(u,c),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let l=[r];r.type!=="local"&&l.push(await ps(process.cwd(),e.loadNativeModule,o)),r.type!=="wsl"&&i&&l.push(i);let d=Zk.randomUUID(),p={},f=vY(l,H=>hxe(H,o)),m=f?Sn.posix.join(((F=t.env)==null?void 0:F.TMPDIR)||"/tmp",`vscode-ssh-auth-${d}.sock`):void 0;f&&(p[m]=f,o.write(`ssh-agent: SSH_AUTH_SOCK in container (${m}) forwarded to ${f.cliHost.type} host (${f.unparsed}).`));let h=vY(l,H=>gxe(H,o)),v=-1,g;if(h)do g=Sn.posix.join(((L=t.env)==null?void 0:L.TMPDIR)||"/tmp",".X11-unix",`X${++v}`);while(await uxe(s,g));let y=h?`:${v}`:void 0;h&&(await s.exec(`mkdir -p '${Sn.posix.dirname(g)}'`),p[g]=h,o.write(`X11 forwarding: DISPLAY in container (${y}) forwarded to ${h.cliHost.type} host (${h.unparsed}).`));let x=await B3(t.shellServer,o),w=x?await axe(l,H=>V3(H,t.shellServer,x,o)):void 0;w&&(p[w.remoteGpgSocket]={name:"gpg-agent",unparsed:w.localGpgSocket,cliHost:w.cliHost,connectTo:{socketPath:w.localGpgSocket}},o.write(`gpg-agent: Socket in container (${w.remoteGpgSocket}) forwarded to ${w.cliHost.type} host (${w.localGpgSocket}).`));let b=Sn.posix.join(((M=t.env)==null?void 0:M.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${d}.sock`),S=Sn.posix.join(((j=t.env)==null?void 0:j.TMPDIR)||"/tmp",`vscode-remote-containers-server-${d}.js`),R=Sn.posix.join(((W=t.env)==null?void 0:W.TMPDIR)||"/tmp",`vscode-remote-containers-${d}.js`),E=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??e.isDockerCredentialHelperEnabled)&&a&&await cxe(s,"docker")?Sn.posix.join("/usr/local/bin",`docker-credential-${Ok}${d}`):void 0,C=l.find(H=>H.type==="local"),T=xY(e,t,"Container",void 0,!1,!1,S,R,E,p,b,C),I=T.then(H=>H.ready),A=T.then(H=>H.mrpcExec),N=T.then(H=>H.mrpcPtyExec);return I.catch(console.error),e.onAdoptProcess(H=>vxe(t.shellServer,b,m,g,H).catch(console.error)),o.stop(u,c),{remoteContainersCLI:R,remoteEnv:{REMOTE_CONTAINERS_IPC:b,...m?{SSH_AUTH_SOCK:m}:void 0,...y&&!((k=t.env)!=null&&k.DISPLAY)?{DISPLAY:y}:void 0,...g?{REMOTE_CONTAINERS_DISPLAY_SOCK:g}:void 0},mrpcExec:A,mrpcPtyExec:N,ready:I,reconnect:()=>T.then(H=>H.reconnect())}}function vY(e,t){for(let n of e){let r=t(n);if(r)return r}}async function axe(e,t){for(let n of e){let r=await t(n);if(r)return r}}async function cxe(e,t){try{return await e.exec(`command -v ${t} >/dev/null 2>&1`),!0}catch{return!1}}async function uxe(e,t){try{return await e.exec(`test -e ${t}`),!0}catch{return!1}}async function Nd(e,t,n,r,i){let{passwdUser:o,homeFolder:s,nodeExecutable:a,mrpcExec:u,mrpcPtyExec:c,setBaseEnv:l,connect:d,reconnect:p,terminate:f}=await xY(e,{remoteExec:t,platform:i},"Host",n,!0,r,void 0);return{passwdUser:o,homeFolder:s,nodeExecutable:a,exec:u,ptyExec:c,setBaseEnv:l,connect:d,reconnect:p,terminate:f}}async function xY(e,t,n,r,i,o,s,a,u,c,l,d){let{cliHost:p,product:f,output:m}=e,{remoteExec:h,platform:v,nodeExecutable:g,launchRootShellServer:y}=t,x=a&&st(Sn.join(e.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),w=st(Sn.join(e.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),b=await sr(h,m,void 0,v,n),S=i?await Oy(b,await ky(b)):void 0,R=(await b.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],P=!0;if(!g||!s){let I=b.path.join(R,".vscode-remote-containers");g||(g=await yxe(e,b,I,R,f,o)),s||(s=b.path.join(I,"dist",`vscode-remote-containers-server-${e.package.version}.js`),await dC(b,s)?P=!1:await b.exec(`mkdir -p '${b.path.dirname(s)}'`))}if(a){let I=`EOF-${a}`;await b.exec(`cat <<'${I}' >${a}
${await x}
${I}
`)}if(u&&y&&((p==null?void 0:p.type)!=="local"&&d&&await Nk(d,m)||p&&await Nk(p,m))){let I=(await b.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,A=Ge(I);if(!(A!=null&&A.credsStore)||A.credsStore.startsWith(Ok)){let N=await y(),F=`EOF-${u}`;await N.exec(`mkdir -p ${Sn.posix.dirname(u)} && cat <<'${F}' >${u}
#!/bin/sh
${g} ${a} docker-credential-helper $@
${F}
`),await N.exec(`chmod +x ${u}`);let L=Cn(I,["credsStore"],Sn.posix.basename(u).substring(18),{formattingOptions:{}}),M=ci(I,L);await b.exec(`mkdir -p ~/.docker && cat <<'${F}' >~/.docker/config.json
${M}
${F}
`)}}if(P){let I=`EOF-${s}`,A=`${s}_${Date.now()}`;await b.exec(`cat <<'${I}' >${A}
${await w}
${I}
mv ${A} ${s}`)}let E=()=>lxe(e,n,b,g,s,c,l,d),C=await E(),T;return{ready:C.ready,passwdUser:S,nodeExecutable:g,homeFolder:R,mrpcExec:pxe(()=>C.mrpc,n,r||R),mrpcPtyExec:fxe(()=>C.mrpc,n,r||R),mrpcExecToEnd:mxe(()=>C.mrpc,n,r||R),setBaseEnv:I=>new Promise((A,N)=>{T=I,C.mrpc.setBaseEnv(I,F=>F?N(F):A())}),connect:C.mrpc.connect,reconnect:async()=>{let I=`${n}: Reconnecting exec server`,A=m.start(I);await C.process.terminate().catch(()=>{}),b=await sr(h,m,void 0,void 0,n),C=await E(),T&&await new Promise((N,F)=>{C.mrpc.setBaseEnv(T,L=>L?F(L):N())}),m.stop(I,A)},terminate:()=>C.process.terminate()}}async function lxe(e,t,n,r,i,o,s,a){let{cliHost:u,output:c}=e,l=Object.keys(o||{}),d={...l.reduce((R,P)=>(R[P]="duplex",R),{}),rpc:"async",connected:"async",ready:"async"},p={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},f=n.process,m=`set -e ; echo -n ${Xi} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(l)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${i}'
`;f.stdin.write(m);let h,v=new Promise(R=>h=R),g=new yY.StringDecoder;f.stderr.on("data",R=>{let P=g.write(R).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let E=P.indexOf(Xi);E!==-1&&(h(),h=void 0,P=P.substr(0,E)+P.substr(E+1))}P&&c.write(pt(`${t} server: ${P}`))}),f.exit.then(({code:R,signal:P})=>{c.write(`${t} server terminated (code: ${R}, signal: ${P}).`)},R=>{c.write(`${t} server did not launch or terminated: ${(R==null?void 0:R.stack)||(R==null?void 0:R.message)||String(R)}`)});let y=(u==null?void 0:u.type)==="local",x={git:y,docker:y},w,b=new Promise(R=>w=R),S=oxe(p,d)({...l.reduce((R,P)=>{let E=o[P];return R[P]=dxe(e,E),R},{}),rpc:async(R,P)=>{try{let{args:E,stdin:C}=JSON.parse(R);if(E[0]==="git-credential-helper"){let T=await Y3(a,u,x.git,E,C);x.git=T.preferLocalCLIHost,P(void 0,JSON.stringify(T.result))}else if(E[0]==="docker-credential-helper"){let T=await l4(a,u,x.docker,E,C,c);x.docker=T.preferLocalCLIHost,P(void 0,JSON.stringify(T.result))}}catch(E){console.error(E),P(E)}},connected:R=>{R()},ready:R=>{w(),R()}});return(0,aC.default)(gY.source(f.stdout),S.createStream(),gY.sink(f.stdin)),await Promise.race([v,f.exit.then(({code:R,signal:P})=>{throw new Error(`${t} server terminated (code: ${R}, signal: ${P}).`)})]),{ready:b,mrpc:S,process:f}}function dxe(e,t){let{sendTelemetryEvent:n,output:r}=e,i=!1;function o(s){if(!i&&s instanceof Error&&s.code==="ENOENT"&&(i=!0,r.event({type:"notification",message:eO.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",t.name,t.cliHost.type,t.unparsed)}),n)){let a={serviceName:t.name,hostType:t.cliHost.type,hostPlatform:t.cliHost.platform},u=t.cliHost.authority;if(u){let c=u.indexOf("+");c!==-1&&(a.hostAuthority=u.substring(0,c))}n("serviceConnectionFailure",a)}}return()=>{let s=t.cliHost.connect(t.connectTo);return{sink:a=>{s.sink((u,c)=>{o(u),a(u,c)})},source:(a,u)=>{s.source(a,(c,l)=>{o(c),u(c,l)})}}}}function pxe(e,t,n){return async r=>{let{cmd:i,args:o,cwd:s,env:a,output:u}=r,c=`Run in ${t}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,l=u.start(c),d=e(),p=await new Promise((f,m)=>{d.exec({cmd:i,args:o,cwd:s||n,env:a},(h,v)=>{h?m(h):f(v)})});return{stdin:Qk.sink(d.stdin(p,f=>{f&&f.message!=="unexpected end of parent stream"&&console.error(f)})),stdout:Qk.source(d.stdout(p)),stderr:Qk.source(d.stderr(p)),exit:new Promise((f,m)=>{d.exit(p,(h,v)=>{var g;u.stop(c,l),h?((g=h.message)!=null&&g.endsWith("ENOENT")&&!h.code&&(h.code="ENOENT"),m(h)):f(v)})}),terminate:async()=>new Promise((f,m)=>{d.terminate(p,h=>{h?m(h):f()})})}}}function fxe(e,t,n){return async r=>{let{cmd:i,args:o,cwd:s,env:a,output:u}=r,c=`Run in ${t}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,l=u.start(c),d=e(),p=await new Promise((v,g)=>{var y,x;d.ptyExec({cmd:i,args:o,cwd:s||n,env:a,rows:(y=u.dimensions)==null?void 0:y.rows,cols:(x=u.dimensions)==null?void 0:x.columns},(w,b)=>{w?g(w):v(b)})}),f=[u.onDidChangeDimensions&&u.onDidChangeDimensions(v=>d.ptyResize(p,v.columns,v.rows))],m=sxe();(0,aC.default)(m,d.ptyIn(p,v=>{v&&v.message!=="unexpected end of parent stream"&&console.error(v)}));let h=new Wa;return(0,aC.default)(d.ptyOut(p),v=>{v(null,function g(y,x){if(y!==!0){if(y)throw y;h.fire(x),v(null,g)}})}),{write:v=>m.push(v),onData:h.event,resize:(v,g)=>d.ptyResize(p,v,g),exit:new Promise((v,g)=>{d.ptyExit(p,(y,x)=>{f.forEach(w=>w==null?void 0:w.dispose()),u.stop(c,l),y?g(y):v(x)})}),terminate:async()=>new Promise((v,g)=>{d.ptyTerminate(p,y=>{y?g(y):v()})})}}}function mxe(e,t,n){return async r=>{let{cmd:i,args:o,cwd:s,env:a,output:u}=r,c=`Run in ${t}: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,l=u.start(c),d=e();return new Promise((p,f)=>{d.execToEnd({cmd:i,args:o,cwd:s||n,env:a},(m,h)=>{if(u.stop(c,l),m||!h)f({stdin:new Lu.Writable,stdout:Lu.Readable.from([]),stderr:Lu.Readable.from([]),exit:Promise.reject(m),terminate:async()=>{}});else{let v=Lu.Readable.from([Buffer.from(h.stdout.data)]),g=new Promise(w=>v.on("end",w)),y=Lu.Readable.from([Buffer.from(h.stderr.data)]),x=new Promise(w=>y.on("end",w));p({stdin:new Lu.Writable,stdout:v,stderr:y,exit:Promise.all([g,x]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var cC="\\\\.\\pipe\\openssh-ssh-agent";function hxe(e,t){let n=e.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:e,connectTo:{socketPath:n}};if(t.write(`ssh-agent: SSH_AUTH_SOCK not set on ${e.type} host.`),e.platform==="win32")return{name:"ssh-agent",unparsed:cC,cliHost:e,connectTo:{socketPath:cC}}}function gxe(e,t){let n=e.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:i,display:o}=r.groups,s=eO.t("X11 display");return!i||i==="localhost/unix"?{name:s,unparsed:n,cliHost:e,connectTo:{socketPath:`/tmp/.X11-unix/X${o}`}}:i.startsWith("/")?{name:s,unparsed:n,cliHost:e,connectTo:{socketPath:`${i}:${o}`}}:{name:s,unparsed:n,cliHost:e,connectTo:{host:i,port:6e3+parseInt(o,10)}}}n?t.write(`X11 forwarding: DISPLAY value on ${e.type} host not supported (${n}).`):t.write(`X11 forwarding: DISPLAY not set on ${e.type} host.`)}async function tO(e){let t=e.env.WAYLAND_DISPLAY,n=e.env.XDG_RUNTIME_DIR,r=t&&e.path.isAbsolute(t)?t:t&&n&&e.path.join(n,t),i=n&&e.path.join(n,"wayland-0"),o=r||i;if(o&&await e.isSocket(o))return o}async function wY(e){let t=Zk.randomUUID();return Sn.posix.join((e==null?void 0:e.TMPDIR)||"/tmp",`vscode-wayland-${t}.sock`)}async function EY(e,t){let{shellServer:n,remoteWaylandSocket:r}=e;if(!r||t.WAYLAND_DISPLAY)return{};let i=t.XDG_RUNTIME_DIR;i||(i=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let o=Sn.posix.basename(r);return await n.exec(`test -e ${i}/${o} || ln -sf ${r} ${i}/${o}`),i===t.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:o}:{XDG_RUNTIME_DIR:i,WAYLAND_DISPLAY:o}}var vm=new Set;async function vxe(e,t,n,r,i){let o=await i.processId;if(o&&o>0){let s=await t4(e,o),a=s.REMOTE_CONTAINERS_IPC;a&&a!==t&&!vm.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(vm.add(a),await e.exec(`rm '${a}' && ln -s '${t}' '${a}'`));let u=s.SSH_AUTH_SOCK;u&&n&&u!==n&&!vm.has(u)&&u.indexOf("vscode-ssh-auth")!==-1&&(vm.add(u),await e.exec(`rm '${u}' && ln -s '${n}' '${u}'`));let c=s.REMOTE_CONTAINERS_DISPLAY_SOCK;c&&r&&c!==r&&!vm.has(c)&&(vm.add(c),await e.exec(`rm '${c}' && ln -s '${r}' '${c}'`))}}async function yxe(e,t,n,r,i,o){let s=(i==null?void 0:i.commit)||await Mk(i==null?void 0:i.quality),a=i!=null&&i.commit?i.quality||"insider":"stable",{localCacheFolder:u,output:c,alternateDownload:l}=e,d=Sn.posix.join(n,"bin",s),p=Sn.posix.join(d,"node");try{await t.exec(`test -x '${p}'`)}catch{if(i)try{let g=Sn.posix.join(nO(r,i),"bin",s),y=Sn.posix.join(g,"node");await t.exec(`test -x '${y}'`);let x=Sn.posix.join(g,"node_modules","node-pty","package.json");return await t.exec(`test -f '${x}'`),y}catch{}let f;if((await t.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")f=Jk;else{let g=await iO(t);f=rO(g,!1)}let h={localCacheFolder:u,build:f,commit:s,quality:a,web:!1,output:c,alternateDownload:l},v=Ny(h);if(await br(v)||await pC(h),f===Jk)await Ay({output:c},t,v,d,o);else{let g=[];await uC.t({file:v,filter:x=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(x),onentry:x=>{new uC.WriteEntry.Tar(x).on("data",b=>g.push(b))}});let y=Buffer.concat(g);await Ay({output:c},t,y,d,o,!1)}}return p}var Ly=B(require("net"));var oO=Kk(),sO=e=>{if("port"in e)return oO.duplex(Ly.connect(e.port,e.host));let t=e.socketPath;if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return oO.duplex(Ly.connect(t));let n=new Ly.Socket;return Exe(n,t)};function xxe(e){let t=[];return e.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(i=>{t.push(parseInt(i,16))})}),Buffer.from(t)}function wxe(e,t,n){return t||n===void 0?{headerSize:e,err:t}:e===0?{headerSize:e,data:n}:n.length>e?(n=n.slice(e,n.length),e=0,{headerSize:e,data:n}):(e=e-n.length,{headerSize:e})}function Exe(e,t){let n=0,r=[],i=[],o,s=l=>{l instanceof Error&&console.error(l),e.destroy();for(let d of r)d.cb(l,void 0);r=[];for(let d of i)d(l,(p,f)=>{});i=[]};function a(l,d){o.source(l,function(p,f){let m=wxe(n,p,f);n=m.headerSize,m.err||m.data?d(m.err||null,m.data):a(l,d)})}return(async()=>{let l=await st(t),p=l.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),f,m;if(p!==null){let h=p[1],v=p[3];f=parseInt(h,10);let g=xxe(v),y=Buffer.alloc(12);y.writeUInt32LE(process.pid,0),m=Buffer.concat([g,y]),n=16+3*4}else{let h=l.indexOf(10);f=parseInt(l.slice(0,h).toString(),10),m=l.slice(h+1),n=0}e.on("error",h=>{s(h)}),e.connect(f,"127.0.0.1",()=>{e.write(m,h=>{if(!h){o=oO.duplex(e);for(let v of r)a(v.abort,v.cb);r=[];for(let v of i)o.sink(v);i=[]}})})})().catch(l=>{s(l)}),{source:function(l,d){o!==void 0?a(l,d):r.push({abort:l,cb:d})},sink:function(l){o!==void 0?o.sink(l):i.push(l)}}}var fC=!1;function ym(e,t,n){return fC?function(i){return bxe(e(i),`${t} ${JSON.stringify(i)}`,n)}:e}function bxe(e,t,n){return fC?{source:bY(e.source,`${t} Source`,n),sink:_xe(e.sink,`${t} Sink`,n)}:e}function bY(e,t,n){return fC?function(i,o){n.write(`${t} end in (${typeof i}${i&&typeof i=="object"?`: ${Object.keys(i)}`:""}): ${i&&typeof i=="object"&&i.stack||i}`),e(i,function(a,u){n.write(`${t} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${t} data: ${u==null?void 0:u.toString("hex")}`),o(a,u)})}:e}function _xe(e,t,n){return fC?function(i){e(bY(i,t,n))}:e}var aO=B(Er()),SY=/^\\\\wsl(\.localhost|\$)?\\/;function Ar(e){return SY.test(e.toLowerCase())}function xm(e){let t=e.toLowerCase(),n=SY.exec(t);if(!n)return"";let r=t.indexOf("\\",n[0].length);return e.substring(n[0].length,r)}async function mC(e){let{stdout:t}=await ce({exec:hc(void 0),cmd:"wsl",args:["-l","-v"],output:e}),n=t.toString(t[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Ld(e,t,n){let{stdout:r}=await ce({exec:hc(void 0),cmd:"wsl",args:["-d",e,"-e","wslpath","-u",t],output:n});return r.toString().trim()}async function Cxe(e,t){let{stdout:n}=await ce({exec:hc(void 0),cmd:"wsl",args:["-d",e,"-e","/bin/sh","-c","echo ~"],output:t});return n.toString().trim()}async function TY(e,t,n){let{stdout:r}=await ce({exec:e.exec,cmd:"wslpath",args:["-w",t],output:n});return r.toString().trim()}async function wm(e,t){let n=xm(e),r=await Ld(n,e,t);return ye.parse(`vscode-remote://wsl+${n}${r}`)}function Em(e){if(e.scheme==="vscode-remote"){let t=hC(e.authority);if(t){let n=e.path;return by(n)&&(n=_Y.posix.dirname(n)),{wslDistro:t,wslPath:n}}}}function hC(e){return(/wsl\+(.*)/.exec(e)||[])[1]}async function gC(e,t,n,r,i,o,s,a){var m;let{distro:u,cwd:c}=await cO(e,t,s);CY.ok(!u.startsWith("-"),aO.t("Distro must not start with a dash: {0}",u));let l=gc("wsl",["-d",u,"-e"],c),d=await Nd({extensionPath:n,localCacheFolder:r,package:await Kn(n),product:i,loadNativeModule:o,output:s,alternateDownload:a},l,c,!1),p=await Fy({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((m=d.passwdUser)==null?void 0:m.shell)||"/bin/sh",remoteExec:d.exec});delete p.WSL_INTEROP,await d.setBaseEnv(p);let f=Qi("wsl",c,p,d.exec,d.ptyExec,ym(d.connect,"WSL",s),d.nodeExecutable,s);return f.toCommonURI=async h=>{try{return ye.file((await ce({exec:d.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},f}async function cO(e,{defaultDistro:t},n){let r,i;return typeof e=="object"?(r=e.wslDistro,i=e.wslPath):e&&Ar(e)?(r=xm(e),i=await Ld(r,e,n)):(r=t||await mC(n)||(()=>{throw new he({description:aO.t("No default WSL distro found.")})})(),i=e?await Ld(r,e,n):await Cxe(r,n)),{distro:r,cwd:i}}function bm(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var uO=B(require("path")),wC=B(require("os"));var IY=B(require("os")),vC=B(require("assert")),yC=B(Er());async function PY(e,t,n,r,i,o,s,a,u,c){var g;let l=e.substr(6),d=l.indexOf(":"),p=[(c==null?void 0:c.settings.executablePath)||"ssh"];if(c!=null&&c.settings.executableArgs&&p.push(...c.settings.executableArgs),c!=null&&c.settings.configFilePath&&p.push("-F",Sxe(c==null?void 0:c.settings.configFilePath)),d!==-1){let y=l.substr(d+1);vC.ok(!y.startsWith("-"),yC.t("Port number must not start with a dash: {0}",y));let x=l.substr(0,d);vC.ok(!x.startsWith("-"),yC.t("Hostname must not start with a dash: {0}",x)),p.push("-p",y,x)}else vC.ok(!l.startsWith("-"),yC.t("Hostname must not start with a dash: {0}",l)),p.push(l);let f=gc(p[0],p.slice(1),void 0,await(c==null?void 0:c.sshAskpassEnv)||{}),m=await Nd({extensionPath:r,localCacheFolder:i,package:await Kn(r),product:o,loadNativeModule:s,output:a,alternateDownload:u},f,t,!1),h=await Fy({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((g=m.passwdUser)==null?void 0:g.shell)||"/bin/sh",remoteExec:m.exec});await m.setBaseEnv(h);let v=Qi("remote",t||m.homeFolder,h,m.exec,m.ptyExec,m.connect,m.nodeExecutable,a);return v.toCommonURI=()=>Promise.resolve(void 0),v.reconnect=()=>m.reconnect(),v.terminate=()=>m.terminate(),v}function Sxe(e){return e.replace(/^~($|\/|\\)/,`${IY.homedir()}$1`)}function My(e,t){let n=Txe(e);if(!n)return;let r=n.hostName;if(n.user||n.hostName.toLowerCase()!==n.hostName||n.port||n.hostName.match(/[\/\\\+]/)){let i=JSON.stringify(n);r=Buffer.from(i,"utf8").toString("hex")}return ye.parse(`vscode-remote://ssh-remote+${r}${t}`)}function Txe(e){if(!e.startsWith("ssh://"))return;let t=e.substr(6),n=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(n){let[,r,i,o]=n;return{hostName:i,user:r,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Mu(e){var t;return!!(e&&"host"in e&&((t=e.host)!=null&&t.startsWith("ssh://")))}function Uu(e){return!!(e!=null&&e.startsWith("ssh-remote+"))}function xC(e){let t=/^ssh-remote\+(.*)$/.exec(e);if(!t)return;let n=t[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return{hostName:n}}async function RY(e,t,n,r,i,o,s,a,u,c){return e!=null&&e.startsWith("ssh://")&&!(c!=null&&c.localDocker)?PY(e,t,r,i,o,s,n,a,u,c):typeof t=="object"||r.executeInWSL==="forWSLPath"&&t&&Ar(t)||r.executeInWSL==="always"?gC(t,r,i,o,s,n,a,u):ps(t||process.cwd(),n,a)}async function ps(e,t,n){let r=hc(e),i=await AY(e,t);return Ixe(e,r,i,n?ym(sO,"Local",n):sO)}function Qi(e,t,n,r,i,o,s,a){let u,c;return{type:e,platform:"linux",exec:r,ptyExec:i,cwd:t,env:n,path:uO.posix,async homedir(){if(typeof c>"u"){let l=(await this.getuid()).toString(),d=await sr(r,Ce,void 0,"linux","Host"),p=await Oy(d,l);c=this.env.HOME||(p==null?void 0:p.home)||"/"}return c},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async l=>{try{return await ce({exec:r,cmd:"test",args:["-f",l],output:Ce}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},isFolder:async l=>{try{return await ce({exec:r,cmd:"test",args:["-d",l],output:Ce}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},isSocket:async l=>{try{return await ce({exec:r,cmd:"test",args:["-S",l],output:Ce}),!0}catch(d){if((d==null?void 0:d.code)!==1)throw d;return!1}},readFile:async l=>{try{return(await ce({exec:r,cmd:"cat",args:[l],output:Ce})).stdout}catch(d){let p=new Error(`Could not read file: ${l}`);throw p.originalError=d,p.code="ENOENT",p}},writeFile:async(l,d)=>{await ce({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${l}'`],stdin:d,output:Ce})},rename:async(l,d)=>{await ce({exec:r,cmd:"mv",args:[l,d],output:Ce})},rm:async(l,{recursive:d,force:p})=>{await ce({exec:r,cmd:"rm",args:[...d?["-r"]:[],...p?["-f"]:[],l],output:Ce})},mkdirp:async l=>{await ce({exec:r,cmd:"mkdir",args:["-p",l],output:Ce})},readDir:async l=>(await ce({exec:r,cmd:"ls",args:["-a",l],output:Ce})).stdout.toString().trim().split(`
`).filter(d=>d!=="."&&d!==".."),readDirWithTypes:async l=>{let d={f:1,"*":1,"/":2,"@":64};return(await ce({exec:r,cmd:"ls",args:["-aF",l],output:Ce})).stdout.toString().trim().split(`
`).map(p=>"/*@=%|>".indexOf(p[p.length-1])!==-1?[p.substr(0,p.length-1),p[p.length-1]]:[p,"f"]).filter(([p])=>p!=="."&&p!=="..").map(([p,f])=>[p,d[f]||0])},getUsername:async()=>(u===void 0&&(u=(await ce({exec:r,cmd:"id",args:["-u","-n"],output:Ce})).stdout.toString().trim()),u),getuid:async()=>{let l=await ce({exec:r,cmd:"id",args:["-u"],output:Ce});return parseInt(l.stdout.toString().trim(),10)},getgid:async()=>{let l=await ce({exec:r,cmd:"id",args:["-g"],output:Ce});return parseInt(l.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:o,nodeExecutable:s}}function Ixe(e,t,n,r){return{type:"local",platform:process.platform,exec:t,ptyExec:n,cwd:e,env:process.env,path:uO,homedir:async()=>wC.homedir(),tmpdir:async()=>wC.tmpdir(),isFile:br,isFolder:r2,isSocket:i2,readFile:st,writeFile:mb,rename:Va,rm:gu,mkdirp:async i=>{await ss(i)},readDir:hu,getUsername:EC,getuid:process.platform==="linux"||process.platform==="darwin"?async()=>process.getuid():void 0,getgid:process.platform==="linux"||process.platform==="darwin"?async()=>process.getgid():void 0,toCommonURI:async i=>ye.file(i),connect:r}}function OY(e,t,n){return e==="linux"?t===n:t.toLowerCase()===n.toLowerCase()}var Pxe=bC.join(__dirname,"..","..","node_modules",".bin","ts-node"),Fu=bC.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function ce(e){let{exec:t,cmd:n,args:r,cwd:i,env:o,stdin:s,output:a,print:u}=e,c=await t({cmd:n,args:r,cwd:i,env:o,output:a});return new Promise((l,d)=>{let p=[],f=[],m=u==="continuous"?new dO.StringDecoder:void 0;c.stdout.on("data",g=>{p.push(g),u==="continuous"&&a.write(m.write(g))}),c.stdout.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let h=u==="continuous"?new dO.StringDecoder:void 0;c.stderr.on("data",g=>{f.push(g),u==="continuous"&&a.write(pt(h.write(g)))}),c.stderr.on("error",g=>{if((g==null?void 0:g.code)!=="ENOTCONN")throw g});let v=[];c.exit.then(({code:g})=>{try{v.forEach(w=>w.dispose());let y=Buffer.concat(p),x=Buffer.concat(f);(u===!0||g&&u==="onerror")&&(a.write(y.toString().replace(/\r?\n/g,`\r
`)),a.write(pt(x.toString()))),u&&g&&a.write(`Exit code ${g}`),g?d({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:y,stderr:x,code:g}):l({stdout:y,stderr:x})}catch(y){d(y)}},d),s instanceof Buffer?(c.stdin.write(s,g=>{g&&d(g)}),c.stdin.end()):s instanceof DY.ReadStream?s.pipe(c.stdin):typeof s=="function"&&v.push(s(g=>c.stdin.write(g)))})}async function pc(e){let{ptyExec:t,cmd:n,args:r,cwd:i,env:o,output:s,resolveOn:a,onDidInput:u}=e,c=await t({cmd:n,args:r,cwd:i,env:o,output:s});return new Promise((l,d)=>{let p="",f=[u&&u(m=>c.write(m))];c.onData(m=>{p+=m,s.raw(m),a&&a.exec(p)&&l({cmdOutput:p})}),c.exit.then(({code:m,signal:h})=>{try{f.forEach(v=>v==null?void 0:v.dispose()),m||h?d({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:p,code:m,signal:h}):l({cmdOutput:p})}catch(v){d(v)}},m=>{f.forEach(h=>h==null?void 0:h.dispose()),d(m)})})}function hc(e){return async function(t){let{cmd:n,args:r,output:i}=t,o=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=t.cwd||e,u=t.env?{...process.env,...t.env}:process.env,c=await Po(n,a,u),l=_m.spawn(c,r,{cwd:a,env:u,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((d,p)=>{l.once("error",f=>{i.stop(o,s),p(f)}),l.once("close",(f,m)=>{i.stop(o,s),d({code:f,signal:m})})}),async terminate(){l.kill("SIGKILL")}}}}async function AY(e,t){let n=await t("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var h,v;let{cmd:i,args:o,output:s}=r,a=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,u=s.start(a),c=!1,l=r.cwd||e,d=r.env?{...process.env,...r.env}:process.env,p=await Po(i,l,d),f=n.spawn(p,o||[],{cwd:l,env:d,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(v=s.dimensions)==null?void 0:v.rows,useConpty:c}),m=[s.onDidChangeDimensions&&s.onDidChangeDimensions(g=>f.resize(g.columns,g.rows))];return{onData:f.onData.bind(f),write:f.write.bind(f),resize:f.resize.bind(f),exit:new Promise(g=>{f.onExit(({exitCode:y,signal:x})=>{if(m.forEach(w=>w==null?void 0:w.dispose()),s.stop(a,u),g({code:y,signal:x}),process.platform==="win32")try{f.kill()}catch{}})}),async terminate(){f.kill("SIGKILL")}}}}function gc(e,t,n,r){return async function(i){let{env:o,cmd:s,args:a,output:u}=i,c=i.cwd||n,l=c?`cd '${c}' && `:"",d=Object.keys(o||{}).map(w=>o[w]===void 0?"":`${w}='${o[w]}' `).join(""),p=(a||[]).map(w=>` '${w.replace(/'/g,`'"'"'`)}'`).join(""),f=`${l}${d}${s}${p}`,m=f!==s?["/bin/sh","-c",f]:[f],h=[...t,...m],v=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,g=u.start(v),y=await Po(e,process.cwd(),process.env),x=_m.spawn(y,h,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:x.stdin,stdout:x.stdout,stderr:x.stderr,exit:new Promise((w,b)=>{x.once("error",S=>{u.stop(v,g),b(S)}),x.once("close",(S,R)=>{u.stop(v,g),w({code:S,signal:R})})}),async terminate(){x.kill("SIGKILL")}}}}async function NY(e,t,n,r){let i=await r("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){var S,R;let{env:s,cmd:a,args:u,output:c}=o,l=o.cwd||n,d=l?`cd '${l}' && `:"",p=Object.keys(s||{}).map(P=>`${P}='${s[P]}' `).join(""),f=(u||[]).map(P=>` '${P.replace(/'/g,`'"'"'`)}'`).join(""),m=`${d}${p}${a}${f}`,h=[...t,"/bin/sh","-c",m],v=`Run: ${e} ${h.join(" ").replace(/\n.*/g,"")}`,g=c.start(v),y=!1,x=await Po(e,process.cwd(),process.env),w=i.spawn(x,h,{cols:(S=c.dimensions)==null?void 0:S.columns,rows:(R=c.dimensions)==null?void 0:R.rows,useConpty:y}),b=[c.onDidChangeDimensions&&c.onDidChangeDimensions(P=>w.resize(P.columns,P.rows))];return{onData:w.onData.bind(w),write:w.write.bind(w),resize:w.resize.bind(w),exit:new Promise(P=>{w.onExit(({exitCode:E,signal:C})=>{if(b.forEach(T=>T==null?void 0:T.dispose()),c.stop(v,g),P({code:E,signal:C}),process.platform==="win32")try{w.kill()}catch{}})}),async terminate(){w.kill("SIGKILL")}}}}function Cm(e){let t=/^'?v?(\d+(\.\d+)*)/.exec(e);if(t)return t[1].split(".").map(n=>parseInt(n,10))}function Sm(e,t){for(let n=0,r=Math.max(e.length,t.length);n<r;n++){let i=e[n]||0,o=t[n]||0;if(i!==o)return i<o}return!1}var LY=Fu?(e,t,n)=>_m.spawn(Pxe,[e,...t||[]],{...n,windowsHide:!0}):_m.fork;async function Tm(e,t){if(!t){try{return require(e)}catch{}return}try{return require(`${t}/node_modules.asar/${e}`)}catch{}try{return require(`${t}/node_modules/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules.asar/${e}`)}catch{}try{return __non_webpack_require__(`${t}/node_modules/${e}`)}catch{}}function FY(e){let{output:t}=e,n=[];return{output:Hi({...t,get dimensions(){return t.dimensions},event:i=>n?n.push(i):t.event(i)}),flush:()=>{n&&(n.forEach(i=>t.event(i)),n=void 0)}}}function MY(e,t,n){return Hi({...e,get dimensions(){return e.dimensions},event:i=>{i.channel===t&&e.event(i),n.event(i)}})}function _C(e,t){return t&&typeof t=="object"&&"win32"in t?e==="win32"?t.win32:t.posix:t}async function dC(e,t){return _C(e.platform,{posix:async()=>{try{return await e.exec(`test -f '${t}'`),!0}catch{return!1}},win32:async()=>(await e.exec(`Test-Path '${t}' -PathType Leaf`)).stdout.trim()==="True"})()}var lO;async function EC(){return lO===void 0&&(lO=(async()=>{try{return kY.userInfo().username}catch(e){if(process.platform!=="linux")throw e;return(await ce({exec:hc(void 0),cmd:"id",args:["-u","-n"],output:Ce})).stdout.toString().trim()}})()),lO}function UY(e){let t=e.replace(/['\\]/g,"\\$&"),n=bm(e).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${t}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}var Xi="\u2404";async function sr(e,t,n,r="linux",i="Container"){let o=typeof e=="function",s=r==="win32",a=o?await e({env:n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:t}):e;if(!o){let p=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${Xi}; /bin/sh'
`;a.stdin.write(p),await new Promise(m=>{let h="",v=new pO.StringDecoder;a.stdout.on("data",function g(y){h+=v.write(y),h.includes(p)&&(a.stdout.off("data",g),m())})})}let u=Axe(a),c;async function l(p,f){let m=c=(async()=>{try{await c}catch{}return d(_C(r,p),f)})();try{return await Promise.race([m,u.unexpectedExit])}finally{u.disposeStdioListeners(),c===m&&(c=void 0)}}async function d(p,f){let m=`Run in ${i.toLowerCase()}: ${p.replace(/\n.*/g,"")}`,h;if((f==null?void 0:f.logOutput)!=="silent"&&(h=t.start(m,f==null?void 0:f.logLevel)),a.stdin.destroyed){t.write("Stdin closed!");let{code:R,signal:P}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${R}, signal: ${P})`,code:R,signal:P})}r==="win32"?a.stdin.write(`[Console]::Write('${Xi}'); ( ${p} ); [Console]::Write("${Xi}$LastExitCode ${Xi}"); [Console]::Error.Write('${Xi}')
`):a.stdin.write(`echo -n ${Xi}; ( ${p} ); echo -n ${Xi}$?${Xi}; echo -n ${Xi} >&2
`);let[v,g]=qY(a.stdout,[1,2],(f==null?void 0:f.logOutput)==="continuous"?(R,P,E)=>{P===1&&E===0&&t.write(R,f==null?void 0:f.logLevel)}:()=>{}),y=qY(a.stderr,[1],(f==null?void 0:f.logOutput)==="continuous"?(R,P,E)=>{P===0&&E===0&&t.write(R,f==null?void 0:f.logLevel)}:()=>{})[0];f!=null&&f.stdin&&(await v,a.stdin.write(f==null?void 0:f.stdin));let[x,w]=await g,[b]=await y,S=parseInt(w,10)||0;return((f==null?void 0:f.logOutput)===void 0||(f==null?void 0:f.logOutput)===!0)&&(t.write(x,f==null?void 0:f.logLevel),t.write(b,f==null?void 0:f.logLevel),S&&t.write(`Exit code ${S}`,f==null?void 0:f.logLevel)),(f==null?void 0:f.logOutput)==="continuous"&&S&&t.write(`Exit code ${S}`,f==null?void 0:f.logLevel),(f==null?void 0:f.logOutput)!=="silent"&&t.stop(m,h,f==null?void 0:f.logLevel),S?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${p}`,code:S,stdout:x,stderr:b}):{stdout:x,stderr:b}}return{exec:l,process:a,platform:r,path:_C(r,Rxe)}}function qY(e,t,n){let r=t.map(()=>{let l;return{promise:new Promise((p,f)=>l={resolve:p,reject:f}),...l}}),i=new pO.StringDecoder("utf8"),o=[],s=0,a=[];function u(l){let d=i.write(l);c(d)}function c(l){let d=l.indexOf(Xi);if(d!==-1){let p=l.substr(0,d);o.push(p),n(p,s,a.length),a.push(o.join("")),o.length=0,a.length===t[s]&&(r[s].resolve(a),s++,a=[],s===t.length&&e.off("data",u)),d+1<l.length&&c(l.substr(d+1))}else o.push(l),n(l,s,a.length)}return e.on("data",u),r.map(l=>l.promise)}function Axe(e){let t,n=new Promise((u,c)=>t=c),r=[],i=[],o=u=>r.push(u),s=u=>i.push(u);return e.stdout.on("data",o),e.stderr.on("data",s),e.exit.then(({code:u,signal:c})=>{t(`Shell server terminated (code: ${u}, signal: ${c})
${Buffer.concat(r).toString()}
${Buffer.concat(i).toString()}`)},u=>{t(`Shell server failed: ${u&&(u.stack||u.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{e.stdout.off("data",o),e.stderr.off("data",s),r.length=0,i.length=0}}}var e6=B(require("net")),t6=B(ZY());async function n6({forwardedPorts:e,output:t,getLogLevel:n},r,i,o){t.write(`Port forwarding for container port ${i} starts listening on local port.`,2);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,u)=>{let c=new Set,l=e6.createServer({pauseOnConnect:!0},d=>{let p=d.remotePort,f=l.address().port;t.write(`Port forwarding connection from ${p} > ${f} > ${i} in the container.`),n()===1&&(async()=>{let m=await(0,t6.default)("port",p);t.write(`Port forwarding process for ${p} > ${f} > ${i} in the container:
${JSON.stringify(m,void 0,"  ")}`)})().catch(console.error),Uxe(t,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${i} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(m=>{let h;m.exit.then(({code:v,signal:g})=>{h||(c.delete(d),d.end()),t.write(`Port forwarding ${p} > ${f} > ${i} terminated${h?` by extension (${h})`:""} with code ${v} and signal ${g}.`)},v=>{c.delete(d),d.end(),t.write(`Port forwarding ${p} > ${f} > ${i} terminated with error: ${v&&v.message||String(v)}`)}),m.stderr.on("data",v=>{t.write(`Port forwarding ${p} > ${f} > ${i} stderr: ${v.toString("utf8")}`,2)}),d.on("close",v=>{t.write(`Port forwarding ${p} > ${f} > ${i}: Local close${v?" with error":""}`,2),c.delete(d),h="closed",m.stdin.end(),setTimeout(()=>{h="killed",m.terminate().catch(console.error)},5e3)}),m.stdout.pipe(d),d.pipe(m.stdin),c.add(d)}).catch(console.error)});l.on("listening",()=>{let d={targetPort:i,server:l,connections:c};l.on("close",()=>{e.delete(d)}),e.add(d),t.write(`Port forwarding local port ${l.address().port} to container port ${i}`),a(l)}),l.on("error",d=>{if(d&&(d.code==="EADDRINUSE"||d.code==="EACCES")){l.listen(0,"127.0.0.1");return}u(d)}),l.on("close",()=>{u(new Error("Closed"))}),l.listen(i,"127.0.0.1")})}async function Uxe(e,t,n,r){return t.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:e})}var Im=B(require("path"));var yO=B(Er());function IC(e,t){let n,r=e.platform==="win32",i={...e,get env(){return n||(n=i6(r,e.env))}},o=Hxe.bind(void 0,r,i);return e.containerWorkspaceFolder&&(i.containerWorkspaceFolder=o6(o,e.containerWorkspaceFolder)),TC(o,t)}function r6(e,t,n,r){let i=e==="win32";return TC($xe.bind(void 0,i,t,i6(i,n)),r)}function TC(e,t){if(typeof t=="string")return o6(e,t);if(Array.isArray(t))return t.map(n=>TC(e,n));if(t&&typeof t=="object"){let n=Object.create(null);return Object.keys(t).forEach(r=>{n[r]=TC(e,t[r])}),n}return t}var qxe=/\$\{(.*?)\}/g;function i6(e,t){if(e){let n=Object.create(null);return Object.keys(t).forEach(r=>{n[r.toLowerCase()]=t[r]}),n}return t}function o6(e,t){return t.replace(qxe,jxe.bind(void 0,e))}function jxe(e,t,n){let r,i=n.split(":");return i.length>1&&(n=i[0],r=i[1]),e(t,n,r)}function Hxe(e,t,n,r,i){switch(r){case"env":case"localEnv":return s6(e,t.env,i,n,t.configFile);case"localWorkspaceFolder":return t.localWorkspaceFolder!==void 0?t.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return t.localWorkspaceFolder!==void 0?(e?Im.win32:Im.posix).basename(t.localWorkspaceFolder):n;case"containerWorkspaceFolder":return t.containerWorkspaceFolder!==void 0?t.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return t.containerWorkspaceFolder!==void 0?Im.posix.basename(t.containerWorkspaceFolder):n;default:return n}}function $xe(e,t,n,r,i,o){switch(i){case"containerEnv":return s6(e,n,o,r,t);default:return r}}function s6(e,t,n,r,i){if(n){e&&(n=n.toLowerCase());let o=t[n];return typeof o=="string"?o:""}throw new he({description:i?yO.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,Im.posix.basename(i.path)):yO.t("'{0}' can not be resolved because no environment variable name is given.",r)})}async function Do(e){return new Promise(t=>setTimeout(t,e))}var PC=B(require("path"));var Bxe=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function a6(e,t,n,r,i){let{repository:o,installCommand:s,targetPath:a}=e.dotfilesConfiguration;if(o=i.getDotfileConfiguration("dotfiles.repository")||o,s=i.getDotfileConfiguration("dotfiles.installCommand")||s,a=i.getDotfileConfiguration("dotfiles.targetPath")||a,!o)return;await r;let u=await n;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let c=t.shellServer,l=c6(t),d=Object.keys(u).filter(p=>!(p.startsWith("BASH_FUNC_")&&p.endsWith("%%"))).reduce((p,f)=>`${p}${f}=${Vxe(u[f])} `,"");try{e.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await c.exec(`# Clone & install dotfiles
${RC(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${d}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await c.exec(`# Clone & install dotfiles
${RC(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${d}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${Bxe.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${d}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),e.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{e.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function Vxe(e){return`'${(e||"").replace(/'+/g,`'"$&"'`)}'`}function c6(e){return PC.posix.join(oa(e),".dotfilesMarker")}async function u6(e){let t=c6(e),n=PC.posix.resolve(e.homeFolder,".devcontainer",".dotfilesMarker");try{await e.shellServer.exec(`test -f '${t}' && test ! -e '${n}' && mkdir -p '${PC.posix.dirname(n)}' && cp '${t}' '${n}'`)}catch{}}var Fd=0,l6=/Extension host agent listening on (\d+)/;var Wxe="updateContentCommand";async function LC(e){let{params:t,createdAt:n,startedAt:r,sharedDataFolder:i,sharedDataFolderIsLocalCacheFolder:o,remoteWorkspaceFolder:s,containerUser:a,containerGroup:u,containerEnv:c,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:p,rootShellServer:f,remoteWaylandSocket:m}=e,h;if(f&&a==="root"?h=f:h=await sr(l,t.output,t.sessionId),!c){let A=(await h.exec("echo $PATH")).stdout.trim();c=A?{PATH:A}:{}}a||(a=await ky(h)),!p&&a==="root"&&(p=l);let v=await iO(h),g=await Oy(h,a);g||t.output.write(iA(`User ${a} not found with 'getent passwd'.`));let y=await zxe(c,g),x=await Gxe(c,g),w=nO(x,t.product),{commit:b,quality:S}=t.product,R=b&&await Kxe(w,b,S||"insider",t.web),P=rO(v,S==="stable"),E=b&&i&&await h6(ge.posix,i,P,b,S||"insider",t.web),C=R&&await Qxe(R),T;f?T=Promise.resolve(f):a==="root"&&(T=Promise.resolve(h));let I={createdAt:n,startedAt:r,osRelease:v,build:P,user:a,gid:u||(g==null?void 0:g.gid),env:c,shell:y,homeFolder:x,userDataFolder:w,sharedDataFolderIsLocalCacheFolder:o,sharedDataFolder:i,installFolder:R,sharedInstallFolder:E,remoteWorkspaceFolder:s,nodeExecutable:C,remoteExec:l,remotePtyExec:d,remoteExecAsRoot:p,shellServer:h,remoteWaylandSocket:m};return(T||p)&&(I.launchRootShellServer=()=>T||(T=sr(p,t.output))),I}async function ky(e){return(await e.exec("id -un")).stdout.trim()}async function Gxe(e,t){return e.HOME||t&&t.home||"/root"}async function zxe(e,t){return e.SHELL||t&&t.shell||"/bin/sh"}async function Oy(e,t){let{stdout:n}=await e.exec(UY(t),{logOutput:!1});if(n.trim())return Yxe(n)}function Yxe(e){let t=e.replace(/\n$/,"").split(":");return{name:t[0],uid:t[2],gid:t[3],home:t[5],shell:t[6]}}async function Kxe(e,t,n,r){return ge.posix.join(e,"bin",`${t}${n==="stable"?"":`-${n}`}${r?"-web":""}`)}async function h6(e,t,n,r,i,o){return e.join(t,"bin",n.id,`${r}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function g6(e){return ge.posix.join(e.userDataFolder,"extensions")}function oa(e){return ge.posix.join(typeof e=="string"?e:e.userDataFolder,"data/Machine")}function FC(e){return ge.posix.join(e.userDataFolder,"data/Machine/settings.json")}function Xxe(e){return ge.posix.join(e,".vscode-remote")}function nO(e,t){return ge.posix.join(e,t.serverDataFolderName)}function MC(e){return ge.posix.join("/var",/^\.*(.*)$/.exec(e)[1])}async function Qxe(e){return ge.posix.join(e,"node")}var Uy=class{constructor(t){this.settings=t}getConfiguration(t){return this.settings[fc(t)]||this.settings[Nu(t)]}getNewConfiguration(t){return this.settings[fc(t)]}getDotfileConfiguration(t){return this.settings[Nu(t)]||this.settings[t]}};async function ju(e,t,n,r,i=Fd,o,s){await Jxe(e,t);let a=await Zxe(e,t,r),{serverDownloaded:u}=await rwe(e,t),c,l,d=Promise.resolve(),p;if(t.nodeExecutable){let x=await lC(e,t,a);c=x.remoteContainersCLI,l=x.remoteEnv,d=x.ready;let w=o;o=w&&(async(...S)=>(await x.ready,w(...S))),p=x.mrpcExec;let b=e.cliHost.reconnect;b&&(e.cliHost.reconnect=async()=>{await b(),x.reconnect().catch(S=>e.output.write(pt(S&&(S.stack||S.message)||String(S))))})}let m=e.computeExtensionHostEnv||e.postCreate.enabled?Fy(e,t,r,p).then(async x=>({...x,...l,...await EY(t,x),REMOTE_CONTAINERS:"true",...r6(e.cliHost.platform,n.configFilePath,t.env,r.remoteEnv||{})})):Promise.resolve({}),h=a.getConfiguration("gitCredentialHelperConfigLocation")??e.credentialHelperConfigLocation;t.nodeExecutable&&(await Ty(e,t,[".ssh","known_hosts"],"ssh"),h!=="none"&&await DC(t,c,e.output,"system"));let v,g,y;if(t.installFolder){let w=await gwe(e,t,i,p,async()=>owe(e,t,async()=>{var R;return[...new Set([].concat(...(((R=r.customizations)==null?void 0:R.vscode)||[]).map(P=>P.extensions||[])))]},!1),void 0,!0,!1),b=w.serverPort;y=w.connectionToken,v=b,e.forwardServerPort&&t.nodeExecutable&&(g=await n6(e,t,b,e.sessionId),v=g.address().port,e.backgroundTasks.push(async()=>wwe(e,t,r)))}if(e.postCreate.enabled){let x,w=new Promise(S=>x=()=>{S()}),b=(async()=>{let S={...l,REMOTE_CONTAINERS:"true"},R=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],P=R.reduce((E,C)=>(E[C]=(r[`${C}s`]||[]).length>0,E),{});if(e.prebuild){let E=R.indexOf("updateContentCommand");if((!R.slice(0,E+1).some(I=>P[I])||!o?"prebuild":await o(!1,!1,!0,a,S))!=="prebuild")throw new Error('"prebuild" expected')}else{let E=!0,C=!0,T=r.waitFor||Wxe,I=R.indexOf(T),A=R.indexOf("postCreateCommand"),N=I<=A&&!R.slice(0,I+1).some(j=>P[j]),F=a.getDotfileConfiguration("dotfiles.repository")||e.dotfilesConfiguration.repository,L=!R.slice(0,A+1).some(j=>P[j])&&!F,M=N?"skipNonBlocking":L||!o?"stopForPersonalization":await o(E,C,!1,a,S);if(M==="skipNonBlocking"){if(x(),e.postCreate.skipNonBlocking)return;E=!1,M=!R.slice(I+1,A+1).some(W=>P[W])&&!F||!o?"stopForPersonalization":await o(E,C,!1,a,S)}if(M==="stopForPersonalization"){o||await a6(e,t,m,d,a),t.nodeExecutable&&((a.getConfiguration("copyGitConfig")??e.isCopyGitConfigEnabled)&&await X_(e,t,m.then(k=>({...t.env,...k}))),await DC(t,c,e.output,h)),await(s==null?void 0:s()),C=!1;let j=I>A&&!R.slice(A+1,I+1).some(k=>P[k]),W=!R.slice(A+1).some(k=>P[k]);M=j?"skipNonBlocking":W||!o?"done":await o(E,C,!1,a,S)}if(M==="skipNonBlocking"){if(x(),e.postCreate.skipNonBlocking)return;E=!1,M=!R.slice(I+1).some(W=>P[W])||!o?"done":await o(E,C,!1,a,S)}if(M!=="done")throw new Error('"done" expected')}})();b.then(()=>{e.postCreate.done()},S=>{e.postCreate.done(S)}),e.backgroundTasks.push(b),await Promise.race([w,b])}return{hostOrContainerPort:v,hostPortServer:g,connectionToken:y,remoteEnv:e.computeExtensionHostEnv?await m:{},serverDownloaded:u}}async function Jxe(e,t){let n=Xxe(t.homeFolder);!await kC(t.shellServer,t.userDataFolder)&&await kC(t.shellServer,n)&&await vc(e,t,["/bin/sh","-c",`cp -r '${n}' '${t.userDataFolder}'`])}async function Zxe(e,t,n){var s;let r=oa(t),i=ge.posix.join(r,".writeMachineSettingsMarker"),o=FC(t);if(await w6(t.shellServer,i)){let a=(s=n.customizations)==null?void 0:s.vscode,u=Object.assign({},...(Array.isArray(a)?a:a?[a]:[]).map(c=>c.settings));if(ewe(u,n.portsAttributes),twe(u,n.otherPortsAttributes),Object.keys(u).length)return await t.shellServer.exec(`mkdir -p '${ge.posix.dirname(o)}' && cat >'${o}' <<'settingsJSON'
${JSON.stringify(u,null,"	")}
settingsJSON
`),new Uy(u)}try{let{stdout:a}=await t.shellServer.exec(`cat ${o}`);return new Uy(Ge(a)||{})}catch{return new Uy({})}}function ewe(e,t){if(!e||!t||!Object.keys(t).length)return;let n="remote.portsAttributes";if(!e[n]){e[n]=t;return}for(let r in t)e[n][r]||(e[n][r]=t[r])}function twe(e,t){if(!e||!t)return;let n="remote.otherPortsAttributes";e[n]||(e[n]=t)}async function UC(e,t,n,r){let i=typeof e.gid=="string"?`${e.user}:${e.gid}`:e.user,o=await t();if((await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let u=ge.posix.dirname(n);u!=="/"&&await o.exec(`chown ${i} ${u}`),n!=="/"&&await o.exec(`chown -R ${i} ${n}`)}else if(r&&(await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let l=ge.posix.dirname(r);l!=="/"&&await o.exec(`chown -R ${i} ${l}`)}}async function DC(e,t,n,r){if(t||Fu)if(r==="none")n.write("Git credential helper not enabled.");else{let i=r==="system"?e.launchRootShellServer&&await e.launchRootShellServer():e.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${e.nodeExecutable} ${t} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Ty(e,t,n,r){let{cliHost:i}=e,o=i.path.join(await i.homedir(),...n);if(!await i.isFile(o)&&(i.type==="local"||(i=await ps(process.cwd(),e.loadNativeModule,e.output),o=i.path.join(await i.homedir(),...n),!await i.isFile(o))))return;let s=ge.posix.join(t.homeFolder,...n);await kd(i,t.shellServer,o,s,r)}async function kd(e,t,n,r,i){let o=await nwe(e,n);if(o)try{let s=await r;await t.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${ge.posix.dirname(s)}`),await t.exec(`# Copy ${n} to ${s}
${bO(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function nwe(e,t){try{return await e.readFile(t)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function rwe(e,t){let{commit:n}=e.product,{installFolder:r,shellServer:i,launchRootShellServer:o,build:s}=t;if(!(n&&r))return{serverDownloaded:void 0};iwe(t.osRelease,s),s.preview&&e.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let a=await kC(i,r),u;a||s===x6[s.arch]&&(o?u=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let c=t.sharedInstallFolder;if(c&&await kC(i,c))return a||await i.exec(`mkdir -p '${ge.posix.dirname(r)}' && ln -snf '${c}' '${r}'`),o&&(async()=>{await(await o()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};e.progress(4),e.output.write(`Installing VS Code Server for commit ${n}\r
`);let l=!!(c&&o),d=l?c:r,p=l?await o():i,f={localCacheFolder:e.localCacheFolder,build:s,commit:n,quality:e.product.quality||"insider",web:e.web,output:e.output,alternateDownload:e.alternateDownload},m=Ny(f),h=await br(m);h||await pC(f);try{t.sharedDataFolderIsLocalCacheFolder?await d6(f):await Ay(e,p,m,d)}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await pC(f),t.sharedDataFolderIsLocalCacheFolder?await d6(f):await Ay(e,p,m,d);else throw v}return l&&(await i.exec(`mkdir -p '${ge.posix.dirname(r)}' && ln -snf '${c}' '${r}'`),(async()=>{await p.exec(`touch '${c}' && cd '${ge.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!h}}function iwe(e,t){let n=e.version;if(t.minVersion&&n){let r=Cm(n.trim());if(r&&Sm(r,t.minVersion)){let i=Pm.t("{0} {1} or later required.",t.label,t.minVersion.join("."));throw new he({description:i,data:{reload:!1}})}}}async function pC(e){let{build:t,commit:n,quality:r,web:i,output:o}=e,s="Downloading VS Code Server",a=o.start(s);o.write(`${n} ${t.id} ${r} ${i?"web":""}`);let u=Ny(e);await ss(ge.dirname(u));let c=`https://update.code.visualstudio.com/commit:${n}/server-${t.id}${i?"-web":""}/${r}`;try{let l=`${u}_${Date.now()}`;await new Promise((d,p)=>{let f=OC.createWriteStream(l);o.write("Starting download.",1),f6.https.get(c,h=>{if(h.statusCode<200||h.statusCode>299){o.write(`Download failed: ${h.statusCode} ${h.statusMessage}.`,1),p(new he({description:Pm.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${c}): HTTP ${h.statusCode} - ${h.statusMessage}`}));return}o.write("Downloading data.",1),h.on("error",p),h.pipe(f),h.on("end",d)}).on("error",p)}),await Va(l,u)}catch(l){if(o.write("Downloading failed.",1),o.write((l==null?void 0:l.stack)||(l==null?void 0:l.message)||String(l),1),e.alternateDownload){o.write(l&&(l.originalError||l.message)),o.write("Retrying to download VS Code Server.");let d=`${u}_${Date.now()}`;await e.alternateDownload(c,d),await Va(d,u)}else throw l||new he({description:Pm.t("Downloading the VS Code Server failed. Please try again later.")})}finally{o.stop(s,a)}}async function Ay(e,t,n,r,i,o=!0){let s="Installing VS Code Server",a=e.output.start(s),u=`${r}_${Date.now()}`;try{if(await t.exec(`mkdir -p ${u}`),i)typeof n=="string"&&n.endsWith(".zip")?await t.exec(`unzip ${n} -d ${u}`):await t.exec(`cat ${n} | tar --no-same-owner -x${o?"z":""} -C ${u}`);else{let c=typeof n=="string"?await st(n):n;await t.exec(`${bO(c.byteLength)} | tar --no-same-owner -x${o?"z":""} -C ${u}`,{stdin:c})}await t.exec(`mv -n ${ge.posix.join(u,"*",".")} ${r} && rmdir ${u}`)}catch(c){try{await t.exec(`rm -rf ${u}`)}catch{}throw c}finally{e.output.stop(s,a)}}async function d6(e){let{localCacheFolder:t,build:n,commit:r,quality:i,web:o,output:s}=e,a="Unpacking VS Code Server",u=s.start(a);s.write(`${r} ${n.id} ${i} ${o?"web":""}`);let c=await h6(ge,t,n,r,i,o),l=`${c}_${Date.now()}`;try{await ss(l);let d=Ny(e);await(await hc(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",d,"--strip-components","1","-C",l],cwd:process.cwd(),output:s})).exit,await gu(c,{recursive:!0,force:!0}),await Va(l,c)}catch(d){try{await gu(l,{recursive:!0,force:!0})}catch{}throw d}finally{s.stop(a,u)}}function Ny(e){let{localCacheFolder:t,build:n,commit:r,quality:i,web:o}=e,s=ge.join(t,"serverCache",r),a=`vscode-server-${n.id}${i==="stable"?"":`-${i}`}${o?"-web":""}${n.archiveExt||".tar.gz"}`;return ge.join(s,a)}async function v6(e,t){let n=await E6(t),r={VSCODE_AGENT_FOLDER:t.userDataFolder},{stdout:i}=await vc(e,t,[ge.posix.join(t.installFolder,...Q_(n)),...b6(t.userDataFolder),..._6(e.getTelemetryLevel()),"--list-extensions"],t.installFolder,{remoteEnv:r});return i.toString().split(`
`).filter(o=>!!o)}async function owe(e,t,n,r){let i="Preparing Extensions",o=e.output.start(i),{sharedDataFolder:s}=t,a=s?pwe(s):void 0,u=y6(t),c=await awe(e,t,n);if(t.sharedDataFolderIsLocalCacheFolder)await t.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${u}' || true`),t.launchRootShellServer&&await(await t.launchRootShellServer()).exec(`chown -R ${t.user} ${a}`);else{let d=dwe(e.localCacheFolder),p=await cwe(e,t,d,a,u,[...c.builtinExtensions,...c.extensions]);uwe(e,t,d,a,u,p).catch(console.error)}c.extensions=c.extensions.filter(d=>!c.builtinExtensions.includes(d)),e.product.version&&m6.lte("1.77.0",e.product.version.split("-")[0])&&(e.output.write(`Optimizing extensions for quality: ${e.product.quality}`),c.builtinExtensions=await swe(e,t,u,c.builtinExtensions));let l=[].concat(...c.builtinExtensions.map(d=>["--install-builtin-extension",d]),...c.extensions.map(d=>["--install-extension",d]));return r&&l.length&&l.push("--do-not-sync"),e.output.stop(i,o),{...c,args:l}}async function swe(e,t,n,r){if(r.length===0)return r;let{shellServer:i}=t,o=(await i.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));e.output.write(`Available vsix: ${o.join(", ")||"None"}`);let s=r.map(a=>{let u=o.find(c=>c.startsWith(a.toLocaleLowerCase()));return u?`${n}/${u}`:a});return e.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}async function awe(e,t,n){let r=oa(t),i=ge.posix.join(r,".installExtensionsMarker"),o=!await w6(t.shellServer,i),s=o?[]:e.installBuiltinExtensions||[],a=await e.getAdditionalExtensionsToInstall(o),u=o?[]:await n();for(let c of a)u.indexOf(c)===-1&&u.push(c);return{builtinExtensions:s,extensions:u}}async function cwe(e,t,n,r,i,o){e.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=t,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(u=>!!u);if(r){let u=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(l=>!!l),c=u.filter(l=>o.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, link in container: ${c.join(", ")||"None"}`),c.length){await s.exec(`mkdir -p '${i}' && ln -s '${r}'/* '${i}' || true`);let{launchRootShellServer:l}=t;l&&(async()=>{await(await l()).exec(`cd ${r} && touch ${c.map(p=>`'${p}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...u])],cachedExtensions:u}}else{await ss(n);let u=await hu(n),c=u.filter(l=>o.some(d=>l.toLowerCase().startsWith(d.toLowerCase()))&&a.indexOf(l)===-1);if(e.output.write(`Extensions cache, copy to remote: ${c.join(", ")||"None"}`),c.length){let l=ge.basename(n),d=NC.c({cwd:ge.dirname(n)},c.map(m=>ge.join(l,m))),p=ge.posix.join(i,`tmp-${Date.now()}`),f=await new Promise(m=>{let h=[];d.on("data",v=>h.push(v)),d.on("end",()=>m(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${p}
${bO(f.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${p}
mv ${p}/* ${i} && rmdir ${p}`,{stdin:f})}return{remoteExtensions:a.concat(c),cachedExtensions:u}}}async function uwe(e,t,n,r,i,o){if(r&&!t.launchRootShellServer)return;let s=1e4,a=6e4;for(await Do(s);;)o=await lwe(e,t,n,r,i,o),await Do(a)}async function lwe(e,t,n,r,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:u,remoteExec:c}=t,l=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(p=>!!p);if(!r){let p=o.filter(f=>l.indexOf(f)===-1);e.output.write(`Extensions cache, remote removals: ${p.join(", ")||"None"}`);for(let f of p)try{await o2(ge.join(n,f))}catch(m){if(!(m&&m.code==="ENOENT"))throw m}}let d=l.filter(p=>o.indexOf(p)===-1&&s.indexOf(p)===-1);if(e.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${d.join(", ")||"None"}`,1),d.length)if(r){let p=await u();await p.exec(`mkdir -p '${r}' && cd '${i}' && cp ${d.map(f=>`'${f}'`).join(" ")} '${r}'`),await p.exec(`cd '${r}' && ls -t | tail -n +50 | xargs rm -f`)}else{let p=ge.posix.basename(i),f=await c({cmd:"tar",cwd:ge.posix.dirname(i),args:["c",...d.map(g=>ge.posix.join(p,g))],output:e.output}),m=ge.join(ge.dirname(n),`${ge.basename(n)}-${Date.now()}`);await ss(m);let h=NC.x({cwd:m,strip:1}),v=new Promise((g,y)=>{h.on("error",y),h.on("finish",g)});f.stdout.pipe(h),await v;for(let g of await hu(m))await Va(ge.join(m,g),ge.join(n,g));await s2(m)}return{remoteExtensions:l,cachedExtensions:s}}var EO="extensionsCache";function dwe(e){return ge.join(e,EO)}function pwe(e){return ge.posix.join(e,EO)}function y6(e){return ge.posix.join(e.userDataFolder,EO)}var fwe={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},x6={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},Jk={label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},mwe={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function rO(e,t){let n=mwe[e.hardware];if(e.id==="alpine"){let i=n&&x6[n];if(!i)throw new he({description:Pm.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",e.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return i}let r=n&&fwe[n];if(!r||t&&!r.stable)throw new he({description:Pm.t("The hardware architecture '{0}' of the container is not supported.",e.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function iO(e){let t="unknown",n="unknown",r="unknown";try{t=(await e.exec("uname -m")).stdout.trim();let{stdout:i}=await e.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:t,id:n,version:r}}async function w6(e,t){try{return await e.exec(RC(t)),!0}catch{return!1}}function RC(e){return`test ! -f '${e}' && set -o noclobber && mkdir -p '${ge.posix.dirname(e)}' && { > '${e}' ; } 2> /dev/null`}async function kC(e,t){try{return await hwe(e,t),!0}catch{return!1}}async function hwe(e,t){return e.exec(`test -d ${t}`)}async function gwe(e,t,n,r,i,o,s,a){let{userDataFolder:u,installFolder:c,sharedInstallFolder:l,shellServer:d}=t,{processes:p,mntNS:f}=await Ak(d),m=await E6(t),h=`(${ge.posix.join(...Q_(m))})`.replace(".","\\."),v=new RegExp(`${ge.posix.join(ge.posix.dirname(c).replace(".","\\."),"[^/]*",h)}`),g=p.filter(k=>k.mntNS===f&&v.test(k.cmd));e.output.write(`Running extension host agents:
${JSON.stringify(g,void 0,"  ")}`,1);let{current:y,others:x}=g.reduce((k,H)=>(k[(H.cwd===c||H.cwd===l)&&v.test(H.cmd)?"current":"others"].push(H),k),{current:[],others:[]});if(s&&x.length){e.output.write(`Terminating old extension host agent.\r
`);try{await d.exec(`kill -9 ${x.map(k=>k.pgrp?`-${k.pgrp}`:k.pid).join(" ")}`)}catch{}}let{commit:w,quality:b}=e.product,S=ge.posix.join(oa(t),`.connection-token-${w}${b==="stable"?"":`-${b}`}${e.web?"-web":""}`),R=ge.posix.join(oa(t),`.devport-${w}${b==="stable"?"":`-${b}`}${e.web?"-web":""}`);if(y.length){e.output.write(`Extension host agent is already running.\r
`);try{let{stdout:k}=await d.exec(`cat '${R}' 2>/dev/null`),H=k.toString().trim(),$=parseInt(H,10),V=new RegExp(" '?--connection-token-file'? ").test(y[0].cmd)?(await d.exec(`cat '${S}'`)).stdout.toString().trim():void 0;return{serverPort:$,connectionToken:V}}catch(k){console.error(k),e.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await d.exec(`kill -9 ${y.map(H=>H.pgrp?`-${H.pgrp}`:H.pid).join(" ")}`)}catch{}}}let P="isLocalContainer"in e&&e.isLocalContainer,E=`${S}-${AC.randomUUID()}`,{stdout:C}=await d.exec(`cat '${S}' 2>/dev/null || (umask 377 && echo '${AC.randomUUID()}' >'${E}' && mv -n '${E}' '${S}' && rm -f '${E}' && cat '${S}')`),T=C.toString().trim();e.progress(5);let I="Starting VS Code Server",A=e.output.start(I),N=[ge.posix.join(c,...Q_(m)),"--log",xo(e.getLogLevel()),"--force-disable-user-env",...b6(t.userDataFolder),...vwe(P),..._6(e.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",S,"--extensions-download-dir",y6(t),...(await i()).args,"--start-server",...P?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[]],F={SHELL:t.shell,VSCODE_AGENT_FOLDER:u,...await o};delete F.NODE_OPTIONS;let M=(await vc(e,{remoteExec:t.remoteExec},N,c,{remoteEnv:F,resolveOn:l6,print:"continuous"})).cmdOutput;e.output.stop(I,A);let j=(l6.exec(M)||[])[1];if(!j)throw new Error("Port not found");return await d.exec(`echo ${j} >'${R}'`),{serverPort:parseInt(j,10),connectionToken:T}}async function E6({shellServer:e,installFolder:t}){return JSON.parse((await e.exec(`cat '${ge.posix.join(t,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function b6(e){return["--server-data-dir",e]}function vwe(e){return e?["--use-host-proxy"]:[]}function _6(e){return e?["--telemetry-level",e]:[]}var ywe=/^([a-z0-9\-]+):(\d{1,5})$/;function xwe(e){let t=e.match(ywe);if(!(!t||t.length!==3))return{host:t[1],port:Number(t[2])}}async function wwe(e,t,n){let r=(n.forwardPorts||[]).map(o=>typeof o=="number"?`localhost:${o}`:o).map(xwe).filter(Boolean),i=await e.getTunnels();await Promise.all(r.filter(o=>!i.find(s=>s.remoteAddress.host===o.host&&s.remoteAddress.port===o.port)).map(async({host:o,port:s})=>e.openTunnel(t,s,o)))}async function vc(e,{remoteExec:t},n,r,i={}){let o=i.print||(i.silent?"off":"end"),s=await t({env:i.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:i.silent?Ce:e.output}),a=[],u=[],c=new wO.StringDecoder,l=new wO.StringDecoder,d="",p="",f,m,h=new Promise((w,b)=>{f=w,m=b});s.stdout.on("data",w=>{a.push(w);let b=c.write(w);o==="continuous"&&e.output.write(b.replace(/\r?\n/g,`\r
`)),d+=b,i.resolveOn&&i.resolveOn.exec(d)&&f()}),s.stderr.on("data",w=>{u.push(w),p+=l.write(w)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,w=>{w&&m(w)}),s.stdin.end()):i.stdin instanceof OC.ReadStream&&i.stdin.pipe(s.stdin);let v=await Promise.race([s.exit,h]),g=Buffer.concat(a),y=Buffer.concat(u);o==="end"&&(e.output.write(d.replace(/\r?\n/g,`\r
`)),e.output.write(pt(p)));let x=`${d}
${p}`;return v&&(v.code||v.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:x,stdout:g,stderr:y,code:v.code,signal:v.signal}):{cmdOutput:x,stdout:g,stderr:y}}function bO(e){let n=e%8192;return`(dd iflag=fullblock bs=8192 count=${(e-n)/8192} 2>/dev/null; dd iflag=fullblock bs=${n} count=1 2>/dev/null)`}async function Fy(e,t,n,r){let i=_we(n,e);if(!i||i==="none")return{};let o=await Ewe(i,e,t.shellServer);return o||(e.output.write("userEnvProbe: not found in cache"),o=await p6(i,e,t,r,"cat /proc/self/environ","\0"),o||(e.output.write("userEnvProbe: falling back to printenv"),o=await p6(i,e,t,r,"printenv",`
`)),o&&await bwe(o,i,e,t.shellServer),o||{})}async function Ewe(e,t,n){if(!n||!t.containerSessionDataFolder)return;let r=C6(e,t.containerSessionDataFolder);try{if(await dC(n,r)){let{stdout:i}=await n.exec(`cat '${r}'`);return JSON.parse(i)}}catch(i){t.output.write(`Failed to read/parse user env cache: ${i}`,5)}}async function bwe(e,t,n,r){if(!r||!n.containerSessionDataFolder)return;let i=C6(t,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${ge.posix.dirname(i)}' && cat > '${i}' << 'envJSON'
${JSON.stringify(e,null,"	")}
envJSON
`)}catch(o){n.output.write(`Failed to cache user env: ${o}`,5)}}function C6(e,t){return ge.posix.join(t,`env-${e}.json`)}async function p6(e,t,n,r,i,o){var s;if(e==="none")return{};try{let a=AC.randomUUID(),u=new RegExp(a+"([^]*)"+a),c=n.shell;t.output.write(`userEnvProbe shell: ${c}`);let l=ge.posix.basename(c),d=`echo -n ${a}; ${i}; echo -n ${a}`,p;/^pwsh(-preview)?$/.test(l)?p=e==="loginInteractiveShell"||e==="loginShell"?["-Login","-Command"]:["-Command"]:p=[e==="loginInteractiveShell"?"-lic":e==="loginShell"?"-lc":e==="interactiveShell"?"-ic":"-c"];let f=Hi(t.output,1),m=vc({output:f},{remoteExec:await r||n.remoteExec},[c,...p,d],n.installFolder);Promise.race([m,Do(2e3)]).then(async R=>{if(!R){let P,E=n.shellServer||await sr(n.remoteExec,t.output);try{({processes:P}=await Ak(E))}finally{n.shellServer||await E.process.terminate()}let C=P.find(T=>T.cmd.startsWith(c)&&T.cmd.indexOf(a)!==-1);if(C){let I=n4(P)[C.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${Dk(I)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(R=>t.output.write(pt(R&&(R.stack||R.message)||"Error reading process tree.")));let h=await Promise.race([m,Do(1e4)]);if(!h)return t.output.write(pt("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let v=h.stdout.toString(),g=u.exec(v),y=g?g[1]:"";if(!y||y.trim()==="-n")return;let x=y.split(o).reduce((R,P)=>{let E=P.indexOf("=");return E!==-1&&(R[P.substring(0,E)]=P.substring(E+1)),R},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(x,void 0,"  ")}`,1),delete x.PWD;let w=x.PATH,b=(s=n.env)==null?void 0:s.PATH,S=!(t.allowSystemConfigChange&&n.launchRootShellServer)&&w&&b;if(S){let R=n.user;x.PATH=Cwe(w,b,R==="root"||R==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof w=="string"?`'${w}'`:"None"}
Container: ${typeof b=="string"?`'${b}'`:"None"}${S?`
Merged:    ${typeof x.PATH=="string"?`'${x.PATH}'`:"None"}`:""}`),x}catch(a){return t.output.write(pt(a&&(a.stack||a.message)||"Error reading shell environment.")),{}}}function _we(e,t){let n=e==null?void 0:e.userEnvProbe;return t.output.write(`userEnvProbe: ${n||t.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=t.defaultUserEnvProbe),n}function Cwe(e,t,n){let r=e.split(":"),i=0;for(let o of t.split(":")){let s=r.indexOf(o);s===-1?(n||!/\/sbin(\/|$)/.test(o))&&r.splice(i++,0,o):i=s+1}return r.join(":")}async function S6(e){for(let t of e)await(typeof t=="function"?t():t)}var EK=B(require("crypto")),Xy=B(require("path"));function H6(e){return typeof e>"u"||e===null}function Swe(e){return typeof e=="object"&&e!==null}function Twe(e){return Array.isArray(e)?e:H6(e)?[]:[e]}function Iwe(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;n<r;n+=1)i=o[n],e[i]=t[i];return e}function Pwe(e,t){var n="",r;for(r=0;r<t;r+=1)n+=e;return n}function Rwe(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Awe=H6,Dwe=Swe,kwe=Twe,Owe=Pwe,Nwe=Rwe,Lwe=Iwe,Mn={isNothing:Awe,isObject:Dwe,toArray:kwe,repeat:Owe,isNegativeZero:Nwe,extend:Lwe};function $6(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),r+" "+n):r}function jy(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=$6(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}jy.prototype=Object.create(Error.prototype);jy.prototype.constructor=jy;jy.prototype.toString=function(t){return this.name+": "+$6(this,t)};var hi=jy;function _O(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(o=" ... ",t=r-a+o.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:o+e.slice(t,n).replace(/\t/g,"\u2192")+s,pos:r-t+o.length}}function CO(e,t){return Mn.repeat(" ",t-e.length)+e}function Fwe(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,s=-1;o=n.exec(e.buffer);)i.push(o.index),r.push(o.index+o[0].length),e.position<=o.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",u,c,l=Math.min(e.line+t.linesAfter,i.length).toString().length,d=t.maxLength-(t.indent+l+3);for(u=1;u<=t.linesBefore&&!(s-u<0);u++)c=_O(e.buffer,r[s-u],i[s-u],e.position-(r[s]-r[s-u]),d),a=Mn.repeat(" ",t.indent)+CO((e.line-u+1).toString(),l)+" | "+c.str+`
`+a;for(c=_O(e.buffer,r[s],i[s],e.position,d),a+=Mn.repeat(" ",t.indent)+CO((e.line+1).toString(),l)+" | "+c.str+`
`,a+=Mn.repeat("-",t.indent+l+3+c.pos)+`^
`,u=1;u<=t.linesAfter&&!(s+u>=i.length);u++)c=_O(e.buffer,r[s+u],i[s+u],e.position-(r[s]-r[s+u]),d),a+=Mn.repeat(" ",t.indent)+CO((e.line+u+1).toString(),l)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var Mwe=Fwe,Uwe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],qwe=["scalar","sequence","mapping"];function jwe(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(r){t[String(r)]=n})}),t}function Hwe(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Uwe.indexOf(n)===-1)throw new hi('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=jwe(t.styleAliases||null),qwe.indexOf(this.kind)===-1)throw new hi('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Dr=Hwe;function T6(e,t){var n=[];return e[t].forEach(function(r){var i=n.length;n.forEach(function(o,s){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=s)}),n[i]=r}),n}function $we(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(r);return e}function TO(e){return this.extend(e)}TO.prototype.extend=function(t){var n=[],r=[];if(t instanceof Dr)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new hi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Dr))throw new hi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof Dr))throw new hi("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(TO.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=T6(i,"implicit"),i.compiledExplicit=T6(i,"explicit"),i.compiledTypeMap=$we(i.compiledImplicit,i.compiledExplicit),i};var Bwe=TO,Vwe=new Dr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Wwe=new Dr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Gwe=new Dr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),zwe=new Bwe({explicit:[Vwe,Wwe,Gwe]});function Ywe(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Kwe(){return null}function Xwe(e){return e===null}var Qwe=new Dr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ywe,construct:Kwe,predicate:Xwe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Jwe(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function Zwe(e){return e==="true"||e==="True"||e==="TRUE"}function eEe(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var tEe=new Dr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Jwe,construct:Zwe,predicate:eEe,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function nEe(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function rEe(e){return 48<=e&&e<=55}function iEe(e){return 48<=e&&e<=57}function oEe(e){if(e===null)return!1;var t=e.length,n=0,r=!1,i;if(!t)return!1;if(i=e[n],(i==="-"||i==="+")&&(i=e[++n]),i==="0"){if(n+1===t)return!0;if(i=e[++n],i==="b"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!nEe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<t;n++)if(i=e[n],i!=="_"){if(!rEe(e.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<t;n++)if(i=e[n],i!=="_"){if(!iEe(e.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function sEe(e){var t=e,n=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function aEe(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Mn.isNegativeZero(e)}var cEe=new Dr("tag:yaml.org,2002:int",{kind:"scalar",resolve:oEe,construct:sEe,predicate:aEe,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),uEe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function lEe(e){return!(e===null||!uEe.test(e)||e[e.length-1]==="_")}function dEe(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var pEe=/^[-+]?[0-9]+e/;function fEe(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mn.isNegativeZero(e))return"-0.0";return n=e.toString(10),pEe.test(n)?n.replace("e",".e"):n}function mEe(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Mn.isNegativeZero(e))}var hEe=new Dr("tag:yaml.org,2002:float",{kind:"scalar",resolve:lEe,construct:dEe,predicate:mEe,represent:fEe,defaultStyle:"lowercase"}),gEe=zwe.extend({implicit:[Qwe,tEe,cEe,hEe]}),vEe=gEe,B6=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),V6=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yEe(e){return e===null?!1:B6.exec(e)!==null||V6.exec(e)!==null}function xEe(e){var t,n,r,i,o,s,a,u=0,c=null,l,d,p;if(t=B6.exec(e),t===null&&(t=V6.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(l=+t[10],d=+(t[11]||0),c=(l*60+d)*6e4,t[9]==="-"&&(c=-c)),p=new Date(Date.UTC(n,r,i,o,s,a,u)),c&&p.setTime(p.getTime()-c),p}function wEe(e){return e.toISOString()}var EEe=new Dr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yEe,construct:xEe,instanceOf:Date,represent:wEe});function bEe(e){return e==="<<"||e===null}var _Ee=new Dr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:bEe}),DO=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function CEe(e){if(e===null)return!1;var t,n,r=0,i=e.length,o=DO;for(n=0;n<i;n++)if(t=o.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}function SEe(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=DO,s=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(r.charAt(t));return n=i%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function TEe(e){var t="",n=0,r,i,o=e.length,s=DO;for(r=0;r<o;r++)r%3===0&&r&&(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]),n=(n<<8)+e[r];return i=o%3,i===0?(t+=s[n>>18&63],t+=s[n>>12&63],t+=s[n>>6&63],t+=s[n&63]):i===2?(t+=s[n>>10&63],t+=s[n>>4&63],t+=s[n<<2&63],t+=s[64]):i===1&&(t+=s[n>>2&63],t+=s[n<<4&63],t+=s[64],t+=s[64]),t}function IEe(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var PEe=new Dr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:CEe,construct:SEe,predicate:IEe,represent:TEe}),REe=Object.prototype.hasOwnProperty,AEe=Object.prototype.toString;function DEe(e){if(e===null)return!0;var t=[],n,r,i,o,s,a=e;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],s=!1,AEe.call(i)!=="[object Object]")return!1;for(o in i)if(REe.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(o)===-1)t.push(o);else return!1}return!0}function kEe(e){return e!==null?e:[]}var OEe=new Dr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:DEe,construct:kEe}),NEe=Object.prototype.toString;function LEe(e){if(e===null)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],NEe.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[t]=[i[0],r[i[0]]]}return!0}function FEe(e){if(e===null)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var MEe=new Dr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:LEe,construct:FEe}),UEe=Object.prototype.hasOwnProperty;function qEe(e){if(e===null)return!0;var t,n=e;for(t in n)if(UEe.call(n,t)&&n[t]!==null)return!1;return!0}function jEe(e){return e!==null?e:{}}var HEe=new Dr("tag:yaml.org,2002:set",{kind:"mapping",resolve:qEe,construct:jEe}),W6=vEe.extend({implicit:[EEe,_Ee],explicit:[PEe,OEe,MEe,HEe]}),$u=Object.prototype.hasOwnProperty,qC=1,G6=2,z6=3,jC=4,SO=1,$Ee=2,I6=3,BEe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,VEe=/[\x85\u2028\u2029]/,WEe=/[,\[\]\{\}]/,Y6=/^(?:!|!!|![a-z\-]+!)$/i,K6=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function P6(e){return Object.prototype.toString.call(e)}function sa(e){return e===10||e===13}function Ud(e){return e===9||e===32}function gi(e){return e===9||e===32||e===10||e===13}function Am(e){return e===44||e===91||e===93||e===123||e===125}function GEe(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function zEe(e){return e===120?2:e===117?4:e===85?8:0}function YEe(e){return 48<=e&&e<=57?e-48:-1}function R6(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function KEe(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var X6=new Array(256),Q6=new Array(256);for(Md=0;Md<256;Md++)X6[Md]=R6(Md)?1:0,Q6[Md]=R6(Md);var Md;function XEe(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||W6,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function J6(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Mwe(n),new hi(t,n)}function ve(e,t){throw J6(e,t)}function HC(e,t){e.onWarning&&e.onWarning.call(null,J6(e,t))}var A6={YAML:function(t,n,r){var i,o,s;t.version!==null&&ve(t,"duplication of %YAML directive"),r.length!==1&&ve(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&ve(t,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ve(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&HC(t,"unsupported YAML version of the document")},TAG:function(t,n,r){var i,o;r.length!==2&&ve(t,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],Y6.test(i)||ve(t,"ill-formed tag handle (first argument) of the TAG directive"),$u.call(t.tagMap,i)&&ve(t,'there is a previously declared suffix for "'+i+'" tag handle'),K6.test(o)||ve(t,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ve(t,"tag prefix is malformed: "+o)}t.tagMap[i]=o}};function Hu(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||ve(e,"expected valid JSON character");else BEe.test(a)&&ve(e,"the stream contains non-printable characters");e.result+=a}}function D6(e,t,n,r){var i,o,s,a;for(Mn.isObject(n)||ve(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),s=0,a=i.length;s<a;s+=1)o=i[s],$u.call(t,o)||(t[o]=n[o],r[o]=!0)}function Dm(e,t,n,r,i,o,s,a,u){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&ve(e,"nested arrays are not supported inside keys"),typeof i=="object"&&P6(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&P6(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(c=0,l=o.length;c<l;c+=1)D6(e,t,o[c],n);else D6(e,t,o,n);else!e.json&&!$u.call(n,i)&&$u.call(t,i)&&(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=u||e.position,ve(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function kO(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ve(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Tn(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Ud(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(sa(i))for(kO(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return n!==-1&&r!==0&&e.lineIndent<n&&HC(e,"deficient indentation"),r}function VC(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||gi(n)))}function OO(e,t){t===1?e.result+=" ":t>1&&(e.result+=Mn.repeat(`
`,t-1))}function QEe(e,t,n){var r,i,o,s,a,u,c,l,d=e.kind,p=e.result,f;if(f=e.input.charCodeAt(e.position),gi(f)||Am(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(i=e.input.charCodeAt(e.position+1),gi(i)||n&&Am(i)))return!1;for(e.kind="scalar",e.result="",o=s=e.position,a=!1;f!==0;){if(f===58){if(i=e.input.charCodeAt(e.position+1),gi(i)||n&&Am(i))break}else if(f===35){if(r=e.input.charCodeAt(e.position-1),gi(r))break}else{if(e.position===e.lineStart&&VC(e)||n&&Am(f))break;if(sa(f))if(u=e.line,c=e.lineStart,l=e.lineIndent,Tn(e,!1,-1),e.lineIndent>=t){a=!0,f=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=u,e.lineStart=c,e.lineIndent=l;break}}a&&(Hu(e,o,s,!1),OO(e,e.line-u),o=s=e.position,a=!1),Ud(f)||(s=e.position+1),f=e.input.charCodeAt(++e.position)}return Hu(e,o,s,!1),e.result?!0:(e.kind=d,e.result=p,!1)}function JEe(e,t){var n,r,i;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Hu(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)r=e.position,e.position++,i=e.position;else return!0;else sa(n)?(Hu(e,r,i,!0),OO(e,Tn(e,!1,t)),r=i=e.position):e.position===e.lineStart&&VC(e)?ve(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);ve(e,"unexpected end of the stream within a single quoted scalar")}function ZEe(e,t){var n,r,i,o,s,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return Hu(e,n,e.position,!0),e.position++,!0;if(a===92){if(Hu(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),sa(a))Tn(e,!1,t);else if(a<256&&X6[a])e.result+=Q6[a],e.position++;else if((s=zEe(a))>0){for(i=s,o=0;i>0;i--)a=e.input.charCodeAt(++e.position),(s=GEe(a))>=0?o=(o<<4)+s:ve(e,"expected hexadecimal character");e.result+=KEe(o),e.position++}else ve(e,"unknown escape sequence");n=r=e.position}else sa(a)?(Hu(e,n,r,!0),OO(e,Tn(e,!1,t)),n=r=e.position):e.position===e.lineStart&&VC(e)?ve(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}ve(e,"unexpected end of the stream within a double quoted scalar")}function ebe(e,t){var n=!0,r,i,o,s=e.tag,a,u=e.anchor,c,l,d,p,f,m=Object.create(null),h,v,g,y;if(y=e.input.charCodeAt(e.position),y===91)l=93,f=!1,a=[];else if(y===123)l=125,f=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(Tn(e,!0,t),y=e.input.charCodeAt(e.position),y===l)return e.position++,e.tag=s,e.anchor=u,e.kind=f?"mapping":"sequence",e.result=a,!0;n?y===44&&ve(e,"expected the node content, but found ','"):ve(e,"missed comma between flow collection entries"),v=h=g=null,d=p=!1,y===63&&(c=e.input.charCodeAt(e.position+1),gi(c)&&(d=p=!0,e.position++,Tn(e,!0,t))),r=e.line,i=e.lineStart,o=e.position,km(e,t,qC,!1,!0),v=e.tag,h=e.result,Tn(e,!0,t),y=e.input.charCodeAt(e.position),(p||e.line===r)&&y===58&&(d=!0,y=e.input.charCodeAt(++e.position),Tn(e,!0,t),km(e,t,qC,!1,!0),g=e.result),f?Dm(e,a,m,v,h,g,r,i,o):d?a.push(Dm(e,null,m,v,h,g,r,i,o)):a.push(h),Tn(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(n=!0,y=e.input.charCodeAt(++e.position)):n=!1}ve(e,"unexpected end of the stream within a flow collection")}function tbe(e,t){var n,r,i=SO,o=!1,s=!1,a=t,u=0,c=!1,l,d;if(d=e.input.charCodeAt(e.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(e.kind="scalar",e.result="";d!==0;)if(d=e.input.charCodeAt(++e.position),d===43||d===45)SO===i?i=d===43?I6:$Ee:ve(e,"repeat of a chomping mode identifier");else if((l=YEe(d))>=0)l===0?ve(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ve(e,"repeat of an indentation width identifier"):(a=t+l-1,s=!0);else break;if(Ud(d)){do d=e.input.charCodeAt(++e.position);while(Ud(d));if(d===35)do d=e.input.charCodeAt(++e.position);while(!sa(d)&&d!==0)}for(;d!==0;){for(kO(e),e.lineIndent=0,d=e.input.charCodeAt(e.position);(!s||e.lineIndent<a)&&d===32;)e.lineIndent++,d=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>a&&(a=e.lineIndent),sa(d)){u++;continue}if(e.lineIndent<a){i===I6?e.result+=Mn.repeat(`
`,o?1+u:u):i===SO&&o&&(e.result+=`
`);break}for(r?Ud(d)?(c=!0,e.result+=Mn.repeat(`
`,o?1+u:u)):c?(c=!1,e.result+=Mn.repeat(`
`,u+1)):u===0?o&&(e.result+=" "):e.result+=Mn.repeat(`
`,u):e.result+=Mn.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,n=e.position;!sa(d)&&d!==0;)d=e.input.charCodeAt(++e.position);Hu(e,n,e.position,!1)}return!0}function k6(e,t){var n,r=e.tag,i=e.anchor,o=[],s,a=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ve(e,"tab characters must not be used in indentation")),!(u!==45||(s=e.input.charCodeAt(e.position+1),!gi(s))));){if(a=!0,e.position++,Tn(e,!0,-1)&&e.lineIndent<=t){o.push(null),u=e.input.charCodeAt(e.position);continue}if(n=e.line,km(e,t,z6,!1,!0),o.push(e.result),Tn(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&u!==0)ve(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function nbe(e,t,n){var r,i,o,s,a,u,c=e.tag,l=e.anchor,d={},p=Object.create(null),f=null,m=null,h=null,v=!1,g=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=d),y=e.input.charCodeAt(e.position);y!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ve(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,(y===63||y===58)&&gi(r))y===63?(v&&(Dm(e,d,p,f,m,null,s,a,u),f=m=h=null),g=!0,v=!0,i=!0):v?(v=!1,i=!0):ve(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=r;else{if(s=e.line,a=e.lineStart,u=e.position,!km(e,n,G6,!1,!0))break;if(e.line===o){for(y=e.input.charCodeAt(e.position);Ud(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),gi(y)||ve(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Dm(e,d,p,f,m,null,s,a,u),f=m=h=null),g=!0,v=!1,i=!1,f=e.tag,m=e.result;else if(g)ve(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=l,!0}else if(g)ve(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=l,!0}if((e.line===o||e.lineIndent>t)&&(v&&(s=e.line,a=e.lineStart,u=e.position),km(e,t,jC,!0,i)&&(v?m=e.result:h=e.result),v||(Dm(e,d,p,f,m,h,s,a,u),f=m=h=null),Tn(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&y!==0)ve(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Dm(e,d,p,f,m,null,s,a,u),g&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=d),g}function rbe(e){var t,n=!1,r=!1,i,o,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&ve(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(n=!0,s=e.input.charCodeAt(++e.position)):s===33?(r=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(o=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):ve(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!gi(s);)s===33&&(r?ve(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Y6.test(i)||ve(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),WEe.test(o)&&ve(e,"tag suffix cannot contain flow indicator characters")}o&&!K6.test(o)&&ve(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ve(e,"tag name is malformed: "+o)}return n?e.tag=o:$u.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:ve(e,'undeclared tag handle "'+i+'"'),!0}function ibe(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&ve(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!gi(n)&&!Am(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ve(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function obe(e){var t,n,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!gi(r)&&!Am(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ve(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),$u.call(e.anchorMap,n)||ve(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Tn(e,!0,-1),!0}function km(e,t,n,r,i){var o,s,a,u=1,c=!1,l=!1,d,p,f,m,h,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=jC===n||z6===n,r&&Tn(e,!0,-1)&&(c=!0,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)),u===1)for(;rbe(e)||ibe(e);)Tn(e,!0,-1)?(c=!0,a=o,e.lineIndent>t?u=1:e.lineIndent===t?u=0:e.lineIndent<t&&(u=-1)):a=!1;if(a&&(a=c||i),(u===1||jC===n)&&(qC===n||G6===n?h=t:h=t+1,v=e.position-e.lineStart,u===1?a&&(k6(e,v)||nbe(e,v,h))||ebe(e,h)?l=!0:(s&&tbe(e,h)||JEe(e,h)||ZEe(e,h)?l=!0:obe(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&ve(e,"alias node should not have any properties")):QEe(e,h,qC===n)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(l=a&&k6(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ve(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),d=0,p=e.implicitTypes.length;d<p;d+=1)if(m=e.implicitTypes[d],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if($u.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,f=e.typeMap.multi[e.kind||"fallback"],d=0,p=f.length;d<p;d+=1)if(e.tag.slice(0,f[d].tag.length)===f[d].tag){m=f[d];break}m||ve(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&ve(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ve(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function sbe(e){var t=e.position,n,r,i,o=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(s=e.input.charCodeAt(e.position))!==0&&(Tn(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(o=!0,s=e.input.charCodeAt(++e.position),n=e.position;s!==0&&!gi(s);)s=e.input.charCodeAt(++e.position);for(r=e.input.slice(n,e.position),i=[],r.length<1&&ve(e,"directive name must not be less than one character in length");s!==0;){for(;Ud(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!sa(s));break}if(sa(s))break;for(n=e.position;s!==0&&!gi(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(n,e.position))}s!==0&&kO(e),$u.call(A6,r)?A6[r](e,r,i):HC(e,'unknown document directive "'+r+'"')}if(Tn(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Tn(e,!0,-1)):o&&ve(e,"directives end mark is expected"),km(e,e.lineIndent-1,jC,!1,!0),Tn(e,!0,-1),e.checkLineBreaks&&VEe.test(e.input.slice(t,e.position))&&HC(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&VC(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Tn(e,!0,-1));return}if(e.position<e.length-1)ve(e,"end of the stream or a document separator is expected");else return}function Z6(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new XEe(e,t),r=e.indexOf("\0");for(r!==-1&&(n.position=r,ve(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)sbe(n);return n.documents}function abe(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var r=Z6(e,n);if(typeof t!="function")return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])}function cbe(e,t){var n=Z6(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new hi("expected a single document in the stream, but found more")}}var ube=abe,lbe=cbe,eK={loadAll:ube,load:lbe},tK=Object.prototype.toString,nK=Object.prototype.hasOwnProperty,NO=65279,dbe=9,Hy=10,pbe=13,fbe=32,mbe=33,hbe=34,IO=35,gbe=37,vbe=38,ybe=39,xbe=42,rK=44,wbe=45,$C=58,Ebe=61,bbe=62,_be=63,Cbe=64,iK=91,oK=93,Sbe=96,sK=123,Tbe=124,aK=125,kr={};kr[0]="\\0";kr[7]="\\a";kr[8]="\\b";kr[9]="\\t";kr[10]="\\n";kr[11]="\\v";kr[12]="\\f";kr[13]="\\r";kr[27]="\\e";kr[34]='\\"';kr[92]="\\\\";kr[133]="\\N";kr[160]="\\_";kr[8232]="\\L";kr[8233]="\\P";var Ibe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Pbe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Rbe(e,t){var n,r,i,o,s,a,u;if(t===null)return{};for(n={},r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s=r[i],a=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=e.compiledTypeMap.fallback[s],u&&nK.call(u.styleAliases,a)&&(a=u.styleAliases[a]),n[s]=a;return n}function Abe(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else if(e<=4294967295)n="U",r=8;else throw new hi("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Mn.repeat("0",r-t.length)+t}var Dbe=1,$y=2;function kbe(e){this.schema=e.schema||W6,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Mn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Rbe(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?$y:Dbe,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function O6(e,t){for(var n=Mn.repeat(" ",t),r=0,i=-1,o="",s,a=e.length;r<a;)i=e.indexOf(`
`,r),i===-1?(s=e.slice(r),r=a):(s=e.slice(r,i+1),r=i+1),s.length&&s!==`
`&&(o+=n),o+=s;return o}function PO(e,t){return`
`+Mn.repeat(" ",e.indent*t)}function Obe(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function BC(e){return e===fbe||e===dbe}function By(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==NO||65536<=e&&e<=1114111}function N6(e){return By(e)&&e!==NO&&e!==pbe&&e!==Hy}function L6(e,t,n){var r=N6(e),i=r&&!BC(e);return(n?r:r&&e!==rK&&e!==iK&&e!==oK&&e!==sK&&e!==aK)&&e!==IO&&!(t===$C&&!i)||N6(t)&&!BC(t)&&e===IO||t===$C&&i}function Nbe(e){return By(e)&&e!==NO&&!BC(e)&&e!==wbe&&e!==_be&&e!==$C&&e!==rK&&e!==iK&&e!==oK&&e!==sK&&e!==aK&&e!==IO&&e!==vbe&&e!==xbe&&e!==mbe&&e!==Tbe&&e!==Ebe&&e!==bbe&&e!==ybe&&e!==hbe&&e!==gbe&&e!==Cbe&&e!==Sbe}function Lbe(e){return!BC(e)&&e!==$C}function qy(e,t){var n=e.charCodeAt(t),r;return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function cK(e){var t=/^\n* /;return t.test(e)}var uK=1,RO=2,lK=3,dK=4,Rm=5;function Fbe(e,t,n,r,i,o,s,a){var u,c=0,l=null,d=!1,p=!1,f=r!==-1,m=-1,h=Nbe(qy(e,0))&&Lbe(qy(e,e.length-1));if(t||s)for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=qy(e,u),!By(c))return Rm;h=h&&L6(c,l,a),l=c}else{for(u=0;u<e.length;c>=65536?u+=2:u++){if(c=qy(e,u),c===Hy)d=!0,f&&(p=p||u-m-1>r&&e[m+1]!==" ",m=u);else if(!By(c))return Rm;h=h&&L6(c,l,a),l=c}p=p||f&&u-m-1>r&&e[m+1]!==" "}return!d&&!p?h&&!s&&!i(e)?uK:o===$y?Rm:RO:n>9&&cK(e)?Rm:s?o===$y?Rm:RO:p?dK:lK}function Mbe(e,t,n,r,i){e.dump=function(){if(t.length===0)return e.quotingType===$y?'""':"''";if(!e.noCompatMode&&(Ibe.indexOf(t)!==-1||Pbe.test(t)))return e.quotingType===$y?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;function u(c){return Obe(e,c)}switch(Fbe(t,a,e.indent,s,u,e.quotingType,e.forceQuotes&&!r,i)){case uK:return t;case RO:return"'"+t.replace(/'/g,"''")+"'";case lK:return"|"+F6(t,e.indent)+M6(O6(t,o));case dK:return">"+F6(t,e.indent)+M6(O6(Ube(t,s),o));case Rm:return'"'+qbe(t)+'"';default:throw new hi("impossible error: invalid scalar style")}}()}function F6(e,t){var n=cK(e)?String(t):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),o=i?"+":r?"":"-";return n+o+`
`}function M6(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Ube(e,t){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,n.lastIndex=c,U6(e.slice(0,c),t)}(),i=e[0]===`
`||e[0]===" ",o,s;s=n.exec(e);){var a=s[1],u=s[2];o=u[0]===" ",r+=a+(!i&&!o&&u!==""?`
`:"")+U6(u,t),i=o}return r}function U6(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,r,i=0,o,s=0,a=0,u="";r=n.exec(e);)a=r.index,a-i>t&&(o=s>i?s:a,u+=`
`+e.slice(i,o),i=o+1),s=a;return u+=`
`,e.length-i>t&&s>i?u+=e.slice(i,s)+`
`+e.slice(s+1):u+=e.slice(i),u.slice(1)}function qbe(e){for(var t="",n=0,r,i=0;i<e.length;n>=65536?i+=2:i++)n=qy(e,i),r=kr[n],!r&&By(n)?(t+=e[i],n>=65536&&(t+=e[i+1])):t+=r||Abe(n);return t}function jbe(e,t,n){var r="",i=e.tag,o,s,a;for(o=0,s=n.length;o<s;o+=1)a=n[o],e.replacer&&(a=e.replacer.call(n,String(o),a)),(yc(e,t,a,!1,!1)||typeof a>"u"&&yc(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function q6(e,t,n,r){var i="",o=e.tag,s,a,u;for(s=0,a=n.length;s<a;s+=1)u=n[s],e.replacer&&(u=e.replacer.call(n,String(s),u)),(yc(e,t+1,u,!0,!0,!1,!0)||typeof u>"u"&&yc(e,t+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=PO(e,t)),e.dump&&Hy===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function Hbe(e,t,n){var r="",i=e.tag,o=Object.keys(n),s,a,u,c,l;for(s=0,a=o.length;s<a;s+=1)l="",r!==""&&(l+=", "),e.condenseFlow&&(l+='"'),u=o[s],c=n[u],e.replacer&&(c=e.replacer.call(n,u,c)),yc(e,t,u,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),yc(e,t,c,!1,!1)&&(l+=e.dump,r+=l));e.tag=i,e.dump="{"+r+"}"}function $be(e,t,n,r){var i="",o=e.tag,s=Object.keys(n),a,u,c,l,d,p;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new hi("sortKeys must be a boolean or a function");for(a=0,u=s.length;a<u;a+=1)p="",(!r||i!=="")&&(p+=PO(e,t)),c=s[a],l=n[c],e.replacer&&(l=e.replacer.call(n,c,l)),yc(e,t+1,c,!0,!0,!0)&&(d=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,d&&(e.dump&&Hy===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,d&&(p+=PO(e,t)),yc(e,t+1,l,!0,d)&&(e.dump&&Hy===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=o,e.dump=i||"{}"}function j6(e,t,n){var r,i,o,s,a,u;for(i=n?e.explicitTypes:e.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(u=e.styleMap[a.tag]||a.defaultStyle,tK.call(a.represent)==="[object Function]")r=a.represent(t,u);else if(nK.call(a.represent,u))r=a.represent[u](t,u);else throw new hi("!<"+a.tag+'> tag resolver accepts not "'+u+'" style');e.dump=r}return!0}return!1}function yc(e,t,n,r,i,o,s){e.tag=null,e.dump=n,j6(e,n,!1)||j6(e,n,!0);var a=tK.call(e.dump),u=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var l=a==="[object Object]"||a==="[object Array]",d,p;if(l&&(d=e.duplicates.indexOf(n),p=d!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(i=!1),p&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(l&&p&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),a==="[object Object]")r&&Object.keys(e.dump).length!==0?($be(e,t,e.dump,i),p&&(e.dump="&ref_"+d+e.dump)):(Hbe(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!s&&t>0?q6(e,t-1,e.dump,i):q6(e,t,e.dump,i),p&&(e.dump="&ref_"+d+e.dump)):(jbe(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&Mbe(e,e.dump,t,o,u);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new hi("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Bbe(e,t){var n=[],r=[],i,o;for(AO(e,n,r),i=0,o=r.length;i<o;i+=1)t.duplicates.push(n[r[i]]);t.usedDuplicates=new Array(o)}function AO(e,t,n){var r,i,o;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)AO(e[i],t,n);else for(r=Object.keys(e),i=0,o=r.length;i<o;i+=1)AO(e[r[i]],t,n)}function Vbe(e,t){t=t||{};var n=new kbe(t);n.noRefs||Bbe(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),yc(n,0,r,!0,!0)?n.dump+`
`:""}var Wbe=Vbe,Gbe={dump:Wbe};function LO(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Vy=eK.load,EGe=eK.loadAll,bGe=Gbe.dump;var _Ge=LO("safeLoad","load"),CGe=LO("safeLoadAll","loadAll"),SGe=LO("safeDump","dump");var hs=B(require("path")),yK=B(require("os")),xK=B(require("crypto")),wK=B(N_());var Wy=B(require("path")),mK=B(require("os"));var fK=B(require("crypto"));var ms={async readDocument(e){switch(e.scheme){case"file":try{return(await st(e.fsPath)).toString()}catch(t){if(t&&t.code==="ENOENT")return;throw t}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}},async applyEdits(e,t,n){switch(e.scheme){case"file":let r=ci(n,t);await mb(e.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},qO=class{constructor(t,n=qO.scheme){this.fileHost=t;this.scheme=n}async readDocument(t){switch(t.scheme){case this.scheme:try{return(await this.fileHost.readFile(xe(t,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,n,r){switch(t.scheme){case this.scheme:let i=ci(r,n);await this.fileHost.writeFile(xe(t,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},ut=qO;ut.scheme="vscode-fileHost";var qd=class{constructor(t){this.shellServer=t}async readDocument(t){switch(t.scheme){case qd.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${t.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}async applyEdits(t,n,r){switch(t.scheme){case qd.scheme:try{qd.nonce||(qd.nonce=fK.randomUUID());let i=ci(r,n),o=`EOF-${qd.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${t.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},vi=qd;vi.scheme="vscode-remote";var MO=class{constructor(t){this.documents=t}async readDocument(t){let n=this.documents[t.scheme];if(!n)throw new Error(`Unsupported scheme: ${t.toString()}`);return n.readDocument(t)}async applyEdits(t,n,r){let i=this.documents[t.scheme];if(!i)throw new Error(`Unsupported scheme: ${t.toString()}`);return i.applyEdits(t,n,r)}};function Xn(e,t){let n={file:ms,[ut.scheme]:new ut(e)};return t&&(n[vi.scheme]="readFile"in t?new ut(t,vi.scheme):new vi(t)),new MO(n)}var FO=new Map;async function UO(e,t){let n=e.toString(),r=FO.get(n);if(r||FO.set(n,r=[]),r.push(t),r.length===1){for(;r.length;)await r[0](),r.shift();FO.delete(n)}}function xe(e,t){let n;return e.authority&&e.path.length>1&&(e.scheme==="file"||e.scheme===ut.scheme)?n=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?n=e.path[1].toLowerCase()+e.path.substr(2):n=e.path,t==="win32"&&(n=n.replace(/\//g,"\\")),n}function Om(e,t){return[e.join(t,".devcontainer","devcontainer.json"),e.join(t,".devcontainer.json")]}function Gy(e,t){let n=e.normalize(t);return Om(e,"").includes(n)}async function WC(e,t){let n=Om(e.path,t);for(let r of n)if(await e.isFile(r))return ye.file(r).with({scheme:ut.scheme})}async function hK(e){let t=Om(Wy,e);for(let n of t)if(await br(n))return n}var xc=`{${mK.EOL}}`;async function ko(e,t,n,r){t.scheme==="file"&&await ss(Wy.dirname(t.fsPath)),await e.applyEdits(t,n,r)}function Bu(e){let t=Wy.posix.dirname(e.path);return e.with({path:t})}var jO=B(require("path")),Ybe={src:"source",destination:"target",dst:"target"};function gK(e){return e.split(",").map(t=>t.split("=")).reduce((t,[n,r])=>({...t,[Ybe[n]||n]:r}),{})}function GC(e){let t=typeof e=="string"?jO.join(e,"dist"):e.distFolder;return jO.join(t,"node_modules","vscode-dev-containers","container-features")}function vK(e){var t;return(t=e.options)!=null&&t.version?"version":void 0}var zy=require("string_decoder");function Ky(e){if(!(e.extensions||e.settings||e.devPort!==void 0))return e;let t={...e},n=t.customizations||(t.customizations={}),r=n.vscode||(n.vscode={});return t.extensions&&(r.extensions=(r.extensions||[]).concat(t.extensions),delete t.extensions),t.settings&&(r.settings={...t.settings,...r.settings||{}},delete t.settings),t.devPort!==void 0&&r.devPort===void 0&&(r.devPort=t.devPort,delete t.devPort),t}function Yy(e,t,n){return zC(e,t.configFilePath,n)}function zC(e,t,n){let r=Bu(t);return t.with({path:hs.posix.resolve(r.path,e.platform==="win32"&&t.scheme!==vi.scheme?(hs.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Or(e){return"dockerFile"in e||"build"in e&&"dockerfile"in e.build}function YC(e){return e&&(Or(e)||"image"in e||"dockerComposeFile"in e)}function Vu(e,t){return Yy(e,t,Kbe(t))}function Kbe(e){return"dockerFile"in e?e.dockerFile:e.build.dockerfile}async function Wu(e,t,n,r){if(Array.isArray(t.dockerComposeFile)){if(t.dockerComposeFile.length)return t.dockerComposeFile.map(i=>xe(Yy(e,t,i),e.platform))}else if(typeof t.dockerComposeFile=="string")return[xe(Yy(e,t,t.dockerComposeFile),e.platform)];if(r){let i=n==null?void 0:n.COMPOSE_FILE;if(i)return i.split(e.path.delimiter).map(a=>e.path.resolve(r,a));try{let a=e.path.join(r,".env"),u=await e.readFile(a),c=/^COMPOSE_FILE=(.+)$/m.exec(u.toString()),l=c&&c[1].trim();if(l)return l.split(e.path.delimiter).map(d=>e.path.resolve(r,d))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[e.path.resolve(r,"docker-compose.yml")],s=e.path.resolve(r,"docker-compose.override.yml");return await e.isFile(s)&&o.push(s),o}return[]}async function Oo(e,t){let{cliHost:n,postCreate:r,output:i}=e,o=await Xbe(e),s=Qbe(n),a;return await Jbe({exec:n.exec,cwd:e.cwd||o.cwd,cmd:s.cmd,args:[...s.args,o.script,...t],env:Zbe(e,s.cmd),stdin:r==null?void 0:r.onDidInput,output:i,stdoutData:u=>a=u,stderrData:u=>{i.event(u)}}),a}async function Xbe(e){let{cliHost:t,extensionPath:n,output:r}=e,i=hs.join(n,"dist","spec-node","devContainersSpecCLI.js"),o=t.type==="local"?n:t.path.join(await t.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${e.package.version}`),s=t.type==="local"?i:t.path.join(o,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(t.type)!==-1&&!await t.isFile(s)){let a=`${o}-${xK.randomUUID()}`,u=t.path.join(a,"dist","spec-node","devContainersSpecCLI.js");await t.mkdirp(t.path.dirname(u)),await t.writeFile(t.path.join(a,"package.json"),await st(hs.join(n,"package.json"))),await t.writeFile(u,await st(i));let c=GC(n),l=t.path.join(a,"dist","node_modules","vscode-dev-containers","container-features");await jd(c,t,l,r),await jd(hs.join(n,"scripts"),t,t.path.join(a,"scripts"),r),await t.rename(a,o)}return{cwd:o,script:s}}function Qbe(e){if(e.type==="local")return Fu?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:process.versions.electron&&process.versions["microsoft-build"]?["--ms-enable-electron-run-as-node"]:[]};if(e.nodeExecutable)return{cmd:e.nodeExecutable,args:[]};throw new Error("Node executable required")}async function Jbe(e){let{exec:t,cmd:n,args:r,cwd:i,env:o,stdin:s,output:a,stdoutData:u,stderrData:c}=e,l=await t({cmd:n,args:r,cwd:i,env:o,output:a});return new Promise((d,p)=>{let f=new zy.StringDecoder,m="";l.stdout.on("data",y=>{m+=f.write(y);let x=m.split(`
`);m=x.pop();for(let w of x)if(w.trim())try{u(JSON.parse(w))}catch{a.write(w)}}),l.stdout.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let h=new zy.StringDecoder,v="";l.stderr.on("data",y=>{v+=h.write(y);let x=v.split(`
`);v=x.pop();for(let w of x)if(w.trim())try{c(JSON.parse(w))}catch{a.write(w)}}),l.stderr.on("error",y=>{if((y==null?void 0:y.code)!=="ENOTCONN")throw y});let g=[];l.exit.then(({code:y})=>{try{g.forEach(x=>x.dispose()),y?(a.write(`Exit code ${y}`),p({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:y})):d()}catch(x){p(x)}},p),typeof s=="function"&&g.push(s(y=>l.stdin.write(y)))})}function Zbe(e,t){let{cliHost:n,env:r,appRoot:i}=e;return{...r,...n.type==="local"?i?{NODE_PATH:`${n.path.join(i,"node_modules.asar")}${hs.delimiter}${n.path.join(i,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(t),"node_modules")},...Fu?{TS_NODE_PROJECT:void 0}:{}}}async function jd(e,t,n,r){await t.mkdirp(n);let i=wK.c({cwd:e,filter:c=>(console.log(c),!0)},["."]),o=new Promise((c,l)=>{i.on("error",l),i.on("finish",c)}),s=await t.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new zy.StringDecoder;s.stdout.on("data",c=>{r.write(a.write(c))});let u=new zy.StringDecoder;s.stderr.on("data",c=>{r.write(pt(u.write(c)))}),i.pipe(s.stdin),await Promise.all([s.exit,o])}async function yi(){return hs.join(yK.tmpdir(),process.platform==="linux"?`vsch-${await EC()}`:"vsch")}function e_e(){return{contentHashes:{}}}async function XC(e,t,n,r){let i=e.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),u=(await HO(t,n,r)).contentHashes,c=Object.keys(u),l=new Set(c);s.forEach(f=>l.delete(f));let d=new Set(s);c.forEach(f=>d.delete(f));let p=[];for(let f of s)f in u&&u[f]!==o[f]&&p.push(f);if(l.size||d.size||p.length){let f=await HO(t,n,r);(async()=>{await e.containerOutdated([...l,...d,...p].sort())==="ignore"&&await e.updateConfigurationState(f)})().catch(console.error)}}else await bK(e,t,n,r)}async function QC(e,t,n,r,i){let o="Updating configuration state",s=i.start(o);await bK(e,t,n,r),i.stop(o,s)}async function bK(e,t,n,r){let i=await HO(t,n,r);await e.updateConfigurationState(i)}async function HO(e,t,n){let r=e_e();KC(r,Xy.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let i=Bu(n.configFilePath).path;if(Or(n)){let o=Vu(e,n),s=await t.readDocument(o);s!==void 0&&KC(r,Xy.posix.relative(i,o.path),s)}if("dockerComposeFile"in n){let o=await Wu(e,n,e.env,e.cwd),s=await Promise.all(o.map(async a=>{let u=ye.file(a).with({scheme:ut.scheme});return{uri:u,content:await t.readDocument(u)}}));for(let{uri:a,content:u}of s)u!==void 0&&KC(r,Xy.posix.relative(i,a.path),u);for(let a=s.length-1;a>=0;a--){let{uri:u,content:c}=s[a];if(c){let l=Vy(c),d=l&&l.services,p=d&&d[n.service],f=p&&p.build,m=f&&(typeof f=="string"?f:f.context);if(m){let h=zC(e,u,m),v=_K(h,f.dockerfile||"Dockerfile"),g=await t.readDocument(v);g!==void 0&&KC(r,Xy.posix.relative(i,v.path),g)}if(p&&(p.image||p.build))break}}}return r}function KC(e,t,n){let r=EK.createHash("sha256").update(n).digest("hex");e.contentHashes[t]=r}var vs=B(require("path")),Ju=B(require("crypto"));var Qu=B(Er());var Wr=B(require("path")),ZO=B(require("crypto"));var Ku=B(Er());var PK=B(require("net")),GO=B(require("path"));var $O=B(require("path")),VO=B(require("http")),CK=B(require("os")),SK=B(require("crypto"));async function TK(e,t){let n=await WO(e),r=new BO(n,t);return r.listen(),r}var BO=class{constructor(t,n){this.ipcHandlePath=t;this.server=VO.createServer((r,i)=>{Promise.resolve(n(r,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",r=>console.error(r))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function IK(e){return new Promise((t,n)=>{let r=[];e.setEncoding("utf8"),e.on("data",i=>r.push(i)),e.on("error",i=>n(i)),e.on("end",()=>{let i=JSON.parse(r.join(""));t(i)})})}async function WO(e){let t=SK.randomUUID(),n=`${e}-${t}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?$O.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):$O.join(CK.tmpdir(),`${n}.sock`)}var JC=class{constructor(){this.messages=[]}push(t){this.messages.push(t),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(t){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof t=="number"&&setTimeout(r,t)})}};async function aa(e,t,n){let r=await WO("ssh-askpass");return await new Promise((i,o)=>{PK.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async u=>{if(a+=u,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let c=await t(JSON.parse(a));s.write(c,l=>{l&&console.error(l)}),s.end()}catch(c){console.error(c)}}),s.on("error",u=>console.error(u))}).on("error",s=>{o(s)}).listen(r,()=>{i()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:GO.join(e,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_EXTRA_ARGS:process.versions.electron?"--ms-enable-electron-run-as-node":"",VSCODE_SSH_ASKPASS_MAIN:GO.join(e,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var t_e=0;function hn(e){return e.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++t_e)}:{}}async function xi(e,t){return(await ca(e,[t]))[0]}async function ca(e,t){let n=await eS(e,"container",t);for(let r of n){r.Ports=[];let i=r.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let u of i[o]||[]){let{HostIp:c,HostPort:l}=u;r.Ports.push({IP:c,PrivatePort:parseInt(s),PublicPort:parseInt(l),Type:a})}}}return n}async function RK(e,t){return(await eS(e,"image",[t]))[0]}async function ZC(e,t){return(await eS(e,"volume",[t]))[0]}async function Hd(e,t){return eS(e,"volume",t)}async function eS(e,t,n){if(!n.length)return[];let r=la(e),i=await ce({...r,args:(r.args||[]).concat(["inspect","--type",t,...n])});try{return JSON.parse(i.stdout.toString())}catch(o){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),o}}async function wc(e,t=!1,n=[]){let r=[];t&&r.push("-a");for(let o of n)r.push("--filter",`label=${o}`);return(await Ae(e,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function wi(e,t=[]){let n=[];for(let i of t)n.push("--filter",`label=${i}`);return(await Ae(e,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Gu(e,t=[]){return(await Ae(e,"volume","ls","-q","-f","dangling=true",...t.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function Nm(e,t,n){let r=[];for(let i of n||[])r.push("--label",i);await Ae(e,"volume","create",...r,t)}async function zO(e,t){let{exec:n,cmd:r,args:i,env:o,output:s}=la(e),a=[];for(let p in t)for(let f of t[p])a.push("--filter",`${p}=${f}`);let u=await KO(e)?"json":"{{json .}}",c=(i||[]).concat(["events","--format",u,...a]),l=await n({cmd:r,args:c,env:o,output:s}),d=[];return l.stderr.on("data",p=>d.push(p)),l.exit.then(({code:p,signal:f})=>{d.length&&s.write(pt(Buffer.concat(d).toString())),(p||f&&f!=="SIGKILL")&&s.write(pt(`Docker events terminated (code: ${p}, signal: ${f}).`))},p=>{s.write(pt(p&&(p.stack||p.message)))}),l}async function Ae(e,...t){let n=la(e);return ce({...n,args:(n.args||[]).concat(t)})}async function YO(e){var t;try{let{stdout:n}=await Ae(e,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(t=JSON.parse(r).find(s=>s.Current))==null?void 0:t.Name}catch{return}}async function KO(e){try{let{stdout:t}=await Ae(e,"-v");return t.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function AK(e,...t){let n=OK(e);return pc({...n,args:(n.args||[]).concat(t)})}async function Qy(e,...t){let n=la(e,"dockerComposeCLI"in e?await e.dockerComposeCLI():void 0);return ce({...n,args:(n.args||[]).concat(t)})}function gs(e,t,n){return async function(r){let{exec:i,cmd:o,args:s,env:a}=la(e),{argsPrefix:u,args:c}=kK(t,n,r,!1);return i({cmd:o,args:(s||[]).concat(c),env:a,output:DK(r.output,o,u)})}}async function ua(e,t,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,args:u,env:c}=OK(e),{argsPrefix:l,args:d}=kK(t,n,o,!0);return s({cmd:a,args:(u||[]).concat(d),env:c,output:DK(o.output,a,l)})}}function DK(e,t,n){return n_e(e,`Run: ${t} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function n_e(e,t,n){let r=new RegExp(bm(t),"g");return Hi({...e,get dimensions(){return e.dimensions},event:o=>e.event("text"in o?{...o,text:o.text.replace(r,n)}:o)})}function kK(e,t,n,r){let{env:i,cwd:o,cmd:s,args:a}=n,u=["exec","-i"];r&&u.push("-t"),t&&u.push("-u",t),i&&Object.keys(i).forEach(l=>u.push("-e",`${l}=${i[l]}`)),o&&u.push("-w",o),u.push(e);let c=u.slice();return u.push(s),a&&u.push(...a),{argsPrefix:c,args:u}}function la(e,t){return"dockerEnv"in e?{exec:e.common.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...hn(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{exec:e.cliHost.exec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...hn(e.env)},output:e.output}:{...e,env:{...e.env,...hn(e.env)}}}function OK(e,t){return"dockerEnv"in e?{ptyExec:e.common.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.dockerEnv,...hn(e.dockerEnv)},output:e.common.output}:"cliHost"in e?{ptyExec:e.cliHost.ptyExec,cmd:t?t.cmd:e.dockerCLI,args:t?t.args:[],env:{...e.env,...hn(e.env)},output:e.output}:{...e,env:{...e.env,...hn(e.env)}}}var NK=B(Er()),LK="com.docker.compose.project",r_e="com.docker.compose.service";async function FK(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m){return i_e(e,t,n,r,i,o,o_e(r),s,a,u,c,l,d,p,f,m)}async function i_e(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m,h){var x,w;let{common:v}=e,{cliHost:g}=t,y;try{let b=await Wu(g,r,g.env,g.cwd),S=g.path.join(g.cwd,".env"),R=Array.isArray(r.dockerComposeFile)&&r.dockerComposeFile.length===0&&await g.isFile(S)?S:void 0,P=await XO(t,n,b),E=!c,C={...t.env,...hn(t.env)},T={cliHost:g,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:C,extensionPath:v.extensionPath,appRoot:v.appRoot,package:v.package,output:v.postCreate.output},{mergedConfiguration:I}=await Yu(T,o,f,v.getLogLevel(),h,p,a.Id,m),A=I.remoteUser;y=await Fm(e,a.Id,s,A),d&&c&&y.user!=="root"&&(y.launchRootShellServer?await UC(y,y.launchRootShellServer,s,r.configFilePath.path):v.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let N=Xn(g,y.shellServer);E||await QC(e.configurationTracking,g,N,r,v.output);let F=I.shutdownAction;F==="stopContainer"&&(F="stopCompose");let L={cwd:i,dockerCLI:e.dockerCLI,dockerComposeCLI:await e.dockerComposeCLI(),env:v.env,containerId:a.Id,user:y.user,sessionId:v.sessionId,shutdownAction:F,projectName:P,composeFiles:b,envFile:R,buildContainerRunArgs:l,service:r.service,runServices:r.runServices,logLevel:v.getLogLevel(),delay:1e4},{shutdownArgs:M,doneWithDocuments:j}=await rS(e,g,N,"dockerCompose",L,E?r:void 0);v.backgroundTasks.push(j);let W=((w=(((x=I.customizations)==null?void 0:x.vscode)||[]).slice().reverse().find(be=>typeof be.devPort=="number"))==null?void 0:w.devPort)||Fd,{hostOrContainerPort:k,hostPortServer:H,connectionToken:$,remoteEnv:V,serverDownloaded:ie}=await ju(v,y,r,I,W,Mm(e,t,y,o,p,a.Id,u,f,m));return M.hostPortServer=H,{params:v,properties:y,config:r,resolvedAuthority:{host:zu,port:k,connectionToken:$,extensionHostEnv:V},tunnelInformation:v.isLocalContainer?Lm(a):{},dockerParams:e,dockerContainerId:a.Id,serverDownloaded:ie}}catch(b){let S=b instanceof he?b:new he({description:NK.t("An error occurred setting up the container."),originalError:b});throw a&&(S.manageContainer=!0,S.params=e.common,S.containerId=a.Id,S.dockerParams=e),y&&(S.containerProperties=y),S.config=r,S}}function o_e(e){return e.workspaceFolder||"/"}async function MK(e,t,n){let r=await wc(e,!0,[`${LK}=${t}`,`${r_e}=${n}`]);return r&&r[0]}async function XO(e,t,n){let{cliHost:r}="cliHost"in e?e:e.common,i=await s_e(e),o=tS(r.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let u=r.path.join(r.cwd,".env"),c=await r.readFile(u),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(c.toString()),d=l&&l[1].trim(),p=tS(d||"",i);if(p)return p}catch(u){if(!(u&&(u.code==="ENOENT"||u.code==="EISDIR")))throw u}let s=t.configFolderPath,a=n[0]?r.path.dirname(n[0]):r.cwd;return OY(r.platform,a,r.path.join(s,".devcontainer"))?tS(`${r.path.basename(s)}_devcontainer`,i):tS(r.path.basename(a),i)}function nS(e){let t=(e.Config.Labels||{})[LK];return t||void 0}function tS(e,t){return t?e.toLowerCase().replace(/[^-_a-z0-9]/g,""):e.toLowerCase().replace(/[^a-z0-9]/g,"")}async function s_e(e){try{let t=Cm((await e.dockerComposeCLI()).version);return t?!Sm(t,[1,21,0]):!0}catch{return!0}}function da(e,t,n){let r;return()=>r||(r=(async()=>{let i=!1,o;try{o=(await Qy({...e,cmd:n},"version","--short")).stdout}catch(s){if((s==null?void 0:s.code)!=="ENOENT")throw s;o=(await Qy({...e,cmd:t},"compose","version","--short")).stdout,i=!0}return{version:o.toString().trim(),cmd:i?t:n,args:i?["compose"]:[]}})())}async function UK(e,t,n,r){if(t&&!/\/\.?devcontainer\.json$/.test(t.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${xe(t,e.common.cliHost.platform)}).`);let i=e.parsedAuthority;if(!i||In(i))return a_e(e,i,t,n,r);if(Gr(i))return i.inspectVolume?QO(e,i):c_e(e,i,t);if(Ec(i))return i.inspectVolume?QO(e,i):u_e(e,i,t);if(rx(i))return QO(e,i);throw new Error(`Unexpected authority: ${JSON.stringify(i)}`)}async function a_e(e,t,n,r,i){let{common:o,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:u}=e,{cliHost:c,env:l,output:d}=o,p=c.cwd,f=e.originalCwd||p,m=t&&At(c.path,by(t.hostPath)?c.path.join(p,Wr.basename(t.hostPath)):p);t!=null&&t.configFile&&!n&&(n=t.configFile,c.type==="wsl"&&n.scheme==="file"&&(n=ye.from({scheme:ut.scheme,path:await cS(n,c)})));let h={cliHost:c,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:u,env:l,output:d},v=i?void 0:[`${tx}=${f}`],g=i||[`${nx}=${f}`,`${aS}=${o.product.quality}`];return eN(e,h,v,g,f,p,n,r,void 0,m,t==null?void 0:t.settings,[],"on")}async function c_e(e,t,n){let{repositoryPath:r,volumeName:i,folder:o}=t,s=Zi(r);i=await VK(e,s,i);let{labels:a,remoteWorkspaceFolder:u}=WK(s,r,o,i),c=[...a],l=[...a,`${aS}=${e.common.product.quality}`],{containerId:d,shellServer:p,remoteContainersEnv:f,config:m,preInstalledExtensions:h}=await s.cloneAndInitializeRepository(e,t,s,i,n),v=o?s.workspaceFolder(o):s.fullRepositoryName,g=rN(s,i,o);return qK(e,t,n,m,h,d,p,f,i,v,u,c,l,g)}async function u_e(e,t,n){let{common:r}=e,{extensionPath:i,appRoot:o,loadNativeModule:s,output:a}=r,{volumeName:u,folder:c}=t,l=[`${oS}=${u}`,`${$K}=${c}`],d=l;await oN(e);let p=iN(u,$d()),{stdout:f}=await Ae(e,...p),m=f.toString().trim(),h=gs(e,m,"root"),v=await sr(h,a),g=[],y=ex(c),x=y,w=await ua(e,m,"root",s),b=Qi("container",y,{},h,w,()=>{throw new Error("not implemented")},"node",a),{configuration:S}=await Jy({cliHost:b,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:i,appRoot:o,package:r.package,output:a},y,n,e.common.getLogLevel(),l);return qK(e,t,n,S,g,m,v,{},u,y,x,l,d,p)}async function qK(e,t,n,r,i,o,s,a,u,c,l,d,p,f){var P,E,C;let m=At(Wr.posix,c),h=[`type=volume,source=${u},target=${Wr.posix.dirname(m.rootFolderPath)},external=true`],v=await GK(e,o,a,l),g={},{HOME:y,USERPROFILE:x}=e.common.env;y!==void 0&&(g.HOME=y,await s.exec(`test -e "${y}" || (mkdir -p "$(dirname "${y}")" && ln -s ~ "${y}")`)),x!==void 0&&(g.USERPROFILE=x);let w=v.cliHost,b,S,R=Or(r)||"image"in r;if(R||"dockerComposeFile"in r&&r.workspaceFolder||i.length){let T=i.length?{...r.customizations,vscode:{...(P=r.customizations)==null?void 0:P.vscode,extensions:[...((C=(E=r.customizations)==null?void 0:E.vscode)==null?void 0:C.extensions)||[],...i]}}:r.customizations;S=R?F=>({...F,workspaceFolder:void 0,workspaceMount:"",customizations:T}):F=>({...F,workspaceFolder:m.rootFolderPath,customizations:T});let I=w.path.join(await w.tmpdir(),`devcontainer-${ZO.randomUUID()}.json`),A=`EOF-${I}`,N=`${I}_${Date.now()}`;await s.exec(`cat <<'${A}' >${N}
${JSON.stringify({...S(r),configFilePath:void 0})}
${A}
mv ${N} ${I}`),b=ye.from({scheme:ut.scheme,path:I})}try{return await eN(e,v,d,p,e.common.cliHost.cwd,w.cwd,n,b,S,m,t.settings,h,"off",f,!0,void 0,g)}finally{Promise.all(e.common.backgroundTasks.filter(T=>typeof T!="function").map(T=>T.catch(()=>{}))).then(()=>Ae(e,"rm","-f",o))}}async function QO(e,t){let{common:n,dockerCLI:r,dockerComposeCLI:i,dockerComposePath:o}=e,{cliHost:s,env:a,output:u}=n,{volumeName:c}=t,l,d,p=rx(t);p?(l=sS,d="Inspect Volume"):(l=Zi(t.repositoryPath).volumeDestination,d="Recovery Container");let f=[`${qm}=${c}`],m=[`${qm}=${c}`,`${aS}=${n.product.quality}`],h=await BK(e),v=[`type=volume,source=${c},target=${l},external=true`],g={cliHost:s,dockerCLI:r,dockerComposeCLI:i,dockerComposePath:o,env:a,output:u},y=At(s.path,h);return eN(e,g,f,m,h,h,void 0,void 0,void 0,y,t.settings,v,"never",void 0,!p,d)}async function eN(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m,h,v){var Pt;let{common:g,userRepositoryConfigurationPaths:y}=e,{output:x,extensionPath:w,appRoot:b,postCreate:S,localWaylandSocket:R}=g,{cliHost:P}=t,E=[...d];if(e.cacheMount==="bind"&&(await ss(g.localCacheFolder),E.push(`type=bind,source=${g.localCacheFolder},target=/vscode`)),e.cacheMount==="volume"){let Fe="vscode";(await wi(t)).indexOf(Fe)===-1&&await Nm(t,Fe),E.push("type=volume,source=vscode,target=/vscode,external=true")}if(R){let Fe=await wY(void 0);E.push(`type=bind,source=${R},target=${Fe}`)}let C=s?{uri:s,location:l_e(P,c,s)}:c?await iS(P,c,y,!a,x):void 0,T=C==null?void 0:C.uri;if((T==null?void 0:T.scheme)==="file"&&P.type!=="local"){let Fe=Wr.dirname(T.fsPath),Je=Wr.basename(T.fsPath),nr=Je===".devcontainer.json"?Fe:Wr.dirname(Fe),is=P.path.join(await P.tmpdir(),`devcontainer-config-${ZO.randomUUID()}`);await jd(nr,P,is,x),T=ye.from({scheme:ut.scheme,path:P.path.join(is,...Je===".devcontainer.json"?[Je]:[Wr.basename(Fe),Je])})}typeof e.removeOnStartup=="string"&&await Ji(e,e.removeOnStartup)&&await Ae(e,"rm","-f",e.removeOnStartup);let I=await Um(t,r);I&&e.removeOnStartup===!0&&n&&(await Ae(e,"rm","-f",I.Id),I=void 0);let A=!!I||!n,N=A?r:await d_e(e,t,C,n),F=!1,L=e.removeOnStartup!==!0?I||n&&await Um(t,n):void 0;((Pt=L==null?void 0:L.State)==null?void 0:Pt.Status)==="running"&&(F=!0,Ae({...la(e),print:"continuous"},"exec","-i","-u","root",L.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${e.common.sessionId} ; /bin/sh`).catch(()=>{F=!1,x.write("Keep-alive process ended.")}));let M={...v,...t.env,...hn(t.env)},j={cliHost:P,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:M,extensionPath:w,appRoot:b,package:g.package,postCreate:S,output:g.postCreate.output},W=await Jy(j,o,T,g.getLogLevel(),N,void 0,a),k=W.configuration;await e.ensureNoDisallowedFeatures(t,k,N);let H=g.postCreate.output.dimensions||g.output.dimensions,$=g.additionalFeaturesToInstall,V;try{V=await Oo(j,["up",...t.cliHost.type==="local"&&g.persistedFolder?["--user-data-folder",g.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...g.containerSessionDataFolder?["--container-session-data-folder",g.containerSessionDataFolder]:[],...A?["--container-data-folder",oa(e.common.product.serverDataFolderName)]:[],...A?["--container-system-data-folder",MC(e.common.product.serverDataFolderName)]:[],"--workspace-folder",o,...e.workspaceMountConsistencyDefault?["--workspace-mount-consistency",e.workspaceMountConsistencyDefault]:[],...[].concat(...N.map(Fe=>["--id-label",Fe])),"--log-level",xo(g.getLogLevel()),"--log-format","json",...T?["--config",xe(T,P.platform)]:[],...a?["--override-config",xe(a,P.platform)]:[],"--default-user-env-probe",g.defaultUserEnvProbe,...e.buildNoCache?["--build-no-cache"]:[],...e.removeOnStartup===!0?["--remove-existing-container"]:[],...e.expectExistingContainer?["--expect-existing-container"]:[],...e.useExperimentalLockfile?["--experimental-lockfile"]:[],...[].concat(...E.map(Fe=>["--mount",Fe])),"--skip-post-create","--update-remote-user-uid-default",p,"--mount-workspace-git-root",...H?["--terminal-columns",String(H.columns),"--terminal-rows",String(H.rows)]:[],...Object.keys($).length>0?["--additional-features",JSON.stringify($)]:[]])}catch(Fe){let Je=Fe instanceof he?Fe:new he({description:Ku.t("An error occurred setting up the container."),originalError:Fe});throw Je.step="devContainersCLIUP",Je}if((V==null?void 0:V.outcome)!=="success")throw new he({description:Ku.t("devcontainer command failed: {0}",JSON.stringify(V)),step:"devContainersCLIUP"});let ie=await Ji(e,V.containerId);if(!ie)return YK(g.output,"Dev container not found.");F||(F=!0,Ae({...la(e),print:"continuous"},"exec","-i","-u","root",ie.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${e.common.sessionId} ; /bin/sh`).catch(()=>{F=!1,x.write("Keep-alive process ended.")}));let be=jm(g.cliHost.authority,l),Re=h||(k.name?Ku.t("Dev Container: {0}{1}",k.name,be):Ku.t("Dev Container{0}",be));g.setWorkspaceName(Re);let Le;try{if(Or(k)||"image"in k)Le=await zK(e,t,k,W.workspace,i,o,ie,A,!L,m,N,T,a,g.additionalFeaturesToInstall);else if("dockerComposeFile"in k){if(!c)throw new he({description:Ku.t("A Dev Container using Docker Compose requires a workspace folder.")});Le=await FK(e,t,c,k,i,o,ie,A,!L,f,m,N,T,a,g.additionalFeaturesToInstall)}else throw new he({description:Ku.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',k.configFilePath)})}catch(Fe){let Je=Fe instanceof he?Fe:new he({description:Ku.t("An error occurred setting up the container."),originalError:Fe});throw Je.step="setupDevContainer",Je}return p_e(e,j,k,a,u,ie,f,o,T,N,Le.properties),Le.configLocation=C==null?void 0:C.location,Le}function l_e(e,t,n){return t&&(n.scheme===ut.scheme||n.scheme==="file"&&e.type==="local")&&eA(Wr,t.rootFolderPath,xe(n,e.platform))?"workspace":n.scheme==="file"?"user":"unknown"}async function d_e(e,t,n,r){var s;let{cliHost:i}=t,o;if(n){let{uri:a}=n,u;a.scheme===ut.scheme||a.scheme==="file"&&i.type==="local"?u=xe(a,i.platform):u=a.toString();let c=[...r,`${JO}=${u}`];if(await Um(t,c))o=c;else{let l=await Um(t,r);l&&!((s=l.Config.Labels)!=null&&s[JO])?e.removeOnStartup===!0?(await Ae(t,"rm","-f",l.Id),o=c):o=r:o=c}}else o=r;return o}function p_e(e,t,n,r,i,o,s,a,u,c,l){let{common:d}=e,{output:p,extensionPath:f,appRoot:m}=d,{cliHost:h}=t;if(e.watch){let v,g=n.configFilePath;if(g.scheme===ut.scheme)if(h.type==="local")v=g.with({scheme:"file"});else if(h.type==="container")v=g.with({scheme:vi.scheme,authority:d.authority});else{let y=xe(g,h.platform),x=o.Mounts.find(w=>eA(h.path,w.Source,y));if(x){let w=h.path.relative(x.Source,y),b=h.platform==="win32"?w.replace(/\\/g,"/"):w;v=ye.from({scheme:vi.scheme,authority:d.authority,path:Wr.posix.join(x.Destination,b)})}}else(g.scheme==="file"||g.scheme===vi.scheme)&&(v=g);if(v){let S=function(){y||(w=x().finally(async()=>{await Do(h.type==="container"?5e3:1e3),w=void 0,b&&(b=!1,S())}))},y=!1;async function x(){let P=t,E;try{if(h.type==="container"){let{stdout:I}=await Ae(e,...s);E=I.toString().trim();let A=gs(e,E,"root");if(r&&i){let L=r.path,M=`EOF-${L}`,j=`${L}_${Date.now()}`,W=await sr(A,p),k=Ge((await W.exec(`cat '${g.path}'`)).stdout);await W.exec(`cat <<'${M}' >${j}
${JSON.stringify({...i(k),configFilePath:void 0})}
${M}
mv ${j} ${L}`)}let N=await ua(e,E,"root",d.loadNativeModule);P={cliHost:Qi("container",a,{},A,N,()=>{throw new Error("not implemented")},"node",p),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:f,appRoot:m,package:d.package,output:p}}let C=await Jy(P,a,u,d.getLogLevel(),c,o.Id,r),T=Xn(P.cliHost,l.shellServer);await XC({...e.configurationTracking,containerOutdated:async I=>{y=!0;let A=await e.configurationTracking.containerOutdated(I);return A==="ignore"&&(y=!1),A}},P.cliHost,T,C.configuration)}finally{E&&await Ae(e,"rm","-f",E)}}let w,b=!1,R=e.watch(v,()=>{w?b=!0:S()});e.common.shutdowns.push(async()=>(await R).dispose())}}}async function Um(e,t){let n=await wc(e,!0,t);return(await ca(e,n)).filter(i=>i.State.Status!=="removing")[0]}async function Jy(e,t,n,r,i,o,s){let{cliHost:a,output:u}=e,c=await Oo(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],"--workspace-folder",t,...(i||[]).map(l=>["--id-label",l]).flat(),...o?["--container-id",o]:[],"--log-level",xo(r),"--log-format","json",...n?["--config",xe(n,a.platform)]:[],...s?["--override-config",xe(s,a.platform)]:[],"--mount-workspace-git-root",...u.dimensions?["--terminal-columns",String(u.dimensions.columns),"--terminal-rows",String(u.dimensions.rows)]:[]]);return c.configuration.configFilePath=ye.revive(c.configuration.configFilePath).with({scheme:a.type==="local"?"file":ut.scheme}),c}async function Zy(e,t,n,r,i){let o=await iS(e,t,n,r,i);return o==null?void 0:o.uri}async function iS(e,t,n,r,i){let o=await X3(e,t,Ce),s=o&&await tN(o,n);if(s)return{uri:s,location:"user"};let a=await WC(e,t.configFolderPath);if(a)return{uri:a,location:"workspace"};r&&i&&(o!=null&&o.length?i.write(`No dev container config found. Additional locations checked:
${jK(o,n).map(u=>`- ${Wr.join(u,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function tN(e,t){let n=jK(e,t);for(let r of n){let i=await hK(r);if(i)return ye.file(i)}}function jK(e,t){let n=[],r=new Set(e.map(f_e).filter(i=>!!i));for(let i of r)for(let o of t){let s=Wr.join(o,i);n.push(s)}return n}function HK(e,t,n){let r=e.path.relative(t.rootFolderPath,xe(n,e.platform));return r&&!r.startsWith("..")&&!e.path.isAbsolute(r)}function f_e(e){let t;if(e.startsWith("https://"))t=e.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(e);if(n)t=`${n[1]}/${n[2]}`;else return}if(!(t.toLowerCase().startsWith("github.com")&&(t=(/^[^/]+\/[^/]+\/[^/]+/.exec(t)||[])[0],!t)))return t.endsWith(".git")&&(t=t.substr(0,t.length-4)),t}var oS="vsc.devcontainer.volume.name",$K="vsc.devcontainer.volume.folder";function nN(e){return e?`${e.volumeName}:${e.folder}`:void 0}function Xu(e){let t=(e.Config.Labels||{})[oS],n=(e.Config.Labels||{})[$K];return t&&n?{volumeName:t,folder:n}:void 0}var pa=B(require("url")),KK=B(require("https"));var XK=B(Er());function fa(e){return e.toLowerCase().indexOf("github.com")>=0?y_e(e):e.toLowerCase().indexOf("visualstudio.com")>=0?g_e(e):e.toLowerCase().indexOf("dev.azure.com")>=0?h_e(e):e.toLowerCase().indexOf("gitlab.com")>=0?v_e(e):m_e(e)}function bc(e){let t="owner",n="repository";return{repository:"unknown",repositoryUrl:e,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function m_e(e){var s;let t="unknown-owner",n,r=e,i;i=(s=pa.parse(e))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?bc(e):(n=o[o.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`})}function h_e(e){var o,s;let t,n,r=e,i;if(lS(e)){let a=`http://${e}`;i=(o=pa.parse(a))==null?void 0:o.path;let u=i==null?void 0:i.split("/");if(!u||u.length<5)return bc(e);t=u[3],n=u[4]}else{i=(s=pa.parse(e))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return bc(e);t=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function g_e(e){var o,s;let t,n,r=e,i;if(lS(e)){let a=`http://${e}`;i=(o=pa.parse(a))==null?void 0:o.path;let u=i==null?void 0:i.split("/");if(!u||u.length<5)return bc(e);t=u[3],n=u[4]}else{i=(s=pa.parse(e))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return bc(e);t=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function v_e(e){var o,s;let t,n,r=e,i;if(lS(e)){let a=`http://${e}`;i=(o=pa.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let u=i==null?void 0:i.split("/");if(!u||u.length<3)return bc(e);t=u[u.length-2],n=u[u.length-1]}else{i=(s=pa.parse(e))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<3)return bc(e);t=a[a.length-2],n=a[a.length-1]}return n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:t,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${t}/${n}`}}function y_e(e){var u,c;let t,n,r=e,i,o,s;if(lS(e)){let l=`http://${e}`;s=(u=pa.parse(l))==null?void 0:u.path,s&&(s=s.replace("/:","/"))}else s=(c=pa.parse(e))==null?void 0:c.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return bc(e);if(t=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let l=e.match(/\/tree\/|\/commit\//);l&&l.index&&(r=e.substring(0,l.index),i=e.substring(l.index+l[0].length))}if(a[3]==="pull"){o=a[4];let l=e.match(/\/pull\//);l&&l.index&&(r=e.substring(0,l.index))}}return{repository:"github",repositoryUrl:r,ref:i,commit:a[3]==="commit",repositoryOwner:t,repositoryName:n,pullRequestId:o,fullRepositoryName:`${t}/${n}`}}function lS(e){return e=e.toLowerCase(),e.indexOf("://")<0?e.indexOf("@")<e.indexOf(":"):!1}var ix=class extends Error{constructor(n,r){super();this.code=n,this.description=r}},ox=class{constructor(t){this.inputUrl=t,this.gitUrlInfo=fa(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(t,n,r,i){}installExtension(){return null}},sN=class extends ox{constructor(t){super(t)}async parseUrl(t){var o,s,a;let n=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(t,n,r,i)}async getPullRequestInfo(t,n,r,i){var l,d,p,f,m,h,v,g,y,x,w;let o=await this.fetchPullRequestInfo(t,n,r,i),s=(d=(l=o.head)==null?void 0:l.repo)==null?void 0:d.clone_url,a=(f=(p=o.base)==null?void 0:p.repo)==null?void 0:f.clone_url;if(!a)throw new ix(2,XK.t("Cannot access the head repository of the Pull Request."));let u=(m=o.head)==null?void 0:m.ref,c=((g=(v=(h=o.head)==null?void 0:h.repo)==null?void 0:v.owner)==null?void 0:g.login)===n?null:(w=(x=(y=o.head)==null?void 0:y.repo)==null?void 0:x.owner)==null?void 0:w.login;return{urlToClone:a,prRepositoryUrl:s,ref:u,sourceOwner:c}}async fetchPullRequestInfo(t,n,r,i){let o=`/repos/${n}/${r}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};t&&(s.authorization=`token ${t}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((u,c)=>{let l="",d=KK.request(a,p=>{if(p.statusCode<200||p.statusCode>=300)return c(new Error(`Status Code: ${p.statusCode}`));p.on("data",f=>{l+=f}),p.on("end",()=>{let f=JSON.parse(l.toString());u(f)})});d.on("error",c),d.end()})}cloneOptions(t){return{url:t.urlToClone,fullClone:!0}}async postClone(t,n,r,i){if(t.sourceOwner){let c=t.prRepositoryUrl.replace(/\.[^/.]+$/,"");await ce({exec:n.exec,cmd:"git",args:["remote","add",t.sourceOwner,c],cwd:r,output:i}),await ce({exec:n.exec,cmd:"git",args:["fetch",t.sourceOwner,t.ref],cwd:r,output:i});try{await ce({exec:n.exec,cmd:"git",args:["checkout","-t",`${t.sourceOwner}/${t.ref}`],cwd:r,output:i})}catch(l){if(!(l.stderr&&l.stderr.startsWith(`fatal: A branch named '${t.ref}' already exists`)))throw l}await ce({exec:n.exec,cmd:"git",args:["config","--local",`remote.${t.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:i})}else await ce({exec:n.exec,cmd:"git",args:["checkout",t.ref],cwd:r,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,u=`${o}#${s}#${a}`;await ce({exec:n.exec,cmd:"git",args:["config","--local",`branch.${t.ref}.github-pr-owner-number`,u],cwd:r,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},aN=class extends ox{constructor(t){super(t)}async parseUrl(t){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(t){let n=this.gitUrlInfo.commit;return{url:t.urlToClone,branch:!n&&t.ref||void 0,fullClone:n}}async postClone(t,n,r,i){this.gitUrlInfo.commit&&await ce({exec:n.exec,cmd:"git",args:["checkout",t.ref],cwd:r,output:i})}},uS=class extends ox{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function dS(e,t){if(t)return new uS(e,t);let n=fa(e);if(n.repository==="github"){if(n.pullRequestId)return new sN(e);if(n.ref)return new aN(e)}return new uS(e)}var lN="vsch.local.repository",pS="dev.container.volume";function Zi(e){return{repositoryPath:e,fullRepositoryName:dN(e),repositoryName:pN(e),workspaceFolder:ex,volumeDestination:$d(),oldVolumeName:w_e(e),alreadyCloned:!1,uniqueVolumeName:E_e(e),legacyUniqueVolumeName:b_e(e),getOldWorkspacePath:e5,cloneAndInitializeRepository:__e,gitUrlHandler:dS(e),gitUrlInfo:fa(e)}}function dN(e){let t=fa(e);return t==null?void 0:t.fullRepositoryName}function pN(e){let t=fa(e);return t==null?void 0:t.repositoryName}function $d(){return"/workspaces"}function w_e(e){let t=dN(e);return`vsc-${vs.posix.basename(t)}-${JK(e)}`}function E_e(e){let t=QK(e),n=Ju.createHash("sha256").update(e).digest("hex");return`${t}-${n}`}function b_e(e){let t=QK(e),n=JK(e);return`${t}-${n}`}function QK(e){let t=fa(e),n="";return t&&t.repositoryName&&(n=t.repositoryName,t.ref?n=`${n}-${t.ref.replace(/\//g,"-")}`:t.pullRequestId&&(n=`${n}-pull-${t.pullRequestId}`)),n}function JK(e){return Ju.createHash("md5").update(e).digest("hex")}function ex(e){return vs.posix.join(`${$d()}`,`${e}`)}async function __e(e,{folder:t,cloneInfo:n},r,i,o){var d;await oN(e);let{containerId:s,shellServer:a,remoteContainersEnv:u}=await C_e(e,r,i,t,o,e.configProvider,n),{config:c}=await S_e(e,r,t,o,a),l=(d=r.gitUrlHandler)==null?void 0:d.installExtension();return{repository:r,volumeName:i,containerId:s,shellServer:a,remoteContainersEnv:u,config:c,preInstalledExtensions:l?[l]:[]}}async function C_e(e,t,n,r,i,o,s){let{common:a}=e,{output:u,loadNativeModule:c}=a,l=t.fullRepositoryName,d,p,f,m;e.common.progress(1);let h=rN(t,n,r,e.buildContainerRunArgs);r?(u.write(`Cloning Github repository: ${l} into ${t.workspaceFolder(r)}
\r`),d=`fatal: destination path '${t.workspaceFolder(r)}' already exists`,m=t.workspaceFolder(r),f=`Repository '${l}' was already cloned into '${t.workspaceFolder(r)}'.
\r`):(u.write(`Cloning Github repository: ${l} into volume ${n}
\r`),d=`fatal: destination path '${l}' already exists`,m=`${l}`,f=`Repository '${l}' was already cloned into volume.`);let v=t.gitUrlHandler;if(!v)throw new he({description:Qu.t("Could not analyze the URL.")});s?p=v.cloneOptions(s):p={url:t.repositoryPath};let{stdout:g}=await Ae(e,...h),y=g.toString().trim(),x=gs(e,y,"root"),w=await sr(x,u),b=await lC(a,{remoteExec:x,user:"root",nodeExecutable:"node",shellServer:w,launchRootShellServer:async()=>w}),S=b.remoteContainersCLI,R=b.remoteEnv,P=b.ready,E=b.mrpcExec,C=await ua(e,y,"root",c),T=Qi("container",m,{},await E||x,C,()=>{throw new Error("not implemented")},void 0,u);try{e.common.isCopyGitConfigEnabled&&await X_(e.common,{homeFolder:"/root",shellServer:w},{}),await DC({shellServer:w,nodeExecutable:"node"},S,u,"global"),await Ty(e.common,{homeFolder:"/root",shellServer:w},[".ssh","known_hosts"],"ssh"),await P;let A=FY(a),N=await Z3(a,T,m,{...p,env:{...R,...p.env}},u,A.output);if(await N.gitClone,N.gitUnshallow&&(a.backgroundTasks.push(N.gitUnshallow.then(()=>{})),N.gitUnshallow.then(A.flush,A.flush)),N.gitClone&&s)try{await v.postClone(s,T,m,u)}catch{return cN(e,y,Qu.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(A){let N=A&&(A.cmdOutput||A.stack||A.message)||String(A);if(N=N.replace(vu,""),N.replace(/[\r\n]+/gm,"").includes(d))u.write(f),t.alreadyCloned=!0;else return cN(e,y,Qu.t("Git clone failed. {0}",N))}let{configRaw:I}=await ZK(e,t,r,i,w);if(!YC(I)&&o){u.write(`Repository ${l} has no dev container files.
\r`);let A=!0;for(;A;){let N=await o.createConfiguration(m,T);if(N)A=!1;else{let F=Qu.t("Select Configuration");if(N=await o.showError(Qu.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),F),N!==F)return cN(e,y,Qu.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:y,shellServer:w,remoteContainersEnv:R}}function rN(e,t,n,r=[]){let i=n?e.volumeDestination:e.fullRepositoryName;return iN(t,i,r)}function iN(e,t,n=[]){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${t5}`,"sleep","infinity"]}function cN(e,t,n,r){throw t&&Ae(e,"rm","-f",t),new he({description:n,data:r})}async function ZK(e,t,n,r,i){let o,s;if(n?s=t.workspaceFolder(n):s=`${e5(t.repositoryPath)}`,r)return o=(await i.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:o&&Ge(o),configFile:r,workspaceFolder:s};if(r=await tN([t.repositoryPath],e.userRepositoryConfigurationPaths),r&&(o=(await st(r.fsPath)).toString()),!r)for(let a of Om(vs.posix,s))try{o=(await i.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=ye.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:o&&Ge(o),configFile:r,workspaceFolder:s}}async function S_e(e,t,n,r,i){let{configRaw:o,configFile:s,workspaceFolder:a}=await ZK(e,t,n,r,i);if(!s||!o)throw new he({description:Qu.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:u,configUpdater:c}=e,{cliHost:l,output:d}=u,p=Ky({...o}),f=p;c&&(p.configFilePath=s,f=c(p),delete f.configFilePath);let m=IC({platform:l.platform,configFile:s,env:l.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},f);return m.configFilePath=s,("workspaceMount"in m||"workspaceFolder"in m)&&d.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:m}}function e5(e){return`/workspaces/${vs.posix.basename(dN(e))}`}var t5="vsc-volume-bootstrap";var uN="bootstrap.Dockerfile",T_e="volume.Dockerfile";async function oN(e,t,n,r){let{cliHost:i,output:o}="cliHost"in e?e:e.common;"cliHost"in e||(t=e.common.extensionPath,n=e.common.package.version,r=e.development);let s=i.path.join(await gN(i),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=i.path.join(s,uN),u=i.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),c=i.path.join(u,"dist","spec-node","devContainersSpecCLI.js"),l=!await i.isFolder(s);if(!l&&!(await i.isFile(a)&&await i.isFile(c))){let p="Removing incomplete bootstrap-image folder.",f=o.start(p),m=`${s}-${Ju.randomUUID()}`;await i.rename(s,m),await i.rm(m,{recursive:!0,force:!0}),l=!await i.isFolder(s),o.stop(p,f)}if(l){let p=`${s}-${Ju.randomUUID()}`,f=i.path.join(p,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await i.mkdirp(i.path.join(f,"dist","spec-node")),await i.writeFile(i.path.join(p,uN),await st(vs.join(t,"scripts",uN))),await i.writeFile(i.path.join(f,"package.json"),await st(vs.join(t,"package.json"))),await i.writeFile(i.path.join(f,"dist","spec-node","devContainersSpecCLI.js"),await st(vs.join(t,"dist","spec-node","devContainersSpecCLI.js"))),await i.mkdirp(i.path.join(f,"scripts")),await i.writeFile(i.path.join(f,"scripts","updateUID.Dockerfile"),await st(vs.join(t,"scripts","updateUID.Dockerfile")));let m=GC(t),h=i.path.join(f,"dist","node_modules","vscode-dev-containers","container-features");await jd(m,i,h,o),await i.rename(p,s)}await AK(e,...["build","-f",a,"-t",t5,s])}async function BK(e){let{common:t}=e,{cliHost:n,output:r}=t,i=await I_e(e),o=n.path.join(i,T_e),s=!await n.isFolder(i);if(!s&&!await n.isFile(o)){let a="Removing incomplete inspect-volume folder.",u=r.start(a),c=`${i}-${Ju.randomUUID()}`;await n.rename(i,c),await n.rm(c,{recursive:!0,force:!0}),s=!await n.isFolder(i),r.stop(a,u)}if(s){let a=`${i}-${Ju.randomUUID()}`;await jd(vs.join(t.extensionPath,"scripts","inspect-volume"),n,a,r),await n.rename(a,i)}return i}async function I_e(e){let{common:t,development:n}=e,{cliHost:r}=t,i=t.package.version;return r.path.join(await gN(r),"inspect-volume",n?`${i}-dev-${Date.now()}`:i)}async function VK(e,t,n){let r=[`${lN}=${t.repositoryPath}`];!n||n===No?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),t.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${t.gitUrlInfo.ref}`),t.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${t.gitUrlInfo.pullRequestId}`);let i=await wi(e),o=fN(t,n,i);return i.indexOf(o)===-1&&await Nm(e,o,r),o}function fN(e,t,n){return t?t===No&&(n.indexOf(e.uniqueVolumeName)!==-1||n.indexOf(e.legacyUniqueVolumeName)===-1?t=e.uniqueVolumeName:t=e.legacyUniqueVolumeName):n.indexOf(e.uniqueVolumeName)!==-1||n.indexOf(e.oldVolumeName)===-1?t=e.uniqueVolumeName:t=e.oldVolumeName,t}var Hm="vsch.local.repository",mN="vsch.local.repository.volume",hN="vsch.local.repository.folder";function WK(e,t,n,r){return n?{labels:[`${Hm}=${t}`,`${mN}=${r}`,`${hN}=${n}`],remoteWorkspaceFolder:e.workspaceFolder(n)}:{labels:[`${Hm}=${t}`],remoteWorkspaceFolder:e.getOldWorkspacePath(t)}}async function GK(e,t,n,r){let{loadNativeModule:i,output:o}=e.common,s=gs(e,t,"root"),a=await ua(e,t,"root",i),u=Qi("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",o);return{cliHost:u,dockerCLI:"docker",dockerComposeCLI:da({exec:u.exec,env:n,output:o},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:o}}var n5=B(Er()),tx="devcontainer.local_folder",JO="devcontainer.config_file",qm="vsch.local.volume",sS="/volume",aS="vsch.quality",nx="vsch.local.folder";async function zK(e,t,n,r,i,o,s,a,u,c,l,d,p,f){let{common:m}=e,h;try{let v=!u,g={...t.env,...hn(t.env)},y={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:g,extensionPath:m.extensionPath,appRoot:m.appRoot,package:m.package,output:m.postCreate.output},{mergedConfiguration:x}=await Yu(y,o,d,m.getLogLevel(),f,l,s.Id,p),w=x.remoteUser;h=await Fm(e,s.Id,r.workspaceFolder,w),c&&u&&r.workspaceFolder&&h.user!=="root"&&(h.launchRootShellServer?await UC(h,h.launchRootShellServer,r.workspaceFolder,n.configFilePath.path):m.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let b=await o5(m,u,r,h);return await R_e(s,a,e,t,h,n,x,v,i,o,l,d,p,b)}catch(v){throw P_e(v,s,e,h,n)}}function P_e(e,t,n,r,i){let o=e instanceof he?e:new he({description:n5.t("An error occurred setting up the container."),originalError:e});return t&&(o.manageContainer=!0,o.params=n.common,o.containerId=t.Id,o.dockerParams=n),r&&(o.containerProperties=r),i&&(o.config=i),o}async function R_e(e,t,n,r,i,o,s,a,u,c,l,d,p,f){var C,T;let{common:m}=n,h=Xn(r.cliHost,i.shellServer);a||await QC(n.configurationTracking,r.cliHost,h,o,m.output);let v=s.shutdownAction;v==="stopCompose"&&(v="stopContainer");let g={cwd:u,dockerCLI:n.dockerCLI,env:m.env,containerId:e.Id,user:i.user,sessionId:m.sessionId,shutdownAction:v,logLevel:m.getLogLevel(),delay:1e4},{shutdownArgs:y,doneWithDocuments:x}=await rS(n,r.cliHost,h,"singleContainer",g,a?o:void 0);m.backgroundTasks.push(x);let w=((T=(((C=s.customizations)==null?void 0:C.vscode)||[]).slice().reverse().find(I=>typeof I.devPort=="number"))==null?void 0:T.devPort)||Fd,{hostOrContainerPort:b,hostPortServer:S,connectionToken:R,remoteEnv:P,serverDownloaded:E}=await ju(m,i,o,s,w,Mm(n,r,i,c,l,e.Id,t,d,p),f);return y.hostPortServer=S,{params:m,properties:i,config:o,resolvedAuthority:{host:zu,port:b,connectionToken:R,extensionHostEnv:P},tunnelInformation:m.isLocalContainer?Lm(e):{},dockerParams:n,dockerContainerId:e.Id,serverDownloaded:E}}function Zu(e){let t=e.Config.Labels||{},n=t[tx]||t[nx];return n||void 0}function _c(e){let t=(e.Config.Labels||{})[Hm];return t||void 0}function fS(e){let t=(e.Config.Labels||{})[mN];return t||void 0}function r5(e){let t=(e.Config.Labels||{})[qm];return t||void 0}function i5(e){let t=(e.Config.Labels||{})[hN];return t||void 0}function YK(e,t){throw e.write(pt(t)),new Error(t)}function Cc(e){return!!(e!=null&&e.startsWith("tunnel+"))}function s5(e){let t=/^tunnel\+(.*)$/.exec(e);return t?{tunnelName:t[1]}:void 0}var a5=B(require("path"));async function c5(e,t,n,r,i,o){let s,a=new Promise(m=>s=m),u=new JC,c=[],l=await TK("vscode-remote-containers",async(m,h)=>{let v=await IK(m),g=[];if(v.type==="poll")try{g=await u.dequeue(6e4)}catch{}else if(v.type==="reply"){let y=c[v.sequence];y&&(y(v.reply),delete c[v.sequence])}else v.type==="done"&&s?s():v.type==="log"&&r.event(v.event);h.write(JSON.stringify(g)),h.end()});l.server.unref();let d=a5.join(n,"dist","shutdown","shutdownMonitorProcess"),p=[l.ipcHandlePath,e,ji[t],i||"",o.getTime().toString()];r.write(`Forking shutdown monitor: ${d} ${p.join(" ")}\r
`);let f=LY(d,p,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return f.on("error",m=>{console.error(m)}),f.unref(),{queue:u,sequence:0,replies:c,done:a}}async function mS(e,t,n){let r=e.sequence++,i=new Promise(s=>e.replies[r]=s);return e.queue.push({type:"configure",sequence:r,options:t}),await i}async function u5({queue:e,done:t}){e.push({type:"cleanup"}),await t}var l5=require("util");var No="__UNIQUE__",zu="127.0.0.1";async function cS(e,t){if(e.scheme==="file"&&t.type==="wsl"){let{stdout:n}=await ce({exec:t.exec,cmd:"wslpath",args:["-u",e.fsPath],output:Ce});return n.toString().trim()}return xe(e,t.platform)}function Bm(e,t){let n=e.platform==="win32"&&!e.env.SSH_AUTH_SOCK?cC:e.type==="wsl"?e.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return t&&("context"in t?r.DOCKER_CONTEXT=t.context:(t.host&&(t.host.startsWith("ssh://")&&e.type==="remote"?r.VSCODE_DOCKER_HOST=t.host:r.DOCKER_HOST=t.host),t.certPath&&(r.DOCKER_CERT_PATH=t.certPath),t.tlsVerify&&(r.DOCKER_TLS_VERIFY=t.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function Qn(e){let t;if(e.DOCKER_CONTEXT&&e.DOCKER_CONTEXT!=="default")t={context:e.DOCKER_CONTEXT};else{t={};let n=e.VSCODE_DOCKER_HOST||e.DOCKER_HOST;n&&(t.host=n),e.DOCKER_CERT_PATH&&(t.certPath=e.DOCKER_CERT_PATH),e.DOCKER_TLS_VERIFY&&(t.tlsVerify=e.DOCKER_TLS_VERIFY),Object.keys(t).length||(t=void 0)}return t}function hS(e,{parentAuthority:t,settings:n}){t&&e.write(`Host authority: ${t}\r
`),n&&("context"in n&&n.context&&e.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&e.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&e.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&e.write(`TLSVerify: ${n.tlsVerify}\r
`))}function gS(e,t){return(!e||e.startsWith("wsl+"))&&!t.VSCODE_DOCKER_HOST&&!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function jm(e,t){var r,i;let n;return Cc(e)?n=(r=s5(e))==null?void 0:r.tunnelName:Uu(e)?n=(i=xC(e))==null?void 0:i.hostName:t&&("context"in t||t.host)&&(n="context"in t?t.context:t.host),n?` @ ${n}`:""}async function Ji(e,t){try{return await xi(e,t)}catch{return}}async function vS(e){let{common:t}=e,{output:n}=t,r="Check Docker is running",i=n.start(r);try{let{stdout:o}=await Ae(e,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);n.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&n.write(pt(s));let a=$m.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),u=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw u.indexOf("permission denied")!==-1?u.indexOf("ssh")!==-1?a=$m.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=$m.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):u.indexOf("ENOENT")!==-1&&(a=$m.t("The 'docker' command was not found. Make sure Docker is installed.")),new he({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{n.stop(r,i)}}function In(e){return e.hostPath!==void 0}function Gr(e){return e.repositoryPath!==void 0}function Ec(e){return!Gr(e)&&!!e.folder}function rx(e){return!Gr(e)&&!Ec(e)&&e.volumeName!==void 0}function zr(e){let t=p5("dev-container",e);if(t)return"unparsedConfig"in t?{parentAuthority:t.parentAuthority,hostPath:t.unparsedConfig}:"repositoryPath"in t?t.dockerHost?{parentAuthority:t.parentAuthority,repositoryPath:t.repositoryPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},cloneInfo:t.cloneInfo}:t:("hostPath"in t&&t.configFile&&(t.configFile=ye.revive(t.configFile)),"hostPath"in t&&t.dockerHost?{parentAuthority:t.parentAuthority,hostPath:t.hostPath,settings:{host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`}}:t)}function ax(e,t,n,r,i,o){e=vN(e);let s=r||o?JSON.stringify({hostPath:t,localDocker:i,settings:r,configFile:o}):t;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${e?`@${e}`:""}${n}`}function ys(e,t,n,r,i,o,s){if(e=vN(e),t){let u=Zi(t);if(!n){let l=JSON.stringify({repositoryPath:t,settings:o,cloneInfo:s,inspectVolume:i});return`vscode-remote://dev-container+${Buffer.from(l,"utf8").toString("hex")}${e?`@${e}`:""}${u.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:n,folder:r,settings:o,cloneInfo:s,inspectVolume:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${e?`@${e}`:""}${u.workspaceFolder(r)}`}if(r){let u={volumeName:n,folder:r,settings:o};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(u),"utf8").toString("hex")}${e?`@${e}`:""}${ex(r)}`}let a=JSON.stringify({volumeName:n,settings:o});return`vscode-remote://dev-container+${Buffer.from(a,"utf8").toString("hex")}${e?`@${e}`:""}${sS}`}function Bd(e){let t=p5("attached-container",e);if(t)return"unparsedConfig"in t?{parentAuthority:t.parentAuthority,containerId:t.unparsedConfig}:(t.dockerHost&&(t.settings={host:`tcp://${t.dockerHost.host}:${t.dockerHost.port}`},delete t.dockerHost),t)}function d5(e,t,n,r){e=vN(e);let i=JSON.stringify({containerName:t,settings:n,cwd:r});return`attached-container+${Buffer.from(i,"utf8").toString("hex")}${e?`@${e}`:""}`}function p5(e,t){try{let n=t.match(/^(?<prefix>[^@+]+)\+(?<encodedConfig>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!n)return;let{prefix:r,encodedConfig:i,parentAuthority:o}=n.groups,s=r===e&&i?Buffer.from(i,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:o,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=o,a}catch(n){console.warn(n);return}}function el(e,t){return ye.parse(`vscode-remote://${e}${t}`)}function vN(e){if(e&&(Cc(e)||Uu(e)))return e}async function f5(e,t,n){return await Sy(e,t,n)||t}function m5(e,t,n){let r=e.path.relative(e.path.dirname(t),n);return`/workspaces/${e.platform==="win32"?r.replace(/\\/g,"/"):r}`}function h5(e,t,n){if(e==="win32")return t;let r=`${A_e(n,"/")}/`;return(e==="linux"?t.startsWith(r):t.toLowerCase().startsWith(r.toLowerCase()))&&(t=`~/${t.substr(r.length)}`),t}function A_e(e,t){if(t.length===0)return e;for(;e.endsWith(t);)e=e.substr(0,e.length-t.length);return e}function _K(e,t){return e.with({path:sx.posix.resolve(e.path,t)})}async function rS(e,t,n,r,i,o){let{common:s,onRemoveOnShutdownChanged:a}=e,u=s.output.start("Setup shutdown monitor"),c=await c5(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?sx.dirname(s.logFilePath):void 0,s.sessionStart);mS(c,i,s.output).catch(f=>console.error(f)),a&&a(async f=>{i.rebuild=!!f,i.delay=0,await mS(c,i,s.output)}),s.onDidChangeLogLevel(async f=>{i.logLevel=f,await mS(c,i,s.output)});let l={},d=async()=>{let f=u5(c);l.hostPortServer&&await(0,l5.promisify)(l.hostPortServer.close.bind(l.hostPortServer))(),await f};s.shutdowns.push(d);let p=o?XC(e.configurationTracking,t,n,o).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",u),{monitor:c,shutdownArgs:l,doneWithDocuments:p}}function Lm(e){return{environmentTunnels:e.Ports.filter(t=>!!t.PublicPort).map(t=>({remoteAddress:{port:t.PrivatePort,host:t.IP},localAddress:t.IP+":"+t.PublicPort}))}}async function Fm(e,t,n,r,i){var w;let{common:o}=e,s="Inspecting container",a=o.output.start(s),u=await xi(e,t);o.output.stop(s,a);let c=r||u.Config.User||"root",[,l,,d]=/([^:]*)(:(.*))?/.exec(c),p=D_e(u.Config.Env),f=gs(e,t,c),m=await ua(e,t,c,o.loadNativeModule),h=gs(e,t,"root"),v=u.Mounts.find(b=>b.Type==="volume"&&b.Name==="vscode"),g=u.Mounts.find(b=>b.Type==="bind"&&b.Source===o.localCacheFolder),y=v&&sx.posix.join(v.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(g==null?void 0:g.Destination),x=(w=u.Mounts.find(b=>b.Type==="bind"&&b.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:w.Destination;return LC({params:o,createdAt:u.Created,startedAt:u.State.StartedAt,sharedDataFolder:y,sharedDataFolderIsLocalCacheFolder:!v&&!!g,remoteWorkspaceFolder:n,containerUser:l==="0"?"root":l,containerGroup:d,containerEnv:p,remoteExec:f,remotePtyExec:m,remoteExecAsRoot:h,rootShellServer:i,remoteWaylandSocket:x})}function D_e(e){return(e||[]).reduce((t,n)=>{let r=n.indexOf("=");return r!==-1&&(t[n.substr(0,r)]=n.substr(r+1)),t},{})}async function gN(e){return e.path.join(await e.tmpdir(),e.platform==="linux"?`vsch-${await e.getUsername()}`:"vsch")}async function g5(e){let{common:t,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:i,dockerEnv:o}=e,{cliHost:s,output:a}=t;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:i,env:o,output:a}}async function v5(e,t){return e.type==="local"&&t?e.path.join(t,"data"):e.path.join(await e.homedir(),".vscode-remote-containers","data")}function Mm(e,t,n,r,i,o,s,a,u){let c=!s;return async(l,d,p,f,m)=>{let{common:h}=e,{cliHost:v}=t,{dotfilesConfiguration:g}=h,y=f.getDotfileConfiguration("dotfiles.repository")||g.repository,x=f.getDotfileConfiguration("dotfiles.installCommand")||g.installCommand,w=f.getDotfileConfiguration("dotfiles.targetPath")||g.targetPath;c&&y&&(c=!1,await u6(n));let b={...t.env,...hn(t.env)},S={cliHost:t.cliHost,dockerPath:t.dockerCLI,dockerComposePath:t.dockerComposePath,env:b,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,postCreate:h.postCreate,output:h.postCreate.output},R=h.postCreate.output.dimensions||h.output.dimensions,P=await Oo(S,["run-user-commands",...t.cliHost.type==="local"&&h.persistedFolder?["--user-data-folder",h.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...h.containerSessionDataFolder?["--container-session-data-folder",h.containerSessionDataFolder]:[],...s?["--container-data-folder",oa(e.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",MC(e.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(i||[]).map(E=>["--id-label",E]).flat(),"--container-id",o,"--log-level",xo(h.getLogLevel()),"--log-format","json",...a?["--config",xe(a,v.platform)]:[],...u?["--override-config",xe(u,v.platform)]:[],"--default-user-env-probe",h.defaultUserEnvProbe,"--skip-non-blocking-commands",String(l),...h.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(p),"--stop-for-personalization",String(d),...[].concat(...Object.keys(m).map(E=>["--remote-env",`${E}=${m[E]}`])),"--mount-workspace-git-root",...R?["--terminal-columns",String(R.columns),"--terminal-rows",String(R.rows)]:[],...y?["--dotfiles-repository",y]:[],...x?["--dotfiles-install-command",x]:[],...w?["--dotfiles-target-path",w]:[]]);if((P==null?void 0:P.outcome)!=="success")throw new he({description:$m.t("devcontainer command failed: {0}",JSON.stringify(P))});return P.result}}async function Yu(e,t,n,r,i,o,s,a){let{cliHost:u,output:c}=e,l=await Oo(e,["read-configuration",...e.dockerPath!=="docker"?["--docker-path",e.dockerPath]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...t?["--workspace-folder",t]:[],...(o||[]).map(d=>["--id-label",d]).flat(),...s?["--container-id",s]:[],"--log-level",xo(r),"--log-format","json",...n?["--config",xe(n,u.platform)]:[],...a?["--override-config",xe(a,u.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...c.dimensions?["--terminal-columns",String(c.dimensions.columns),"--terminal-rows",String(c.dimensions.rows)]:[],...Object.keys(i).length>0?["--additional-features",JSON.stringify(i)]:[]]);return l.configuration.configFilePath=l.configuration.configFilePath&&ye.revive(l.configuration.configFilePath).with({scheme:u.type==="local"?"file":ut.scheme}),l}async function o5(e,t,n,r){if(t&&n.workspaceMount)try{let i=gK(n.workspaceMount);if(i.type==="bind")return await r.shellServer.exec(`command -v git >/dev/null 2>&1 && cd '${i.target}' && test -d .git && test "$(stat -c %u .)" != "$(id -u)"`),e.cliHost.platform==="win32"?await ce({exec:e.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command",'if (-not (Get-Acl . | foreach { $_.Owner }).Equals("$env:UserDomain\\$env:UserName")) { exit 1 }'],cwd:i.source,output:e.output}):await ce({exec:e.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${i.source}' && test "$(stat -${e.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:e.output}),async()=>{await r.shellServer.exec(`git config --global --add safe.directory '${i.target}'`)}}catch{}}var $t=B(require("vscode")),eo=require("vscode");var Vd={id:"openDocumentation",title:eo.l10n.t("Open Documentation"),isLastAction:!1,applicable:(e,t)=>!t,execute:async e=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Wd={id:"reloadWindow",title:eo.l10n.t("Reload Window"),isLastAction:!0,applicable:(e,t)=>!t&&e.data.reload!==!1,execute:async e=>{e.manageContainer&&e.dockerParams&&e.containerId&&await Ae(e.dockerParams,"stop","-t","0",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},x5={id:"rebuildContainer",title:eo.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(e,t)=>e.manageContainer&&!!e.dockerParams&&!!e.containerId&&!t,execute:async e=>{await Ae(e.dockerParams,"rm","-f",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},Vm={id:"openRecent",title:eo.l10n.t("Open Recent..."),isLastAction:!0,applicable:(e,t)=>!t,execute:async e=>{await $t.commands.executeCommand("workbench.action.openRecent")}},w5={id:"startContainer",title:eo.l10n.t("Start Container"),isLastAction:!0,applicable:e=>!!e.dockerParams&&!!e.containerId&&e.data.start===!0,execute:async e=>{await Ae(e.dockerParams,"start",e.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},E5={id:"chooseContainer",title:eo.l10n.t("Choose Container"),isLastAction:!0,applicable:e=>e.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},tl={id:"closeRemote",title:eo.l10n.t("Close Remote"),isLastAction:!0,applicable:(e,t)=>{if(!t)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(i=>i.isDirty))},execute:async e=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Wm=[{id:"retry",title:eo.l10n.t("Retry"),isLastAction:!0,applicable:(e,t)=>t&&e.data.reload!==!1,execute:Wd.execute},{id:"moreActions",title:eo.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(e,t)=>t,execute:async e=>{}},{id:"learnMore",title:eo.l10n.t("Learn More"),isLastAction:!1,applicable:(e,t)=>t&&!!e.data.learnMoreUrl,async execute(e){await $t.env.openExternal($t.Uri.parse(e.data.learnMoreUrl))}}];async function nl(e,t,n,r=!1,i){var p,f,m,h,v,g;let o=e instanceof he?e:new he({description:eo.l10n.t("An error occurred setting up the container."),originalError:e});if(i){i.show();let y=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(y!==void 0){i.log.write(pt(String(y)));let x=(f=(p=o.originalError)==null?void 0:p.stdout)==null?void 0:f.toString().trim();x&&i.log.write(x);let w=(h=(m=o.originalError)==null?void 0:m.stderr)==null?void 0:h.toString().trim();w&&i.log.write(pt(w)),(v=o.originalError)!=null&&v.code&&i.log.write(`Exit code ${(g=o.originalError)==null?void 0:g.code}`)}}if(o.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[Vd]);let a=await s.reduce(async(y,x)=>await x.applicable(o,!0)?[...await y,x]:y,Promise.resolve([])),u=await $t.window.showErrorMessage(o.description,{modal:!0,detail:o.detail},...a);if(u&&(y5(n,t,u.id),await u.execute(o)),u&&u.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let c=await s.reduce(async(y,x)=>await x.applicable(o,!1)?[...await y,x]:y,Promise.resolve([])),l=c.map(y=>({label:y.title,action:y}));async function d(){let x=await(c.length?$t.window.showQuickPick(l,{ignoreFocusOut:!0,placeHolder:eo.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));x&&(y5(n,t,x.action.id),x.action.execute(o).catch(console.error),x.action.isLastAction||await d())}if(d().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function y5(e,t,n){e.sendTelemetryEvent("errorAction",{resolver:t,action:n})}var X=B(require("vscode")),ov=B(require("path"));var yN=B(require("vscode")),yS=B(require("path")),_5=require("stream");async function Ei(e,t,n,r,i,o,s,a,u,c,l){return e?k_e(e,n,r,o,s,a,u,c):RY(t,n,r,i,o,s,a,u,c,l)}async function k_e({server:e,authority:t},n,r,i,o,s,a,u){let c=await e.env(),l=O_e(e,void 0),d=c.osPlatform,p=await Nd({extensionPath:i,localCacheFolder:o,package:await Kn(i),product:s,loadNativeModule:r,output:a,alternateDownload:u},l,n,!1,d);p.setBaseEnv(c.env);let f=c.osPlatform==="win32",m=n||p.homeFolder,h=p.exec,v;return{type:"remote",authority:t,platform:d,exec:h,ptyExec:p.ptyExec,cwd:m,env:c.env,path:f?yS.win32:yS.posix,async homedir(){return p.homeFolder},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async g=>{if(!e.fs){let y=await e.fsStat(g);return y.exists&&y.type==="file"}try{return(await e.fs.stat(g)).type===yN.FileType.File}catch(y){if((y==null?void 0:y.code)==="FileNotFound"||(y==null?void 0:y.code)==="FileNotADirectory"||y!=null&&y.message.toLowerCase().includes("file not found"))return!1;throw y}},isFolder:async g=>{if(!e.fs){let y=await e.fsStat(g);return y.exists&&y.type==="dir"}try{return(await e.fs.stat(g)).type===yN.FileType.Directory}catch(y){if((y==null?void 0:y.code)==="FileNotFound"||(y==null?void 0:y.code)==="FileNotADirectory"||y!=null&&y.message.toLowerCase().includes("file not found"))return!1;throw y}},isSocket:async g=>{if(f)return!1;try{return await ce({exec:h,cmd:"test",args:["-S",g],output:Ce}),!0}catch(y){if((y==null?void 0:y.code)!==1)throw y;return!1}},readFile:async g=>{try{return(await ce({exec:h,cmd:"cat",args:[g],output:Ce})).stdout}catch(y){let x=new Error(`Could not read file: ${g}`);throw x.originalError=y,x.code="ENOENT",x}},writeFile:async(g,y)=>{await ce({exec:h,cmd:"/bin/sh",args:["-c",`cat >'${g}'`],stdin:y,output:Ce})},rename:async(g,y)=>{await ce({exec:h,cmd:"mv",args:[g,y],output:Ce})},rm:async(g,{recursive:y,force:x})=>{await ce({exec:h,cmd:"rm",args:[...y?["-r"]:[],...x?["-f"]:[],g],output:Ce})},mkdirp:async g=>{await ce({exec:h,cmd:"mkdir",args:["-p",g],output:Ce})},readDir:async g=>(await ce({exec:h,cmd:"ls",args:["-a",g],output:Ce})).stdout.toString().trim().split(`
`).filter(y=>y!=="."&&y!==".."),readDirWithTypes:async g=>{let y={f:1,"*":1,"/":2,"@":64};return(await ce({exec:h,cmd:"ls",args:["-aF",g],output:Ce})).stdout.toString().trim().split(`
`).map(x=>"/*@=%|>".indexOf(x[x.length-1])!==-1?[x.substr(0,x.length-1),x[x.length-1]]:[x,"f"]).filter(([x])=>x!=="."&&x!=="..").map(([x,w])=>[x,y[w]||0])},getUsername:async()=>(v===void 0&&(v=(await ce({exec:h,cmd:"id",args:["-u","-n"],output:Ce})).stdout.toString().trim()),v),getuid:async()=>{let g=await ce({exec:h,cmd:"id",args:["-u"],output:Ce});return parseInt(g.stdout.toString().trim(),10)},getgid:async()=>{let g=await ce({exec:h,cmd:"id",args:["-g"],output:Ce});return parseInt(g.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0),connect:ym(p.connect,"Exec Server",a),nodeExecutable:p.nodeExecutable,reconnect:()=>p.reconnect(),terminate:()=>p.terminate()}}function O_e(e,t){return async function(n){let{cmd:r,args:i,output:o}=n,s=`Run: ${r} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,a=o.start(s),u=n.cwd||t,c=await e.env(),l=n.env?{...c.env,...n.env}:c.env,d=await e.spawn(r,i||[],{cwd:u,env:l});return{stdin:N_e(d.stdin),stdout:b5(d.stdout),stderr:b5(d.stderr),exit:Promise.all([d.onExit,d.stdout.onEnd,d.stderr.onEnd]).then(([{status:p}])=>(o.stop(s,a),{code:p,signal:null})),async terminate(){}}}}function b5(e){return C5(void 0,e)}function N_e(e){return C5(e,void 0)}function C5(e,t){let n=new _5.Stream,r=!1;if(e&&(n.writable=!0,n.write=function(i){try{e.write(i)}catch(o){setImmediate(()=>n.emit("error",o))}return!0},n.end=function(i,o,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof i=="function"&&(i=void 0);try{i&&e.write(i),r=!0,e.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),t){let u=function(){for(;o.length&&!n.paused;)n.emit("data",o.shift());!n.paused&&i&&n.emit("end")},i=!1;n.readable=!0,n.paused=!0;let o=[];(t.onDidReceiveMessage||t.onData)(c=>{let l=Buffer.from(c);n.paused?o.push(l):n.emit("data",l)}),t.onEnd.then(()=>{i=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(c,l)=>{let d=s(c,l);return c==="data"&&n.paused&&setImmediate(n.resume.bind(n)),d};let a=n.pipe.bind(n);n.pipe=function(c,l){let d=a(c,l);return n.paused&&n.resume(),d},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,u(),n}}return n.destroy=function(i){return e&&!r&&(r=!0,n.end()),i&&n.emit("error",i),n.emit("close"),this},n}var Wce=B(oae()),id=B(Lce());var Fce=B(require("vscode"));function Bn(e){let t=Fce.workspace.getConfiguration(),n=fc(e),r=t.get(n),i=Nu(e),o=t.get(i);if(o!=null&&o!==r){let s=t.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return o}return r}function MH(e,t){return e.affectsConfiguration(fc(t))||e.affectsConfiguration(Nu(t))}var nv=B(require("path"));var Ui=B(require("vscode")),wf=require("vscode");async function lR(){await Ui.window.showInformationMessage(wf.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}var NE="{.devcontainer.json,.devcontainer/devcontainer.json,.devcontainer/*/devcontainer.json}";async function Mce(){return Ui.workspace.findFiles(NE)}async function Ef(e,t,n){let r;if(t.length>1){let i=Ui.window.createQuickPick();i.placeholder=wf.l10n.t("Select a devcontainer.json file."),i.busy=!0,i.enabled=!1,i.show(),i.items=(await Promise.all(t.map(async s=>{let a=xe(s,e.platform),u=Ge((await e.readFile(a)).toString()),c,l,d=e.path.dirname(a),p=e.path.dirname(d);return e.path.basename(d)===".devcontainer"?(c=wf.l10n.t("Main"),l=p):e.path.basename(p)===".devcontainer"?(c=e.path.basename(d),l=e.path.dirname(p)):(c=wf.l10n.t("Project Root"),l=d),{label:u.name||c,description:e.path.relative(l,a)+(s.toString()===(n==null?void 0:n.toString())?` ${wf.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Ui.ThemeIcon("go-to-file"),tooltip:wf.l10n.t("Open File")}]}}))).sort((s,a)=>{let u=nv.posix.dirname(s.uri.path),c=nv.posix.dirname(a.uri.path);return u!==c?u.localeCompare(c):s.label.localeCompare(a.label)}),i.busy=!1,i.enabled=!0;let o=await new Promise(s=>{i.onDidAccept(()=>s(i.selectedItems[0])),i.onDidHide(()=>s(void 0)),i.onDidTriggerItemButton(({item:a})=>{Ui.commands.executeCommand("vscode.open",a.uri),s(void 0)})});i.dispose(),r=o?ye.from(o.uri):"cancelled"}else t.length===1&&(r=t[0]);return r}function rv(e,t){let n=Ui.workspace.fs;return{platform:e,path:e==="win32"?nv.win32:nv.posix,async isFile(r){try{return((await n.stat(uu(e,t,r))).type&Ui.FileType.File)!==0}catch(i){if((i==null?void 0:i.code)==="FileNotFound"||(i==null?void 0:i.code)==="FileNotADirectory")return!1;throw i}},async readFile(r){try{let i=await n.readFile(uu(e,t,r));return Buffer.from(i)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let o=new Error(`Could not read file: ${r}`);throw o.originalError=i,o.code="ENOENT",o}throw i}},async rename(r,i){try{let o=uu(e,t,r),s=uu(e,t,r);await n.rename(o,s)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${i}`);throw s.originalError=o,s.code="ENOENT",s}throw o}},async writeFile(r,i){await n.writeFile(uu(e,t,r),i)},async readDir(r){return(await n.readDirectory(uu(e,t,r))).map(o=>o[0])},async readDirWithTypes(r){return n.readDirectory(uu(e,t,r))},async mkdirp(r){await n.createDirectory(uu(e,t,r))},async toCommonURI(r){return uu(e,t,r)}}}function uu(e,t,n){let r=e==="win32"?"/"+n.replace(/\\/g,"/"):n;return t.with({path:r})}var OE=class{async readDocument(t){try{let n=await Ui.workspace.fs.readFile(t);return Buffer.from(n).toString()}catch{return}}async applyEdits(t,n,r){let i=ci(r,n);await Ui.workspace.fs.writeFile(t,Buffer.from(i))}};var He=require("vscode");var LE=B(Er());var dR=B(Uf()),Uce=B(require("url"));function pR(e,t){return new Promise((n,r)=>{let i=new Uce.URL(e.url),o={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:e.type,headers:e.headers},s=(i.protocol==="https:"?dR.https:dR.http).request(o,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),t&&t.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let u=[];a.on("data",c=>u.push(c)),a.on("end",()=>n(Buffer.concat(u)))}});s.on("error",r),e.data&&s.write(e.data),s.end()})}async function iv(e,t,n,r){var u;let i=await FUe(t,e.output),o=Object.keys(n.features||{}).map(c=>{let l=NUe(i,c);return l?{configFeatureId:c,disallowedFeatureEntry:l}:void 0}).filter(Boolean);if(!o.length)return;let s=!1;if(r){let c=await Um(e,r);((u=c==null?void 0:c.State)==null?void 0:u.Status)==="running"&&(await Ae(e,"stop","-t","0",c.Id),s=!0)}let a=o[0];throw new he({description:s?LE.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",a.configFeatureId):LE.t("Cannot use the '{0}' feature since it was reported to be problematic.",a.configFeatureId),detail:LE.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:a.disallowedFeatureEntry.documentationURL,reload:!1}})}function NUe(e,t){return e.disallowedFeatures.find(n=>t.startsWith(n.featureIdPrefix)&&(t.length===n.featureIdPrefix.length||"/:@".indexOf(t[n.featureIdPrefix.length])!==-1))}var qce="devcontainers.controlManifest",LUe=5*60*1e3;async function FUe(e,t){let n=e.get(qce);return n&&Date.parse(n.timestamp)+LUe>Date.now()?n.manifest:MUe(e,n==null?void 0:n.manifest,t)}async function MUe(e,t,n){let r;try{r=await UUe()}catch(i){n.write(LE.t("Failed to fetch control manifest: {0}",i.message)),r=t||{disallowedFeatures:[]}}return e.update(qce,{timestamp:new Date().toISOString(),manifest:r}),r}async function UUe(){let e=await pR({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),t=Ge(e.toString())||{};return Array.isArray(t.disallowedFeatures)?t.disallowedFeatures=t.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):t.disallowedFeatures=[],t}var nn="remote-containers.revealLogTerminal",VH="remote-containers.revealPostCreateTerminal",_f="remote-containers.openDevContainerFile",Gce="remote-containers.openRepositoryInVolume",mR="remote-containers.openRepositoryInUniqueVolume",zce="remote-containers.openRepositoryFromRemoteHubWithEditSession",Yce="remote-containers.openRepositoryFromGitWithEditSession",Kce="remote-containers.openPullRequestInVolume",Cf=X.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),Sf=X.Uri.parse("https://aka.ms/vscode-dev-containers"),jce=new hb,oi={onRemoveOnShutdownChangedEmitter:jce,onRemoveOnShutdownChanged:jce.event,results:new Map},bf,jr=e=>Tm(e,X.env.appRoot);function hR(e,t,n,r,i){return async(o,s)=>{X.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let a=X.env.remoteAuthority;if(s.resolveAttempt>1){let u=n.get(a);if(!u)throw new Error("Reconnect attempt without old result.");let c=He.l10n.t("Reconnection attempt {0}",s.resolveAttempt-1),l=e.log.start(c),{cliHost:d}=u.params;if(d.reconnect)try{await d.reconnect()}catch(p){throw e.log.write(pt(String(p&&(p.stack||p.message)||p))),X.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Cannot reconnect to remote host."))}if(u.dockerContainerId){let p=await Ji(u.dockerParams,u.dockerContainerId);if(!p)throw X.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container no longer exists."));if(p.State.Status==="paused")throw X.RemoteAuthorityResolverError.TemporarilyNotAvailable(He.l10n.t("Container is paused."));if(p.State.Status!=="running")throw X.RemoteAuthorityResolverError.NotAvailable(He.l10n.t("Container is no longer running."))}return e.log.stop(c,l),{...u.resolvedAuthority,isTrusted:u.isTrusted}}else{let u=He.l10n.t("Resolving Remote"),c=e.log.start(u),l=await i(a,s,e,t);return qUe(l.params,l.properties).catch(d=>{}),n.set(a,l),r(),e.log.stop(u,c),X.window.withProgress({location:X.ProgressLocation.Window,title:oqe,cancellable:!1},async d=>{await S6(l.params.backgroundTasks)}).then(void 0,d=>{e.log.write(pt(String(d&&(d.stack||d.message)||d)))}),{...l.resolvedAuthority,...l.tunnelInformation,isTrusted:l.isTrusted}}}}async function qUe(e,t){if(!t.nodeExecutable)return;let n=await st(ov.join(e.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await vc(e,t,[t.nodeExecutable,"-e",n],void 0,{silent:!0}),i=r.toString().trim();e.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var UH;async function gR(e){return UH||(UH=aa(ov.join(__dirname,"..",".."),lu,e)),UH}var FE={};async function lu(e,t=!0){var n;if(e.counter&&((n=FE[e.prompt])==null?void 0:n.from)===e.counter&&delete FE[e.prompt],!FE[e.prompt]){if(!t)return"";FE[e.prompt]={result:Promise.resolve(X.window.showInputBox({prompt:e.prompt||He.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:e.counter}}return FE[e.prompt].result}async function nt(e,t,n,r=!0,i=gR(t),o=!0){var y;let s=!n;if(s){if(oi.results.size){let x=[...oi.results.values()].filter(w=>w.dockerParams)[0];return g5(x.dockerParams)}if(bf)return bf}n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=Em(n));let a,u;if(!n){let x=(X.workspace.workspaceFolders||[])[0];if(X.env.remoteName==="wsl")x?n=Em(x.uri):n={wslDistro:hC(X.env.remoteAuthority),wslPath:"/"};else if(X.env.remoteName==="ssh-remote"){if(u=await X.workspace.getRemoteExecServer(X.env.remoteAuthority),!u){let w=xC(X.env.remoteAuthority);if(w){let{user:b,hostName:S,port:R}=w;a={host:`ssh://${b?`${b}@`:""}${S}${R?`:${R}`:""}`}}}(u||a)&&(x?n=x.uri.path:n="/")}else X.env.remoteName==="tunnel"?(u=await X.workspace.getRemoteExecServer(X.env.remoteAuthority),x?n=x.uri.path:n="/"):X.env.remoteName==="attached-container"?a=(y=Bd(X.env.remoteAuthority))==null?void 0:y.settings:(x==null?void 0:x.uri.scheme)==="file"&&(n=x.uri.fsPath);n||(n=process.cwd())}let c=a&&"host"in a&&a.host||void 0,l=r?Ma():{executeInWSL:"never",defaultDistro:void 0},d=await Iy(X.env.appRoot),p=Ei(u?{server:u,authority:X.env.remoteAuthority}:void 0,c,n,jr,l,e.extensionPath,await yi(),d,t,Ys,{sshAskpassEnv:i,settings:av()});o&&!await Promise.race([p,Do(1e3)])&&await X.window.withProgress({location:X.ProgressLocation.Notification,title:`[${He.l10n.t("Setting up Dev Containers (show log)")}](command:${nn} "${He.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await p});let f=await p,m=zs(),h=Fa();if(!a){let x=X.workspace.getConfiguration("docker"),w=x.get("environment")||{},b=w.DOCKER_CONTEXT||x.get("context")||f.env.DOCKER_CONTEXT;if(!b){let S={cliHost:f,dockerCLI:m,dockerComposeCLI:da({exec:f.exec,env:{},output:Ce},m,h),dockerComposePath:h,env:{},output:Ce};b=await YO(S)||"default"}b&&b!=="default"?a={context:b}:(a={...Qn(f.env),...["host","certPath","tlsVerify"].reduce((S,R)=>jUe(S,x,R),{}),...Qn(w)},Object.keys(a).length||(a=void 0))}let v={...await i,...Bm(f,a)},g={cliHost:f,dockerCLI:m,dockerComposeCLI:da({exec:f.exec,env:v,output:t},m,h),dockerComposePath:h,env:v,output:t};return s&&(bf=g,WH(e,d)),g}var fR;function WH(e,t){if(fR)return fR;let n=BUe(e,t);return e.subscriptions.push(n),e.subscriptions.push(n.event(()=>{let r=bf==null?void 0:bf.cliHost;bf=void 0,r!=null&&r.terminate&&r.terminate()})),fR=n.event,fR}function jUe(e,t,n){let r=t.get(n);return r&&(e[n]=r),e}var HUe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment"],$Ue=["dockerComposePath","executeInWSL","executeInWSLDistro"];function BUe(e,t){let n=new X.EventEmitter,r=X.workspace.onDidChangeConfiguration(async c=>{(HUe.some(l=>c.affectsConfiguration(l))||$Ue.some(l=>MH(c,l)))&&n.fire()}),i,o,s,a=()=>{(async()=>{o||(o=await Ei(void 0,void 0,process.cwd(),jr,Ma(),e.extensionPath,await yi(),t,Ce,Ys));let c={cliHost:o,dockerCLI:zs(),dockerComposeCLI:da({exec:o.exec,env:{},output:Ce},zs(),Fa()),dockerComposePath:Fa(),env:{},output:Ce},l=await YO(c);l===void 0?s=setTimeout(a,2*60*1e3):(l!==i&&(i!==void 0&&n.fire(),i=l),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let u=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),u.call(n)},n}function Tf(){let e=X.workspace.workspaceFolders;if((e==null?void 0:e.length)===1){let t=e[0].uri;return GH(t)}return null}function GH(e){if(e&&e.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(e.authority)){let n=zr(e.authority);if(In(n))return null;if(Gr(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function vR(e){return{getConfigurationState:()=>e.get("configurationState"),updateConfigurationState:async t=>e.update("configurationState",t),containerOutdated:VUe}}async function VUe(e){let t="Rebuild",n="Ignore",r=await X.window.showInformationMessage(He.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",e.join(", ")),t,n);if(r===t)return X.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}async function WUe(e){return e?Hce():Array.from(new Set([...Bn("defaultExtensions")||[],...Hce()]))}function Xce(){return Bn("defaultFeatures")||{}}function Hce(){let e=X.env.language,t=e.indexOf("-"),n=$ce(e)||(t!==-1?$ce(e.substr(0,t)):void 0);return n?[n]:[]}function $ce(e){let t=e.toLowerCase();return X.extensions.all.filter(n=>{var i;let r=n.packageJSON&&n.packageJSON.contributes;return(i=r==null?void 0:r.localizations)!=null&&i.length?!!r.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===t}):!1}).map(n=>n.id)[0]}function Bce(){return!!X.workspace.getConfiguration().get("workbench.enableExperiments")}function GUe(){return!!Bn("enableWebAccess")}function yR(){return Bn("workspaceMountConsistency")||"cached"}function xR(){return Bn("cacheVolume")??!0}function zUe(){let e=Bn("copyGitConfig");return typeof e=="boolean"?e:!0}function YUe(){return Bn("gitCredentialHelperConfigLocation")||"global"}function KUe(){let e=Bn("dockerCredentialHelper");return typeof e=="boolean"?e:!0}function XUe(){let e=Bn("mountWaylandSocket");return typeof e=="boolean"?e:!0}function zs(){return Bn("dockerPath")||"docker"}function Ma(){return{executeInWSL:zH(),defaultDistro:YH()}}function zH(){return process.platform!=="win32"?"never":Bn("executeInWSL")?"always":"forWSLPath"}function YH(){if(process.platform==="win32")return Bn("executeInWSLDistro")||void 0}function Fa(){return Bn("dockerComposePath")||"docker-compose"}function wR(){return Bn("experimentalLockfile")||!1}function sv(){let e=Bn("logLevel")||"debug";return vb(e)}var QUe=e=>X.workspace.onDidChangeConfiguration(t=>{MH(t,"logLevel")&&e(sv())});function JUe(){let e=X.workspace.getConfiguration(),t=n=>(e.get(Nu(n),"")||e.get(n,"")).trim();return{repository:t("dotfiles.repository")||void 0,installCommand:t("dotfiles.installCommand")||void 0,targetPath:t("dotfiles.targetPath")||"~/dotfiles"}}function av(){let e=X.workspace.getConfiguration();return{executablePath:e.get("remote.SSH.path"),executableArgs:sv()===1?["-v"]:void 0,configFilePath:e.get("remote.SSH.configFile")}}function du(e,t,n,r,i,o,s,a,u){var p,f;let c={resolver:t,outcome:n};if(i){c.hostType=i.cliHost.type;let m=i.cliHost.authority;if(m){let h=m.indexOf("+");h!==-1&&(c.hostAuthority=m.substring(0,h))}}if(o){c.configProperties=JSON.stringify(Object.keys(o)),c.configExtensions=JSON.stringify(((f=(p=o.customizations)==null?void 0:p.vscode)==null?void 0:f.extensions)||[]);let m="ghcr.io/devcontainers/features/";c.configFeatures=JSON.stringify(Object.keys(o.features||{}).map(h=>h.startsWith(m)?`devcontainers-features:${h.substring(m.length)}`:h)),"image"in o?c.configType="image":Or(o)?c.configType="dockerfile":"dockerComposeFile"in o&&(c.configType="dockerCompose")}s&&(c.configLocation=s),a&&(c.hardwareId=a.osRelease.hardware,c.osReleaseId=a.osRelease.id,c.osReleaseVersion=a.osRelease.version);let l=u&&u.originalError,d=l&&(l.stack||l.message||String(l))||u&&u.description;d&&(c.errorMessage=d),u!=null&&u.step&&(c.step=u.step),e.sendTelemetryEvent("resolver",c,{sessionTimeInMs:Date.now()-r.getTime()})}var qH=class{constructor(t){this.onClose=t;this.writeEmitter=new X.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new X.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(t=>this.writeEmitter.fire(t))}close(){this.ready=!1,this.onClose()}write(t){this.queue.push(t),this.ready&&this.writeEmitter.fire(t)}handleInput(t){this.inputEmitter.fire(t)}},ME=class{constructor(t,n,r=void 0){this.sessionStart=n;this.outputTerminal=new qH(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name=He.l10n.t("Dev Containers");this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=t?ov.join(t,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=ZUe(i,sv,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>X.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(t){this._name=t}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(t){this._revealOnNextOutput=t}show(){this._terminal||(this._terminal=X.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function ZUe(e,t,n,r,i=void 0){let o=[];return n&&o.push(f2(n,()=>Math.min(2,t()))),o.push(m2(e,t,r)),o.push(eqe()),Hi(p2(o,i))}function eqe(){return{event(e){e.type==="notification"&&X.window.showInformationMessage(e.message,He.l10n.t("Dismiss"))}}}async function KH(e,t){let n=await Ji(e,t.Id);if(n&&n.State.Status==="running")try{await Ae(e,"stop",n.Id)}catch(r){X.window.showErrorMessage(He.l10n.t("Error stopping container: {0}",r.message))}}async function ER(e,t){let n=await Ji(e,t.Id);if(n&&n.State.Status!=="running")try{await Ae(e,"start",n.Id)}catch(r){X.window.showErrorMessage(He.l10n.t("Error starting container: {0}",r.message))}}async function Qce(e,t){try{await Ae(e,"rm",t)}catch(n){X.window.showErrorMessage(He.l10n.t("Error removing container: {0}",n.message))}}async function XH(e,t){try{await Ae(e,"volume","rm","--force",t)}catch(n){X.window.showErrorMessage(He.l10n.t("Error removing volume: {0}",n.message))}}function tqe(){return X.env.sessionId!=="someValue.sessionId"?X.env.sessionId:`${X.env.sessionId}_${Date.now()}`}function nqe(e,t){let n=X.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:e.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:t,tildify:!0}});e.shutdowns.push(n.dispose.bind(n))}async function Jce(e,t){if(e.globalState.get("removeOnStartup")===t)return await e.globalState.update("removeOnStartup",null),!0;let n=e.workspaceState.get("removeOnStartup",!1);return n&&await e.workspaceState.update("removeOnStartup",null),n}async function Zce(e,t){await e.workspaceState.update("removeOnStartup",t)}async function QH(e,t){await e.globalState.update("removeOnStartup",t)}async function eue(e,t){return e.globalState.get("buildNoCache")===t?(await e.globalState.update("buildNoCache",null),!0):!1}async function UE(e,t){await e.globalState.update("buildNoCache",t)}async function cv(e,t,n,r,i){await e.globalState.update("openEditorsOnStartup",{workspaceFolder:t,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:i})}async function tue(e){var n;let t=e.globalState.get("openEditorsOnStartup");if(t){await e.globalState.update("openEditorsOnStartup",void 0);let r=(n=X.workspace.workspaceFolders)==null?void 0:n.some(o=>o.uri.fsPath===t.workspaceFolder||o.uri.path===t.workspaceFolder),i=await Tf();if(r||i&&i.repositoryPath===t.workspaceFolder&&(r=!0),r){let o=t.fileWithError?ye.parse(t.fileWithError):void 0;if(t.openLog==="onTheSide"&&await Vce(o),t.openLog&&t.logFile){let s={viewColumn:t.openLog==="onTheSide"?X.ViewColumn.Beside:X.ViewColumn.One,preserveFocus:!0},a=await X.window.showTextDocument(X.Uri.file(t.logFile),s),u=new X.Position(a.document.lineCount-1,0);a.selection=new X.Selection(u,u),a.revealRange(a.selection)}return t.openLog!=="onTheSide"&&await Vce(o),!0}}return!1}function nue(e){return[`vscode-remote:/workspaces/${e}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${e}/.devcontainer.json`]}async function Vce(e){return e?X.commands.executeCommand("vscode.open",X.Uri.parse(e.toString()),{viewColumn:X.ViewColumn.One}):X.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:X.ViewColumn.One})}async function bR(){return oi.results.size?[...oi.results.values()].filter(e=>e.config).map(e=>e.config.configFilePath):X.workspace.findFiles(NE)}function od(){return Bn("repositoryConfigurationPaths")||[]}async function rqe(e,t,n="localhost"){await X.workspace.openTunnel({remoteAddress:{host:n,port:t}})}function rue(e,t){let n=new ME(void 0,t);n.name=He.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let i,o={enabled:!0,skipNonBlocking:!1,output:MY(n.log,"postCreate",e),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${He.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),i()},promise:new Promise(s=>i=s)};return{channel:n,postCreate:o}}async function uv(e){let{authority:t,extensionContext:n,sessionStart:r,progress:i,cliHost:o,env:s,cwd:a,wslSettings:u,isLocalContainer:c,telemetry:l,output:d,logFilePath:p,allowSystemConfigChange:f,postCreate:m}=e,h=GUe(),v=tqe(),g=await yi(),y;if(o.type!=="wsl"&&process.platform==="win32")try{y=await gC(void 0,u,n.extensionPath,g,l.product,jr,d,Ys)}catch(w){d.write("Could not connect to WSL."),d.write((w==null?void 0:w.message)||String(w)),w!=null&&w.stdout&&d.write(w.stdout.toString()),w!=null&&w.stderr&&d.write(w.stderr.toString())}let x={computeExtensionHostEnv:!0,...l,appRoot:X.env.appRoot,localCacheFolder:g,containerSessionDataFolder:ov.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:t,cliHost:o,env:s,cwd:a,isLocalContainer:c,getAdditionalExtensionsToInstall:WUe,additionalFeaturesToInstall:Xce(),isCopyGitConfigEnabled:zUe(),credentialHelperConfigLocation:YUe(),isDockerCredentialHelperEnabled:KUe(),dotfilesConfiguration:JUe(),progress:cqe(i),output:d,logFilePath:p,allowSystemConfigChange:f,defaultUserEnvProbe:"loginInteractiveShell",postCreate:m,getTelemetryLevel:()=>l.getTelemetryLevel(),forwardServerPort:!0,web:h,getLogLevel:sv,onDidChangeLogLevel:QUe,loadNativeModule:jr,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:w=>nqe(x,w),openTunnel:rqe,getTunnels:()=>Promise.resolve(X.workspace.tunnels),onAdoptProcess:X.window.onDidOpenTerminal,persistedFolder:await v5(o,n.globalStoragePath),alternateDownload:Ys,skipPostAttach:!1,wslCLIHost:y,localWaylandSocket:c?await iqe(o,y,d):void 0,globalState:n.globalState};return x}async function iqe(e,t,n){if(!XUe())return;let r=await tO(e);if(r)return r;let i=t&&await tO(t);if(i)return TY(t,i,n)}async function Ys(e,t){let n=await X.commands.executeCommand("_workbench.downloadResource",X.Uri.parse(e));if(!n)throw new he({description:He.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await Va(n.fsPath,t)}var lv=`[${He.l10n.t("Starting Dev Container (show log)")}](command:${nn} "${He.l10n.t("Show details in terminal")}")`,oqe=`[${He.l10n.t("Configuring Dev Container (show log)")}](command:${VH} "${He.l10n.t("Show details in terminal")}")`,sqe=`[${He.l10n.t("Reading Dev Container Configuration (show log)")}](command:${nn} "${He.l10n.t("Show details in terminal")}")`,aqe={[0]:"",[1]:He.l10n.t("Cloning Repository"),[2]:He.l10n.t("Building image"),[3]:He.l10n.t("Starting container"),[4]:He.l10n.t("Installing server"),[5]:He.l10n.t("Starting server"),[6]:""};function cqe(e){let t=0;return n=>{let r=6-n,i=(100-t)/(r+1);e.report({message:aqe[n],increment:i}),t+=i}}function iue(e,t,n){let{name:r,publisher:i,version:o,aiKey:s}=t;if(!s)return a2(t,n);let a=i?`${i}.${r}`:r,u=new Wce.default(s);e.subscriptions.push(u);let c=new jH(u),l=uqe(n),d=Bce()?(0,id.getExperimentationService)(a,o,l,c,e.globalState):void 0;return{sendTelemetryEvent:c.sendTelemetryEvent.bind(c),isCachedFlightEnabled:async p=>d&&Bce()?d.isCachedFlightEnabled(p):!1,product:n,package:t,getTelemetryLevel:()=>u.telemetryLevel}}var jH=class{constructor(t){this.baseReporter=t;this.sharedProperties={}}sendTelemetryEvent(t,n,r){this.baseReporter.sendTelemetryEvent(t,{...this.sharedProperties,...n},r)}setSharedProperty(t,n){this.sharedProperties[t]=n}postEvent(t,n){let r={};for(let[i,o]of n)r[i]=o;this.sendTelemetryEvent(t,r)}};function uqe(e){switch(e.quality){case"stable":return id.TargetPopulation.Public;case"insider":return id.TargetPopulation.Insiders;case"exploration":return id.TargetPopulation.Internal;case void 0:return id.TargetPopulation.Team;default:return id.TargetPopulation.Public}}var qE=He.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),HH="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function jE(e,t){if(t!=null&&t.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||e.globalState.get(HH))return!0;let n=He.l10n.t("Got It"),r=He.l10n.t("Learn More"),i=await X.window.showWarningMessage(He.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return i===n?(await e.globalState.update(HH,!0),!0):(i===r&&X.env.openExternal(X.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var $H="userConfirmedAttachToContainerRequiresTrust";async function sd(e){if(e.globalState.get($H))return!0;let t=He.l10n.t("Got It"),n=He.l10n.t("Learn More"),r=await X.window.showWarningMessage(He.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:He.l10n.t("Only attach to a container if you trust its origin.")},t,n);return r===t?(await e.globalState.update($H,!0),!0):(r===n&&X.env.openExternal(X.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function oue(e){e.globalState.setKeysForSync([HH,$H,BH])}function sue(){let e=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(e)&&(process.env.PATH=`${e}:/usr/local/bin`)}var BH="updatedToPreRelease2",lqe="2022-01-19T05:14:31.474Z";async function aue(e,t){try{t.quality==="insider"&&t.date&&t.date.localeCompare(lqe)>=0&&!e.globalState.get(BH,!1)&&(await e.globalState.update(BH,!0),await X.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function HE(e,t,n,r){try{return Jy(e,t,n,sv(),void 0,void 0,r)}catch{return}}async function JH(e,t,n,r){let i=(async()=>{try{return Yu(e,t,n,sv(),Xce(),void 0,void 0,r)}catch{return}})(),o=await Promise.race([i,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return o!=="timeout"?o:X.window.withProgress({location:X.ProgressLocation.Notification,title:sqe,cancellable:!0},async(s,a)=>Promise.race([i,new Promise(u=>{let c=a.onCancellationRequested(()=>{c.dispose(),u("canceled")})})]))}async function If(e){return X.commands.executeCommand("_workbench.addToRecentlyOpened",e)}async function cue(e,t,n,r){try{return await iv(t,e.globalState,n,r),!0}catch(i){if(!(i instanceof he))throw i;let o=He.l10n.t("Learn More");return await X.window.showWarningMessage(i.description,{modal:!0,detail:i.detail},...i.data.learnMoreUrl?[o]:[])===o&&await X.env.openExternal(X.Uri.parse(i.data.learnMoreUrl)),!1}}var vo=B(require("vscode")),Hr=require("vscode"),qa=B(require("path"));var ue=B(require("vscode")),on=require("vscode");var xue=B(wk());var mv=B(require("path"));async function ad(e){let r=await pR({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},e),i=Ge(r.toString());if(i.collections.length===0||i.collections[0].features.length===0){e.write("No container features retrieved from index.",5);return}return i}var rn=B(require("vscode")),Vn=require("vscode"),t$=B(require("os"));var BE=B(require("path"));var _n=B(require("vscode")),bn=require("vscode");var uue=bn.l10n.t("Keep Defaults"),dqe=bn.l10n.t("Configure Options"),$E={iconPath:new _n.ThemeIcon("check-all"),tooltip:bn.l10n.t("Finish")},ZH=["devcontainers","microsoft","github"];async function dv(e,t,n,r=[],i=!0,o=!1){if(!t.length)return{};let s={iconPath:new _n.ThemeIcon("info"),tooltip:bn.l10n.t("Open Documentation")},a=e.quickPick.onDidTriggerItemButton(g=>{let y=g.item.feature.documentationURL;_n.env.openExternal(_n.Uri.parse(y))}),u=t.map(g=>{let y=r.indexOf(g)!==-1,x;if(y)x=bn.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(g.owner){let w=g.owner==="devcontainers"?"$(verified)":"";x=`${g.owner||bn.l10n.t("Unknown Publisher")} ${w}`}else x=void 0;return{label:g.name,detail:g.description,description:x,picked:n.indexOf(g)!==-1,buttons:g.documentationURL?[s]:void 0,feature:g,isAlreadyInstalledViaBaseImage:y,kind:_n.QuickPickItemKind.Default}}).sort((g,y)=>g.label.localeCompare(y.label)).sort((g,y)=>g.isAlreadyInstalledViaBaseImage===y.isAlreadyInstalledViaBaseImage?0:g.isAlreadyInstalledViaBaseImage?1:-1),c,l=e.quickPick,{matchOnDetail:d}=l;try{l.matchOnDetail=!0;let g=[];o&&g.push(_n.QuickInputButtons.Back),i&&g.push($E),c=await go(l,u,bn.l10n.t("Select additional features to install"),bn.l10n.t("Select Features"),!0,g)}finally{l.matchOnDetail=d}if(a.dispose(),!c)return;if(c.button===_n.QuickInputButtons.Back)return"back";let p=c.pick.filter(g=>!g.isAlreadyInstalledViaBaseImage).map(g=>g.feature),f={};if(!p.length)return f;let m=[];for(let g of t){let y=p.indexOf(g)!==-1;f[g.id]=y?{}:!1,y&&ZH.indexOf(g.owner)===-1&&m.push(g)}if(e.askForTrust&&m.length){let g=[...new Set(m.map(P=>P.owner))].sort().map(P=>`@${P}`),y=g.length===1?g[0]:`${g.slice(0,-1).join(", ")} and ${g[g.length-1]}`,x={label:bn.l10n.t("Trust {0}",y),description:bn.l10n.t("from GitHub"),buttons:[{iconPath:new _n.ThemeIcon("info"),tooltip:bn.l10n.t("Open Documentation")}]},w={label:bn.l10n.t("Back")},b={label:bn.l10n.t("Cancel")},S=l.onDidTriggerItemButton(()=>{for(let P of m)_n.env.openExternal(_n.Uri.parse(P.documentationURL))}),R=await go(l,[x,w,b],bn.l10n.t("Some features are from the {0} GitHub owner/organization(s).",y),void 0,void 0,!0);if(S.dispose(),!R||R===b)return;if(R==="back"||R===w)return dv(e,t,n,r,i,o)}return c.button===$E||!i||!p.some(g=>{let y=g.options;return y&&Object.keys(y).some(x=>{let w=y[x];return w.type==="boolean"||w.type==="string"&&("enum"in w&&(w.enum||[]).length>1||"proposals"in w&&(w.proposals||[]).length>1)})})||await _n.window.showQuickPick([uue,dqe],{title:bn.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===uue?f:pqe(e,f,p,()=>dv(e,t,n,r))}async function pqe(e,t,n,r){return async function i(o,s,a){if(!s.length)return o;let u=s[0],c=o;if(!(u!=null&&u.options))return i(c,s.slice(1),a);let l,d;return l=await fqe(e,c,u),l&&(d=await mqe(e,l,u,a)),!l||!d?await a():i(d,s.slice(1),a)}(t,n,r)}async function fqe(e,t,n){let r=n==null?void 0:n.options;if(!r)return t;let o=Object.keys(r).filter(c=>{var l;return((l=r[c])==null?void 0:l.type)==="boolean"}).map(c=>{let l=r[c];return{label:c,description:l.description,key:c,value:!0,picked:!!(l!=null&&l.default)}});if(!o.length)return t;let s=n.id,a=n.name||s,u=await go(e.quickPick,o,bn.l10n.t("Select boolean options for {0}",a),bn.l10n.t("Select boolean options for '{0}'",a),!0,[_n.QuickInputButtons.Back,$E]);if(!(!u||u.button===_n.QuickInputButtons.Back))return u.pick.reduce((c,l)=>({...c,[s]:{...c==null?void 0:c[s],[l.key]:l.value}}),t)}async function mqe(e,t,n,r){let i=n==null?void 0:n.options;if(!i)return t;let o=n.id,s=n.name||o;return async function a(u,c,l){if(!c.length)return u;let d=c[0],p=i[d],f=("enum"in p&&p.enum||"proposals"in p&&p.proposals||[]).map(v=>({label:String(v),value:v,description:p.default===v?bn.l10n.t("(default)"):void 0,picked:!1}));if(f.length===0)return a(u,c.slice(1),l);let m=f.length===1?{pick:f[0],button:"ok"}:await go(e.quickPick,f,p.description||bn.l10n.t("Select a value"),bn.l10n.t("Select options for '{0}'",s),void 0,[_n.QuickInputButtons.Back,$E]);if(!m||m.button===_n.QuickInputButtons.Back)return;let h={...u,[o]:{...u==null?void 0:u[o],[d]:m.pick.value}};return m.button===$E?h:a(h,c.slice(1),l)}(t,Object.keys(i).filter(a=>{var u;return((u=i[a])==null?void 0:u.type)==="string"}),r)}var hqe=["png","md","json","txt","map"],gqe=["node_modules",".git","bin","out","dist",".vscode-test"],vqe=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],lue={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},due={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},yqe=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function pue(e,t){let n=new Map;for(let r of t)if(r.platforms){if(yqe.indexOf(r.id)>-1)continue;let i=0,o=0,s=r.platforms;if(s[0]==="Any")i+=5;else for(let a of s)if(due[a]){let u=due[a];for(let c of u)e.fileTypes.get(c.toLowerCase())&&(i+=10),e.mostPopularFileType===c&&(i+=10)}else if(lue[a]){let u=lue[a],c=!1;for(let l of u)e.configFiles.get(l)&&(c=!0,o+=20);c||(o-=20)}n.set(r,i+(o<0?-4:o))}return n}async function fue(e,t){return xqe(e,t.rootFolderPath,gqe,hqe)}async function xqe(e,t,n,r){let i=new Map,o=new Map,s=500;function a(f,m,h,v){let g=[];(e.readDirWithTypes||e.readDir)(f).then(x=>{if(h.count>=s)return h.count+=x.length,h.maxReached=!0,v(g);let w=x.length;if(w===0)return v(g);let b=x;h.count+x.length>s&&(h.maxReached=!0,w=s-h.count,b=x.slice(0,w)),h.count+=x.length;for(let S of b){let R=Array.isArray(S)?S[0]:S;(Array.isArray(S)?Promise.resolve((S[1]&1)!==0):e.isFile(e.path.join(f,R))).then(E=>{E?(g.push(R),--w===0&&v(g)):m.indexOf(R)===-1?a(e.path.join(f,R),m,h,C=>{if(g=g.concat(C),--w===0)return v(g)}):--w===0&&v(g)},()=>{if(--w===0)return v(g)})}},()=>v(g))}let u=f=>{i.has(f)?i.set(f,i.get(f)+1):i.set(f,1)},c=f=>{for(let m of vqe)m.pattern.test(f)&&(o.has(m.tag)?o.set(m.tag,o.get(m.tag)+1):o.set(m.tag,1))},l=f=>{if(f.lastIndexOf(".")>=0){let m=f.split(".").pop();m&&!r.includes(m)&&u(m.toLowerCase())}c(f)},d=f=>[...f.entries()].reduce((m,h)=>h[1]>m[1]?h:m,["",0])[0],p={count:0,maxReached:!1};return new Promise((f,m)=>{a(t,n,p,async h=>{h.forEach(l),f({configFiles:o,fileTypes:i,fileCount:p.count,mostPopularFileType:d(i)})})})}var e$=BE.default.join(__dirname,"..",".."),mue=rn.env.appRoot,wqe=e=>Tm(e,mue);async function pv(e){let{fileHost:t,output:n}=e;n.write(" -- CREATEDEVCONTAINER v2");let r=await yue();if(r){let i=xe(r,t.platform),o=At(t.path,i),s=await G_(t,o);if(s){let u=Vn.l10n.t("Continue");if(await rn.window.showInformationMessage(Vn.l10n.t("The workspace could fail to open in a container: {0}",s),{modal:!0},u)!==u)return!1}let a=await i$(e,o);if(a){let u=await t.toCommonURI(a);u&&rn.window.showTextDocument(rn.Uri.parse(u.toString()))}return!!a}return!1}async function _R(e,t,n,r,i=(o,s)=>s){return rn.window.withProgress({location:rn.ProgressLocation.Notification,title:Vn.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>r$(e,t,n,r,i))}async function r$(e,t,n,r,i=(o,s)=>s){let{output:o}=e,s=BE.default.join(t$.tmpdir(),`tmp-output-dir-${Date.now()}`),a=BE.default.join(t$.tmpdir(),`tmp-dir-${Date.now()}`);e.quickPick.busy=!0,e.quickPick.enabled=!1;let u={executeInWSL:"forWSLPath",defaultDistro:void 0},c=await yi(),l=process.cwd(),p={cliHost:await Ei(void 0,void 0,l,wqe,u,e$,c,e.telemetry.product,o,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:e$,appRoot:mue,output:o,package:await Kn(e$)},f;try{f=await Oo(p,["templates","apply","--workspace-folder",s,"--template-id",r.id,"--template-args",r.options?JSON.stringify(r.options):"{}","--features",r.features?JSON.stringify(r.features):"[]","--tmp-dir",a])}catch{let v=Vn.l10n.t("Show Log");await rn.window.showErrorMessage(Vn.l10n.t("Application of the template failed."),{modal:!0},...e.showLogCommandId?[v]:[])===v&&rn.commands.executeCommand(e.showLogCommandId);return}let m=Vn.l10n.t("Skip"),h;for(let v of f.files){let g=t.path.join(n.configFolderPath,v);if(await t.isFile(g)){let w=await rn.window.showInformationMessage(Vn.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},m,Vn.l10n.t("Overwrite"));if(!w)return;if(w===m)continue}await t.mkdirp(t.path.dirname(g));let y=await st(BE.default.join(s,v)),x=i(v,y);await t.writeFile(g,x),!h&&Gy(t.path,v)&&(h=g)}return await gu(s,{recursive:!0,force:!0}),await gu(a,{recursive:!0,force:!0}),e.quickPick.busy=!1,e.quickPick.enabled=!0,h}async function i$(e,t,n){let{fileHost:r,telemetry:i}=e,o=await SR(r,t);if(o){Ua(await i,"exists");let u=xe(o.uri,r.platform);if(!await rn.window.showWarningMessage(Vn.l10n.t("Dev Container configuration '{0}' file already exists.",r.path.relative(t.configFolderPath,u)),{modal:!0},Vn.l10n.t("Continue"))){let l=await r.toCommonURI(u);l&&rn.window.showTextDocument(rn.Uri.parse(l.toString()));return}}let s=await o$(e,n,!1),a=await VE(s,r,t,s$);return s.quickPick.hide(),a}async function o$(e,t,n){let r=rn.window.createQuickPick();r.ignoreFocusOut=!0,t&&(r.title=t);let i=await ad(e.output);return{...e,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await e.telemetry,index:i,skipOptions:n}}async function s$(e,t,n,r){if(!e.index)return;let o=await CR(e,t,n);if(o)return o==="back"?r?r():void 0:_R(e,t,n,o)}var hue=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function CR(e,t,n){let{index:r,predefinedDefinitionsLearnMoreLink:i}=e,o=((r==null?void 0:r.collections.map(c=>c.templates).flat())||[]).filter(c=>!hue.includes(c.id));if(!(o!=null&&o.length))return;let s=()=>CR(e,t,n),a=await Eqe(e,t,n,o);if(!(a!=null&&a.length))return n$(e,[],o,s);let u=[{label:Vn.l10n.t("Show All Definitions..."),detail:Vn.l10n.t("Show all available predefined container definitions."),alwaysShow:!0,type:"showAll"},...i?[a$]:[]];return n$(e,u,a,s)}async function Eqe(e,t,n,r){r=r.filter(a=>a.owner==="devcontainers");let i=e.stats||t&&n&&(e.stats=await fue(t,n));if(!(i!=null&&i.mostPopularFileType.length))return;let o=pue(i,r);return r.filter(a=>(o.get(a)||0)>0).sort(bqe.bind(null,o))}function bqe(e,t,n){let r=e.get(n)||0,i=e.get(t)||0;return r-i}async function n$(e,t,n,r){let{index:i,predefinedDefinitionsLearnMoreLink:o,telemetry:s}=e,a={iconPath:new rn.ThemeIcon("info"),tooltip:Vn.l10n.t("Open Documentation")},u=e.quickPick.onDidTriggerItemButton(d=>{let p=d.item.template.documentationURL;rn.env.openExternal(rn.Uri.parse(p))}),c=n.map(d=>{let p;if(d.owner){let f=(d==null?void 0:d.owner)==="devcontainers"?"$(verified)":"";p=`${((d==null?void 0:d.owner)==="microsoft"&&d.id.includes("microsoft/vscode-dev-containers")?Vn.l10n.t("community"):d==null?void 0:d.owner)||Vn.l10n.t("Unknown Publisher")} ${f}`}return{label:d.name,picked:n.indexOf(d)!==-1,detail:d==null?void 0:d.description,description:p,buttons:[a],template:d}}).sort((d,p)=>d.label.localeCompare(p.label)),l=await go(e.quickPick,[...t,...c],Vn.l10n.t("Select a container configuration template"),void 0,void 0,!1);if(u.dispose(),!l){Ua(s,"canceled");return}if(l.type==="help"){Ua(s,"help"),rn.env.openExternal(o);return}if(l.type==="showAll"){let d=((i==null?void 0:i.collections.map(p=>p.templates).flat())||[]).filter(p=>!hue.includes(p.id));return n$(e,[],d,r)}if(l.template)return fv(e,l.template,r)}async function fv(e,t,n){let r={id:`${t.id}:latest`,options:{},features:[],metadata:{template:t,features:[]}};if(e.skipOptions)return r;if(!t.options){let u=await vue(e,r,n);return u?u==="back"?n():u:void 0}let i=t.options,o=[],s=[];for(let u in i){let c=i[u];c.name=u,c.type==="boolean"?o.push(c):c.type==="string"&&s.push(c)}let a=await _qe(e,s,r,async()=>"back",(u,c)=>gue(e,o,t.name,u,c));if(a==="back")return n();if(a)return a}async function _qe(e,t,n,r,i){let o=t.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0&&(a=s.enum);let u=s.default,c=a.map(d=>({label:d,description:d===u?Vn.l10n.t("(default)"):void 0,value:d})),l=c.findIndex(d=>d.value===u);return l!==-1&&c.unshift(...c.splice(l,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,items:c}});return async function s(a,u,c){if(!a.length)return i(u,c);let l=a[0],d=await go(e.quickPick,l.items,l.placeholder,void 0,void 0,!0);if(!d)return;if(d==="back")return c();let p={...u.options};return p[l.name]=d.value,u.options={...p},s(a.slice(1),u,()=>s(a,u,c))}(o,n,r)}async function gue(e,t,n,r,i){let o=r,s=t.map(c=>{let l=c.default==="true";return{label:c.description||c.name,picked:l,name:c.name,default:l}}),a=s.length?await go(e.quickPick,s,Vn.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!a)return r;if(a==="back")return i();for(let c of s){let l=a.indexOf(c)!==-1,d={...r.options};d[c.name]=l.toString(),r.options={...d}}let u=await vue(e,r,()=>t.length>0?gue(e,t,n,o,i):i());if(u)return u==="back"?i():u}async function vue(e,t,n){let{quickPick:r,telemetry:i,output:o,index:s,askForTrust:a}=e,u=s==null?void 0:s.collections.reduce((f,m)=>f.concat(m.features),[]).filter(f=>!f.deprecated);if(!(u!=null&&u.length))return t;let l=await dv({quickPick:r,askForTrust:a,telemetry:i,output:o},u,[],[],!0,!0);if(!l)return;if(l==="back")return n();let d=[],p=[];for(let f in l)if(l[f]){let m=u.find(h=>h.id===f);if(m){p.push(m);let h=m.majorVersion||"latest",v={id:`${f}:${h}`,options:l[f]};d.push(v)}}return t.features=d,t.metadata.features=p,t}function wue(e){return{provideCompletionItems(t,n,r){let i=n2(t.getText(),t.offsetAt(n)),o=t.getWordRangeAtPosition(n)||new ue.Range(n,n);if(i.path[0]==="extensions"||i.path[0]==="vscode"&&i.path[1]==="extensions"){let s=Ge(t.getText());return s.configFilePath=t.uri,Cqe(s,o)}if(i.path[0]==="features"){let s=Ge(t.getText());s.configFilePath=t.uri;try{return Sqe(e,s,i,o)}catch(a){console.error(a)}}return[]}}}function Cqe(e,t){var r,i;let n=((e==null?void 0:e.extensions)||[]).concat(((i=(r=e==null?void 0:e.customizations)==null?void 0:r.vscode)==null?void 0:i.extensions)||[]);if(Array.isArray(n)){let o=ue.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(o.length)return o.map(s=>{let a=new ue.CompletionItem(s.id),u=`"${s.id}"`;return a.kind=ue.CompletionItemKind.Value,a.insertText=u,a.range=t,a.filterText=u,a})}}async function Sqe(e,t,n,r){var o;let i=t&&t.features||{};if(typeof i=="object"){if(t.configFilePath.scheme==="vscode-remote"&&e.fileHost.type==="local"){t={...t,configFilePath:t.configFilePath.with({scheme:ut.scheme,authority:""})};let u=ue.env.remoteName&&ue.env.remoteName!=="test"?"linux":process.platform,c=((o=(ue.workspace.workspaceFolders||[])[0])==null?void 0:o.uri)||ye.file(process.cwd());e={...e,fileHost:await rv(u,c)}}let s=await ad(e.output),a=(s==null?void 0:s.collections.map(u=>u.features).flat().filter(u=>!u.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let u=a.filter(c=>!(c.id in i));if(u.length)return u.map(c=>{let l=new ue.CompletionItem(c.id),d=`"${c.id}": `;return l.kind=ue.CompletionItemKind.Property,l.insertText=d,l.range=r,l.filterText=d,l})}else{let u=n.path[1],c=a.find(l=>l.id===u);if(c){let l=vK(c),d=l&&(c.options||{})[l]||{type:"boolean",description:on.l10n.t("Set to true to install.")},p=(d.type==="string"?("enum"in d&&d.enum||"proposals"in d&&d.proposals||[""]).map(f=>`"${f}"`):["true","false"]).map(f=>({label:f,text:f}));return p.push({label:"{}",text:new ue.SnippetString(`{
	$1
}$0`)}),p.map(({label:f,text:m},h)=>{let v=new ue.CompletionItem(f);return v.kind=ue.CompletionItemKind.Value,v.insertText=m,v.range=r,v.sortText=`${h}_${f}`,v})}}else if(n.path.length===3){let u=n.path[1],c=a.find(l=>l.id===u);if(c){let l=c.options||{};if(n.isAtPropertyKey)return Object.keys(l).filter(d=>!(d in(i[u]||{}))).map(d=>{let p=new ue.CompletionItem(d),f=`"${d}": `;return p.kind=ue.CompletionItemKind.Property,p.insertText=f,p.range=r,p.filterText=f,p.detail=l[d].description,p});{let d=n.path[2],p=l[d];if(p)return(p.type==="string"?("enum"in p&&p.enum||"proposals"in p&&p.proposals||[""]).map(m=>`"${m}"`):["true","false"]).map((m,h)=>{let v=new ue.CompletionItem(m),g=m;return v.kind=ue.CompletionItemKind.Value,v.insertText=g,v.range=r,v.filterText=g,v.sortText=`${h}_${m}`,v})}}}}}async function Eue(e){let t=await u$(e);if((t==null?void 0:t.scheme)===ut.scheme){let n=xe(t,e.fileHost.platform);t=await e.fileHost.toCommonURI(n)}t&&await ue.window.showTextDocument(ue.Uri.parse(t.toString()))}async function u$(e){let t=await e.findDevContainerFiles();if(!t.length){let r=on.l10n.t("Add Files...");await ue.window.showInformationMessage(on.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await pv(e)&&(t=await e.findDevContainerFiles())}let n=await Ef(e.fileHost,t);return n!=="cancelled"?n:void 0}async function bue(e,t){var r,i,o,s,a,u,c;let n=await u$(e);if(n){let l=Xn(e.fileHost);n.scheme==="file"&&!await br(n.fsPath)?await ko(ms,n,[],xc):n.scheme==="vscode-remote"&&(l=new OE);let d=await l.readDocument(n);if(d){let p=!/\.?devcontainer\.json/.test(mv.default.posix.basename(n.path)),f=Ge(d),m=!p&&(((i=(r=f.customizations)==null?void 0:r.vscode)==null?void 0:i.extensions)||!f.extensions),h=(m?(s=(o=f.customizations)==null?void 0:o.vscode)==null?void 0:s.extensions:f.extensions)||[],v=e.openConfigurationCommandId?`[${on.l10n.t("Dev Container configuration")}](command:${e.openConfigurationCommandId})`:on.l10n.t("Dev Container configuration");if((f.extensions||[]).concat(((u=(a=f.customizations)==null?void 0:a.vscode)==null?void 0:u.extensions)||[]).indexOf(t)===-1){h.push(t);let g;m?(c=f.customizations)!=null&&c.vscode?g=Cn(d,["customizations","vscode","extensions"],h,{formattingOptions:{}}):f.customizations?g=Cn(d,["customizations","vscode"],{extensions:h},{formattingOptions:{}}):g=Cn(d,["customizations"],{vscode:{extensions:h}},{formattingOptions:{}}):g=Cn(d,["extensions"],h,{formattingOptions:{}}),await l.applyEdits(n,g,d),await ue.window.showInformationMessage(on.l10n.t("Extension has been added to the {0}.",v))}else await ue.window.showInformationMessage(on.l10n.t("Extension is already included in the {0}.",v))}}}async function _ue(e,t){let n=await ue.commands.executeCommand("remote.tunnel.label",t);if(n===void 0)return;let r=n.label,i=n.port,o=await u$(e);if(o){let s=Xn(e.fileHost);o.scheme==="file"&&!await br(o.fsPath)?await ko(ms,o,[],xc):o.scheme==="vscode-remote"&&(s=new OE);let a=await s.readDocument(o);if(a){let c=Ge(a).portsAttributes??{},l=c[`${i}`]??{},d=e.openConfigurationCommandId?`[${on.l10n.t("Dev Container configuration")}](command:${e.openConfigurationCommandId})`:on.l10n.t("Dev Container configuration");if(c&&l&&l.label===r)await ue.window.showInformationMessage(on.l10n.t("Port attributes are already included in the {0}.",d));else{l.label=r,c[`${i}`]=l;let p=Cn(a,["portsAttributes"],c,{formattingOptions:{}});await s.applyEdits(o,p,a),await ue.window.showInformationMessage(on.l10n.t("Port attributes have been added to the {0}.",d))}}}}function Cue(e,t){let n=ue.languages.createDiagnosticCollection("devcontainer"),r=ue.window.activeTextEditor;r&&c$(r.document,n,t.output),e.subscriptions.push(ue.workspace.onDidChangeTextDocument(async i=>{c$(i.document,n,t.output)})),e.subscriptions.push(ue.workspace.onDidOpenTextDocument(async i=>{c$(i,n,t.output)})),e.subscriptions.push(ue.workspace.onDidCreateFiles(async i=>{await Promise.all(i.files.filter(o=>/\.?devcontainer\.json/.test(mv.default.posix.basename(o.path))).map(o=>ue.workspace.openTextDocument(o)))})),e.subscriptions.push(ue.workspace.onDidDeleteFiles(i=>{i.files.forEach(o=>n.forEach(s=>{s.toString().startsWith(o.toString())&&n.delete(s)}))})),e.subscriptions.push(ue.workspace.onDidRenameFiles(async i=>{i.files.forEach(o=>n.forEach(s=>{s.toString().startsWith(o.oldUri.toString())&&n.delete(s)})),await Promise.all(i.files.filter(o=>/\.?devcontainer\.json/.test(mv.default.posix.basename(o.newUri.path))).map(o=>ue.workspace.openTextDocument(o.newUri)))})),(async()=>{let i=await Mce();await Promise.all(i.map(o=>ue.workspace.openTextDocument(o)))})().catch(i=>{t.output.write(`Error opening dev container configurations: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)}`)}),e.subscriptions.push(n)}function Sue(e,t,n){let r=async(s,a,u)=>{let c=mv.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(c)){let l=ld(s.getText());if(!l)return;if((fb(l)||{}).features){let p=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),f=Iqe(p,t.output,await n());if(f)return{contents:[f],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},i=ue.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),o=ue.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return e.subscriptions.push(i),e.subscriptions.push(o),[i,o]}function c$(e,t,n){let r=mv.default.basename(e.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let i=ld(e.getText());if(!i)return;let o=[...Pqe(e,i,n),...Rqe(i,e)];t.set(e.uri,o)}}function Tqe(e,t){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!e)return{type:void 0,tooltip:on.l10n.t("Empty feature id")};let r={};if(!e.includes("/")&&!e.includes("\\")&&n.test(e)){let s=["fish","homebrew"].indexOf(e)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?on.l10n.t("Legacy feature will be removed in the future. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:ue.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:ue.DiagnosticSeverity.Warning}}if(e.startsWith("http://"))return{...r,type:void 0,tooltip:on.l10n.t("Direct tarball references must be served over HTTPS."),level:ue.DiagnosticSeverity.Error};if(e.startsWith("https://"))try{return ue.Uri.parse(e,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:ue.DiagnosticSeverity.Error,tooltip:on.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:ue.DiagnosticSeverity.Error,tooltip:on.l10n.t("Invalid URI")}}if(e.startsWith("/"))return{...r,type:void 0,tooltip:on.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:ue.DiagnosticSeverity.Error};if(e.startsWith("./")||e.startsWith("../"))return{...r,type:"file-path"};if(e.split("/").length===3&&e.length>=5&&!e.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(e)?{...r,type:"github-repo",isLegacy:!0,level:ue.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:on.l10n.t("GitHub release feature id contains invalid characters"),level:ue.DiagnosticSeverity.Error};let o=e.split("/");return e.includes(".")&&o.length>1&&o[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(e)?{...r,type:"oci"}:{...r,type:void 0,level:ue.DiagnosticSeverity.Error,tooltip:on.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:ue.DiagnosticSeverity.Error,tooltip:on.l10n.t("Failed to parse feature identifier.")}}function Iqe(e,t,n){var o;if(!n){t.write("No index found.",5);return}let i=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>e===s.id||e.startsWith(`${s.id}:`));if(i){let s=`${i.name}
`??"",a=i.description?`
${i.description}
`:"",u=i.documentationURL?`
${i.documentationURL}
`:"",c="";if(i.majorVersion){let l=e.split(":");if(l.length===2){let d=l[1];if(d&&d!=="latest")try{let p=(o=xue.parse(d,{loose:!0}))==null?void 0:o.major,f=Number.parseInt(i.majorVersion),m=`
${on.l10n.t("New major version '{0}' published.",f)}
`;if(p&&p<f)c=m;else{let h=Number.parseInt(d);h!==void 0&&h<f&&(c=m)}}catch{}}}return new ue.MarkdownString(`${s}${a}${u}${c}`)}}function Pqe(e,t,n){var o;let r=os(t,["features"]),i=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(o=s.children)==null?void 0:o[0].value,u=Tqe(a,n);if(u.hint){let c=e.positionAt(s.offset),l=e.positionAt(s.offset+s.length),d=new ue.Diagnostic(new ue.Range(c,l),u.hint,ue.DiagnosticSeverity.Hint);i.push(d)}if(u.level!==void 0&&u.tooltip){let c=e.positionAt(s.offset),l=e.positionAt(s.offset+s.length),d=new ue.Diagnostic(new ue.Range(c,l),u.tooltip,u.level);d.code=u.code||{target:ue.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},i.push(d)}}return i}function Rqe(e,t){return["extensions","settings","devPort"].filter(n=>os(e,[n])&&os(e,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=os(e,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],i=t.positionAt(r.offset),o=t.positionAt(r.offset+r.length);return new ue.Diagnostic(new ue.Range(i,o),on.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),ue.DiagnosticSeverity.Warning)})}var hv=B(require("vscode")),l$=require("vscode");async function Tue(e,t){let n=await Aqe(e);if(!n)return e.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await Dqe(e,n,(t==null?void 0:t.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let i=await e.fileHost.toCommonURI(r);return i&&hv.window.showTextDocument(hv.Uri.parse(i.toString())),!!i}async function Aqe(e){let t=await e.findDevContainerFiles();if(t.length){let n=await Ef(e.fileHost,t);if(!n||n==="cancelled")return;let r=n.scheme==="file"?rv(process.platform,Bu(n)):e.fileHost,i=r.path.dirname(xe(n,r.platform)),o=r.path.basename(i)===".devcontainer"?r.path.dirname(i):i,s=At(r.path,o),a=await SR(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=l$.l10n.t("Add Files...");await hv.window.showInformationMessage(l$.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await pv(e)}}async function Dqe(e,t,n){var f;let{fileHost:r,workspace:i,config:o}=t,s=hv.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:i,quickPick:s,telemetry:await e.telemetry,output:e.output},u=await ad(e.output);if(!u)return;let c=u.collections.reduce((m,h)=>m.concat(h.features),[]).filter(m=>!m.deprecated),l=c.filter(m=>n.includes(m.id)),d=[];if(o.object.features&&Object.entries(o.object.features).length>0){let m=Object.keys(o.object.features);d=c.filter(h=>m.some(v=>v.split(":")[0]===h.id))}let p=await dv(a,c,d,l,!0,!1);if(p)try{let m=o.text,h=o.text;for(let v of c){let g=[],y=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,x=["features",y];if(!p[v.id]&&((f=o.object.features)!=null&&f[y]))g=g.concat(Cn(h,x,void 0,{formattingOptions:{}}));else if(p[v.id]){let b=p[v.id];g=g.concat(Cn(h,x,b,{formattingOptions:{}}))}g.length&&(h=ci(h,g))}return m!==h&&await Xn(r,r).applyEdits(o.uri,[{content:h,offset:0,length:o.text.length}],o.text),s.dispose(),xe(o.uri,r.platform)}catch(m){e.output.write(`Error in selecting dev container features: ${m}`,5),console.log("Error in selecting dev container features: ",m),s.dispose();return}}var Ln=B(require("vscode")),Pue=B(require("crypto")),TR=B(require("path")),d$=require("vscode");var Iue={features:{}};function Rue(e,t){let n=new Set,r=Promise.resolve(Iue),i,o="remote-containers.editDevContainerJSON",s="codespaces.editDevContainerJSON",a=t.codespaces?s:o;e.subscriptions.push(Ln.commands.registerCommand(a,async l=>l()),Ln.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(l,d){var m;let p=Object.keys(((m=Ge(l.getText()))==null?void 0:m.features)||{}).sort();p.some(h=>!n.has(h))&&(n=new Set(p),r=u(l,p));let f=await r;if(!d.isCancellationRequested)return c(l,f)}}));async function u(l,d){i||(i=await Nqe(e,t));let p=l.uri;if(p.scheme!=="file"){let f=i.path.join(await i.tmpdir(),`dev-container-tmp-${Pue.randomUUID()}`);await i.mkdirp(f);let m=i.path.join(f,".devcontainer.json");await i.writeFile(m,Buffer.from(JSON.stringify({features:d.reduce((g,y)=>(g[y]={},g),{})})));let h=TR.posix.basename(p.path)===".devcontainer.json",v=p.with({path:TR.posix.join(TR.posix.dirname(p.path),h?".devcontainer-lock.json":"devcontainer-lock.json")});try{let g=await Ln.workspace.fs.readFile(v),y=i.path.join(f,".devcontainer-lock.json");await i.writeFile(y,Buffer.from(g))}catch(g){if((g==null?void 0:g.code)!=="FileNotFound")throw g}p=Ln.Uri.file(m)}try{return Lqe(e,i,i.cwd,p,t.output)}catch(f){return t.output.write(`Error fetching version info: ${(f==null?void 0:f.message)||f}`),Iue}}function c(l,d){let p=ld(l.getText());if(!p)return;let f=os(p,["features"]);if(!(f!=null&&f.children)||f.type!=="object")return;let m=[];for(let h of f.children)if(h.type==="property"&&h.children){let b=function(S,R){return async()=>{let P=v.value.substring(0,y.length)+S;n.add(P),R&&!d.features[P]&&(d.features[P]=R);let E=Ln.window.activeTextEditor;await(E==null?void 0:E.edit(C=>{C.replace(new Ln.Range(E.document.positionAt(x),E.document.positionAt(x+w)),S)}))}},v=h.children[0],g=d.features[v.value],y=Oqe(v.value),x=v.offset+1+y.length,w=v.length-2-y.length;if(g!=null&&g.wanted&&g.current!==g.wanted){let S=new Ln.CodeLens(new Ln.Range(l.positionAt(v.offset),l.positionAt(v.offset+v.length)),{title:d$.l10n.t("Update to {0}",g.wanted),command:a,arguments:[b(`:${g.wanted}`,{current:g.wanted,wanted:g.wanted,latest:g.latest})]});m.push(S)}if(g!=null&&g.latest&&g.current!==g.latest){let S=new Ln.CodeLens(new Ln.Range(l.positionAt(v.offset),l.positionAt(v.offset+v.length)),{title:d$.l10n.t("Update to latest {0}",g.latest),command:a,arguments:[b(`:${g.latest}`)]});m.push(S)}}return m}}var kqe=/[:@][^/]*$/;function Oqe(e){let t=kqe.exec(e);return t?e.substring(0,t.index):e}async function Nqe(e,t){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await yi(),i=process.cwd();return Ei(void 0,void 0,i,s=>Tm(s,Ln.env.appRoot),n,e.extensionPath,r,(await t.telemetry).product,t.output,void 0,void 0)}async function Lqe(e,t,n,r,i){let o={cliHost:t,dockerPath:"",dockerComposePath:"",extensionPath:e.extensionPath,appRoot:Ln.env.appRoot,output:i,package:await Kn(e.extensionPath)};return await Oo(o,["outdated","--workspace-folder",n,...r?["--config",xe(r,t.platform)]:[],"--output-format","json","--log-level",xo(Fqe()),"--log-format","json",...i.dimensions?["--terminal-columns",String(i.dimensions.columns),"--terminal-rows",String(i.dimensions.rows)]:[]])}function Fqe(){let e=Bn("logLevel")||"debug";return vb(e)}function Due(e,t){let n,r=()=>n||(n=ad(t.output));return Cue(e,t),Sue(e,t,r),Rue(e,t),{async openConfiguration(){return Eue(t)},async createConfiguration(i){return pv(t)},async addExtensionToConfiguration(i){return bue(t,i)},async addPortLabelToConfiguration(i){return _ue(t,i)},async configureContainerFeatures(i){return Tue(t,i)},createCompletionItemProvider(){return wue(t)}}}async function yue(){let e=vo.workspace.workspaceFile,t=vo.workspace.workspaceFolders,n;if(e){if(e.scheme==="untitled"){await lR();return}n=e}else if(t&&t.length)if(t.length>1){let r=await vo.window.showWorkspaceFolderPick({placeHolder:Hr.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=t[0].uri;return n}function go(e,t,n,r,i,o,s){if(e.value="",e.title=r||e.title||Hr.l10n.t("Add Dev Container Configuration Files"),e.placeholder=n,e.canSelectMany=!!i,Array.isArray(t))if(e.items=t,i)e.selectedItems=t.filter(p=>p.picked);else{let p=t.find(f=>f.picked);p&&(e.activeItems=[p])}e.buttons=o?Array.isArray(o)?o:[vo.QuickInputButtons.Back]:[];let a=[],u=e.items,c=u.filter(p=>p.isAlreadyInstalledViaBaseImage===!0),l={kind:vo.QuickPickItemKind.Separator,label:Hr.l10n.t("pre-installed features")};c.length&&(e.items=e.items.slice(0,u.length-c.length).concat(l).concat(e.items.slice(u.length-c.length)));let d=new Promise((p,f)=>{if(Array.isArray(t)||(e.busy=!0,t.then(m=>{if(e.busy=!1,e.items=m,i)e.selectedItems=m.filter(h=>h.picked);else{let h=m.find(v=>v.picked);h&&(e.activeItems=[h])}},m=>{e.busy=!1,f(m)})),a.push(e.onDidAccept(()=>{let m=i?e.selectedItems.slice():e.selectedItems[0];p(Array.isArray(o)?{pick:m,button:"ok"}:m),a.forEach(h=>h.dispose())})),a.push(e.onDidChangeSelection(m=>{if(!i)return;let h=c.filter(v=>!e.selectedItems.includes(v));h.length&&(e.selectedItems=e.selectedItems.concat(h))})),e.buttons.length&&a.push(e.onDidTriggerButton(m=>{let h=i?e.selectedItems.slice():e.activeItems[0];p(o===!0?"back":{pick:h,button:m}),a.forEach(v=>v.dispose())})),a.push(e.onDidHide(()=>{a.forEach(m=>m.dispose()),e.dispose(),p(void 0)})),s){let m;a.push(e.onDidChangeValue(h=>{let v=h.trim().toLowerCase(),g=!v||e.items.find(y=>y.label.toLowerCase()===v);if(g&&m)e.items=e.items.filter(y=>y!==m),m=void 0;else if(!g){let y=e.items.filter(x=>x!==m);y.push(m={label:Hr.l10n.t("Other: {0}",h),value:h}),e.items=y}}))}});return e.show(),d}var a$={label:Hr.l10n.t("Learn More"),description:Hr.l10n.t("Documentation on predefined container definitions"),alwaysShow:!0,type:"help"};async function IR(e,t,n){return i$(e,t,n)}async function VE(e,t,n,r=s$){let{telemetry:i,existingFilesLearnMoreLink:o,index:s}=e,a=s==null?void 0:s.collections.find(y=>y.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),u=a==null?void 0:a.templates.find(y=>y.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),c=a==null?void 0:a.templates.find(y=>y.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),l=await t.readDir(n.rootFolderPath),d=u?l.filter(y=>/(docker.*)?compose.*\.ya?ml$/i.test(y)).map(y=>t.path.join(n.rootFolderPath,y)):[],p=c?l.filter(y=>/dockerfile/i.test(y)).map(y=>t.path.join(n.rootFolderPath,y)):[],f=p.map(y=>{let x=t.path.basename(y);return{label:Hr.l10n.t("From '{0}'",x),description:Aue(t,y),dockerfile:x,dockerfilePath:y,detail:Hr.l10n.t("Refer to the existing '{0}' in the container configuration",x),type:"dockerfile"}}),m=d.map(y=>{let x=t.path.basename(y);return{label:Hr.l10n.t("From '{0}'",x),description:Aue(t,y),dockerComposeFile:x,dockerComposePath:y,detail:Hr.l10n.t("Refer to the existing '{0}' in the container configuration",x),type:"dockerComposeFile"}});if(!(p.length>0||d.length>0))return r(e,t,n,void 0);let v={label:Hr.l10n.t("From a predefined container configuration definition..."),detail:Hr.l10n.t("Use a base configuration from the container definition registry"),alwaysShow:!0,type:"predefined"},g=await go(e.quickPick,[v,...f,...m,...o?[a$]:[]],Hr.l10n.t("How would you like to create your container configuration?"));if(!g){Ua(i,"canceled");return}if(g.type==="help"){Ua(i,"help"),vo.env.openExternal(o);return}if(g.type==="predefined")return r(e,t,n,()=>VE(e,t,n));if(g.type==="dockerComposeFile")return Uqe(e,t,n,g.dockerComposePath,u,()=>VE(e,t,n));if(g.type==="dockerfile")return Mqe(e,t,n,g.dockerfilePath,c,()=>VE(e,t,n))}function Aue(e,t){let n=vo.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(i=>e.platform==="win32"?t.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):t.startsWith(i.uri.fsPath));return r&&r.name}async function Mqe(e,t,n,r,i,o){let{telemetry:s}=e,a=await fv(e,i,async()=>{});if(!a){Ua(s,"canceled");return}if(a==="back")return o();let u=await _R(e,t,n,a,(c,l)=>{if(!Gy(t.path,c))return l;let d=t.path.sep!==qa.sep?c.replace(qa.sep===qa.win32.sep?/\\/g:/\//g,t.path.sep):c,p=t.path.resolve(n.configFolderPath,d),f=t.path.relative(t.path.dirname(p),r),m=t.platform==="win32"?f.replace(/\\/g,"/"):f,h=l.toString(),v="dockerFile"in Ge(h)?["dockerFile"]:["build","dockerfile"],g=Cn(h,v,m,{formattingOptions:{}}),y=ci(h,g);return Buffer.from(y)});return u&&Ua(s,"dockerFile"),u}async function Uqe(e,t,n,r,i,o){let{telemetry:s}=e,a=(await t.readFile(r)).toString(),u=Vy(a);if(!u){await vo.window.showErrorMessage(Hr.l10n.t("Invalid docker-compose file '{0}'",r),{modal:!0});return}let c=u.version,l=Object.keys(u&&u.services||{}),d=l.length<2?l[0]||"":await go(e.quickPick,l.map(h=>({label:h,type:"service"})),Hr.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return o();if(d===void 0){Ua(s,"canceled");return}let p=typeof d=="string"?d:d.label,f=await fv(e,i,async()=>{});if(!f)return;if(f==="back")return o();let m=await _R(e,t,n,f,(h,v)=>{if(Gy(t.path,h)){let g=t.path.sep!==qa.sep?h.replace(qa.sep===qa.win32.sep?/\\/g:/\//g,t.path.sep):h,y=t.path.resolve(n.configFolderPath,g),x=t.path.relative(t.path.dirname(y),r),w=t.platform==="win32"?x.replace(/\\/g,"/"):x,b=v.toString(),S=Ge(b).dockerComposeFile,R=Array.isArray(S)?S.slice(1):[],P=[w,...R],E=Cn(b,["dockerComposeFile"],P,{formattingOptions:{}}),C=ci(b,E),T=Cn(C,["service"],p,{formattingOptions:{}}),I=ci(C,T);return Buffer.from(I)}if(/compose.*\.ya?ml$/.test(qa.posix.basename(h))){let g=v.toString(),y=Vy(g);y.version&&c&&y.version!==c&&(g=g.replace(new RegExp(`^(version:.*)(${bm(y.version)})`,"m"),`$1${c}`));let x=Object.keys(y&&y.services||{});return x.length&&(g=g.replace(new RegExp(`\\b${x[0]}\\b`),p)),Buffer.from(g)}return v});return m&&Ua(s,"dockerComposeFile"),m}function Ua(e,t,n){let r={outcome:t};n&&(r.definitionName=n),e.sendTelemetryEvent("createConfiguration",r)}async function SR(e,t,n){if(n||(n=await WC(e,t.configFolderPath)),!n)return;let r=await Xn(e,e).readDocument(n);if(!r)return;let i=Ge(r);return{uri:n,text:r,object:i}}async function kue(e,t,n,r,i,o,s){let a=zr(n);if(In(a)&&!await Ue.workspace.requestWorkspaceTrust({message:qE}))return Ar(a.hostPath)?(await Ue.window.showInformationMessage(xr.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:xr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await Ue.commands.executeCommand("remote-containers.reopenInWSL")):(await Ue.window.showInformationMessage(xr.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:xr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await Ue.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let u=Gr(a);if(u&&!await jE(e,a.repositoryPath))return await Ue.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let c=Ec(a);return{...await qqe(a,e,o,s,t,n,r,i),isTrusted:u||c||void 0}}async function qqe(e,t,n,r,i,o,s,a){let{log:u,logFilePath:c}=n,l="hostPath"in e&&Ar(e.hostPath)&&!!Ue.extensions.getExtension("ms-vscode-remote.remote-wsl");l&&Ue.commands.executeCommand("setContext","canReopenInWSL",!0);let d=e.settings,p="localDocker"in e&&e.localDocker,f=Uu(e.parentAuthority)||Mu(d)&&!p,m=f&&(!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!Ue.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));m&&Ue.commands.executeCommand("setContext","canReopenInSSH",!0);let h=Cc(e.parentAuthority)&&!!Ue.extensions.getExtension("ms-vscode.remote-server");h&&Ue.commands.executeCommand("setContext","canReopenInTunnel",!0);let v=!f&&!Cc(e.parentAuthority);v&&Ue.commands.executeCommand("setContext","canReopenLocally",!0);let g;return Ue.window.withProgress({location:Ue.ProgressLocation.Notification,title:lv,cancellable:!1},async y=>{let x=Ma(),w=aa(t.extensionPath,lu,u),{cliHost:b,originalCwd:S}=await jqe(s.execServer,e,x,t.extensionPath,await yi(),w,i.product,u),R={...await w,...Bm(b,e.settings)},P={...b.env,...R},E=await uv({authority:o,extensionContext:t,sessionStart:n.sessionStart,progress:y,cliHost:b,env:P,cwd:b.cwd,wslSettings:x,isLocalContainer:gS(e.parentAuthority,R),telemetry:i,output:u,logFilePath:c,allowSystemConfigChange:!0,postCreate:r}),C={async createConfiguration(T,I){return IR({fileHost:I,telemetry:i,output:u,existingFilesLearnMoreLink:Cf,predefinedDefinitionsLearnMoreLink:Sf,openConfigurationCommandId:_f,showLogCommandId:nn},At(WE.posix,T))},async showError(T,...I){return await Ue.window.showErrorMessage(T,{modal:!0},...I)}};return g={common:E,parsedAuthority:e,dockerCLI:zs(),dockerComposePath:Fa(),dockerComposeCLI:da({exec:E.cliHost.exec,env:{...R,...hn(R)},output:E.output},zs(),Fa()),dockerEnv:R,workspaceMountConsistencyDefault:yR(),cacheMount:xR()?"volume":"none",configurationTracking:vR(t.workspaceState),removeOnStartup:await Jce(t,o),buildNoCache:await eue(t,o),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:od(),originalCwd:S,configProvider:C,development:t.extensionMode===Ue.ExtensionMode.Development,watch:async(T,I)=>{let A=Ue.workspace.createFileSystemWatcher(new Ue.RelativePattern(T,"*"));return A.onDidChange(I),A.onDidCreate(I),A.onDidDelete(I),A},ensureNoDisallowedFeatures:(T,I,A)=>iv(T,t.globalState,I,A),useExperimentalLockfile:wR()},await vS(g),UK(g)}).then(y=>(a(async x=>{await Zce(t,x&&y.dockerContainerId||!1),await UE(t,x==="rebuildNoCache"?o:!1)}),du(i,p$(e),"success",n.sessionStart,g==null?void 0:g.common,y.config,y.configLocation,y.properties),y),y=>{var C;let x=y instanceof he?y:new he({description:xr.l10n.t("An error occurred setting up the container."),originalError:y});Gr(e)&&(x.volumeName=e.volumeName,x.repositoryPath=e.repositoryPath,x.folderPath=e.folder),du(i,p$(e),"failure",n.sessionStart,g==null?void 0:g.common,x.config,void 0,x.containerProperties,x);let w="onTheSide",b=(C=x.data)==null?void 0:C.fileWithError;!b&&(g!=null&&g.parsedAuthority)&&In(g.parsedAuthority)&&g.parsedAuthority.configFile&&(b=xe(g.parsedAuthority.configFile,g.common.cliHost.platform));let S=b&&(g==null?void 0:g.common.cliHost.path.basename(b))||"devcontainer.json",R=In(e)?[{id:"openFileWithErrorLocally",title:xr.l10n.t("Edit {0} Locally",S),isLastAction:!0,applicable:async(T,I)=>v&&!(I&&l),async execute(){let T=g==null?void 0:g.common.cliHost,I=b?T.type==="wsl"?await T.toCommonURI(b):ye.file(b):void 0;await cv(t,e.hostPath,I,c,w);let A=Ue.Uri.file(e.hostPath);await Ue.commands.executeCommand("vscode.openFolder",A)}},{id:"openFileWithErrorinWSL",title:xr.l10n.t("Edit {0} in WSL",S),isLastAction:!0,applicable:async()=>l,async execute(){let T=Ue.Uri.parse((await wm(e.hostPath,u)).toString());await cv(t,T.path,b?T.with({path:b}):void 0,c,w),await Ue.commands.executeCommand("vscode.openFolder",T)}},{id:"openFileWithErrorinSSH",title:xr.l10n.t("Edit {0} in SSH",S),isLastAction:!0,applicable:async()=>m,async execute(){let T=e.settings,I=Mu(T)?My(T.host,e.hostPath):el(e.parentAuthority,e.hostPath),A=Ue.Uri.parse(I.toString());await cv(t,A.path,b?A.with({path:b}):void 0,c,w),await Ue.commands.executeCommand("vscode.openFolder",A)}},{id:"openFileWithErrorinTunnel",title:xr.l10n.t("Edit {0} in Tunnel",S),isLastAction:!0,applicable:async()=>h,async execute(){let T=Ue.Uri.parse(el(e.parentAuthority,e.hostPath).toString());await cv(t,T.path,b?T.with({path:b}):void 0,c,w),await Ue.commands.executeCommand("vscode.openFolder",T)}}]:[],P=Gr(e)?e.inspectVolume?[tl]:[{id:"reopenInRecoveryContainer",title:xr.l10n.t("Edit {0} in Recovery Container",S),isLastAction:!0,applicable:(T,I)=>!0,execute:async T=>{await cv(t,e.repositoryPath,b?ye.file(b).with({scheme:"vscode-remote"}):void 0,c,w);let I=Zi(T.repositoryPath),A=await wi(g),N=fN(I,T.volumeName,A);await Ue.commands.executeCommand("remote-containers.inspectVolume",N,T.repositoryPath,T.folderPath)}},tl,{id:"openRepository",title:xr.l10n.t("Open Repository"),isLastAction:!1,applicable:(T,I)=>!I,async execute(){Ue.env.openExternal(Ue.Uri.parse(e.repositoryPath))}}]:[],E=rx(e)?[tl]:[];return x.actions=[...Wm,Wd,x5,...R,...P,...E,Vm,Vd],Hqe(x),nl(x,p$(e),i,!0,n)})}async function jqe(e,t,n,r,i,o,s,a){let{settings:u}=t,c=u&&"host"in u&&u.host||void 0;if(In(t)){let l=At(WE,t.hostPath),d=l.rootFolderPath,p=await Ei(e?{server:e,authority:t.parentAuthority}:void 0,c,l.rootFolderPath,jr,n,r,i,s,a,Ys,{sshAskpassEnv:o,settings:av(),localDocker:t.localDocker});return p.cwd!==l.rootFolderPath&&(l=At(p.path,l.isWorkspaceFile?p.path.join(p.cwd,WE.basename(t.hostPath)):p.cwd)),a.write(`Setting up container for folder or workspace: ${l.workspaceOrFolderPath}\r
`),hS(a,t),t.localDocker&&a.write(`Local Docker: ${t.localDocker}\r
`),{cliHost:p,originalCwd:d}}else{let l=await Ei(e?{server:e,authority:t.parentAuthority}:void 0,c,void 0,jr,n,r,i,s,a,Ys,{sshAskpassEnv:o,settings:av()});return{cliHost:l,originalCwd:await l.homedir()}}}function p$(e){return In(e)?"config":Gr(e)?e.inspectVolume?"volume":"repository":"volume"}function Hqe(e){let t=(e.originalError&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();t&&t.indexOf("drive has not been shared")!==-1?e.description=xr.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):t&&(t.indexOf("port is already allocated")!==-1||t.indexOf("address already in use")!==-1)?e.description=xr.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):t&&t.indexOf('invalid mount config for type "bind"')!==-1?e.description=xr.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):t&&t.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(e.description=xr.l10n.t("The base image references the obsolete Debian 8 update repository."),e.actions.push({id:"learnMore",title:xr.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){Ue.env.openExternal(Ue.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Ha=B(require("vscode")),gv=require("vscode");var PR=B(Er());var Nue=require("util");var ja=B(require("path")),Lue=B(require("crypto"));async function Fue(e,t,n,r){var m,h;let{dockerCLI:i,dockerComposeCLI:o,dockerComposePath:s,common:a}=e,{cliHost:u,extensionPath:c,appRoot:l,postCreate:d,output:p}=a,f;try{let{commit:v}=a.product;if(!v)throw new he({description:PR.t("Cannot attach without commit id for the remote extension host.")});let g=r?n.configFilePath:void 0;if((g==null?void 0:g.scheme)==="file"&&u.type!=="local"){let L=u.path.join(await u.tmpdir(),`devcontainer-config-${Lue.randomUUID()}.json`);await u.writeFile(L,await st(g.fsPath)),g=ye.from({scheme:ut.scheme,path:L})}let y={...a.env,...hn(a.env)},x={cliHost:u,dockerPath:i,dockerComposePath:s,env:y,extensionPath:c,appRoot:l,package:a.package,postCreate:d,output:p},w=a.postCreate.output.dimensions||p.dimensions,b=await Oo(x,["set-up","--container-id",t.Id,...u.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",xo(a.getLogLevel()),"--log-format","json",...g?["--config",xe(g,u.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...w?["--terminal-columns",String(w.columns),"--terminal-rows",String(w.rows)]:[]]);if((b==null?void 0:b.outcome)!=="success")throw new he({description:PR.t("devcontainer command failed: {0}",JSON.stringify(b))});let{mergedConfiguration:S}=await Yu(x,void 0,g,a.getLogLevel(),{},[],t.Id,void 0),R=S.remoteUser;f=await Fm(e,t.Id,S.workspaceFolder,R);let P={cliHost:u,dockerCLI:i,dockerComposeCLI:o,dockerComposePath:s,env:y,output:d.output},E=((h=(((m=S.customizations)==null?void 0:m.vscode)||[]).slice().reverse().find(L=>typeof L.devPort=="number"))==null?void 0:h.devPort)||Fd,{hostOrContainerPort:C,hostPortServer:T,connectionToken:I,remoteEnv:A,serverDownloaded:N}=await ju(a,f,n,S,E,Mm(e,P,f,void 0,void 0,t.Id,!1,g,void 0)),F=Xn(a.cliHost,f.shellServer);if($qe(a,f,F,n.configFilePath),Vqe(a,f,F,n.configFilePath),T){let L=async()=>{await(0,Nue.promisify)(T.close.bind(T))()};a.shutdowns.push(L)}return{params:a,properties:f,config:n,resolvedAuthority:{host:zu,port:C,connectionToken:I,extensionHostEnv:A},tunnelInformation:a.isLocalContainer?Lm(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:N}}catch(v){let g=v instanceof he?v:new he({description:PR.t("An error occurred attaching to the container."),originalError:v});throw t&&(g.manageContainer=!1,g.params=e.common,g.containerId=t.Id,g.dockerParams=e),f&&(g.containerProperties=f),g.config=n,g}}function $qe(e,t,n,r){t.installFolder&&Mue(e,t,n,r).catch(console.error)}async function Mue(e,t,n,r){try{await vc(e,t,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],g6(t),{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await Bqe(e,t,n,r):(i==null?void 0:i.code)!==2&&await Do(6e4)}return Mue(e,t,n,r)}async function Bqe(e,t,n,r){let i=await v6(e,t);await UO(r,async()=>{var s,a;let o=await RR(e.cliHost,n,r,t.remoteWorkspaceFolder);if(!Gqe(((a=(s=o.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],i)){let u=Cn(o.text,["extensions"],i,{formattingOptions:{}});await ko(n,r,u,o.text)}})}function Vqe(e,t,n,r){Uue(e,t,n,r).catch(console.error)}async function Uue(e,t,n,r){try{let i=FC(t),o=ja.posix.dirname(i),s=ja.posix.basename(i);await vc(e,t,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],o,{print:"off"});return}catch(i){(i==null?void 0:i.code)===1?await Wqe(e.cliHost,t,n,r):(i==null?void 0:i.code)!==2&&await Do(6e4)}return Uue(e,t,n,r)}async function Wqe(e,t,n,r){let{stdout:i}=await t.shellServer.exec(`cat ${FC(t)}`),o=Ge(i)||{};await UO(r,async()=>{var a,u;let s=await RR(e,n,r,t.remoteWorkspaceFolder);if(JSON.stringify(((u=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:u.settings)||{})!==JSON.stringify(o)){let c=Cn(s.text,["settings"],o,{formattingOptions:{}});await ko(n,r,c,s.text)}})}function Gqe(e,t){let n=new Set(e),r=new Set(t);return n.size===r.size&&e.every(i=>r.has(i))}async function que(e,t){let n=DR(e,t.Name),r=await Oue(n);return r||(n=$ue(e,t.Config.Image),r=await Oue(n)),r}async function jue(e,t,n,r,i){let o=ye.file(DR(n,r.Name)),s=await RR(e,t,o,i);return s.exists||(o=ye.file($ue(n,r.Config.Image)),s=await RR(e,t,o,i)),s}function AR(e){return ja.join(e,"nameConfigs")}function DR(e,t){let n=t.startsWith("/")?t.substr(1):t;return ja.join(AR(e),`${Vue(n)}.json`)}async function Hue(e){try{let t=AR(e);return(await hu(t)).filter(r=>r.endsWith(".json")).map(r=>({name:Wue(r.substr(0,r.length-5)),uri:ye.file(ja.join(t,r))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function kR(e){return ja.join(e,"imageConfigs")}function $ue(e,t){return ja.join(kR(e),`${Vue(t)}.json`)}async function Bue(e){try{let t=kR(e);return(await hu(t)).filter(r=>r.endsWith(".json")).map(r=>({image:Wue(r.substr(0,r.length-5)),uri:ye.file(ja.join(t,r))}))}catch(t){if(t&&t.code==="ENOENT")return[];throw t}}function Vue(e){return e.replace(/[:/%]/g,t=>`%${t.charCodeAt(0).toString(16)}`)}function Wue(e){return e.replace(/%([0-9a-f]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}async function Oue(e){if(!await br(e))return;let t=await st(e),n=Ge(t.toString())||{},r=Ky(n);return r.configFilePath=ye.file(e),r}async function RR(e,t,n,r){let i=await t.readDocument(n),o=i||xc,s=Ge(o)||{},a=Ky(s),u=IC({platform:e.platform,configFile:n,env:e.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return u.configFilePath=n,{exists:!!i,text:o,config:u}}async function Gue(e,t,n,r,i,o){return await sd(e)?{...await zqe(e,t,n,r,i,o),isTrusted:!0}:(await Ha.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function zqe(e,t,n,r,i,o){let s,a;return Ha.window.withProgress({location:Ha.ProgressLocation.Notification,title:lv,cancellable:!1},async u=>{var c,l;try{let d=Bd(n),{settings:p}=d,f="containerName"in d?d.containerName:d.containerId;i.log.write(`Setting up container: ${f}\r
`),hS(i.log,d);let m=p&&"host"in p&&p.host||void 0,h=Ma(),v=aa(e.extensionPath,lu,i.log),g=await Ei(r.execServer?{server:r.execServer,authority:d.parentAuthority}:void 0,m,d.cwd,jr,h,e.extensionPath,await yi(),t.product,i.log,Ys,{sshAskpassEnv:v,settings:av()}),y=zs(),x={...await v,...Bm(g,p)},w=da({exec:g.exec,env:{...x,...hn(x)},output:i.log},zs(),Fa()),b={...g.env,...x},S=await Ji({cliHost:g,dockerCLI:y,dockerComposeCLI:w,dockerComposePath:Fa(),env:b,output:i.log},"containerName"in d?d.containerName:d.containerId);if(!S)throw new he({description:gv.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",f),data:{reload:!1,attach:!0}});let R=(l=(c=(Ha.workspace.workspaceFolders||[void 0])[0])==null?void 0:c.uri)==null?void 0:l.path,P=await jue(g,ms,e.globalStoragePath,S,R);if(R&&P.config.workspaceFolder!==R){let I=Cn(P.text,["workspaceFolder"],R,{formattingOptions:{}});await ko(ms,P.config.configFilePath,I,P.text)}s={common:await uv({authority:n,extensionContext:e,sessionStart:i.sessionStart,progress:u,cliHost:g,env:b,cwd:d.cwd||await g.homedir(),wslSettings:h,isLocalContainer:gS(d.parentAuthority,x),telemetry:t,output:i.log,logFilePath:i.logFilePath,allowSystemConfigChange:!1,postCreate:o}),parsedAuthority:d,dockerCLI:y,dockerComposePath:Fa(),dockerComposeCLI:w,dockerEnv:x,workspaceMountConsistencyDefault:yR(),cacheMount:xR()?"volume":"none",configurationTracking:vR(e.workspaceState),userRepositoryConfigurationPaths:[],development:e.extensionMode===Ha.ExtensionMode.Development,ensureNoDisallowedFeatures:(I,A,N)=>iv(I,e.globalState,A,N),useExperimentalLockfile:wR()},await vS(s);let E=jm(d.parentAuthority,p),C=S.Name.startsWith("/")?S.Name.substr(1):S.Name,T=gv.l10n.t("Container {0} ({1}){2}",S.Config.Image,C,E);if(s.common.setWorkspaceName(T),S.State.Status!=="running")throw new he({description:gv.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",S.Config.Image,C,E),params:s.common,containerId:S.Id,dockerParams:s,data:{reload:!1,start:!0}});return await Fue(s,S,P.config,P.exists)}catch(d){let p=d instanceof he?d:new he({description:gv.l10n.t("An error occurred attaching to the container."),originalError:d});throw p.actions=[w5,E5,...Wm,Wd,tl,Vm,Vd],p}}).then(u=>(du(t,"attach","success",i.sessionStart,s==null?void 0:s.common,a,void 0,u.properties),u),u=>{let c=u instanceof he?u:new he({description:gv.l10n.t("An error occurred attaching to the container."),originalError:u});return du(t,"attach","failure",i.sessionStart,s==null?void 0:s.common,a,void 0,c.containerProperties,c),nl(c,"attach",t,!0,i)})}var vt=B(require("vscode")),dt=require("vscode");var sn=B(require("vscode")),$a=require("vscode"),Yue=B(require("path")),Pf=B(require("os")),GE=B(require("fs")),Kue=B(require("child_process")),Xue=B(require("crypto")),Que=B(Uf());async function NR(e){Xqe()?await new f$().downloadAndInstallDocker(e):Jue()?await new m$().downloadAndInstallDocker(e):await sn.env.openExternal(sn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var OR=class{async downloadAndInstallDocker(t){if(await this.preInstallCheck(t)){let r=$a.l10n.t("Downloading Docker installer..."),i=$a.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),o;try{o=await sn.window.withProgress({location:sn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let u=$a.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),c=$a.l10n.t("Download");throw this.handleError(u,c,this.downloadUrl),a}let s=this.getInstallCommand(o);sn.window.showInformationMessage(i);try{await this.install(o,s,t)}catch(a){let u=$a.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),c=$a.l10n.t("Install Instruction");throw this.handleError(u,c,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(t){let n=!0;if(await new h$(t).isDockerInstalledRealTimeCheck()){let r=$a.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),i=$a.l10n.t("Reinstall");n=await sn.window.showInformationMessage(r,{modal:!0},i)!==void 0}return n}async downloadInstaller(){let t=`${Kqe()}.${this.fileExtension}`;return await Jqe(this.downloadUrl,t),t}handleError(t,n,r){sn.window.showErrorMessage(t,{title:n}).then(i=>{i&&sn.env.openExternal(sn.Uri.parse(r))})}},f$=class extends OR{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(n){return`"${n}"`}async install(n,r,i){try{i.write(`Executing command ${r}`),await Zue(r,i)}finally{try{await GE.promises.stat(n),await GE.promises.unlink(n)}catch{}}}},m$=class extends OR{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(n){return`chmod +x '${n}' && open '${n}'`}async install(n){let r=$a.l10n.t("Docker Install"),i=this.getInstallCommand(n);await Qqe(i,r,{addDockerEnv:!1})}},Yqe=0;function Kqe(){return Yue.join(Pf.tmpdir(),`${sn.env.sessionId}-${Yqe++}.tmp`)}function Xqe(){return Pf.platform()==="win32"}function Jue(){return Pf.platform()==="darwin"}async function Qqe(e,t,n){var a,u;let r;n=n??{},n.addDockerEnv&&(r={});let i=new sn.Task({type:"shell"},n.workspaceFolder??sn.TaskScope.Workspace,t,"Docker",new sn.ShellExecution(e,{cwd:n.cwd||((u=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:u.fsPath)||Pf.homedir(),env:r}),[]);n.alwaysRunNew&&(i.definition.idRandomizer=Xue.randomUUID()),n.focus&&(i.presentationOptions={focus:!0});let o=await sn.tasks.executeTask(i);return new Promise((c,l)=>{let d=sn.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(d.dispose(),p.exitCode&&n.rejectOnError&&l(p.exitCode),c())})})}var h$=class{constructor(t){this.output=t;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new v$(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let t=await Po("docker");return await Zue(`${t} -v`,this.output),!0}catch{return!1}}};async function Jqe(e,t){await new Promise((n,r)=>{let i=GE.createWriteStream(t);Que.https.get(e,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${e}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(i),s.on("end",n)}).on("error",r)})}var zue=10*1024;async function Zue(e,t,n,r){let i=Buffer.alloc(n&&n.maxBuffer||zue),o=Buffer.alloc(n&&n.maxBuffer||zue);return await Zqe(e,t,n,r,i,r,o),{stdout:g$(i),stderr:g$(o)}}async function Zqe(e,t,n,r,i,o,s,a){return await new Promise((u,c)=>{let l,d=0,p=0;n=n||{},n.shell=!0,eje(n,t);let f=Kue.spawn(e,n);f.on("error",m=>(l&&(l.dispose(),l=void 0),c(m))),f.on("close",(m,h)=>{if(l&&(l.dispose(),l=void 0),a&&a.isCancellationRequested)return c(new Error("User canceled"));if(m){let v=`Process '${e.length>50?`${e.substring(0,50)}...`:e}' exited with code ${m}`;s&&(v+=`
Error: ${g$(s)}`);let g=new Error(v);return g.code=m,g.signal=h,g.stdErrHandled=o!==null,c(g)}return u()}),n!=null&&n.stdin&&(f.stdin.write(n.stdin),f.stdin.end()),(r||i)&&f.stdout.on("data",m=>{let h=m.toString();r&&r(h,f),i&&(d+=i.write(h,d))}),(o||s)&&f.stderr.on("data",m=>{let h=m.toString();o&&o(h,f),s&&(p+=s.write(h,p))}),a&&(l=a.onCancellationRequested(()=>{f.kill()}))})}function eje(e,t){var n;Jue()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=e==null?void 0:e.env)==null?void 0:n.PATH)||process.env.PATH||"")||(e=e??{},e.env=e.env??{...process.env},t.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),e.env.PATH=`${e.env.PATH}:/usr/local/bin`))}function g$(e){return e.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var v$=class{constructor(t,n){this.valueFactory=t;this._valueLifetime=n;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let t=this._valuePromise===void 0;t&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(t&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&t){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var tle=B(require("os")),nle=B(require("crypto")),er=B(require("vscode")),$r=require("vscode");async function LR(e,t,n){er.commands.executeCommand(nn),await er.window.withProgress({location:er.ProgressLocation.Notification,title:"Installing Docker in WSL"},async r=>{let i={};try{await tje(e,t,r,i)}catch(o){i.outcome="error",i.errorMessage=o==null?void 0:o.message}finally{n.sendTelemetryEvent("installDockerInWSL",i)}})}async function rle(e){if(process.platform!=="win32")return!1;let t=ole();if(e.write(`Windows build number: ${t}`),t<zE)return e.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${zE}.`),!1;let n=await ps(process.cwd(),jr,e);return!await sle(n,t,e)&&t<ile?(e.write(`WSL is not installed and can only be installed automatically since Windows build ${zE}.`),!1):!0}async function tje(e,t,n,r){let i=ole();if(e.write(`Windows build number: ${i}`),i<zE)return r.outcome="wsl2NotAvailableForWindowsBuild",er.window.showInformationMessage($r.l10n.t(`WSL version 2 is required to run Docker and that is only available since Windows build ${zE}.`),{modal:!0});let o=await ps(process.cwd(),jr,e);if(n.report({message:$r.l10n.t("Checking if WSL is installed.")}),!await sle(o,i,e)){if(i<ile)return r.outcome="wslInstallerNotAvailableWithWindowsBuild",er.window.showInformationMessage($r.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});n.report({message:$r.l10n.t("Installing WSL.")}),await rje(o,e,t)}n.report({message:$r.l10n.t("Listing installed WSL distributions.")});let a=await ele(o,e);a.length||(n.report({message:$r.l10n.t("Installing WSL distribution.")}),await oje(o,e,t),a=await ele(o,e));let u=a.find(y=>y.isDefault);if(!u)return r.outcome="noDefaultDistro",er.window.showInformationMessage($r.l10n.t("No default WSL distro found."),{modal:!0});if(u.version!=="2")return r.outcome="defaultDistroNotVersion2",er.window.showInformationMessage($r.l10n.t("Default distro is not using WSL version 2."),{modal:!0});n.report({message:$r.l10n.t("Reading distribution information.")});let c=gc("wsl",["-u","root","-e"],void 0),l=await sr(c,e,void 0,"linux","Host"),{stdout:d}=await l.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=sje(d);if(r.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return r.outcome="distroNotSupported",er.window.showInformationMessage(p.NAME?$r.l10n.t("Unsupported WSL distribution: {0}",p.NAME):$r.l10n.t("Unsupported WSL distribution."),{modal:!0});let f=gc("wsl",["-e"],void 0),m=await sr(f,e,void 0,"linux","Host"),h=await ky(m);if(h==="root")return r.outcome="defaultUserIsRoot",er.window.showInformationMessage($r.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0});let v=await y$(m,"docker")||await y$(l,"docker")||await y$(l,"dockerd");if(v&&await er.window.showInformationMessage($r.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:v},"Ignore")!=="Ignore"){r.outcome="dockerAlreadyInstalled";return}n.report({message:$r.l10n.t("Installing Docker.")}),await l.exec("export DEBIAN_FRONTEND=noninteractive"),await l.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await l.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await l.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await l.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await l.exec(`usermod -aG docker ${h}`),n.report({message:$r.l10n.t("Updating Settings.")});let g=er.workspace.getConfiguration();await g.update(fc("executeInWSL"),!0,er.ConfigurationTarget.Global),await g.update(fc("executeInWSLDistro"),void 0,er.ConfigurationTarget.Global),r.outcome="done"}var zE=18917,ile=20262;function ole(){let e=tle.release(),t=process.platform==="win32"&&e&&/(\d+)\.(\d+)\.(\d+)/g.exec(e);return t&&t.length===4?parseInt(t[3]):0}async function sle(e,t,n){if(e.platform!=="win32")return!1;if(t>=22e3)try{return await ce({exec:e.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=nje(e);if(r){let i=await e.isFile(r);return n.write(`WSL feature installed: ${i} (dll path: ${r})`),i}return n.write("WSL feature installed: false (no dll path)"),!1}}function nje(e){let t=e.env.SystemRoot;if(t){let n=e.env.PROCESSOR_ARCHITEW6432;return e.path.join(t,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function rje(e,t,n){let{wrappedOutput:r,wrappedInput:i}=ale(t,n);try{await pc({ptyExec:e.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath","cmd","-ArgumentList",`'/c "wsl --install & pause"'`,"-Verb","RunAs","-Wait"],output:r,onDidInput:i.event})}finally{i.dispose()}}async function ele(e,t){try{let{stdout:n}=await ce({exec:e.exec,cmd:"wsl",args:["-l","-v"],output:t,print:"continuous"});return ije(n.toString("utf16le"))}catch{return[]}}function ije(e){let t=/\r\n/.test(e)?`\r
`:`
`,n=e.split(t),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,i=[];for(let o=1;o<n.length;o++){let s=r.exec(n[o]);if(s!=null&&s.groups){let a=s.groups.name,u=s.groups.version,c=o===1;i.push({name:a,isDefault:c,version:u})}}return i}async function oje(e,t,n){await ce({exec:e.exec,cmd:"wsl",args:["--set-default-version","2"],output:t,print:"continuous"});let{wrappedOutput:r,wrappedInput:i}=ale(t,n);try{await pc({ptyExec:e.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:i.event})}finally{i.dispose()}}function ale(e,t){let n=t(a=>r.fire(a)),r=new Wa(n),i="",o=nle.randomUUID();return{wrappedOutput:Hi({...e,get dimensions(){return e.dimensions},event:a=>{if(e.event(a),a.type==="text"||a.type==="raw"){i+=a.text;let u=i.replace(vu,"");/Enter new UNIX username:\s*$/.test(u)?r.fire("devcontainers\r"):/(New|Retype new) password:\s*$/.test(u)?r.fire(`${o}\r`):/Installation successful!/.test(u)&&r.fire("exit\r")}}}),wrappedInput:r}}function sje(e){return e.split(`
`).reduce((t,n)=>{let r=n.indexOf("=");return r!==-1&&(t[n.substring(0,r)]=n.substring(r+1)),t},{})}async function y$(e,t){try{let{stdout:n}=await e.exec(`command -v ${t}`);return n.trim()}catch{return}}async function si(e,t,n,r){var s;let i=(s=(vt.workspace.workspaceFolders||[])[0])==null?void 0:s.uri;i&&(i.scheme==="file"&&Ar(i.fsPath)||Em(i))&&(t=await nt(e,t.output,i));let o=await KE(t,r);if(o==="permission")return await vt.window.showErrorMessage(dt.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:dt.l10n.t("Try adding the user to the 'docker' group.")},dt.l10n.t("Documentation"))&&vt.env.openExternal(vt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(o==="ssh")return await vt.window.showErrorMessage(dt.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:dt.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},dt.l10n.t("Show Log"))&&vt.commands.executeCommand(nn),!1;if(o==="daemon")return await vt.window.showErrorMessage(dt.l10n.t("Docker returned an error."),{modal:!0,detail:dt.l10n.t("Make sure the Docker daemon is running.")},dt.l10n.t("Show Log"))&&vt.commands.executeCommand(nn),!1;if(o==="cwd")return await vt.window.showErrorMessage(dt.l10n.t("Workspace folder does not exist.",t.cliHost.cwd),{modal:!0,detail:t.cliHost.cwd},dt.l10n.t("Show Log"))&&vt.commands.executeCommand(nn),!1;if(o==="command"&&(t.cliHost.type==="local"||t.cliHost.type==="wsl")&&await rle(t.output)){let a=dt.l10n.t("Install in WSL");return await vt.window.showErrorMessage(dt.l10n.t("Docker required."),{modal:!0,detail:dt.l10n.t("Dev Containers use Docker to run. ")},a)===a&&(vv(r,"installInWSL","install"),await LR(t.output,n,r)),vv(r,"installInWSL","cancel"),!1}if(!o||o==="command"){if(t.cliHost.type==="wsl")await vt.window.showErrorMessage(dt.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},dt.l10n.t("Read more on docker.com"))&&vt.env.openExternal(vt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let a=dt.l10n.t("Install"),u=dt.l10n.t("License"),c=dt.l10n.t("Ignore"),l=[],d=[];o==="command"&&t.dockerCLI!=="docker"&&d.push(dt.l10n.t("Command not found: '{0}'.",t.dockerCLI)),t.cliHost.type==="local"&&(l.push(a,u),d.push(dt.l10n.t("Check the license for details."))),o===!1&&l.push(c);let p=d.join(" "),f=t.cliHost.type==="remote"?dt.l10n.t("Docker version 17.12.0 or later required on remote host."):dt.l10n.t("Docker version 17.12.0 or later required."),m=await vt.window.showErrorMessage(f,{modal:!0,detail:p},...l);if(m===a)NR(t.output).then(console.error),vv(r,"dockerDesktop","install");else if(m===u)vt.env.openExternal(vt.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),vv(r,"dockerDesktop","license");else if(m===c)return vv(r,"dockerDesktop","ignore"),!0;vv(r,"dockerDesktop","cancel")}return!1}return o==="wsl1"?(await vt.window.showErrorMessage(dt.l10n.t("WSL 2 distro required."),{modal:!0,detail:dt.l10n.t("The WSL distro is running with WSL 1.")},dt.l10n.t("Read more on docker.com"))&&vt.env.openExternal(vt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function vv(e,t,n){e.sendTelemetryEvent("dockerVersionUserChoice",{dialog:t,choice:n})}async function KE(e,t){var s,a,u,c;let n;try{let l=await Ae(e,"version","--format","{{.Server.APIVersion}}");n=l.stdout.toString(),e.output.write(n);let d=l.stderr.toString();d&&e.output.write(pt(d))}catch(l){console.error(l);let d=(s=l==null?void 0:l.stdout)==null?void 0:s.toString();d&&e.output.write(d);let p=l&&(l.stderr?l.stderr.toString():l.message)||"";p&&e.output.write(pt(p)),YE(t,"error",void 0,p);let f=p.toLowerCase();return f.indexOf("permission denied")!==-1?f.indexOf("ssh")!==-1?"ssh":"permission":f.indexOf("enoent")!==-1||f.indexOf("not found")!==-1?await e.cliHost.isFolder(e.cliHost.cwd)?(e.output.write(`CLI host's PATH: ${e.cliHost.env.PATH}`),"command"):"cwd":e.cliHost.type==="wsl"&&((c=(u=(a=l==null?void 0:l.stdout)==null?void 0:a.toString())==null?void 0:u.toLowerCase())==null?void 0:c.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let r=n.trim(),i=Cm(r);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return YE(t,"error",void 0,r),"daemon";if(!i)return YE(t,"unparsed",r),!0;let o=!Sm(i,[1,35]);return!o&&await KO(e)?(YE(t,"podman",r),!0):(YE(t,o?"success":"failure",r),o)}function YE(e,t,n,r){let i={outcome:t};n&&(i.version=n),r&&(i.errorMessage=r),e.sendTelemetryEvent("dockerVersion",i)}async function cle(e){try{let t=la(e,await e.dockerComposeCLI());return await Qy({...t,print:!0},"version","--short"),!0}catch(t){return(t==null?void 0:t.code)==="ENOENT"?await vt.window.showErrorMessage(dt.l10n.t("Docker Compose required"),{modal:!0,detail:e.dockerComposePath!=="docker-compose"?dt.l10n.t("Command not found: '{0}'.",e.dockerComposePath):void 0},dt.l10n.t("Documentation"))&&vt.env.openExternal(vt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await vt.window.showErrorMessage(dt.l10n.t("Docker Compose returned an error."),{modal:!0},dt.l10n.t("Show Log"))&&vt.commands.executeCommand(nn),!1}}var yv=B(require("vscode"));var FR=class{constructor(t){this.fileHost=t}async provideDocumentLinks(t,n){let r=[],i=ld(t.getText());if(!i)return r;let o=fb(i)||{};return o.configFilePath=t.uri,Or(o)&&this._linksForDockerfile(r,o,i,t),"dockerComposeFile"in o&&await this._linksForDockerCompose(r,o,i,t),r}_tryAddDocumentLinkToBucket(t,n,r,i,o){let s=t.positionAt(n),a=t.positionAt(r);s.compareTo(a)!==0&&o.push(new yv.DocumentLink(new yv.Range(s,a),i))}_linksForDockerfile(t,n,r,i){let o=os(r,["build","dockerfile"])||os(r,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,Vu(this.fileHost,n),t)}async _linksForDockerCompose(t,n,r,i){let s=(await Wu(this.fileHost,n)).map(u=>yv.Uri.file(u).path),a=os(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let u=0;u<a.children.length;u++)this._tryAddDocumentLinkToBucket(i,a.children[u].offset+1,a.children[u].offset+a.children[u].length-1,i.uri.with({path:s[u]}),t);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),t)}};var Y=B(require("vscode")),_e=require("vscode"),Ev=B(require("path"));var xv=require("vscode"),ule=B(require("path"));function MR(e){let t=Zu(e);if(t)return`${ule.basename(t)}`;{let n=nS(e);if(n)return n;let r=_c(e);if(r)return pN(r);let i=Xu(e);return i?i.volumeName:e.Config.Image}}function UR(e,t=!1){let n=e.Name.substring(1);return t?`${n} (${x$(e)})`:n}function x$(e){let t="",n=e.State.Status,r=new Date(e.State.StartedAt),i=new Date(e.State.FinishedAt);if(r.getFullYear()>1&&i.getFullYear()>1){let o=new Date,s=new Date(r>i?e.State.StartedAt:e.State.FinishedAt);t=` ${b$(o,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+t}function qR(e){let t=e.Name;if(e.Labels&&wv(e)){let r=HR(e);r&&r.gitUrlInfo.repository!=="unknown"&&(t=r.gitUrlInfo.fullRepositoryName)}return t}function jR(e){let t="";if(e.Labels&&wv(e)){let r=HR(e);if(r&&r.gitUrlInfo.repository!=="unknown"){let i=w$(e),o=E$(e);o?t=`#${o}`:i&&(t=`${i}`)}}return t}function wv(e){let t=e.Labels;if(t){let n=t["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function w$(e){let t=e.Labels;if(t&&wv(e)&&t["vsch.local.repository.branch"])return t["vsch.local.repository.branch"]}function E$(e){let t=e.Labels;if(t&&wv(e)&&t["vsch.local.repository.pullRequestId"])return t["vsch.local.repository.pullRequestId"]}function HR(e){let t=e.Labels;if(t){let n=t["vsch.local.repository.unique"];if(n&&n==="true"){let r=t["vsch.local.repository"];return Zi(r)}}}var lle=1e3,dle=lle*60,ple=dle*60,fle=ple*24,aje=fle*365;function b$(e,t){let n,r=e.getTime()-t.getTime();return(n=Math.round(r/aje))>0?n===1?"1 year":xv.l10n.t("{0} years",n):(n=Math.round(r/fle))>0?n===1?"1 day":xv.l10n.t("{0} days",n):(n=Math.round(r/ple))>0?n===1?"1 hour":xv.l10n.t("{0} hours",n):(n=Math.round(r/dle))>0?n===1?"1 minute":xv.l10n.t("{0} minutes",n):(n=Math.round(r/lle),n===1?"1 second":xv.l10n.t("{0} seconds",n))}var XE=B(require("vscode")),QE=require("vscode");async function mle(e){let t=(await Promise.all([tx,nx,Hm,qm,oS].map(async i=>{let{stdout:o}=await Ae(e,"ps","-a","-q","--filter","status=exited","--filter",`label=${i}`);return o.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(t.length){let o=(await ca(e,t)).map(a=>({label:MR(a),description:UR(a,!0),container:a}));o.sort((a,u)=>a.label.localeCompare(u.label));let s=await XE.window.showQuickPick(o,{canPickMany:!0,placeHolder:QE.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Gu(e)),await Ae(e,"rm",...s.map(a=>a.container.Id)))}let r=await gle(e,n);(!t.length||r==="none")&&await XE.window.showInformationMessage(QE.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function hle(e){await gle(e)==="none"&&await XE.window.showInformationMessage(QE.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function gle(e,t){let n=[...new Set([...t?(await Gu(e)).filter(r=>!t.has(r)&&r!=="vscode"):[],...await Gu(e,[lN]),...await Gu(e,[pS])])];if(n.length){let i=(await Hd(e,n)).map(s=>({label:qR(s),description:jR(s),volume:s}));i.sort((s,a)=>s.label.localeCompare(a.label));let o=await XE.window.showQuickPick(i,{canPickMany:!0,placeHolder:QE.l10n.t("Select unused dev volumes to delete")});if(!o)return"cancel";o.length&&await Ae(e,"volume","rm",...o.map(s=>s.volume.Name))}return n.length?"done":"none"}var vle=_e.l10n.t("Stop Container"),yle=_e.l10n.t("Reopen Folder locally"),xle=_e.l10n.t("Close Workspace");var tr=class{static isGroupItem(t){return!!t&&t.type==="Group"}static isContainerItem(t){return!!t&&t.type==="Container"}static isFolderItem(t){return!!t&&t.type==="Folder"}};var $R=class extends tr{constructor(n,r){super();this.label=n;this.groupType=r;this.type="Group"}async asTreeItem(n,r,i,o){return new Y.TreeItem(this.label,Y.TreeItemCollapsibleState.Expanded)}},bv=class extends tr{constructor(n,r=[],i,o=!1){super();this.container=n;this.folders=r;this.parent=i;this.isDevContainer=o;this.type="Container";this._alreadyCheckedRepository=!1}async asTreeItem(n,r,i,o){let s=new Y.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=UR(this.container);let a=this.getContextBase();s.iconPath=VR(r,dje),s.contextValue="exited"+a;let u=!1;return i&&this.container.Id===i.Id?(s.iconPath=VR(r,lje),s.contextValue="active"+a,u=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(u,s.iconPath instanceof Y.ThemeIcon?s.iconPath:new Y.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Y.TreeItemCollapsibleState.Expanded:Y.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,i){switch(this.container.State.Status){case"created":{i.iconPath=new Y.ThemeIcon("vm"),i.contextValue="exited"+r;break}case"paused":{i.iconPath=new Y.ThemeIcon("vm-outline"),i.contextValue="running"+r;break}case"restarting":{i.iconPath=new Y.ThemeIcon("vm-outline"),i.contextValue="exited"+r;break}case"exited":{i.iconPath=new Y.ThemeIcon("vm"),i.contextValue="exited"+r;break}case"running":{i.iconPath=new Y.ThemeIcon("vm-running"),i.contextValue="running"+r;break}}}getTimeElapsed(n){return n?x$(n):""}getContainerLabel(){return MR(this.container)}getHover(n,r,i){let o=new Y.MarkdownString(void 0,!0);if(o.appendMarkdown(`$(${r.id}) ${i} (${this.container.Name.substr(1)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";o.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=fS(this.container);return s&&o.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?o.appendMarkdown(_e.l10n.t("$(remote) Connected")):o.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),o}get repository(){if(!this._alreadyCheckedRepository){let n=_c(this.container);n&&(this._repository=Zi(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return xi(n,this.container.Id)}},pu=class extends tr{constructor(n,r,i){super();this.container=n;this.folder=r;this.isDevContainer=i;this.type="Folder"}async asTreeItem(n,r,i,o){let s=new Y.TreeItem(Ev.basename(this.folder.path),Y.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=VR(r,fje),s.contextValue="attachedFolder",this.isDevContainer&&!_c(this.container)&&!Xu(this.container)&&(s.contextValue="devFolder"),i&&this.container.Id===i.Id&&o===this.folder.path&&(s.iconPath=VR(r,pje),s.tooltip=_e.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function cje(e,t,n,r){if(!(!Y.env.remoteName||Y.env.remoteName!=="attached-container"&&Y.env.remoteName!=="dev-container"))return wle(e,t,n,r)}function wle(e,t,n,r){Y.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new I$(e,t,r,t.output),o=Y.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},e.subscriptions.push(n.onDidChangeActiveContainer(s=>i.refresh(s))),i}function uje(e,t){let n=[vle];return e&&e.Id===t.Id&&Y.workspace.workspaceFolders&&Y.workspace.workspaceFolders.length>0&&(n.push(xle),Y.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(yle)),n}var _$=class{constructor(t,n){this.dockerParams=t;this.containerId=n;this.writeEmitter=new Y.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:t,env:n,output:r}=this.dockerParams;t.exec({cmd:zs(),args:["logs","-f",this.containerId],env:n,output:r}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(t=>{t.destroy()})}write(t){this.writeEmitter.fire(t.replace(/\n/g,`\r
`))}},BR=class{constructor(t,n,r,i,o,s){this.targetsTreeData=t;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(t){this.dockerParams=t}registerCommands(){let t=[];return t.push(Y.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),t.push(Y.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),t.push(Y.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),t.push(Y.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),t.push(Y.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),t.push(Y.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),t.push(Y.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),t.push(Y.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),t.push(Y.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),t.push(Y.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),t.push(Y.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),t.push(Y.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),t.push(Y.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),t.push(Y.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),t.push(Y.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),t.push(Y.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),t.push(Y.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),t}async commandStopContainer(t){if(!tr.isContainerItem(t))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===t.container.Id?_e.l10n.t("Stop active container? This will disconnect your current window."):_e.l10n.t("Stop {0}?",t.getContainerLabel()),r=await Y.window.showWarningMessage(n,{modal:!0},...uje(this.targetsTreeData.currentContainer,t.container));await this.targetsTreeData.withProgress(t,async()=>{switch(r){case vle:{await KH(this.dockerParams,t.container),t.container=await xi(this.dockerParams,t.container.Id);break}case xle:{await Y.commands.executeCommand("workbench.action.closeFolder");break}case yle:{await Y.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(t){if(!tr.isContainerItem(t))return;let n=await Ji(this.dockerParams,t.container.Id);if(!n)return;let r=_e.l10n.t("Remove"),i=await Y.window.showWarningMessage(_e.l10n.t("Remove this container?"),{modal:!0,detail:_e.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(t.parent,async()=>{i===r&&(await KH(this.dockerParams,t.container),await Qce(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(t.container))})}async tryRemoveVolume(t){let n=fS(t);if(n||(n=r5(t)),n){let r=await ZC(this.dockerParams,n);if((await Gu(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=_e.l10n.t("The container is using a volume with a cloned repository."):s=_e.l10n.t("This is the last container using '{0}'.",n);let a=_e.l10n.t("Remove");await Y.window.showInformationMessage(s,{modal:!0,detail:_e.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await XH(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(t){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(t){tr.isContainerItem(t)&&await this.targetsTreeData.withProgress(t,async()=>{await ER(this.dockerParams,t.container),t.container=await xi(this.dockerParams,t.container.Id)})}async commandRemoveRecentFolder(t){tr.isFolderItem(t)&&(await Y.commands.executeCommand("vscode.removeFromRecentlyOpened",t.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(t){tr.isContainerItem(t)&&(this.detailsTreeData||(this.detailsTreeData=wle(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(t))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(t,n){let r,i;tr.isFolderItem(t)?(i=t,r=t.container):bv.isContainerItem(t)&&(i=t.folders[0],r=t.container),r&&(await ER(this.dockerParams,r),i&&Bd(i.folder.authority)?await JE(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),i.folder.path):await Y.commands.executeCommand("remote-containers.openFolder",i,n))}async commandAttachToContainerInCurrentWindow(t){return this.attachToContainerInternal(t,!1)}async commandAttachToContainerInNewWindow(t){return this.attachToContainerInternal(t,!0)}async attachToContainerInternal(t,n){let r;tr.isContainerItem(t)?r=t.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await ER(this.dockerParams,r),await JE(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(t){let n;(tr.isContainerItem(t)||fu.isImageItem(t)||fu.isVolume(t)||fu.isDevVolume(t))&&(n=await t.inspect(this.dockerParams)),n&&Y.window.showTextDocument(await Y.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Y.env.openExternal(Y.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(t){fu.isDevVolume(t)&&await t.inspectInBasicDevContainer()}async commandCloneInVolume(t){fu.isDevVolume(t)&&await t.cloneRepositoryInVolume()}async commandRemoveVolume(t){fu.isDevVolume(t)&&await t.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let t=[...(r=Y.workspace.workspaceFolders)!=null&&r.length?[{label:_e.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:_e.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:_e.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:_e.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:_e.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:_e.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:_e.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Y.window.showQuickPick(t,{placeHolder:_e.l10n.t("Select an action to create a dev container")});if(n)return Y.commands.executeCommand(n.command)}async commandShowContainerLog(t){if(!tr.isContainerItem(t))return;let n=new _$(this.dockerParams,t.container.Id);Y.window.createTerminal({name:t.container.Config.Image,pty:n}).show()}};function Ele(e,t,n,r){Y.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=new C$(e,t,s,n,r),o=Y.window.createTreeView("targetsContainers",{treeDataProvider:i});i.setMessage=a=>o.message=a,e.subscriptions.push(Y.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await i.getDockerParams(!0),i.refresh(void 0)))),e.subscriptions.push(Y.commands.registerCommand("remote-containers.newContainer",BR.commandNewContainer)),e.subscriptions.push(Y.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await i.getDockerParams(!0);a&&await hle(a)}));function s(a){let u=cje(e,a,i,n),c=new R$(e,n,r),l=Y.window.createTreeView("devVolumes",{treeDataProvider:c});e.subscriptions.push(l);let d=new BR(i,u,c,a,e,n);e.subscriptions.push(...d.registerCommands()),e.subscriptions.push(WH(e,n.product)(async()=>{i.refresh(void 0),c.refresh(void 0);let p=await nt(e,r);u&&u.updateDockerParameters(p),d.updateDockerParameters(p)}))}}var C$=class{constructor(t,n,r,i,o){this.context=t;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new Y.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new Y.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(t){this.setTreeMessage=t}get currentContainer(){return this._currentContainer}async getDockerParams(t=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=aa(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,lu(n,!1)),this.output));try{this.dockerParams=await nt(this.context,this.output,void 0,void 0,t?void 0:this.passiveSSHAskpassEnv,!1),await KE(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(t){try{let n=JSON.parse(t.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let i=this.containerItems.get(n.Actor.ID);this.dockerParams&&i?(async()=>(i.container=await xi(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)))():this._onDidChangeTreeData.fire(i);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await zO(t,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(t){return t.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(t){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==t)&&(this.needsDockerStartOrInstallContext=t,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Y.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Y.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(t){if(this.hasContainersContext===void 0||this.hasContainersContext!==t){this.hasContainersContext=t;let n=Y.workspace.workspaceFolders&&Y.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Y.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(t){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(t){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(t);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new $R(_e.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new $R(_e.l10n.t("Other Containers"),2)),n}async getChildDevContainer(t,n){let r=await this.getWorkspaceFolderFromContainer(t),i=r?[new pu(t,r,!0)]:[],o=Zu(t);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new pu(t,a,!1))):o&&this.recentAttachEntries.has(t.Id)?i.push(...this.recentAttachEntries.get(t.Id).map(a=>new pu(t,a,!1))):(o=_c(t))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new pu(t,a,!1))):(o=nN(Xu(t)))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new pu(t,a,!1))):o===void 0&&this.recentDevComposeEntries.has(t.Id)&&i.push(...this.recentDevComposeEntries.get(t.Id).map(a=>new pu(t,a,!1)));let s=new bv(t,i,n,!0);return this.setContainerItems(s),s}setContainerItems(t){this.containerItems.set(t.container.Id,t),this._currentContainer&&t.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(t)}async getChildContainers(t){let n;if(t.groupType===0){let r=this.devContainers.map(async i=>this.getChildDevContainer(i,t));r.push(...this.attachContainers.map(async i=>{let o=new bv(i,this.recentAttachEntries.get(i.Id).map(s=>new pu(i,s,!1)),t);return this.setContainerItems(o),o})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let i=new bv(r,[],t);return this.setContainerItems(i),i});return n.sort((r,i)=>r.getContainerLabel().localeCompare(i.getContainerLabel()))}getChildFolders(t){return t.folders&&t.folders.length>1?t.folders:[]}async getChildItems(t){if(t===void 0){let n=await wc(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await ca(this.dockerParams,n);return this.getChildGroups(r)}else{if(tr.isGroupItem(t))return this.getChildContainers(t);if(tr.isContainerItem(t))return this.getChildFolders(t)}return[]}async getChildren(t){return await this.action,await this.getDockerOrShowMessage(t)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(t)):[]}async refresh(t){t===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(t)}async setCurrents(){let t=Y.workspace.workspaceFolders,n;if(this.dockerParams){if(t&&t.length>0){let r=this.resolverResults.get(t[0].uri.authority);r&&r.dockerContainerId&&(n=await Ji(this.dockerParams,r.dockerContainerId),this.currentFolder=t[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await Ji(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(t){if(Zu(t)){this.devContainers.push(t);return}else if(_c(t)){this.devContainers.push(t);return}else if(Xu(t)){this.devContainers.push(t);return}else if(nS(t)&&this.recentDevComposeEntries.has(t.Id)){this.devContainers.push(t);return}else if(this.recentAttachEntries.has(t.Id)){this.attachContainers.push(t);return}this.otherContainers.push(t)}async setContainerTypes(t){return await this.setRecentEntries(t),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,t.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(t){let{cliHost:n,dockerCLI:r,dockerComposePath:i}=this.dockerParams,o=At(n.path,t),s=await Zy(n,o,od()),a={cliHost:n,dockerPath:r,dockerComposePath:i,appRoot:Y.env.appRoot,extensionPath:this.context.extensionPath,package:await Kn(this.context.extensionPath),output:this.output},u=s&&await HE(a,o.rootFolderPath,s);if(u&&Or(u.configuration)){let c=Qn(this.dockerParams.env);return Y.Uri.parse(ax(n.authority,t,u.workspace.workspaceFolder,c),!0)}}async getWorkspaceFolderFromContainer(t){let n=Zu(t);if(n)return this.getWorkspaceFolderFromHostWorkspace(n);{let r=_c(t),i=fS(t),o=i5(t),s=this.dockerParams;if(r){let u=Qn(s.env);return Y.Uri.parse(ys(s.cliHost.authority,r,i,o,!1,u,void 0))}let a=Xu(t);if(a){let u=Qn(s.env);return Y.Uri.parse(ys(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,u,void 0))}}}async getWorkspaceFolderFromHostPath(t){let n=this.dockerParams.cliHost,r=await f5(n,t,this.output),i=m5(n,r,t),o=Qn(this.dockerParams.env);return Y.Uri.parse(ax(n.authority,t,i,o),!0)}getWorkspaceFolderFromRepository(t,n,r){let i=this.dockerParams,o=Qn(i.env);return Y.Uri.parse(ys(i.cliHost.authority,t,n,r,!1,o,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(t,n){let r=this.dockerParams,i=Qn(r.env);return Y.Uri.parse(ys(r.cliHost.authority,void 0,t,n,!1,i,void 0),!0)}async findComposeTargetContainer(t,n){var r;return(r=n.find(i=>Zu(i)===t))==null?void 0:r.Id}trySetEntryWithAttachAuthority(t,n,r){let i;if("containerName"in n){let o=r.find(s=>s.Name===n.containerName);o&&(i=o.Id)}else i=n.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(t):this.recentAttachEntries.set(i,[t]))}async trySetEntryWithDevAuthority(t,n,r,i){let o=n.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),i[o]=s),s.path!==t.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(t):this.recentAttachDevContainerEntries.set(n.hostPath,[t]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(t):a&&this.recentDevComposeEntries.set(a,[t])}}trySetEntryWithRepoAuthority(t,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==t.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(t):this.recentAttachDevContainerEntries.set(n.repositoryPath,[t]))}trySetEntryWithDevContainerInVolumeAuthority(t,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==t.path){let i=nN(n);this.recentAttachDevContainerEntries.has(i)?this.recentAttachDevContainerEntries.get(i).push(t):this.recentAttachDevContainerEntries.set(i,[t])}}trySetEntryWithVolumeAuthority(t,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(t):this.recentAttachEntries.set(r,[t]))}async trySetEntry(t,n,r){if(!t||!t.folderUri&&!t.workspace.configPath)return;let i=t.folderUri??t.workspace.configPath,o=Bd(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,n);else{let s=zr(i.authority);s&&(In(s)?await this.trySetEntryWithDevAuthority(i,s,n,r):Gr(s)?this.trySetEntryWithRepoAuthority(i,s):Ec(s)?this.trySetEntryWithDevContainerInVolumeAuthority(i,s):this.trySetEntryWithVolumeAuthority(i,s))}}async setRecentEntries(t){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Y.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let i of n.workspaces)await this.trySetEntry(i,t,r)}}withProgress(t,n){return this.action=this.action.then(()=>n()),this.refresh(t)}};var fu=class{constructor(t){this.label=t;this.type="Default"}static isDetailItem(t){return!!t&&t.label!==void 0&&t.type!==void 0}static isImageItem(t){return!!t&&t.type==="Image"}static isVolume(t){return!!t&&t.type==="Volume"}static isDevVolume(t){return!!t&&t.type==="DevVolume"}},S$=class{constructor(t){this.detail=t;this.type="Image";this.context="image";this.label=_e.l10n.t("Image")}inspect(t){return RK(t,this.detail)}},T$=class{constructor(t,n,r){this.label=t;this.detail=n;this.volumeDetails=r;this.type="Volume";this.context="volume"}async inspect(t){return ZC(t,this.volumeDetails)}},I$=class{constructor(t,n,r,i){this.context=t;this.dockerParams=n;this.telemetry=r;this.output=i;this._onDidChangeTreeData=new Y.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(t){this.dockerParams=t}set setTitle(t){this.setTreeTitle=t}get container(){return this._container?this._container.container:void 0}getTreeItem(t){let n=new Y.TreeItem(t.label,Array.isArray(t.detail)&&t.detail.length>0?Y.TreeItemCollapsibleState.Expanded:Y.TreeItemCollapsibleState.None);return n.tooltip=t.label,t.detail&&!Array.isArray(t.detail)&&(n.description=t.detail,n.tooltip+=` ${n.description}`),n.contextValue=t.context,n.command=t.command,n}async getAttributes(t,n,r){let i=[];n&&i.push({label:_e.l10n.t("Workspace"),detail:n});let o=_c(t.container);o&&i.push({label:_e.l10n.t("Repository"),detail:o});let s=Xu(t.container);return s&&(i.push({label:_e.l10n.t("Volume"),detail:s.volumeName}),i.push({label:_e.l10n.t("Folder"),detail:s.folder})),i.push({label:_e.l10n.t("Name"),detail:t.container.Name}),i.push(new S$(t.container.Config.Image)),r&&i.push({label:_e.l10n.t("Configuration"),detail:r,command:{title:_e.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),i}async getMounts(t){let n=[];return t&&t.Mounts.forEach(r=>{if(r.Type==="volume"){let i=r.Name,o=new T$(_e.l10n.t("Volume"),i,i),s={label:_e.l10n.t("Destination"),detail:r.Destination};n.push({label:_e.l10n.t("Volume mount"),detail:[o,s]})}else if(r.Type==="bind"){let i={label:_e.l10n.t("Source"),detail:r.Source},o={label:_e.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:_e.l10n.t("I/O performance"),detail:_e.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:_e.l10n.t("Bind mount"),detail:[i,o,...s]})}}),n}async getChildrenFromRoot(t){let n=[],r=Zu(t.container),i;if(this.dockerParams&&r){let a=await Zy(this.dockerParams.cliHost,At(this.dockerParams.cliHost.path,r),od());a&&(i=xe(a,this.dockerParams.cliHost.platform))}n.push({label:_e.l10n.t("Attributes"),detail:await this.getAttributes(t,r,i),type:"Title"});let o;this.dockerParams&&(o=await xi(this.dockerParams,t.container.Id));let s=await this.getMounts(o);return s.length>0&&n.push({label:_e.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let t=!0;try{(this.dockerParams?await xi(this.dockerParams,this._container.container.Id):void 0)===void 0&&(t=!1)}catch{t=!1}return t||(this._container=void 0,this.setTreeTitle(_e.l10n.t("Details (Containers)"))),t}async getChildren(t){if(this._container===void 0)return[];let n=[];return t===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(t.detail)&&n.push(...t.detail),n}async refresh(t){this.dockerParams=await nt(this.context,this.output),await KE(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=t||this._container,this._onDidChangeTreeData.fire(void 0)}},P$=class extends fu{constructor(n){super(n.Name);this.type="DevVolume";this.volumeDetails=n,this.createdAt=void 0}async asTreeItem(){let n=this.getLabel(),r=new Y.TreeItem(n,Y.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){return wv(this.volumeDetails)}getLabel(){return qR(this.volumeDetails)}getDescription(){return jR(this.volumeDetails)}getBranchName(){return w$(this.volumeDetails)}getPullRequestId(){return E$(this.volumeDetails)}getRepository(){return HR(this.volumeDetails)}get iconPath(){return new Y.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let n="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let i=new Date,o=new Date(this.volumeDetails.CreatedAt);n=_e.l10n.t("{0} ago",b$(i,o))}return this.createdAt=n,n}async inspect(n){return ZC(n,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Y.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Y.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(n){if(!((await Gu(n)).indexOf(this.volumeDetails.Name)>=0)){await Y.window.showInformationMessage(_e.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=_e.l10n.t("Remove");await Y.window.showInformationMessage(_e.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await XH(n,this.volumeDetails.Name)}},R$=class{constructor(t,n,r){this.context=t;this.telemetry=n;this.output=r;this._onDidChangeTreeData=new Y.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(t){return t.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await nt(this.context,this.output,void 0,void 0),await KE(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(t){await Y.commands.executeCommand("setContext","remote-containers:noDevVolumes",t)}async getDockerOrShowMessage(t){return!(!this.dockerParams&&(t===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(t){if(!await this.getDockerOrShowMessage(t))return[];let n=await nt(this.context,this.output),r=await wi(n),i=await Hd(n,r),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,u)=>{let c=new Date(a.CreatedAt);return new Date(u.CreatedAt).getTime()-c.getTime()}),s.map(a=>new P$(a))}async resolveTreeItem(t,n){let r=await nt(this.context,this.output),i=await this.getAssociatedContainers(r,n),o=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),u=n.getPullRequestId(),c=n.getTimeElapsed();return i.length>0?t.tooltip=this.renderMarkdown(o,s,a,u,c,i.join(", ")):t.tooltip=this.renderMarkdown(o,s,a,u,c,_e.l10n.t("None")),t}async getAssociatedContainers(t,n){let r=[],i=await wc(t,!0),o=await ca(t,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(s.Name.substring(1));return r}renderMarkdown(t,n,r,i,o,s){let a=new Y.MarkdownString(void 0,!0);if(n){let u=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",c=n.gitUrlInfo.repositoryUrl;c.startsWith("http")?(c=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${u} [${c}](${c})
`)):a.appendMarkdown(`${u} ${c})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${c}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${c}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${t}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(t){try{let n=JSON.parse(t.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let t=await this.getDockerParams();if(t)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await zO(t,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(t){t===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(t)}},lje="vm-active",dje="vm-default",pje="folder-active",fje="folder";function VR(e,t){let n=`${t}.svg`;return{light:Y.Uri.file(e.asAbsolutePath(Ev.join("resources","light",n))),dark:Y.Uri.file(e.asAbsolutePath(Ev.join("resources","dark",n))),highContrast:Y.Uri.file(e.asAbsolutePath(Ev.join("resources","highContrast",n)))}}var q$=require("util");var rs=B(require("vscode")),cd=require("vscode");async function ble(e,t,n={},r={}){let i=gc(t[0],t.slice(1),void 0),o=await NY(t[0],t.slice(1),void 0,e.loadNativeModule),s=await LC({params:e,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:i,remotePtyExec:o,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:a,connectionToken:u,remoteEnv:c,serverDownloaded:l}=await ju(e,s,n,r);return{params:e,properties:s,config:void 0,resolvedAuthority:{host:zu,port:a,connectionToken:u,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function _le(e,t,n){var r,i,o;if(await sd(e))if(n&&n.name){let s=["get","pod",n.name,"-o","json"];n.namespace&&s.push("--namespace",n.namespace);let{cliHost:a,env:u,output:c}=t,l=(await ce({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:u,output:c})).stdout.toString().trim(),p=(await ce({exec:a.exec,cmd:"kubectl",args:s,env:u,output:c})).stdout.toString(),f=JSON.parse(p),m=((r=f.spec)==null?void 0:r.containers)||[];if(!m.length){t.output.write(`No containers found. Pod details:
${p}`),await rs.window.showErrorMessage(cd.l10n.t("No containers found."),{modal:!0},cd.l10n.t("Show Log"))&&rs.commands.executeCommand(nn);return}let h=m.length>1?(i=await rs.window.showQuickPick(m.map(v=>({label:v.name,detail:v.image,container:v})),{placeHolder:cd.l10n.t("Select container")}))==null?void 0:i.container:m[0];if(h){let v=((o=f.metadata)==null?void 0:o.namespace)||n.namespace,g={remoteAuthority:hje({context:l,podname:n.name,namespace:v,name:h.name,image:h.image})};/\d$/.test(e.extensionPath)||(g.reuseWindow=!0),await rs.commands.executeCommand("vscode.newWindow",g)}}else t.output.write(`No Pod name found. Pod object:
${JSON.stringify(n,void 0,"  ")}`),await rs.window.showErrorMessage(cd.l10n.t("No Pod name found."),{modal:!0},cd.l10n.t("Show Log"))&&rs.commands.executeCommand(nn)}async function Cle(e,t,n,r,i,o){return await sd(e)?{...await mje(e,t,n,r,i,o),isTrusted:!0}:(await rs.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function mje(e,t,n,r,i,o){let s;return rs.window.withProgress({location:rs.ProgressLocation.Notification,title:lv,cancellable:!1},async a=>{try{let u=gje(n),c=process.cwd(),l=Ma(),d=await Ei(void 0,void 0,c,jr,l,e.extensionPath,await yi(),t.product,i.log,Ys);s=await uv({authority:n,extensionContext:e,sessionStart:i.sessionStart,progress:a,cliHost:d,env:d.env,cwd:c,wslSettings:l,isLocalContainer:!0,telemetry:t,output:i.log,logFilePath:i.logFilePath,allowSystemConfigChange:!1,postCreate:o}),s.setWorkspaceName(`${u.name} in ${u.podname} (${u.image})`);let p=["kubectl","exec","-it",u.podname];return u.context&&p.push("--context",u.context),u.namespace&&p.push("--namespace",u.namespace),p.push("--container",u.name,"--"),await ble(s,p)}catch(u){let c=u instanceof he?u:new he({description:cd.l10n.t("An error occurred attaching to the container."),originalError:u});throw c.actions=[...Wm,Wd,tl,Vm,Vd],c}}).then(a=>(du(t,"k8s-container","success",i.sessionStart,s,void 0,void 0,a.properties),a),a=>{let u=a instanceof he?a:new he({description:cd.l10n.t("An error occurred attaching to the container."),originalError:a});return du(t,"k8s-container","failure",i.sessionStart,s,void 0,void 0,u.containerProperties,u),nl(u,"k8s-container",t,!0,i)})}function hje(e){let t=[];for(let n in e){let r=e[n];r&&t.push(`${n}=${encodeURIComponent(r)}`)}return`k8s-container+${t.join("+")}`}function gje(e){return e.substr(e.indexOf("+")+1).split("+").reduce((t,n)=>{let r=n.indexOf("=");return r!==-1&&(t[n.substr(0,r)]=decodeURIComponent(n.substr(r+1))),t},{})}var It=B(require("vscode")),Ft=require("vscode"),Af=B(require("fs")),_v=B(require("os")),Rf=B(require("path")),WR=require("child_process"),Cv=require("util");function GR(e){switch(e.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${e.quality}`}}async function Sle(e,t){let n=e.globalStorageUri,r=Ki.joinPath(n,"cli-bin");await It.workspace.fs.createDirectory(r);let i="";try{i=(await It.workspace.fs.readFile(Ki.joinPath(r,"remote-containers-path"))).toString()}catch(c){if((c==null?void 0:c.code)!=="FileNotFound")return}if(i===e.extensionPath)return;let o=Ki.joinPath(e.extensionUri,"dev-containers-user-cli","bin"),s=GR(t),a=`devcontainer${s}`,u=[{source:"devcontainer",destination:a},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let c of u)await It.workspace.fs.copy(Ki.joinPath(o,c.source),Ki.joinPath(r,c.destination),{overwrite:!0});process.platform!=="win32"&&await Af.promises.chmod(Ki.joinPath(r,a).fsPath,493),await It.workspace.fs.writeFile(Ki.joinPath(r,"vscode-app-root"),Buffer.from(It.env.appRoot,"utf-8")),await It.workspace.fs.writeFile(Ki.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")),await It.workspace.fs.writeFile(Ki.joinPath(r,"vscode-quality"),Buffer.from(t.quality??"","utf-8")),await It.workspace.fs.writeFile(Ki.joinPath(r,"vscode-machine-id"),Buffer.from(It.env.machineId,"utf-8")),await It.workspace.fs.writeFile(Ki.joinPath(r,"remote-containers-path"),Buffer.from(e.extensionPath,"utf-8"))}async function vje(e,t){let n=GR(t),r="";try{let i=await Po("powershell.exe");if(r=(await(0,Cv.promisify)(WR.exec)(`"${i}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),r.indexOf(e)>=0)return await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:Ft.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=Ft.l10n.t("Add"),a=Ft.l10n.t("Copy CLI Path");switch(await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let c=(0,Cv.promisify)(WR.exec)(`"${i}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${e}', 'User')`),l=It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:Ft.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([c,l]);break;case a:await It.env.clipboard.writeText(e),await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ft.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function yje(e,t){let r=(process.env.PATH??"").split(":"),i=[Rf.join(_v.homedir(),"bin"),Rf.join(_v.homedir(),".local/bin")],o="/usr/local/bin";_v.platform()==="darwin"&&i.push(o);let s=(0,Cv.promisify)(Af.stat);for(let a of i){if(r.findIndex(m=>m===a)<0)continue;try{await s(a)}catch{continue}let u=GR(t),c=Rf.join(a,`devcontainer${u}`);try{let m=await s(c);return console.log(m),await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:Ft.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${u}`)}),!0}catch(m){if((m==null?void 0:m.code)!=="ENOENT")return!1}let l=Ft.l10n.t("Create"),d=Ft.l10n.t("Copy CLI Path"),p=await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:Ft.l10n.t("Create a symlink in {0}?",a),modal:!0},l,d),f=Rf.join(e,`devcontainer${u}`);switch(p){case l:if(a===o){if(!await xje(f,c))break}else await(0,Cv.promisify)(Af.symlink)(f,c);await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:Ft.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${u}`)});break;case d:await It.env.clipboard.writeText(e),await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ft.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${u}`)});break}return!0}return!1}async function xje(e,t){try{return await Af.promises.symlink(e,t),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=Ft.l10n.t("OK");if(await It.window.showInformationMessage(Ft.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await Po("osascript")}" -e "do shell script \\"mkdir -p ${Rf.dirname(t)} && ln -sf '${e}' '${t}'\\" with administrator privileges"`;return await(0,Cv.promisify)(WR.exec)(s),!0}return!1}}async function Tle(e,t){let n=e.globalStorageUri,r=Ki.joinPath(n,"cli-bin").fsPath;switch(_v.platform()){case"win32":if(await vje(r,t))return;break;case"darwin":case"linux":if(await yje(r,t))return;break}let i=Ft.l10n.t("Copy CLI Path");if(await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},i)===i){await It.env.clipboard.writeText(r);let s=GR(t);await It.window.showInformationMessage(Ft.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ft.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var ai=B(require("vscode")),wr=require("vscode"),A$=B(require("path"));var wje=wr.l10n.t("Select Dev Container Configuration"),Eje=wr.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),Ile="alpine:3.16.3";async function Ple(e,t,n){let r=await bje(e,t,n);if(!r)return;let{volumeAndFolderName:i}=r,o=Qn(t.env),s=ai.Uri.parse(ys(t.cliHost.authority,void 0,i,i,!1,o,void 0));await If({uri:s,type:"folder",label:wr.l10n.t("{0} [Dev Container]",i)}),await ai.commands.executeCommand("vscode.openFolder",s)}async function bje(e,t,n){let{output:r}=t;Ae(t,"pull",Ile);let i=await o$({telemetry:n,output:r,existingFilesLearnMoreLink:Cf,predefinedDefinitionsLearnMoreLink:Sf,openConfigurationCommandId:_f,showLogCommandId:nn},wje,!0);i.askForTrust=!0;let o=await wi(t),s=async()=>{i.skipOptions=!0;let l=await CR(i,void 0,void 0);if(l==="back"||!l)return;let d=l.metadata.template;if(ZH.indexOf(d.owner)===-1){let p=`@${d.owner}`,f={label:wr.l10n.t("Trust {0}",p),description:wr.l10n.t("from GitHub"),buttons:[{iconPath:new ai.ThemeIcon("info"),tooltip:wr.l10n.t("Open Documentation")}]},m={label:wr.l10n.t("Back")},h={label:wr.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{ai.env.openExternal(ai.Uri.parse(d.documentationURL))}),g=await go(i.quickPick,[f,m,h],wr.l10n.t("The {0} is from the {1} GitHub owner/organization.",d.name,p),void 0,void 0,!0);if(v.dispose(),!g||g===h)return;if(g==="back"||g===m)return s()}return Rle(i,l,o,_je(l.id,o),s)},a=await s();if(!a){i.quickPick.dispose();return}let{selectedTemplate:u,volumeName:c}=a;return ai.window.withProgress({location:ai.ProgressLocation.Notification,title:Eje,cancellable:!1},async()=>{let l;try{await Nm(t,c,[`${pS}=true`]);let{stdout:d}=await Ae(t,...Cje(c,$d()));l=d.toString().trim();let p=A$.posix.join($d(),c),f=gs(t,l,"root"),m=await ua(t,l,"root",jr),h=Qi("container",p,{},f,m,()=>{throw new Error("not implemented")},"node",r);await h.mkdirp(p);let v=At(A$.posix,p),g=await r$(i,h,v,u);return i.quickPick.hide(),g?{volumeAndFolderName:c}:void 0}finally{if(l)try{await Ae(t,"rm","-f",l)}catch{}}})}function _je(e,t){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(e)||[])[1]||"devcontainer",i=0;do n=`${r}${i++?`-${i}`:""}`;while(t.indexOf(n)!==-1);return n}async function Rle(e,t,n,r,i){let{quickPick:o}=e;o.placeholder=wr.l10n.t("Dev container name"),o.selectedItems=[],o.value=r,o.buttons=[ai.QuickInputButtons.Back];let s={label:wr.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function u(){a=!1,o.items=[{label:wr.l10n.t("Create Dev Container"),description:o.value,alwaysShow:!0},s]}function c(f){a=!0,o.items=[{label:f,alwaysShow:!0}]}u();let l=[],d=await new Promise(f=>{l=[o.onDidAccept(()=>{o.value?a||f({volumeName:o.value,options:o.selectedItems[0]===s}):c(wr.l10n.t("The name cannot be empty."))}),o.onDidHide(()=>f(void 0)),o.onDidChangeValue(m=>{n.indexOf(m)!==-1?c(wr.l10n.t("A Docker volume with this name already exists.")):m&&!/^[a-zA-Z0-9]/.test(m)?c(wr.l10n.t("Only alphanumeric characters are allowed as the first character.")):m&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(m)?c(wr.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):u()}),o.onDidTriggerButton(()=>f("back"))]});if(l.forEach(f=>f.dispose()),!d)return;if(d==="back")return i();let{volumeName:p}=d;if(d.options){let m=await(async()=>{e.skipOptions=!1;let h=await fv(e,t.metadata.template,async()=>{let v=await Rle(e,t,n,p,i);if(v)return p=v.volumeName,v.selectedTemplate});if(!(h==="back"||!h))return h})();if(!m)return;t=m}return o.busy=!0,o.enabled=!1,{volumeName:p,selectedTemplate:t}}function Cje(e,t){return["run","-d","--mount",`type=volume,src=${e},dst=${t}`,Ile,"sleep","infinity"]}O.l10n.bundle&&Nle.config({contents:O.l10n.bundle});var N$=class{constructor(t,n,r){this.context=t;this.output=n;this.telemetry=r}handleUri(t){switch(t.path){case"/cloneInVolume":this.cloneInVolume(t)}}async cloneInVolume(t){let n=Fle.parse(t.query);if(!n.url){O.window.showErrorMessage(te.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",t.toString()),{modal:!0});return}let r;Array.isArray(n.url)?r=n.url[0]:r=n.url;let i=await nt(this.context,this.output.log);if(!await si(this.context,i,this.output.onDidInput,this.telemetry))return;if(await Pk(i.cliHost,r,await gR(this.output.log),this.output.log)===!1){O.commands.executeCommand(nn),await O.window.showErrorMessage(te.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await O.commands.executeCommand(mR,n.url)}};async function Tje(e){var P;sue();let t=new Date;oue(e);let n=await Kn(e.extensionPath),r=await Iy(O.env.appRoot);aue(e,r);let i=iue(e,n,r),o=`Dev Containers ${n.version} in VS Code ${O.version} (${r.commit||"out-of-source"}).`,s=new ME(e.logPath,t,o);e.subscriptions.push(O.commands.registerCommand(nn,()=>s.show()));let{channel:a,postCreate:u}=rue(s.log,t);e.subscriptions.push(O.commands.registerCommand(VH,()=>a.show()));let c,l=new Promise(E=>c=E);e.subscriptions.push(O.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:hR(s,u,oi.results,c,async(E,C,T,I)=>kue(e,i,E,C,oi.onRemoveOnShutdownChanged,T,I)),async getCanonicalURI(E){let C=zr(E.authority);if(C&&In(C)){let{hostPath:T,settings:I}=C;return Ar(T)?wm(T,s.log):Mu(I)?My(I.host,T):Uu(C.parentAuthority)?el(C.parentAuthority,T):Cc(C.parentAuthority)?el(C.parentAuthority,T):O.Uri.file(T)}return E}}),O.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:hR(s,u,oi.results,c,async(E,C,T,I)=>Gue(e,i,E,C,T,I))}),O.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:hR(s,u,oi.results,c,async(E,C,T,I)=>Cle(e,i,E,C,T,I))}),O.window.registerUriHandler(new N$(e,s,i)));let d=async(E,C,T)=>{let I=await nt(e,s.log);if(!await si(e,I,s.onDidInput,i))return;let A;if(tr.isFolderItem(E)?A=E.folder:A=E,A.scheme==="vscode-remote"&&A.authority.startsWith("dev-container+"))return O.commands.executeCommand("vscode.openFolder",A,T);{let N=At(I.cliHost.path,xe(A,I.cliHost.platform));return ZE(e,N,I,s.onDidInput,i,C,T)}};e.subscriptions.push(O.commands.registerCommand("remote-containers.openFolder",async(E,C)=>E?d(E,!1,C):D$(e,!0,i,!1,s.log,s.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.openWorkspace",async(E,C)=>E?d(E,!1,C):D$(e,!1,i,!1,s.log,s.onDidInput))),e.subscriptions.push(O.commands.registerCommand(Gce,async E=>Sv(e,i,s.log,s.onDidInput,E))),e.subscriptions.push(O.commands.registerCommand(mR,async E=>Sv(e,i,s.log,s.onDidInput,E,No))),e.subscriptions.push(O.commands.registerCommand(Yce,async()=>{var F,L,M;let C=(await((F=O.extensions.getExtension("vscode.git"))==null?void 0:F.activate())).getAPI(1);if(C.repositories.length===0)return;let T=C.repositories.reduce((j,W)=>{let k=W.state.remotes.find(H=>{var $,V;return H.name===((V=($=W.state.HEAD)==null?void 0:$.upstream)==null?void 0:V.remote)});return k!=null&&k.pushUrl&&j.push({repository:W,label:k.pushUrl}),j},[]),I=T[0];if(T.length>1){let j=await O.window.showQuickPick(T,{canPickMany:!1,placeHolder:te.l10n.t("Choose which repository to clone")});if(j===void 0)return;I=j}let A=I.label,N=(M=(L=I.repository.state.HEAD)==null?void 0:L.upstream)==null?void 0:M.name;return Sv(e,i,s.log,s.onDidInput,{url:A,branch:N},No)})),e.subscriptions.push(O.commands.registerCommand(zce,async()=>{var N;let E=O.workspace.workspaceFolders;if(!E)return;let C=E[0].uri;if(E.length>1){let F=await O.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:te.l10n.t("Choose a repository to clone in a Container Volume")});C=F==null?void 0:F[0]}let T,I;try{let F=await O.commands.executeCommand("remoteHub.api.getRepositoryContext",C);if(!F)throw new Error("Unable to get active repository context.");T=F.name,I=F.ref}catch{let M=await(await((N=O.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:N.activate())).getMetadata(C);if(!M)throw new Error("Unable to get active repository context.");T=`${M.repo.owner}/${M.repo.name}`,I=(await M.getRevision()).name}let A=`https://github.com/${T}`;return I&&(A=`${A}/tree/${I}`),Sv(e,i,s.log,s.onDidInput,A,No)})),e.subscriptions.push(O.commands.registerCommand(Kce,async E=>Lje(e,i,s.log,s.onDidInput,E,No))),e.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolume",async(E,C,T)=>jle(e,E,C,T,i,s.log,s.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>Fje(e,E,i,s.log,s.onDidInput))),e.subscriptions.push(O.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>Sv(e,i,s.log,s.onDidInput,void 0,E))),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await O.workspace.requestWorkspaceTrust({message:qE}))return;let T=await nt(e,s.log);if(!await si(e,T,s.onDidInput,i))return;let I=O.workspace.workspaceFile;if(I&&I.scheme==="untitled"){await lR();return}let A=O.workspace.workspaceFolders;if(!I&&A&&A.length){let F=A.length>1?await O.window.showWorkspaceFolderPick({placeHolder:te.l10n.t("Pick a folder to reopen in a container.")}):A[0];F&&(I=F.uri)}let N=GH(I);if(N){await eb(e,N.repositoryPath,N.volumeName,N.folder,T);return}if(I){let F;if(T.cliHost.type==="wsl"&&I.scheme==="file"){let M=xe(I,process.platform),j=xm(M)||YH()||await mC(T.output)||(()=>{throw new Error("No default WSL distro found.")})();F=await Ld(j,M,T.output)}else F=xe(I,T.cliHost.platform);let L=At(T.cliHost.path,F);await ZE(e,L,T,s.onDidInput,i,E,{forceReuseWindow:!0})}else return D$(e,!0,i,E,s.log,s.onDidInput)};e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=O.workspace.workspaceFolders,C=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(C&&C.scheme==="vscode-remote"){let T=zr(C.authority);if(T&&In(T)){let I=O.Uri.file(T.hostPath),A={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,A)}else O.window.showInformationMessage(te.l10n.t("'Reopen Locally' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=O.workspace.workspaceFolders,C=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(C&&C.scheme==="vscode-remote"){let T=zr(C.authority);if(T&&In(T)&&Ar(T.hostPath)){let I=O.Uri.parse((await wm(T.hostPath,s.log)).toString()),A={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,A)}else O.window.showInformationMessage(te.l10n.t("'Reopen in WSL' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=O.workspace.workspaceFolders,C=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(C&&C.scheme==="vscode-remote"){let T=zr(C.authority),I=T==null?void 0:T.settings;if(T&&In(T)&&(Uu(T.parentAuthority)||Mu(I))){let A=Mu(I)?My(I.host,T.hostPath):el(T.parentAuthority,T.hostPath),N={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",O.Uri.parse(A.toString()),N)}else O.window.showInformationMessage(te.l10n.t("'Reopen in SSH' not possible in current context."))}})),e.subscriptions.push(O.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=O.workspace.workspaceFolders,C=O.workspace.workspaceFile||E&&E.length&&E[0].uri;if(C&&C.scheme==="vscode-remote"){let T=zr(C.authority);if(T&&In(T)&&Cc(T.parentAuthority)){let I=O.Uri.parse(el(T.parentAuthority,T.hostPath).toString()),A={forceReuseWindow:!0};await O.commands.executeCommand("vscode.openFolder",I,A)}else O.window.showInformationMessage(te.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let f,m=async E=>{var N;if(!await sd(e))return;let C,T=typeof E=="string"?E:(N=E==null?void 0:E.containerDesc)==null?void 0:N.Id;if(T){let F=await nt(e,s.log);if(!await si(e,F,s.onDidInput,i))return;C=await xi(F,T)}else{let F=!1;f||(f=aa(e.extensionPath,async M=>(F=!0,lu(M)),s.log));let L=await nt(e,s.log,void 0,void 0,f);if(C=await Vje(L,si(e,L,s.onDidInput,i),()=>F),!C)return}let I=await nt(e,s.log),A=e.extensionMode===O.ExtensionMode.Development;JE(I,C,e,!A)};e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainer",m)),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",m)),e.subscriptions.push(O.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>_le(e,await nt(e,s.log),E)));let h=async E=>{var I;let C=await nt(e,s.log);if(!await si(e,C,s.onDidInput,i))return;let T=(I=E==null?void 0:E.pullRequestModel)==null?void 0:I.html_url;Sv(e,i,s.log,T,No)};e.subscriptions.push(O.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),e.subscriptions.push(O.commands.registerCommand("remote-containers.switchContainer",async()=>{let E=await nt(e,s.log),C=At(E.cliHost.path,E.cliHost.cwd);if((await Ule(E.cliHost,C)).length<2){await O.window.showInformationMessage(te.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},te.l10n.t("Open Folder in Container..."))&&O.commands.executeCommand("remote-containers.openFolder");return}await ZE(e,C,E,s.onDidInput,i,!1)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=Tf();if(E){let C=await nt(e,s.log);await eb(e,E.repositoryPath,E.volumeName,E.folder,C,!0);return}return await Promise.all(oi.onRemoveOnShutdownChangedEmitter.fire(!0)),O.commands.executeCommand("workbench.action.reloadWindow")})),e.subscriptions.push(O.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=Tf();if(E){let C=await nt(e,s.log);await eb(e,E.repositoryPath,E.volumeName,E.folder,C,"rebuildNoCache");return}return await Promise.all(oi.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),O.commands.executeCommand("workbench.action.reloadWindow")}));let v=O.env.remoteName&&O.env.remoteName!=="test"?"linux":process.platform,g=((P=(O.workspace.workspaceFolders||[])[0])==null?void 0:P.uri)||ye.file(process.cwd()),y=rv(v,g),x={fileHost:y,findDevContainerFiles:bR,telemetry:i,output:s.log,existingFilesLearnMoreLink:Cf,predefinedDefinitionsLearnMoreLink:Sf,openConfigurationCommandId:_f,showLogCommandId:nn},w=Due(e,x);e.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!O.workspace.workspaceFolders){await O.window.showInformationMessage(te.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},te.l10n.t("Open Folder"))&&await O.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await O$(e,y,w,i,s.log,s.onDidInput)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.createDevContainer",async()=>{let E=await nt(e,s.log);await si(e,E,s.onDidInput,i)&&await Ple(e,E,i)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openDevContainerFile",async(E,C)=>{let T,I=await nt(e,s.log),A;if(typeof E=="string"?T=[ye.file(E)]:(A=await bR(),T=(await Promise.all(A.map(N=>N.scheme==="file"||N.scheme==="vscode-remote"?N:I.cliHost.toCommonURI(xe(N,I.cliHost.platform))))).filter(N=>!!N)),T.length){let N=await Ef(I.cliHost,T);if(!N||N==="cancelled")return;let F=Tf();if(F){let L=nue(F.folder);for(let M of L){try{await O.workspace.openTextDocument(O.Uri.parse(M.toString()))}catch{continue}await O.commands.executeCommand("vscode.open",O.Uri.parse(M.toString()),C);return}return}if(N){if(N.scheme==="file"&&await br(N.fsPath))return await O.commands.executeCommand("vscode.open",O.Uri.parse(N.toString()),C);if(N.scheme==="file"&&oi.results.size)return await ko(ms,N,[],xc),await O.commands.executeCommand("vscode.open",O.Uri.parse(N.toString()),C);if(N.scheme==="vscode-remote")return await O.commands.executeCommand("vscode.open",O.Uri.parse(N.toString()),C);if(E===void 0)return await O$(e,y,w,i,s.log,s.onDidInput)}}else if(E===void 0&&!(A!=null&&A.length))return await O$(e,y,w,i,s.log,s.onDidInput)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:C}=[...oi.results.values()][0];if(!E||!C)return O.window.showInformationMessage(te.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let T=await xi(C,E),I=DR(e.globalStoragePath,T.Name),A=O.Uri.file(I);return await br(I)?O.commands.executeCommand("vscode.open",A):(await ko(ms,A,[],xc),O.commands.executeCommand("vscode.open",A))})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await Hue(e.globalStoragePath)).map(T=>({label:T.name,...T})).sort((T,I)=>T.label.localeCompare(I.label)),...(await Bue(e.globalStoragePath)).map(T=>({label:T.image,...T})).sort((T,I)=>T.label.localeCompare(I.label))],C=await O.window.showQuickPick(E.length?E:[{label:te.l10n.t("No configuration found.")}],{placeHolder:te.l10n.t("Choose a configuration file")});if(C&&"uri"in C)return O.commands.executeCommand("vscode.open",O.Uri.parse(C.uri.toString()))})),e.subscriptions.push(O.commands.registerCommand("remote-containers.settings",async()=>O.commands.executeCommand("workbench.action.openSettings",`@ext:${kle()}`))),e.subscriptions.push(O.commands.registerCommand("remote-containers.getHelp",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers")))),e.subscriptions.push(O.commands.registerCommand("remote-containers.getStarted",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),e.subscriptions.push(O.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:kle(),issueBody:te.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return O.commands.executeCommand("vscode.openIssueReporter",E)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.provideFeedback",async()=>O.env.openExternal(O.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),e.subscriptions.push(O.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new FR(y))),e.subscriptions.push(O.commands.registerCommand("remote-containers.trySample",async()=>{Qje(e,s.log)})),e.subscriptions.push(O.commands.registerCommand("remote-containers.openLogFile",()=>Jje(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.openLastLogFile",()=>Zje(e,"remoteContainers",s.logFilePath))),e.subscriptions.push(O.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>zje(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Pje(e))),e.subscriptions.push(O.commands.registerCommand("remote-containers.installDocker",()=>NR(s.log))),e.subscriptions.push(O.commands.registerCommand("remote-containers.installDockerInWSL",()=>LR(s.log,s.onDidInput,i))),e.subscriptions.push(O.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>mle(await nt(e,s.log)))),Ele(e,oi.results,i,s.log),Sle(e,r).catch(E=>{s.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),e.subscriptions.push(O.commands.registerCommand("remote-containers.installUserCLI",()=>Tle(e,r))),(async()=>{let E=O.env.remoteAuthority,C=E&&zr(E);C&&(Gr(C)||Ec(C))&&C.inspectVolume&&await l,await tue(e)||await Hle(e,y,i,s.log,s.onDidInput)})().catch(console.error),Rje(e);let b=O.env.remoteName,S=!b||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container","codespaces"].indexOf(b)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];e.subscriptions.push(O.commands.registerCommand("remote-containers.addExtensionToConfig",w.addExtensionToConfiguration),O.languages.registerCompletionItemProvider([...S,{pattern:pn.join(kR(e.globalStoragePath),"*.json")},{pattern:pn.join(AR(e.globalStoragePath),"*.json")}],w.createCompletionItemProvider()),O.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{await w.configureContainerFeatures()}),O.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",w.addPortLabelToConfiguration)),Tf()&&O.commands.executeCommand("setContext","isRecoveryContainer",!0)}var Dle="showRecoveryContainerNotification",Mle="showReopenInContainerNotificationReset",Ije=5e3;function Pje(e){return e.globalState.update(Mle,Date.now())}async function Rje(e){setTimeout(async()=>{let t=e.globalState.get(Mle);if(U$(e.globalState.get(Dle),t))return;if(Tf()){let r=te.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),i=te.l10n.t("Reopen in Container"),o=te.l10n.t("Don't Show Again"),s=await O.window.showInformationMessage(r,i,o);s===i?O.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await e.globalState.update(Dle,Date.now())}},Ije)}async function Aje(){await Promise.all([...oi.results.values()].map(e=>Promise.all(e.params.shutdowns.map(t=>{try{t()}catch(n){console.error(n)}}))))}function kle(){let{name:e,publisher:t}=Ale();return`${t}.${e}`}async function D$(e,t,n,r,i,o){var p;let s=await nt(e,i);if(!await si(e,s,o,n))return;let a,u=O.workspace.workspaceFolders;if(u&&u[0]){let f=u[0].uri;if(f.scheme==="vscode-remote"){let m=zr(f.authority);if(m&&In(m)){let h=At(s.cliHost.path,m.hostPath);a=O.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(f.authority)&&(a=f)}else f.scheme==="file"&&(a=f)}a||((p=O.env.remoteName)!=null&&p.match(/^(wsl|ssh-remote|tunnel)$/)?a=O.Uri.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:await s.cliHost.homedir()}):a=O.Uri.file(Lle.homedir()));let c=t?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:te.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[te.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:te.l10n.t("Open")},l=await O.window.showOpenDialog(c),d=l&&l[0];if(d){let f=t?d:d.with({path:pn.posix.dirname(d.path)}),m=await nt(e,s.output,f,zH()==="always"),h=xe(d,m.cliHost.platform),v=At(m.cliHost.path,h);await ZE(e,v,m,o,n,r)}}async function ZE(e,t,n,r,i,o,s){var P;let{cliHost:a}=n;if(Ar(t.rootFolderPath)){if(n=await nt(e,n.output,t.rootFolderPath),a=n.cliHost,!await si(e,n,r,i))return;t=At(a.path,t.isWorkspaceFile?a.path.join(a.cwd,pn.basename(t.workspaceOrFolderPath)):a.cwd)}let u=await G_(a,t);if(u){let E=te.l10n.t("Continue");if(await O.window.showInformationMessage(te.l10n.t("The workspace could fail to open in a container: {0}",u),{modal:!0},E)!==E)return}let c=await Dje(a,t);if(c==="cancelled")return;let l=c||await Zy(a,t,od(),!0,n.output),d=l&&(l.scheme==="file"?await st(l.fsPath):await a.readFile(xe(l,a.platform))).toString(),p=!!(d&&((P=Ge(d))!=null&&P.initializeCommand)),{dockerCLI:f,dockerComposePath:m}=n,h={cliHost:a,dockerPath:f,dockerComposePath:m,appRoot:O.env.appRoot,extensionPath:e.extensionPath,package:await Kn(e.extensionPath),output:n.output},v=l&&await(p?HE(h,t.rootFolderPath,l):JH(h,t.rootFolderPath,l));if(v==="canceled")return;if(!v||!YC(v.configuration)){let E=await IR({fileHost:a,telemetry:i,output:n.output,existingFilesLearnMoreLink:Cf,predefinedDefinitionsLearnMoreLink:Sf,openConfigurationCommandId:_f,showLogCommandId:nn},t);if(!E||(v=await JH(h,t.rootFolderPath,ye.file(E).with({scheme:ut.scheme})),!v||v==="canceled"))return}if(!await cue(e,n,v.configuration)||!await Oje(n,"mergedConfiguration"in v?v.mergedConfiguration:v.configuration))return;let g=v.configuration,y=v.workspace.workspaceFolder;if(Or(g)){let E=Vu(a,g);if(!g.initializeCommand&&!await Xn(a).readDocument(E))return tb(te.l10n.t('"{0}" does not exist.',E.fsPath),a,g.configFilePath);if(g.workspaceFolder&&!pn.posix.isAbsolute(g.workspaceFolder))return tb(te.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),a,g.configFilePath)}else if(!("image"in g))if("dockerComposeFile"in g){if(!await cle(n)||!await Wje(t,n,g))return}else{let E=g.configFilePath;return tb(te.l10n.t('Configuration "{0}" not valid.',a.path.relative(t.rootFolderPath,xe(E,a.platform))),a,E)}t.isWorkspaceFile&&(y=pn.posix.join(y,a.path.basename(t.workspaceOrFolderPath)));let x=Qn(n.env),w=a.type==="wsl"?(await a.toCommonURI(t.workspaceOrFolderPath)).fsPath:t.workspaceOrFolderPath,b=(a.type==="local"||a.type==="wsl")&&Mu(x),S=(l==null?void 0:l.scheme)===ut.scheme&&a.type==="wsl"&&!Ar(w)&&await a.toCommonURI(xe(l,a.platform))||l,R=O.Uri.parse(ax(O.env.remoteAuthority,w,y,x,b,S));await If({uri:R,type:t.isWorkspaceFile?"workspace":"folder",label:te.l10n.t("{0} [Dev Container]",`${h5(a.platform,t.workspaceOrFolderPath,await a.homedir())}${jm(O.env.remoteAuthority,x)}`)}),await QH(e,o?R.authority:!1),await UE(e,o==="rebuildNoCache"?R.authority:!1),await O.commands.executeCommand("vscode.openFolder",R,s)}async function Ule(e,t){let n=await kje(e,t.rootFolderPath),r=new O.RelativePattern(n,NE);return await Promise.all((await O.workspace.findFiles(r)).map(async o=>o.scheme===vi.scheme?ye.from({scheme:ut.scheme,path:o.path}):e.type==="wsl"&&o.scheme==="file"?ye.from({scheme:ut.scheme,path:await cS(o,e)}):o))}async function Dje(e,t){let n=await Ule(e,t),r;if(O.env.remoteAuthority){let i=zr(O.env.remoteAuthority);i&&In(i)&&(r=i.configFile)}return Ef(e,n,r)}function kje(e,t){switch(e.type){case"local":return ye.file(t);case"wsl":return O.env.remoteName==="wsl"?ye.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:t}):e.toCommonURI(t);case"remote":return O.env.remoteName==="ssh-remote"||O.env.remoteName==="tunnel"?ye.from({scheme:"vscode-remote",authority:O.env.remoteAuthority,path:t}):void 0;default:return}}async function Oje(e,{hostRequirements:t}){var r,i;let n=t&&Nje(t);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let o=await Ae(e,"info","--format","{{json .}}"),s=JSON.parse(o.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,u=s.MemTotal&&n.memory&&n.memory>s.MemTotal,c=((i=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:i.path)==="nvidia-container-runtime";if(a||u){let l=[];s.NCPU&&l.push(te.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&l.push(te.l10n.t("RAM {0}",k$(s.MemTotal))),c&&l.push(te.l10n.t("GPU"));let d=[];n.cpus&&d.push(te.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&d.push(te.l10n.t("RAM {0}",k$(n.memory))),n.storage&&d.push(te.l10n.t("disk {0}",k$(n.storage))),n.gpu&&n.gpu!=="optional"&&d.push(te.l10n.t("GPU"));let p=te.l10n.t(`Docker daemon: {0}
devcontainer.json: {0}`,l.join(", "),d.join(", "));if(!await O.window.showInformationMessage(te.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:p},te.l10n.t("Continue")))return!1}}return!0}function Nje(e){return{cpus:e.cpus||0,memory:Ole(e.memory||"0"),storage:Ole(e.storage||"0"),gpu:e.gpu}}function Ole(e){let t=/^(\d+)([tgmk]b)?$/.exec(e);if(t){let[,n,r]=t,i=parseInt(n,10),o=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return i*o}return 0}function k$(e){let t=Math.min(Math.floor(Math.log2(Math.max(Math.abs(e),1))/10),4),n=e/Math.pow(2,10*t),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),i=Math.round(n*r)/r,o=[" bytes","kb","mb","gb","tb"][t];return`${i.toLocaleString()}${o}`}async function Sv(e,t,n,r,i,o){if(!await jE(e))return;let s=await nt(e,n),a=null;if(await si(e,s,r,t)){if(typeof i=="string")a=i;else{let u;if(i!==void 0?u=i:u=await O.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:c=>te.l10n.t("Clone a repository from {0} in a Container Volume",c.name),urlLabel:te.l10n.t("Clone git repository from URL"),branch:!0}),u){a=(typeof u=="string"?u:u.url).trim(),a.split("/").length===2&&a.indexOf(":")===-1&&(a=`https://github.com/${a}`);let c=fa(a);if(await Pk(s.cliHost,c.repositoryUrl,await gR(s.output),s.output)===!1){O.commands.executeCommand(nn),await O.window.showInformationMessage(te.l10n.t("Cannot access the repository '{0}'.",c.repositoryUrl),{modal:!0});return}typeof u!="string"&&u.branch&&(a=`${a}/tree/${u.branch}`)}}a&&await qle(e,s,a,o)}}async function qle(e,t,n,r){if(r||(r=await Uje(t)),r){let i=j$(n);r!==No&&(i=await jje(n)),i&&await eb(e,n,r,i,t)}}async function Lje(e,t,n,r,i,o){if(!await jE(e))return;let s=await nt(e,n),a=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await si(e,s,r,t))return;let u={placeHolder:te.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:te.l10n.t("Enter a GitHub pull request url"),validateInput:d=>a.test(d)?void 0:te.l10n.t("Invalid pull request url")},c;if(i?c=i:c=await O.window.showInputBox(u),!c)return;let l=fa(c);if(l.repository==="unknown"||!l.pullRequestId){await O.window.showInformationMessage(te.l10n.t("Invalid pull request URL '{0}'.",c),{modal:!0});return}await qle(e,s,c,o)}async function jle(e,t,n,r,i,o,s){let a=await nt(e,o);await si(e,a,s,i)&&(t||(t=await Mje(a)),t&&(n&&r?await Bje(t,n,r,a):await $je(t,a)))}async function Fje(e,t,n,r,i){let o=await nt(e,r);await si(e,o,i,n)&&t&&t.volumeName&&await jle(e,t.volumeName,void 0,void 0,n,r,i)}var nb=class{get detail(){return""}},L$=class extends nb{get label(){return te.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return te.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},F$=class extends nb{constructor(n){super();this.volume=n}get label(){return te.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let n=new Date(this.volume.CreatedAt);return te.l10n.t("created at {0}",n.toDateString())}get volumeName(){return this.volume.Name}},M$=class extends nb{constructor(n){super();this.volume=n}get label(){return te.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let n=new Date(this.volume.CreatedAt);return te.l10n.t("created at {0}",n.toDateString())}get volumeName(){return this.volume.Name}};async function Mje(e){let t=await wi(e),r=(await Hd(e,t)).map(a=>new M$(a)),i=te.l10n.t("Select the volume to inspect with Visual Studio Code"),o=O.window.createQuickPick();o.items=r,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function Uje(e){let t=await wi(e,["vsch.local.repository.unique=false"]),r=(await Hd(e,t)).map(l=>new F$(l)),i=new L$,o=[i,...r],s=te.l10n.t("Select the volume for the cloned repository"),a=O.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let u=await new Promise(l=>{a.onDidAccept(()=>l(a.activeItems[0])),a.onDidHide(()=>l(void 0))});if(a.hide(),!u)return null;let c=null;return u===i?c=await qje(e):c=u.volumeName,c}async function qje(e){let t="",n="vsc-remote-containers",r=await wi(e);r.find(s=>s===n)||(t=n);let i={prompt:te.l10n.t("Enter the volume name."),value:t,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?te.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):te.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},o=await O.window.showInputBox(i);return o?r.find(s=>s===o)?(await O.window.showErrorMessage(te.l10n.t("Volume already exists"),{modal:!0}),null):o:null}async function jje(e){let t={prompt:te.l10n.t("Enter the target folder name."),value:j$(e),ignoreFocusOut:!0},n=await O.window.showInputBox(t);return n||null}function j$(e){return Zi(e).repositoryName}async function Hje(){return(await O.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function eb(e,t,n,r,i,o=!1){let s=Qn(i.env),a=dS(t),u;try{u=await a.parseUrl(void 0)}catch(l){if(l instanceof ix){O.window.showErrorMessage(l.description);return}let d=await Hje();try{u=await a.parseUrl(d)}catch{O.window.showErrorMessage(te.l10n.t("Cannot access '{0}'.",t),{modal:!0});return}}let c=O.Uri.parse(ys(i.cliHost.authority,t,n,r,!1,s,u));n===No&&(n=te.l10n.t("a unique volume")),await If({uri:c,type:"folder",label:te.l10n.t("{0} in {1} [Dev Container]",r,n)}),await QH(e,o?c.authority:!1),await UE(e,o==="rebuildNoCache"?c.authority:!1),await O.commands.executeCommand("vscode.openFolder",c)}async function $je(e,t){let n=Qn(t.env),r=O.Uri.parse(ys(t.cliHost.authority,void 0,e,void 0,!0,n,void 0));await If({uri:r,type:"folder",label:te.l10n.t("Volume {0} [Dev Container]",e)}),await O.commands.executeCommand("vscode.openFolder",r)}async function Bje(e,t,n,r){let i=Qn(r.env),o=O.Uri.parse(ys(r.cliHost.authority,t,e,n,!0,i,void 0));await If({uri:o,type:"folder",label:te.l10n.t("{0} in {1} [Inspect Dev Container]",n,e)}),await O.commands.executeCommand("vscode.openFolder",o)}async function JE(e,t,n,r,i){var u;if(!await sd(n))return;let o,s=e.cliHost;if(s.type==="wsl"){let c=await s.toCommonURI(s.cwd);c&&c.scheme==="file"&&(o=c.fsPath)}let a=d5(e.cliHost.authority,t.Name,Qn(e.env),o);if(i=i||((u=await que(n.globalStoragePath,t))==null?void 0:u.workspaceFolder),i){let c=O.Uri.parse(`vscode-remote://${a}${i}`),l={};r?l.forceNewWindow=!0:l.forceReuseWindow=!0,await O.commands.executeCommand("vscode.openFolder",c,l)}else{let c={remoteAuthority:a};r||(c.reuseWindow=!0),await O.commands.executeCommand("vscode.newWindow",c)}}async function Vje(e,t,n){let r=(async()=>{if(!await t)throw new Error("cancel");let i=await wc(e),o=await ca(e,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw O.window.showErrorMessage(te.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:te.l10n.t("Select the container to attach VS Code")},o=await O.window.showQuickPick(r,i);if(!o&&n()){if(!await t)throw new Error("cancel");o=await O.window.showQuickPick(r,i)}return o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function Wje(e,t,n){if(!n.workspaceFolder)return tb(te.l10n.t("Workspace folder not specified in devcontainer.json."),t.cliHost,n.configFilePath),!1;if(!pn.posix.isAbsolute(n.workspaceFolder))return tb(te.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),t.cliHost,n.configFilePath),!1;let r=await Wu(t.cliHost,n,t.cliHost.env,t.cliHost.cwd),i=await XO(t,e,r),o=await MK(t,i,n.service);return!(o&&await xi(t,o)&&!await Gje(t.cliHost,r))}async function Gje(e,t){let n=[];for(let r=0;r<t.length;r++)await e.isFile(t[r])||n.push(t[r]);return n.length>0?(O.window.showErrorMessage(te.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function tb(e,t,n){if(await O.window.showErrorMessage(e,{modal:!0},te.l10n.t("Open devcontainer.json"))){let i=xe(n,t.platform),o=await t.toCommonURI(i);o&&O.window.showTextDocument(O.Uri.parse(o.toString()))}}async function O$(e,t,n,r,i,o){await n.createConfiguration()&&await Hle(e,t,r,i,o)}async function Hle(e,t,n,r,i){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(O.env.remoteName)===-1)return;let o=O.workspace.workspaceFile,s=O.workspace.workspaceFolders,a=o||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let u=xe(a,t.platform),c=At(t.path,u),l=await iS(t,c,od());if(!l){let d=await bR();d.length&&(l={uri:d[0],location:"workspace"})}l&&await Yje(e,l,c,t,n,r,i)}}var zR="showReopenInContainerNotification",$le="showReopenInContainerNotificationReset";function zje(e){return e.globalState.update($le,Date.now())}async function Yje(e,t,n,r,i,o,s){let a=e.globalState.get($le);if(U$(e.globalState.get(zR),a)||U$(e.workspaceState.get(zR),a))return;let u=HK(r,n,t.uri),c,l="";if(r.platform!=="linux"&&O.env.remoteName!=="wsl"&&!(r.platform==="win32"&&Ar(n.rootFolderPath))&&O.env.remoteName!=="ssh-remote"){let x=await nt(e,o);if(c=await K3(x.cliHost,n,x.output),c&&u){let w=await Sy(x.cliHost,n.rootFolderPath,x.output);w&&await J3(x.cliHost,n,x.cliHost.path.relative(w,xe(t.uri,x.cliHost.platform)),x.output)||(c=void 0)}if(c){let{cliHost:w,dockerCLI:b,dockerComposePath:S}=x,R={cliHost:w,dockerPath:b,dockerComposePath:S,appRoot:O.env.appRoot,extensionPath:e.extensionPath,package:await Kn(e.extensionPath),output:o},P=await HE(R,n.rootFolderPath,t.uri);(!P||!Or(P.configuration)&&!("image"in P.configuration))&&(c=void 0)}c&&(l=te.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}let d;u?n.isWorkspaceFile?d=te.l10n.t("Workspace contains a Dev Container configuration file."):d=te.l10n.t("Folder contains a Dev Container configuration file."):d=te.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let p=te.l10n.t("Reopen in Container"),f=te.l10n.t("Clone in Volume"),m=te.l10n.t("Don't Show Again..."),h=n.isWorkspaceFile?te.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",d,l):te.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",d,l),v=c?[p,f,m]:[p,m];Kje(i,t.location);let g=await O.window.showInformationMessage(h,...v);if(Xje(i,g===p?"reopen":g===f?"openRepository":g===m?"dontShowAgain":"cancel",t.location),g===p){if(!await O.workspace.requestWorkspaceTrust({message:qE}))return;let w=await nt(e,o);if(!await si(e,w,s,i))return;if(w.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:b}=await cO(n.workspaceOrFolderPath,Ma(),o);n=At(w.cliHost.path,b)}try{await ZE(e,n,w,s,i,!1,{forceReuseWindow:!0})}catch(b){await nl(b,"ui",i)}}else if(g===f){let x=await nt(e,o),w=await Q3(x.cliHost,n,x.output),b=te.l10n.t("OK"),S=te.l10n.t("Cancel");(!w||b===await O.window.showInformationMessage(te.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),b,S))&&await O.window.withProgress({location:O.ProgressLocation.Notification,title:te.l10n.t("Clone in Volume")},async(R,P)=>{R.report({message:te.l10n.t("Follow the prompts at the top of the window.")}),await O.commands.executeCommand(mR,c)})}else if(g===m){let x=n.isWorkspaceFile?te.l10n.t("Any Workspace"):te.l10n.t("Any Folder"),w=n.isWorkspaceFile?te.l10n.t("Current Workspace"):te.l10n.t("Current Folder"),b=n.isWorkspaceFile?te.l10n.t("Don't show again for the current workspace or for any workspace?"):te.l10n.t("Don't show again for the current folder or for any folder?"),S=await O.window.showInformationMessage(b,x,w);S===x?await e.globalState.update(zR,Date.now()):S===w&&await e.workspaceState.update(zR,Date.now())}}function Kje(e,t){e.sendTelemetryEvent("reopenNotificationOpen",{location:t})}function Xje(e,t,n){e.sendTelemetryEvent("reopenNotificationResult",{result:t,location:n})}function U$(e,t){return e===!1?e=1:e===void 0&&(e=-1),t===void 0&&(t=0),t<e}async function Qje(e,t){let n=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],r={placeHolder:te.l10n.t("Select a sample repository to clone in a container volume")},i=await O.window.showQuickPick(n,r);if(!i)return;let o=await nt(e,t);i.detail&&await eb(e,i.detail,No,j$(i.detail),o)}async function Jje(e){let t=await Promise.all((await Ble(e)).map(async r=>{let i=await(0,q$.promisify)(KR.stat)(r.path),o=r.time;return{label:r.prefix,description:`${Tv(o.getFullYear())}-${Tv(o.getMonth()+1)}-${Tv(o.getDate())} ${Tv(o.getHours())}:${Tv(o.getMinutes())}:${Tv(o.getSeconds())} - ${i.size} bytes`,path:r.path}}));t.length||t.push({label:te.l10n.t("No log files found.")});let n=await O.window.showQuickPick(t,{placeHolder:te.l10n.t("Choose a log file")});n&&n.path&&await O.window.showTextDocument(O.Uri.file(n.path))}function Tv(e,t=2){return e.toString().padStart(t,"0")}async function Zje(e,t,n){let r=(await Ble(e)).find(i=>i.name.startsWith(t)&&i.path!==n);r?await O.window.showTextDocument(O.Uri.file(r.path)):await O.window.showInformationMessage(te.l10n.t("No previous log file found."),{modal:!0})}async function Ble(e){let t=[],n=pn.basename(e.logPath),r=pn.dirname(pn.dirname(pn.dirname(e.logPath))),i=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;i.test(pn.basename(r))&&(r=pn.dirname(r));for(let o of(await YR(r)).sort().reverse()){let s=i.exec(o);if(s){let a=pn.join(r,o);for(let u of await YR(a)){let c=pn.join(a,u),l=u.startsWith("window");for(let d of l?await YR(c):[u]){let p=pn.join(l?c:a,d),f=pn.join(p,n);for(let m of(await YR(f)).sort()){let h=pn.join(f,m),v=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(m),g=v?new Date(`${v[1]}-${v[2]}-${v[3]}T${v[4]}:${v[5]}:${v[6]}.${v[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);t.push({name:m,path:h,time:g,prefix:v?m.substr(0,v.index-1):m.substr(0,m.length-4)})}}}}}return t.sort((o,s)=>o.time>s.time?-1:o.time<s.time?1:o.path.localeCompare(s.path)),t}async function YR(e){try{return await(0,q$.promisify)(KR.readdir)(e)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@microsoft/dynamicproto-js/lib/dist/esm/dynamicproto-js.js:
  (*!
   * Microsoft Dynamic Proto Utility, 1.1.7
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
